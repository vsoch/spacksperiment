{
    "url": "https://api.github.com/repos/spack/spack/issues/23192",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23192/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23192/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23192/events",
    "html_url": "https://github.com/spack/spack/issues/23192",
    "id": 864476912,
    "node_id": "MDU6SXNzdWU4NjQ0NzY5MTI=",
    "number": 23192,
    "title": "Installation issue: LvArray@0.1.0",
    "user": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1638959676,
            "node_id": "MDU6TGFiZWwxNjM4OTU5Njc2",
            "url": "https://api.github.com/repos/spack/spack/labels/radiuss",
            "name": "radiuss",
            "color": "284fa3",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2021-04-22T02:21:12Z",
    "updated_at": "2021-04-23T22:04:17Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I am currently building an environment on LC's quartz system.  I am concretizing separately with `raja` and `umpire` being constrained as `~openmp`.\r\n\r\nThe specification provided below is the one produced by the `clingo` concretizer so the outputs reported here are from building `LvArray` **outside** of the environment.  The error seems to indicate I should be telling the build where to find the library but there appears to be no way to pass that information through Spack and there is no variant in the package to disable openmp.\r\n\r\n@corbett5 \r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install lvarray@0.1.0%gcc@8.3.1+addr2line~benchmarks~caliper~chai~cuda~docs~examples~ipo+shared+tests~umpire build_type=RelWithDebInfo cuda_arch=none arch=linux-rhel7-broadwell\r\n...\r\n==> lvarray: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n5 errors found in build log:\r\n     102    cd /tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-build-peo2xqu/src &\r\n            & /usr/tce/packages/gcc/gcc-8.3.1/bin/g++ -Dlvarray_EXPORTS -I/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0\r\n            -peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-build-peo2xqu/include -isystem /usr/WS1/dahlgren/spack/opt/spack/linux-rh\r\n            el7-broadwell/gcc-8.3.1/raja-0.13.0-mkff7f3iud6pduvxpnmrdqo3gt3zpneh/include -isystem /usr/WS1/dahlgren/spack/opt\r\n            /spack/linux-rhel7-broadwell/gcc-8.3.1/camp-0.1.0-phejyvygypskp2dlrudbzhri533mlzig/include -Wall -Wextra   -Werro\r\n            r  -Wall -Wextra -Wpedantic -pedantic-errors -Wshadow -Wfloat-equal -Wcast-align -Wcast-qual  -O3 -g -DNDEBUG -fP\r\n            IC -std=c++14 -MD -MT src/CMakeFiles/lvarray.dir/system.cpp.o -MF CMakeFiles/lvarray.dir/system.cpp.o.d -o CMakeF\r\n            iles/lvarray.dir/system.cpp.o -c /var/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3k\r\n            boyclkaj/spack-src/src/system.cpp\r\n     103    [  2%] Building CXX object blt/thirdparty_builtin/googletest-master-2020-01-07/googletest/CMakeFiles/gtest.dir/sr\r\n            c/gtest-all.cc.o\r\n     104    cd /tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-build-peo2xqu/blt/t\r\n            hirdparty_builtin/googletest-master-2020-01-07/googletest && /usr/tce/packages/gcc/gcc-8.3.1/bin/g++ -DGTEST_CREA\r\n            TE_SHARED_LIBRARY=1 -DGTEST_HAS_DEATH_TEST=0 -Dgtest_EXPORTS -I/var/tmp/dahlgren/spack-stage/spack-stage-lvarray-\r\n            0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-src/cmake/blt/thirdparty_builtin/googletest-master-2020-01-07/google\r\n            test/include -I/var/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-src\r\n            /cmake/blt/thirdparty_builtin/googletest-master-2020-01-07/googletest -Wall -Wextra   -Werror  -O3 -g -DNDEBUG -f\r\n            PIC -Wall -Wshadow -Wno-error=dangling-else -DGTEST_HAS_PTHREAD=1 -fexceptions -Wextra -Wno-unused-parameter -Wno\r\n            -missing-field-initializers -std=c++14 -MD -MT blt/thirdparty_builtin/googletest-master-2020-01-07/googletest/CMa\r\n            keFiles/gtest.dir/src/gtest-all.cc.o -MF CMakeFiles/gtest.dir/src/gtest-all.cc.o.d -o CMakeFiles/gtest.dir/src/gt\r\n            est-all.cc.o -c /var/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-sr\r\n            c/cmake/blt/thirdparty_builtin/googletest-master-2020-01-07/googletest/src/gtest-all.cc\r\n     105    [  3%] Linking CXX shared library ../lib/liblvarray.so\r\n     106    cd /tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-build-peo2xqu/src &\r\n            & /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-broadwell/gcc-8.3.1/cmake-3.20.1-qnu5li7yigtawhiqjegkknp23e5cvbtz\r\n            /bin/cmake -E cmake_link_script CMakeFiles/lvarray.dir/link.txt --verbose=1\r\n     107    /usr/tce/packages/gcc/gcc-8.3.1/bin/g++ -fPIC      -Wall -Wextra   -Werror  -Wall -Wextra -Wpedantic -pedantic-er\r\n            rors -Wshadow -Wfloat-equal -Wcast-align -Wcast-qual  -O3 -g -DNDEBUG -shared -Wl,-soname,liblvarray.so -o ../lib\r\n            /liblvarray.so CMakeFiles/lvarray.dir/system.cpp.o CMakeFiles/lvarray.dir/totalview/tv_data_display.c.o  -Wl,-rpa\r\n            th,/usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-broadwell/gcc-8.3.1/raja-0.13.0-mkff7f3iud6pduvxpnmrdqo3gt3zpneh\r\n            /lib:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::: -ldl /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-broadwell/gcc-8.3.1/raja-0.13.0-mkff7f3iud6pduvxpnmrd\r\n            qo3gt3zpneh/lib/libRAJA.so -lopenmp -ldl\r\n  >> 108    /usr/tce/packages/gcc/gcc-8.3.1/rh/usr/bin/../libexec/gcc/x86_64-redhat-linux/8/ld: cannot find -lopenmp\r\n  >> 109    collect2: error: ld returned 1 exit status\r\n  >> 110    make[2]: *** [lib/liblvarray.so] Error 1\r\n     111    make[2]: Leaving directory `/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/\r\n            spack-build-peo2xqu'\r\n  >> 112    make[1]: *** [src/CMakeFiles/lvarray.dir/all] Error 2\r\n     113    make[1]: *** Waiting for unfinished jobs....\r\n     114    [  3%] Linking CXX shared library ../../../../lib/libgtest.so\r\n     115    cd /tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/spack-build-peo2xqu/blt/t\r\n            hirdparty_builtin/googletest-master-2020-01-07/googletest && /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-broadw\r\n            ell/gcc-8.3.1/cmake-3.20.1-qnu5li7yigtawhiqjegkknp23e5cvbtz/bin/cmake -E cmake_link_script CMakeFiles/gtest.dir/l\r\n            ink.txt --verbose=1\r\n     116    /usr/tce/packages/gcc/gcc-8.3.1/bin/g++ -fPIC      -Wall -Wextra   -Werror  -O3 -g -DNDEBUG -shared -Wl,-soname,l\r\n            ibgtest.so -o ../../../../lib/libgtest.so CMakeFiles/gtest.dir/src/gtest-all.cc.o  -lpthread\r\n     117    make[2]: Leaving directory `/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/\r\n            spack-build-peo2xqu'\r\n     118    [  3%] Built target gtest\r\n     119    make[1]: Leaving directory `/tmp/dahlgren/spack-stage/spack-stage-lvarray-0.1.0-peo2xquw7wm3sxuzc6lerd3kboyclkaj/\r\n            spack-build-peo2xqu'\r\n  >> 120    make: *** [all] Error 2\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.16.1-2245-4cca69f4ed\r\n* **Python:** 3.7.2\r\n* **Platform:** linux-rhel7-broadwell\r\n* **Concretizer:** clingo\r\n\r\n\r\n### Additional information\r\n\r\nThe relevant `spack-build-out.txt` information is provided in the output above.\r\n\r\n[spack-build-env.txt](https://github.com/spack/spack/files/6355031/lvarray-spack-build-out.txt)\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have identified/uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}