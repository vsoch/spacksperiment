{
    "url": "https://api.github.com/repos/spack/spack/issues/20984",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20984/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20984/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20984/events",
    "html_url": "https://github.com/spack/spack/issues/20984",
    "id": 787270470,
    "node_id": "MDU6SXNzdWU3ODcyNzA0NzA=",
    "number": 20984,
    "title": "PCL",
    "user": {
        "login": "mlawsonca",
        "id": 11947532,
        "node_id": "MDQ6VXNlcjExOTQ3NTMy",
        "avatar_url": "https://avatars.githubusercontent.com/u/11947532?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mlawsonca",
        "html_url": "https://github.com/mlawsonca",
        "followers_url": "https://api.github.com/users/mlawsonca/followers",
        "following_url": "https://api.github.com/users/mlawsonca/following{/other_user}",
        "gists_url": "https://api.github.com/users/mlawsonca/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mlawsonca/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mlawsonca/subscriptions",
        "organizations_url": "https://api.github.com/users/mlawsonca/orgs",
        "repos_url": "https://api.github.com/users/mlawsonca/repos",
        "events_url": "https://api.github.com/users/mlawsonca/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mlawsonca/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446780710,
            "node_id": "MDU6TGFiZWw0NDY3ODA3MTA=",
            "url": "https://api.github.com/repos/spack/spack/labels/locking",
            "name": "locking",
            "color": "e99695",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-01-15T23:08:05Z",
    "updated_at": "2021-02-09T14:04:18Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n```\r\n$ spack -kL install pcl ipo=true build_type=Release  ^/knnhybb ^/c2z7xdw\r\n...\r\n==> Installing pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx\r\n==> No binary for pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx found: installing from source\r\n==> Fetching https://github.com/PointCloudLibrary/pcl/releases/download/pcl-1.11.1/source.tar.gz\r\n######################################################################## 100.0%\r\n==> pcl: Executing phase: 'cmake'\r\n==> pcl: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n2 errors found in build log:\r\n     1459    0x104b2707 execute\r\n     1460    \t/var/tmp/mlawso/spack-stage/spack-stage-gcc-10.2.0-htozopzbdwvoc5wxwgi5fitjqjbhrphr/spack-src/gcc/cfgexpand.c:6410\r\n     1461    Please submit a full bug report,\r\n     1462    with preprocessed source if appropriate.\r\n     1463    Please include the complete backtrace with any bug report.\r\n     1464    See <https://github.com/spack/spack/issues> for instructions.\r\n  >> 1465    make[2]: *** [octree/CMakeFiles/pcl_octree.dir/build.make:85: octree/CMakeFiles/pcl_octree.dir/src/octree_inst.cpp.o] Error 1\r\n     1466    make[2]: Leaving directory '/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-build-rk6vazv'\r\n  >> 1467    make[1]: *** [CMakeFiles/Makefile2:997: octree/CMakeFiles/pcl_octree.dir/all] Error 2\r\n     1468    make[1]: *** Waiting for unfinished jobs....\r\n     1469    [ 18%] Building CXX object sample_consensus/CMakeFiles/pcl_sample_consensus.dir/src/sac_model_registration.cpp.o\r\n     1470    cd /tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-build-rk6vazv/sample_consensus && /home/mlawso/bin/spack/lib/spack/env/gcc/g++ -DPCLAPI_E\r\n             XPORTS -I/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-build-rk6vazv/include -I/var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2\r\n             wwcdj4tnosovbtpauofytilx/spack-src/common/include -I/var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/search/include -I/var/tmp/mlawso\r\n             /spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/sample_consensus/include -isystem /home/mlawso/bin/spack/opt/spack/linux-rhel7-power9le/gcc-10.2.0/\r\n             eigen-3.3.8-7zu4t7nycap5lvex7tkg432o55hsjb7f/include/eigen3 -isystem /var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/recognition/inc\r\n             lude/pcl/recognition/3rdparty -isystem /home/mlawso/bin/spack/opt/spack/linux-rhel7-power9le/gcc-10.2.0/boost-1.74.0-5mex2awuqrgb3qp7qbj2kljabwriyntf/include -Wabi=11 -Wall -Wext\r\n             ra -Wno-unknown-pragmas -fno-strict-aliasing -Wno-format-extra-args -Wno-sign-compare -Wno-invalid-offsetof -Wno-conversion -mtune=native -ffloat-store -fopenmp -O3 -DNDEBUG -fPI\r\n             C -fopenmp -std=c++14 -o CMakeFiles/pcl_sample_consensus.dir/src/sac_model_registration.cpp.o -c /var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofyti\r\n             lx/spack-src/sample_consensus/src/sac_model_registration.cpp\r\n     1471    [ 18%] Building CXX object sample_consensus/CMakeFiles/pcl_sample_consensus.dir/src/sac_model_sphere.cpp.o\r\n     1472    cd /tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-build-rk6vazv/sample_consensus && /home/mlawso/bin/spack/lib/spack/env/gcc/g++ -DPCLAPI_E\r\n             XPORTS -I/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-build-rk6vazv/include -I/var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2\r\n             wwcdj4tnosovbtpauofytilx/spack-src/common/include -I/var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/search/include -I/var/tmp/mlawso\r\n             /spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/sample_consensus/include -isystem /home/mlawso/bin/spack/opt/spack/linux-rhel7-power9le/gcc-10.2.0/\r\n             eigen-3.3.8-7zu4t7nycap5lvex7tkg432o55hsjb7f/include/eigen3 -isystem /var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spack-src/recognition/inc\r\n             lude/pcl/recognition/3rdparty -isystem /home/mlawso/bin/spack/opt/spack/linux-rhel7-power9le/gcc-10.2.0/boost-1.74.0-5mex2awuqrgb3qp7qbj2kljabwriyntf/include -Wabi=11 -Wall -Wext\r\n             ra -Wno-unknown-pragmas -fno-strict-aliasing -Wno-format-extra-args -Wno-sign-compare -Wno-invalid-offsetof -Wno-conversion -mtune=native -ffloat-store -fopenmp -O3 -DNDEBUG -fPI\r\n             C -fopenmp -std=c++14 -o CMakeFiles/pcl_sample_consensus.dir/src/sac_model_sphere.cpp.o -c /var/tmp/mlawso/spack-stage/spack-stage-pcl-1.11.1-rk6vazv2wwcdj4tnosovbtpauofytilx/spa\r\n             ck-src/sample_consensus/src/sac_model_sphere.cpp\r\n     1473    In file included from /home/mlawso/bin/spack/opt/spack/linux-rhel7-power8le/gcc-4.9.3/gcc-10.2.0-htozopzbdwvoc5wxwgi5fitjqjbhrphr/include/c++/10.2.0/vector:72,\r\n```\r\n### Information on your system\r\n* **Spack:** 0.16.0-578-295ad5e292\r\n* **Python:** 3.7.2\r\n* **Platform:** linux-rhel7-power9le\r\n* **Concretizer:** original\r\n\r\n```yaml\r\npackages:\r\n  tcl:\r\n    version: [8.5]\r\n    buildable: false\r\n    externals:\r\n    - spec: tcl@8.5\r\n      prefix: /usr\r\n  cuda:\r\n    externals:\r\n    - spec: cuda@10.1.243\r\n      modules:\r\n      - cuda/10.1.243\r\n  openmpi:\r\n    version: [4.1.0]\r\n  cmake:\r\n    version: [3.19.1]\r\n  all:\r\n    compiler: [gcc@10.2.0]\r\n```\r\n### Additional information\r\n[spack-build-env.txt](https://github.com/spack/spack/files/5823320/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/5823321/spack-build-out.txt)\r\n\r\n\r\n### General information\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n\r\nAlso note: I used -L because I received the following error without it:\r\n```\r\n$ spack -d install pcl ipo=true build_type=Release\r\n==> [2021-01-14-22:32:36.727977] Imported install from built-in commands\r\n==> [2021-01-14-22:32:36.733344] Reading config file /home/mlawso/bin/spack/etc/spack/defaults/config.yaml\r\n==> [2021-01-14-22:32:36.776809] Imported install from built-in commands\r\n==> [2021-01-14-22:32:36.782027] Reading config file /home/mlawso/bin/spack/etc/spack/defaults/repos.yaml\r\n==> [2021-01-14-22:32:49.900581] eigen applying constraint cmake\r\n==> [2021-01-14-22:32:49.914691] flann applying constraint cmake\r\n==> [2021-01-14-22:32:50.010920] diffutils applying constraint iconv\r\n==> [2021-01-14-22:32:50.011970] bzip2 applying constraint diffutils\r\n==> [2021-01-14-22:32:50.025426] boost applying constraint bzip2\r\n==> [2021-01-14-22:32:50.026740] boost applying constraint zlib\r\n==> [2021-01-14-22:32:50.028450] pcl applying constraint cmake@3.5:\r\n==> [2021-01-14-22:32:50.029686] pcl applying constraint eigen@3.1:\r\n==> [2021-01-14-22:32:50.030914] pcl applying constraint flann@1.7:\r\n==> [2021-01-14-22:32:50.032240] pcl applying constraint boost@1.55:+date_time+filesystem+iostreams+system\r\n==> [2021-01-14-22:32:50.034397] Reading config file /home/mlawso/bin/spack/etc/spack/defaults/packages.yaml\r\n==> [2021-01-14-22:32:50.092629] Reading config file /ascldap/users/mlawso/.spack/packages.yaml\r\nTraceback (most recent call last):\r\n  File \"/ascldap/users/mlawso/bin/spack/bin/spack\", line 68, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/main.py\", line 762, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/main.py\", line 490, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/cmd/install.py\", line 309, in install\r\n    args.spec, concretize=True, tests=tests)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/cmd/__init__.py\", line 164, in parse_specs\r\n    spec.concretize(tests=tests)  # implies normalize\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/spec.py\", line 2530, in concretize\r\n    self._old_concretize(tests)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/spec.py\", line 2329, in _old_concretize\r\n    self._expand_virtual_packages(concretizer),\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/spec.py\", line 2234, in _expand_virtual_packages\r\n    candidates = concretizer.choose_virtual_or_external(spec)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/concretize.py\", line 146, in choose_virtual_or_external\r\n    candidates = self._valid_virtuals_and_externals(spec)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/concretize.py\", line 101, in _valid_virtuals_and_externals\r\n    candidates = spack.repo.path.providers_for(spec)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 90, in converter\r\n    return function(self, spec_like, *args, **kwargs)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 591, in providers_for\r\n    providers = self.provider_index.providers_for(vpkg_spec)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 575, in provider_index\r\n    self._provider_index.merge(repo.provider_index)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 985, in provider_index\r\n    return self.index['providers']\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 407, in __getitem__\r\n    self._build_all_indexes()\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 422, in _build_all_indexes\r\n    self.indexes[name] = self._build_index(name, indexer)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/repo.py\", line 447, in _build_index\r\n    with misc_cache.write_transaction(cache_filename) as (old, new):\r\n  File \"/home/mlawso/bin/spack/lib/spack/llnl/util/lock.py\", line 566, in __enter__\r\n    if self._enter() and self._acquire_fn:\r\n  File \"/home/mlawso/bin/spack/lib/spack/llnl/util/lock.py\", line 602, in _enter\r\n    return self._lock.acquire_write(self._timeout)\r\n  File \"/home/mlawso/bin/spack/lib/spack/llnl/util/lock.py\", line 330, in acquire_write\r\n    wait_time, nattempts = self._lock(fcntl.LOCK_EX, timeout=timeout)\r\n  File \"/home/mlawso/bin/spack/lib/spack/spack/util/lock.py\", line 31, in _lock\r\n    return super(Lock, self)._lock(op, timeout)\r\n  File \"/home/mlawso/bin/spack/lib/spack/llnl/util/lock.py\", line 199, in _lock\r\n    .format(lock_type[op]))\r\nllnl.util.lock.LockTimeoutError: Timed out waiting for a write lock.\r\n```",
    "performed_via_github_app": null
}