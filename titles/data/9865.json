{
    "url": "https://api.github.com/repos/spack/spack/issues/9865",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9865/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9865/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9865/events",
    "html_url": "https://github.com/spack/spack/issues/9865",
    "id": 381646578,
    "node_id": "MDU6SXNzdWUzODE2NDY1Nzg=",
    "number": 9865,
    "title": "samtools 1.2 through 1.6 won't build without zlib/bzip2 dependencies",
    "user": {
        "login": "erimar77",
        "id": 6336162,
        "node_id": "MDQ6VXNlcjYzMzYxNjI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6336162?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erimar77",
        "html_url": "https://github.com/erimar77",
        "followers_url": "https://api.github.com/users/erimar77/followers",
        "following_url": "https://api.github.com/users/erimar77/following{/other_user}",
        "gists_url": "https://api.github.com/users/erimar77/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/erimar77/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/erimar77/subscriptions",
        "organizations_url": "https://api.github.com/users/erimar77/orgs",
        "repos_url": "https://api.github.com/users/erimar77/repos",
        "events_url": "https://api.github.com/users/erimar77/events{/privacy}",
        "received_events_url": "https://api.github.com/users/erimar77/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-11-16T15:30:19Z",
    "updated_at": "2018-11-19T18:36:49Z",
    "closed_at": "2018-11-19T18:36:49Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n## bzip2 error:\r\n```console\r\nspack install samtools@1.2\r\n==> pkgconf is already installed in /opt/htcf/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.3.0/pkgconf-1.5.4-6cgd5wsggutanretgkdakedajoxegncy\r\n==> ncurses is already installed in /opt/htcf/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.3.0/ncurses-6.1-c4iq7eli75yuf5rkigpk7is63eurr6rp\r\n==> Installing samtools\r\n==> Searching for binary cache of samtools\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for samtools found: installing from source\r\n==> Using cached archive: /opt/htcf/spack/var/spack/cache/samtools/samtools-1.2.tar.bz2\r\n==> Staging archive: /opt/htcf/spack/var/spack/stage/samtools-1.2-t7kaxunppzlxxoipbca3r63jshkjxq2r/samtools-1.2.tar.bz2\r\ntar (child): lbzip2: Cannot exec: No such file or directory\r\ntar (child): Error is not recoverable: exiting now\r\n/bin/tar: Child returned status 2\r\n/bin/tar: Error is not recoverable: exiting now\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/bin/tar' '-xf' '/opt/htcf/spack/var/spack/stage/samtools-1.2-t7kaxunppzlxxoipbca3r63jshkjxq2r/samtools-1.2.tar.bz2'\r\n```\r\n\r\n## zlib error:\r\n```console\r\n$ spack install samtools@1.3\r\n==> pkgconf is already installed in /opt/htcf/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.3.0/pkgconf-1.5.4-6cgd5wsggutanretgkdakedajoxegncy\r\n==> ncurses is already installed in /opt/htcf/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.3.0/ncurses-6.1-c4iq7eli75yuf5rkigpk7is63eurr6rp\r\n==> Installing samtools\r\n==> Searching for binary cache of samtools\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for samtools found: installing from source\r\n==> Using cached archive: /opt/htcf/spack/var/spack/cache/samtools/samtools-1.2.tar.bz2\r\n==> Staging archive: /opt/htcf/spack/var/spack/stage/samtools-1.2-t7kaxunppzlxxoipbca3r63jshkjxq2r/samtools-1.2.tar.bz2\r\n==> Created stage in /opt/htcf/spack/var/spack/stage/samtools-1.2-t7kaxunppzlxxoipbca3r63jshkjxq2r\r\n==> No patches needed for samtools\r\n==> Building samtools [Package]\r\n==> Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j24' 'prefix=/opt/htcf/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.3.0/samtools-1.2-t7kaxunppzlxxoipbca3r63jshkjxq2r'\r\n\r\n24 errors found in build log:\r\n     22     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o cut_target.o cut_target.c\r\n     23     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o phase.o phase.c\r\n     24     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o bam2depth.o bam2depth.c\r\n     25     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o padding.o padding.c\r\n     26     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o bedcov.o bedcov.c\r\n     27     gcc -g -Wall -O2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_CURSES_LIB=1 -I. -Ihtslib-1.2.1 -c -o bamshuf.o bamshuf.c\r\n  >> 28     bedcov.c:26:10: fatal error: zlib.h: No such file or directory\r\n     29      #include <zlib.h>\r\n     30               ^~~~~~~~\r\n     31     compilation terminated.\r\n     32     Makefile:116: recipe for target 'bedcov.o' failed\r\n  >> 33     make: *** [bedcov.o] Error 1\r\n     34     make: *** Waiting for unfinished jobs....\r\n     35     In file included from bam_reheader.c:28:0:\r\n  >> 36     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     37      #include <zlib.h>\r\n     38               ^~~~~~~~\r\n     39     compilation terminated.\r\n     40     In file included from bam.h:48:0,\r\n     41                      from bam_color.c:26:\r\n  >> 42     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     43      #include <zlib.h>\r\n     44               ^~~~~~~~\r\n     45     compilation terminated.\r\n     46     Makefile:116: recipe for target 'bam_color.o' failed\r\n  >> 47     make: *** [bam_color.o] Error 1\r\n     48     Makefile:116: recipe for target 'bam_reheader.o' failed\r\n  >> 49     make: *** [bam_reheader.o] Error 1\r\n  >> 50     bam_rmdup.c:29:10: fatal error: zlib.h: No such file or directory\r\n     51      #include <zlib.h>\r\n     52               ^~~~~~~~\r\n     53     compilation terminated.\r\n  >> 54     bedidx.c:31:10: fatal error: zlib.h: No such file or directory\r\n     55      #include <zlib.h>\r\n     56               ^~~~~~~~\r\n     57     compilation terminated.\r\n     58     Makefile:116: recipe for target 'bam_rmdup.o' failed\r\n     59     In file included from bam_cat.c:41:0:\r\n  >> 60     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     61      #include <zlib.h>\r\n     62               ^~~~~~~~\r\n  >> 63     make: *** [bam_rmdup.o] Error 1\r\n     64     compilation terminated.\r\n     65     Makefile:116: recipe for target 'bedidx.o' failed\r\n  >> 66     make: *** [bedidx.o] Error 1\r\n     67     Makefile:116: recipe for target 'bam_cat.o' failed\r\n  >> 68     make: *** [bam_cat.o] Error 1\r\n     69     kprobaln.c: In function 'kpa_glocal':\r\n     70     kprobaln.c:78:21: warning: variable 'is_diff' set but not used [-Wunused-but-set-variable]\r\n     71       int bw, bw2, i, k, is_diff = 0, is_backward = 1, Pr;\r\n     72                          ^~~~~~~\r\n     73     In file included from bam.h:48:0,\r\n     74                      from cut_target.c:29:\r\n  >> 75     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n# Copyright 2013-2018 Lawrence Livermore National Security, LLC and other\r\n     76      #include <zlib.h>\r\n     77               ^~~~~~~~\r\n     78     compilation terminated.\r\n     79     In file included from bam.h:48:0,\r\n     80                      from sam.h:29,\r\n     81                      from padding.c:32:\r\n  >> 82     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     83      #include <zlib.h>\r\n     84               ^~~~~~~~\r\n     85     compilation terminated.\r\n     86     In file included from bam.h:48:0,\r\n     87                      from sam.h:29,\r\n     88                      from bam_rmdupse.c:27:\r\n  >> 89     htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     90      #include <zlib.h>\r\n     91               ^~~~~~~~\r\n     92     compilation terminated.\r\n     93     Makefile:116: recipe for target 'cut_target.o' failed\r\n  >> 94     make: *** [cut_target.o] Error 1\r\n     95     Makefile:116: recipe for target 'padding.o' failed\r\n  >> 96     make: *** [padding.o] Error 1\r\n     97     Makefile:116: recipe for target 'bam_rmdupse.o' failed\r\n  >> 98     phase.c:31:10: fatal error: zlib.h: No such file or directory\r\n     99      #include <zlib.h>\r\n     100              ^~~~~~~~\r\n  >> 101    make: *** [bam_rmdupse.o] Error 1\r\n     102    compilation terminated.\r\n     103    In file included from bam.h:48:0,\r\n     104                     from sam.h:29,\r\n     105                     from bam_md.c:31:\r\n  >> 106    htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     107     #include <zlib.h>\r\n     108              ^~~~~~~~\r\n     109    compilation terminated.\r\n     110    In file included from bamshuf.c:32:0:\r\n  >> 111    htslib-1.2.1/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     112     #include <zlib.h>\r\n     113              ^~~~~~~~\r\n     114    compilation terminated.\r\n     115    Makefile:116: recipe for target 'phase.o' failed\r\n  >> 116    make: *** [phase.o] Error 1\r\n     117    Makefile:116: recipe for target 'bam_md.o' failed\r\n  >> 118    make: *** [bam_md.o] Error 1\r\n     119    Makefile:116: recipe for target 'bamshuf.o' failed\r\n  >> 120    make: *** [bamshuf.o] Error 1\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux n220 4.15.0-38-generic #41-Ubuntu SMP Wed Oct 10 10:59:38 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tUbuntu 18.04.1 LTS\r\n``` \r\n",
    "performed_via_github_app": null
}