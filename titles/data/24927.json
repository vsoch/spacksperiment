{
    "url": "https://api.github.com/repos/spack/spack/issues/24927",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/24927/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/24927/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/24927/events",
    "html_url": "https://github.com/spack/spack/pull/24927",
    "id": 946388998,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjkxNTcwNTc5",
    "number": 24927,
    "title": "PICSAR: added support for GCC >10.0 and arm compiler",
    "user": {
        "login": "LorienLV",
        "id": 31626586,
        "node_id": "MDQ6VXNlcjMxNjI2NTg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/31626586?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LorienLV",
        "html_url": "https://github.com/LorienLV",
        "followers_url": "https://api.github.com/users/LorienLV/followers",
        "following_url": "https://api.github.com/users/LorienLV/following{/other_user}",
        "gists_url": "https://api.github.com/users/LorienLV/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/LorienLV/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LorienLV/subscriptions",
        "organizations_url": "https://api.github.com/users/LorienLV/orgs",
        "repos_url": "https://api.github.com/users/LorienLV/repos",
        "events_url": "https://api.github.com/users/LorienLV/events{/privacy}",
        "received_events_url": "https://api.github.com/users/LorienLV/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 729584669,
            "node_id": "MDU6TGFiZWw3Mjk1ODQ2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/update-package",
            "name": "update-package",
            "color": "c68137",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-07-16T15:21:46Z",
    "updated_at": "2021-08-01T17:18:45Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/24927",
        "html_url": "https://github.com/spack/spack/pull/24927",
        "diff_url": "https://github.com/spack/spack/pull/24927.diff",
        "patch_url": "https://github.com/spack/spack/pull/24927.patch"
    },
    "body": "We had the following error when compiling PICSAR with GCC 10.3.0:\r\n```\r\n     25    \r\n     26      304 |               bztile, .FALSE., l_lower_order_in_v_in, LVEC_fieldgathe,                &\r\n     27          |                      1\r\n     28    ......\r\n     29     1092 |                 bztile , l4symtry_in, l_lower_order_in_v_in, lvect,                   &\r\n     30          |                         2\r\n  >> 31    Error: Type mismatch between actual argument at (1) and actual argument at (2) (LOGICAL(4)/LOGICAL(8)).\r\n     32    src/particle_pushers/particle_pusher_manager_3d.F90:318:23:\r\n     33    \r\n     34      318 |               bztile , .FALSE., l_lower_order_in_v_in, lvec_fieldgathe,               &\r\n     35          |                       1\r\n     36    ......\r\n     37     1104 |                 bztile , l4symtry_in, l_lower_order_in_v_in, lvect,                   &\r\n     38          |                         2\r\n  >> 39    Error: Type mismatch between actual argument at (1) and actual argument at (2) (LOGICAL(4)/LOGICAL(8)).\r\n  >> 40    make: *** [src/particle_pushers/particle_pusher_manager_3d.o] Error 1\r\n```\r\nIt seems that it is caused due to some changes in GCC v10. To circumvent the error, one can compile with the flag \"-fallow-argument-mismatch\".\r\n\r\nWe also had some problems when compiling PICSAR with the arm compiler:\r\n\r\n```\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' 'FC=/scratch/opt/spack/linux-amzn2-aarch64/arm-21.0.0.879/openmpi-4.1.0-lmaoy5tql4ymankvskpqsplxlig5wzvy/bin/mpif90' 'CC=/scratch/opt/spack/linux-amzn2-aarch64/arm-21.0.0.879/openmpi-4.1.0-lmaoy5tql4ymankvskpqsplxlig5wzvy/bin/mpicc' 'COMP=user' 'FARGS=-g -O3 -fopenmp' 'MODE = prod' 'SYS = default'\r\n\r\n1 error found in build log:\r\n     222    \r\n     223    6 warnings generated.\r\n     224    /scratch/opt/spack/linux-amzn2-aarch64/arm-21.0.0.879/openmpi-4.1.0-lmaoy5tql4ymankvskpqsplxlig5wzvy/bin/mpif90 -g -O3 -fopenmp -c -o src/diags/diags.o \r\n            src/diags/diags.F90\r\n     225    F90-W-0547-OpenMP feature, SAFELEN, not yet implemented in this version of the compiler. (src/diags/diags.F90: 900)\r\n     226    F90-F-0155-DO loop expected after COLLAPSE (src/diags/diags.F90: 908)\r\n     227    F90/aarch64 Linux FlangArm F90  - 1.5 2017-05-01: compilation aborted\r\n  >> 228    make: *** [src/diags/diags.o] Error 1\r\n```\r\nThe OpenMP directive SAFELEN is not implemented in the ARM compiler. The execution of the SAFELEN clause is not essential for the program, so we have eliminated the two troublesome lines of code using a spack-patch.",
    "performed_via_github_app": null
}