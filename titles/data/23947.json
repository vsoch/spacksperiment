{
    "url": "https://api.github.com/repos/spack/spack/issues/23947",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23947/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23947/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23947/events",
    "html_url": "https://github.com/spack/spack/pull/23947",
    "id": 903127159,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjU0NDE5NzAz",
    "number": 23947,
    "title": "Use flake8-import-order to enforce PEP-8 compliance",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 976371064,
            "node_id": "MDU6TGFiZWw5NzYzNzEwNjQ=",
            "url": "https://api.github.com/repos/spack/spack/labels/style",
            "name": "style",
            "color": "dbc83b",
            "default": false,
            "description": "code style"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 14,
    "created_at": "2021-05-27T02:18:17Z",
    "updated_at": "2021-06-28T19:00:43Z",
    "closed_at": "2021-06-28T13:03:20Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/23947",
        "html_url": "https://github.com/spack/spack/pull/23947",
        "diff_url": "https://github.com/spack/spack/pull/23947.diff",
        "patch_url": "https://github.com/spack/spack/pull/23947.patch"
    },
    "body": "### Description\r\n\r\nThis PR introduces `flake8-import-order` to Spack's style checking CI tests. [`flake8-import-order`](https://github.com/PyCQA/flake8-import-order) is a tool made by PyCQA, the same people who maintain `flake8` and all of its dependencies. It enforces proper ordering of imports according to the guidelines set by PEP-8.\r\n\r\n### Rationale\r\n\r\nAccording to https://www.python.org/dev/peps/pep-0008/#imports:\r\n\r\n> Imports should be grouped in the following order:\r\n>\r\n> 1. Standard library imports.\r\n> 2. Related third party imports.\r\n> 3. Local application/library specific imports.\r\n>\r\n> You should put a blank line between each group of imports.\r\n\r\nHowever, `flake8` and `black` on their own do not enforce this at all. \r\n\r\nThe reason we originally added `flake8` was to end \"edit wars\" (mostly between @alalazo and me) where we would edit a file back and forth because we're both OCD about style and disagreed on some style things. This would lead to dozens of lines of code change for trivial changes, making reviewing difficult. With tools like `flake8` and `black`, we can set an agreed upon standard for code style by always going with whatever PEP-8 says to do.\r\n\r\nIn a lot of recent PRs that modify core, much of the PR is reordering of imports. But without any tool to enforce this, we're again at the mercy of personal opinion. With `flake8-import-order`, we can enforce this.\r\n\r\n### Discussion\r\n\r\nIf we choose to use `flake8-import-order`, the only decision we need to make is which style to enforce. The PEP-8 guidelines don't specify anything about imports within each group (for example, within standard library imports), but there are various styles you can choose from with the tool. See https://github.com/PyCQA/flake8-import-order#styles for a complete list of supported styles. Personally, I prefer `google` style, but I'll let others comment and/or vote.\r\n\r\nI edited a core Spack file with a lot of imports so we can see what the new `flake8` output will be. I'll modify these imports once we agree on a style to use so that the tests pass.",
    "performed_via_github_app": null
}