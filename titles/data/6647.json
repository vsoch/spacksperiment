{
    "url": "https://api.github.com/repos/spack/spack/issues/6647",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6647/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6647/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6647/events",
    "html_url": "https://github.com/spack/spack/issues/6647",
    "id": 280735535,
    "node_id": "MDU6SXNzdWUyODA3MzU1MzU=",
    "number": 6647,
    "title": "Fails to build Octave with Intel compiler due to C++ to Fortran calling convention issues",
    "user": {
        "login": "weijianwen",
        "id": 908249,
        "node_id": "MDQ6VXNlcjkwODI0OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/908249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/weijianwen",
        "html_url": "https://github.com/weijianwen",
        "followers_url": "https://api.github.com/users/weijianwen/followers",
        "following_url": "https://api.github.com/users/weijianwen/following{/other_user}",
        "gists_url": "https://api.github.com/users/weijianwen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/weijianwen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/weijianwen/subscriptions",
        "organizations_url": "https://api.github.com/users/weijianwen/orgs",
        "repos_url": "https://api.github.com/users/weijianwen/repos",
        "events_url": "https://api.github.com/users/weijianwen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/weijianwen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 477156668,
            "node_id": "MDU6TGFiZWw0NzcxNTY2Njg=",
            "url": "https://api.github.com/repos/spack/spack/labels/intel",
            "name": "intel",
            "color": "127cc1",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-12-09T17:05:52Z",
    "updated_at": "2021-04-23T06:05:30Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Spack fails to build Octave with Intel compiler due to C++ to Fortran calling convention issues.\r\n\r\n### Expected Result\r\n\r\nBuilds Octave with Intel compiler.\r\n\r\n### Actual Result\r\n\r\nFails to build Octave with Intel compiler.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack spec octave+qt~readline@4.2.1 %intel@17.0.5 ^openblas threads=openmp\r\n...\r\n$ spack --restage install octave+qt~readline@4.2.1 %intel@17.0.5 ^openblas threads=openmp\r\n...\r\n==> Installing octave\r\n==> Using cached archive: /lustre/home/rpm/spack/var/spack/cache/octave/octave-4.2.1.tar.gz\r\n==> Already staged octave-4.2.1-o3lrrnoctonlzgx4wgbsyfqnqciabj3l in /lustre/home/rpm/spack/var/spack/stage/octave-4.2.1-o3lrrnoctonlzgx4wgbsyfqnqciabj3l\r\n==> Already patched octave\r\n==> Building octave [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:                                                            \r\n    '/lustre/home/rpm/spack/var/spack/stage/octave-4.2.1-o3lrrnoctonlzgx4wgbsyfqnqciabj3l/octave-4.2.1/configure' '\r\n--prefix=/lustre/spack/sandybridge/linux-centos7-x86_64/intel-17.0.5/octave-4.2.1-o3lrrnoctonlzgx4wgbsyfqnqciabj3l'\r\n '--with-blas=-L/lustre/spack/sandybridge/linux-centos7-x86_64/intel-17.0.5/openblas-0.2.20-247hkbjuggrspe2oyvq2smt\r\ninigdpvml/lib -lopenblas' '--with-lapack=-L/lustre/spack/sandybridge/linux-centos7-x86_64/intel-17.0.5/openblas-0.2\r\n.20-247hkbjuggrspe2oyvq2smtinigdpvml/lib -lopenblas' '--disable-readline' '--without-arpack' '--without-curl' '--wi\r\nthout-fftw3' '--without-fftw3f' '--without-fltk' '--without-glpk' '--without-magick' '--without-hdf5' '--disable-ja\r\nva' '--without-opengl' '--without-framework-opengl' '--without-qhull' '--without-qrupdate' '--without-z'\r\n\r\n1 error found in build log:\r\n     [ ... ]\r\n     248   checking how to hardcode library paths into programs... immediate\r\n     249   checking whether a usable Fortran compiler was found... yes\r\n     250   checking how to get verbose linking output from /lustre/home/rpm/spack/lib/spack/env/intel/ifort... -v\r\n     251   checking for Fortran 77 libraries of /lustre/home/rpm/spack/lib/spack/env/intel/ifort...  -L/lustre/spac\r\nk/tools/linux-centos7-x86_64/gcc-4.8.5/intel-parallel-studio-cluster.2017.5-geurbg7kvebddctqiaqjqjoy2hzp45k5/compil\r\ners_and_libraries_2017.5.239/linux/compiler/lib/intel64_lin -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/ -L/usr/lib/gc\r\nc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/ -L/lib/..\r\n/lib64 -L/lib/../lib64/ -L/usr/lib/../lib64 -L/usr/lib/../lib64/ -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../\r\n -L/lib64 -L/lib/ -L/usr/lib64 -L/usr/lib -limf -lm -lifport -lifcoremt -lsvml -lipgo -lirc -lpthread -lirc_s -ldl\r\n     252   checking for dummy main to link with Fortran 77 libraries... none\r\n     253   checking for Fortran 77 name-mangling scheme... lower case, underscore, no extra underscore\r\n  >> 254   configure: error: to build Octave, the C++ to Fortran calling convention must be known.\r\n\r\nSee build log for details:\r\n  /lustre/home/rpm/spack/var/spack/stage/octave-4.2.1-o3lrrnoctonlzgx4wgbsyfqnqciabj3l/octave-4.2.1/spack-build.out\r\n```\r\n[spack-spec.txt](https://github.com/spack/spack/files/1544863/spack-spec.txt)\r\n[spack-build.env.txt](https://github.com/spack/spack/files/1544864/spack-build.env.txt)\r\n[spack-build.out.txt](https://github.com/spack/spack/files/1544865/spack-build.out.txt)\r\n\r\n### Information on your system\r\n\r\nI am using CentOS 7.",
    "performed_via_github_app": null
}