{
    "url": "https://api.github.com/repos/spack/spack/issues/14154",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14154/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14154/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14154/events",
    "html_url": "https://github.com/spack/spack/pull/14154",
    "id": 537768328,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzUzMDY2MjI0",
    "number": 14154,
    "title": "Mirrors: add option to exclude packages from \"mirror create\"",
    "user": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446756736,
            "node_id": "MDU6TGFiZWw0NDY3NTY3MzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/mirrors",
            "name": "mirrors",
            "color": "ade2f2",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-12-13T20:40:00Z",
    "updated_at": "2020-06-04T00:43:52Z",
    "closed_at": "2020-06-04T00:43:52Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/14154",
        "html_url": "https://github.com/spack/spack/pull/14154",
        "diff_url": "https://github.com/spack/spack/pull/14154.diff",
        "patch_url": "https://github.com/spack/spack/pull/14154.patch"
    },
    "body": "See: https://github.com/spack/spack/issues/13604\r\nSee: https://github.com/spack/spack/pull/13925\r\n\r\nAdd an --exclude-file option to 'spack mirror create' which allows a user to specify a file of specs to exclude when creating a mirror. this is anticipated to be useful especially when using the '--all' option.\r\n\r\nThe option can be used as follows:\r\n\r\n```\r\nspack mirror create --exclude-file path/to/mirror-exclude-specs.txt ...\r\n```\r\n\r\nWhere the exclude file looks like\r\n\r\n```\r\npy-torch\r\nrna-seqc\r\n```\r\n\r\n#13604 points out there are cases where `spack mirror create --all` stalls because of packages that require interaction or otherwise hang. #13881 adds a connection timeout for URL fetchers, which handles a subset of these cases. ~#13925 adds a universal process timeout that is available for all fetch actions, which is intended as a catch-all solution, but requires additional work and special-case handling of git resources (which are the most common non-URL resources).~\r\n\r\n~This also adds a file to `share/spack/cmd-config/mirror-exclude-specs.txt`~\r\n\r\n~This file is added because it is anticipated that users will commonly need to filter the same set of packages. This is not added as config because modifying the mirror configuration to support blacklisting would require significant adjustments, and also because this option should only be required while #13925 is incomplete.~\r\n\r\nNew updates (as of May 28):\r\n\r\n* When mirroring all specs for an environment, include dependency specs (fixes https://github.com/spack/spack/issues/16808). This does not require specifying `--dependencies`\r\n* You can now specify `--versions-per-spec` when using the `--all` option. For example `spack mirror create --all --versions-per-spec 1` would download the latest version of every package.",
    "performed_via_github_app": null
}