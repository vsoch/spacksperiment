{
    "url": "https://api.github.com/repos/spack/spack/issues/23125",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23125/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23125/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23125/events",
    "html_url": "https://github.com/spack/spack/issues/23125",
    "id": 862261834,
    "node_id": "MDU6SXNzdWU4NjIyNjE4MzQ=",
    "number": 23125,
    "title": "\"spack find\" lost its mind?",
    "user": {
        "login": "arwild01",
        "id": 3150609,
        "node_id": "MDQ6VXNlcjMxNTA2MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3150609?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arwild01",
        "html_url": "https://github.com/arwild01",
        "followers_url": "https://api.github.com/users/arwild01/followers",
        "following_url": "https://api.github.com/users/arwild01/following{/other_user}",
        "gists_url": "https://api.github.com/users/arwild01/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/arwild01/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/arwild01/subscriptions",
        "organizations_url": "https://api.github.com/users/arwild01/orgs",
        "repos_url": "https://api.github.com/users/arwild01/repos",
        "events_url": "https://api.github.com/users/arwild01/events{/privacy}",
        "received_events_url": "https://api.github.com/users/arwild01/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-04-20T01:36:14Z",
    "updated_at": "2021-04-20T01:37:58Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I just noticed the following and I'm not sure what to make of it.  Does this imply something is corrupt or what?  (Or am I supposed to somehow quote the arguments in some way I've not realized before now.\r\n\r\nTo be clear.. you can see I have a boost package that was built with the openmpi package and If I search for the boost package without being explicit about the hash of openmpi it finds it... but with the hash it doesn't.\r\n\r\nI use the hashes a lot in a script I have to recreate my setup and this is the first (and as far as I know) only instance of this, but I'm not sure what would be causing spack find to err... not find... it.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n[arwild1@hplwsp007 ~]$ spack find -ld boost@1.76.0%gcc  ^openmpi |egrep 'boost|openmpi'\r\n5vby33x boost@1.76.0\r\nsbne3rv     openmpi@4.1.0\r\n[arwild1@hplwsp007 ~]$ spack find boost@1.76.0%gcc ^openmpi/sbne3rv\r\n==> No package matches the query: boost@1.76.0%gcc ^openmpi/sbne3rv\r\n[arwild1@hplwsp007 ~]$ spack -ddddddd find boost@1.76.0%gcc ^openmpi/sbne3rv\r\n==> [2021-04-19-20:24:12.724074, 141697] Imported find from built-in commands\r\n==> [2021-04-19-20:24:12.725410, 141697] Imported find from built-in commands\r\n==> [2021-04-19-20:24:12.727481, 141697] Reading config file /apps_spack/etc/spack/defaults/config.yaml\r\n==> [2021-04-19-20:24:12.751423, 141697] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-04-19-20:24:12.751523, 141697] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-04-19-20:24:12.751696, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\n==> [2021-04-19-20:24:12.754373, 141697] read locking [0:0]: timeout 3 sec\r\n==> [2021-04-19-20:24:12.755255, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Acquired at 20:24:12.755212]\r\n==> [2021-04-19-20:24:12.786130, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Releasing]\r\n==> [2021-04-19-20:24:12.792156, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Released at 20:24:12.792092]\r\n==> [2021-04-19-20:24:12.792410, 141697] Reading config file /apps_spack/etc/spack/defaults/repos.yaml\r\n==> [2021-04-19-20:24:12.958741, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\n==> [2021-04-19-20:24:12.962248, 141697] read locking [0:0]: timeout 3 sec\r\n==> [2021-04-19-20:24:12.963448, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Acquired at 20:24:12.963401]\r\n==> [2021-04-19-20:24:13.472431, 141697] READ LOCK: /users/arwild1/.spack/cache/providers/.builtin-index.json.lock[0:0] [Acquiring]\r\n==> [2021-04-19-20:24:13.474358, 141697] read locking [0:0]: timeout 120 sec\r\n==> [2021-04-19-20:24:13.475057, 141697] READ LOCK: /users/arwild1/.spack/cache/providers/.builtin-index.json.lock[0:0] [Acquired at 20:24:13.475001]\r\n==> [2021-04-19-20:24:13.488515, 141697] READ LOCK: /users/arwild1/.spack/cache/providers/.builtin-index.json.lock[0:0] [Releasing]\r\n==> [2021-04-19-20:24:13.496430, 141697] READ LOCK: /users/arwild1/.spack/cache/providers/.builtin-index.json.lock[0:0] [Released at 20:24:13.496379]\r\n==> [2021-04-19-20:24:13.499470, 141697] READ LOCK: /users/arwild1/.spack/cache/tags/.builtin-index.json.lock[0:0] [Acquiring]\r\n==> [2021-04-19-20:24:13.501077, 141697] read locking [0:0]: timeout 120 sec\r\n==> [2021-04-19-20:24:13.501712, 141697] READ LOCK: /users/arwild1/.spack/cache/tags/.builtin-index.json.lock[0:0] [Acquired at 20:24:13.501672]\r\n==> [2021-04-19-20:24:13.502531, 141697] READ LOCK: /users/arwild1/.spack/cache/tags/.builtin-index.json.lock[0:0] [Releasing]\r\n==> [2021-04-19-20:24:13.503155, 141697] READ LOCK: /users/arwild1/.spack/cache/tags/.builtin-index.json.lock[0:0] [Released at 20:24:13.503119]\r\n==> [2021-04-19-20:24:13.506027, 141697] READ LOCK: /users/arwild1/.spack/cache/patches/.builtin-index.json.lock[0:0] [Acquiring]\r\n==> [2021-04-19-20:24:13.507642, 141697] read locking [0:0]: timeout 120 sec\r\n==> [2021-04-19-20:24:13.508257, 141697] READ LOCK: /users/arwild1/.spack/cache/patches/.builtin-index.json.lock[0:0] [Acquired at 20:24:13.508218]\r\n==> [2021-04-19-20:24:13.513277, 141697] READ LOCK: /users/arwild1/.spack/cache/patches/.builtin-index.json.lock[0:0] [Releasing]\r\n==> [2021-04-19-20:24:13.514362, 141697] READ LOCK: /users/arwild1/.spack/cache/patches/.builtin-index.json.lock[0:0] [Released at 20:24:13.514325]\r\n==> [2021-04-19-20:24:13.757595, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Releasing]\r\n==> [2021-04-19-20:24:13.758994, 141697] READ LOCK (database): /apps_spack/opt/spack/.spack-db/lock[0:0] [Released at 20:24:13.758937]\r\n==> [2021-04-19-20:24:13.759110, 141697] No package matches the query: boost@1.76.0%gcc ^openmpi/sbne3rv\r\n[arwild1@hplwsp007 ~]$ spack find -Ld boost@1.76.0%gcc  ^openmpi |egrep 'boost|openmpi'\r\n5vby33x5gi5k7sicmb2kied5f56vhaxs boost@1.76.0\r\nsbne3rvwknke74himqxr56r2ptq55gd2     openmpi@4.1.0\r\n[arwild1@hplwsp007 ~]$ spack find boost@1.76.0%gcc ^openmpi/sbne3rvwknke74himqxr56r2ptq55gd2\r\n==> No package matches the query: boost@1.76.0%gcc ^openmpi/sbne3rvwknke74himqxr56r2ptq55gd2\r\n\r\n```\r\n\r\n### Error Message\r\n\r\n<!-- If Spack reported an error, provide the error message. If it did not report an error but the output appears incorrect, provide the incorrect output. If there was no error message and no output but the result is incorrect, describe how it does not match what you expect. -->\r\n```console\r\n$ spack --debug --stacktrace <command>\r\n```\r\n\r\n### Information on your system\r\n\r\n```console\r\n[arwild1@hplwsp007 ~]$ spack debug report\r\n* **Spack:** 0.16.1-2195-d473924\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-skylake_avx512\r\n* **Concretizer:** original\r\n[arwild1@hplwsp007 ~]$ spack find -vdl openmpi/sbne3rv\r\n==> 1 installed package\r\n-- linux-centos7-skylake / gcc@10.3.0 ---------------------------\r\nsbne3rv openmpi@4.1.0~atomics+cuda~cxx~cxx_exceptions~gpfs~internal-hwloc~java~legacylaunchers+lustre~memchecker~pmi~singularity~sqlite3+static+thread_multiple+vt+wrapper-rpath fabrics=hcoll,knem,ucx,xpmem patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8 schedulers=tm\r\nyjlstzn     hcoll@4.4.2942\r\nzpmf5sw     hwloc@2.4.1~cairo+cuda~gl~libudev+libxml2~netloc~nvml+pci+shared\r\neygqsg2         cuda@11.0.2+dev\r\nmp7h2mz             libxml2@2.9.1~python\r\nggpvyla             ncurses@5.9.20130511~symlinks+termlib abi=none patches=f84b2708a42777aadcc7f502a261afe10ca5646a51c1ef8b5e60d2070d926b57\r\n2rw3lvx         libpciaccess@0.14\r\nlsjbdr3     knem@1.1.3.90+hwloc\r\nbmt7jxt     libevent@2.0.21+openssl\r\n65jggfp     lustre@2.12.5\r\npkwj6d6     numactl@2.0.12 patches=62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006\r\nnb2mnzu     openssh@7.4p1\r\nllw2abo     pbspro@19.2.4\r\nzktbyjl     ucx@1.10.0~assertions~cm~cma+cuda~dc~debug~dm~gdrcopy~ib-hw-tm~java~knem~logging~mlx5-dv+optimizations~parameter_checking+pic~rc+thread_multiple~ud~xpmem cuda_arch=70,72,75,80\r\nrgsdsc4         rdma-core@34.0~ipo build_type=RelWithDebInfo\r\nv2rtpce             libnl@3.3.0\r\nrqotwy7     xpmem@2.6.5-36+kernel-module patches=1a2660a96dbbb5a2951643f6f838d0c396de9f7f1834f8712f4632c5716e3eae\r\n5lmbcrb     zlib@1.2.7+optimize+pic+shared\r\n\r\n[arwild1@hplwsp007 ~]$ spack find -vdl boost@1.76.0%gcc ^openmpi\r\n==> 1 installed package\r\n-- linux-centos7-skylake / gcc@10.3.0 ---------------------------\r\n5vby33x boost@1.76.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math+mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=11 visibility=hidden\r\ntju7hi5     bzip2@1.0.6+shared\r\nsbne3rv     openmpi@4.1.0~atomics+cuda~cxx~cxx_exceptions~gpfs~internal-hwloc~java~legacylaunchers+lustre~memchecker~pmi~singularity~sqlite3+static+thread_multiple+vt+wrapper-rpath fabrics=hcoll,knem,ucx,xpmem patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8 schedulers=tm\r\nyjlstzn         hcoll@4.4.2942\r\nzpmf5sw         hwloc@2.4.1~cairo+cuda~gl~libudev+libxml2~netloc~nvml+pci+shared\r\neygqsg2             cuda@11.0.2+dev\r\nmp7h2mz                 libxml2@2.9.1~python\r\nggpvyla                 ncurses@5.9.20130511~symlinks+termlib abi=none patches=f84b2708a42777aadcc7f502a261afe10ca5646a51c1ef8b5e60d2070d926b57\r\n2rw3lvx             libpciaccess@0.14\r\nlsjbdr3         knem@1.1.3.90+hwloc\r\nbmt7jxt         libevent@2.0.21+openssl\r\n65jggfp         lustre@2.12.5\r\npkwj6d6         numactl@2.0.12 patches=62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006\r\nnb2mnzu         openssh@7.4p1\r\nllw2abo         pbspro@19.2.4\r\nzktbyjl         ucx@1.10.0~assertions~cm~cma+cuda~dc~debug~dm~gdrcopy~ib-hw-tm~java~knem~logging~mlx5-dv+optimizations~parameter_checking+pic~rc+thread_multiple~ud~xpmem cuda_arch=70,72,75,80\r\nrgsdsc4             rdma-core@34.0~ipo build_type=RelWithDebInfo\r\nv2rtpce                 libnl@3.3.0\r\nrqotwy7         xpmem@2.6.5-36+kernel-module patches=1a2660a96dbbb5a2951643f6f838d0c396de9f7f1834f8712f4632c5716e3eae\r\n5lmbcrb         zlib@1.2.7+optimize+pic+shared\r\n'''\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n",
    "performed_via_github_app": null
}