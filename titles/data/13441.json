{
    "url": "https://api.github.com/repos/spack/spack/issues/13441",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13441/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13441/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13441/events",
    "html_url": "https://github.com/spack/spack/pull/13441",
    "id": 512707055,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzMyNjY5NTk1",
    "number": 13441,
    "title": "Restore upstream lock safety, avoid calling methods directly on upstream DB in test",
    "user": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-10-25T20:30:31Z",
    "updated_at": "2019-10-25T23:02:39Z",
    "closed_at": "2019-10-25T23:01:46Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/13441",
        "html_url": "https://github.com/spack/spack/pull/13441",
        "diff_url": "https://github.com/spack/spack/pull/13441.diff",
        "patch_url": "https://github.com/spack/spack/pull/13441.patch"
    },
    "body": "Supersedes #13364 \r\n\r\nA merge created a semantic error for managing upstream DB locks: upstream DBs are not supposed to be locked at all but the `ForbiddenLock` object used to manage this was overwritten.\r\n\r\nAdditionally, an upstream db test was calling methods on upstream DBs that should only be called on the local DB (which knows how when to lock and when not to). This updates the test to avoid that, and also adds a regression test to make sure that writing to upstream DBs leads to an exception.",
    "performed_via_github_app": null
}