{
    "url": "https://api.github.com/repos/spack/spack/issues/16215",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16215/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16215/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16215/events",
    "html_url": "https://github.com/spack/spack/issues/16215",
    "id": 604222415,
    "node_id": "MDU6SXNzdWU2MDQyMjI0MTU=",
    "number": 16215,
    "title": "Meta: Scientific Python macOS Stack",
    "user": {
        "login": "ax3l",
        "id": 1353258,
        "node_id": "MDQ6VXNlcjEzNTMyNTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1353258?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ax3l",
        "html_url": "https://github.com/ax3l",
        "followers_url": "https://api.github.com/users/ax3l/followers",
        "following_url": "https://api.github.com/users/ax3l/following{/other_user}",
        "gists_url": "https://api.github.com/users/ax3l/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ax3l/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ax3l/subscriptions",
        "organizations_url": "https://api.github.com/users/ax3l/orgs",
        "repos_url": "https://api.github.com/users/ax3l/repos",
        "events_url": "https://api.github.com/users/ax3l/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ax3l/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 616911200,
            "node_id": "MDU6TGFiZWw2MTY5MTEyMDA=",
            "url": "https://api.github.com/repos/spack/spack/labels/gcc",
            "name": "gcc",
            "color": "0052cc",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        },
        {
            "id": 446619758,
            "node_id": "MDU6TGFiZWw0NDY2MTk3NTg=",
            "url": "https://api.github.com/repos/spack/spack/labels/python",
            "name": "python",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 574328447,
            "node_id": "MDU6TGFiZWw1NzQzMjg0NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/python3",
            "name": "python3",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 521903170,
            "node_id": "MDU6TGFiZWw1MjE5MDMxNzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/user-experience",
            "name": "user-experience",
            "color": "bfdadc",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "tgamblin",
        "id": 299842,
        "node_id": "MDQ6VXNlcjI5OTg0Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgamblin",
        "html_url": "https://github.com/tgamblin",
        "followers_url": "https://api.github.com/users/tgamblin/followers",
        "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
        "organizations_url": "https://api.github.com/users/tgamblin/orgs",
        "repos_url": "https://api.github.com/users/tgamblin/repos",
        "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgamblin/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tgamblin",
            "id": 299842,
            "node_id": "MDQ6VXNlcjI5OTg0Mg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tgamblin",
            "html_url": "https://github.com/tgamblin",
            "followers_url": "https://api.github.com/users/tgamblin/followers",
            "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
            "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
            "organizations_url": "https://api.github.com/users/tgamblin/orgs",
            "repos_url": "https://api.github.com/users/tgamblin/repos",
            "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tgamblin/received_events",
            "type": "User",
            "site_admin": false
        },
        {
            "login": "adamjstewart",
            "id": 12021217,
            "node_id": "MDQ6VXNlcjEyMDIxMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adamjstewart",
            "html_url": "https://github.com/adamjstewart",
            "followers_url": "https://api.github.com/users/adamjstewart/followers",
            "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
            "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
            "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
            "repos_url": "https://api.github.com/users/adamjstewart/repos",
            "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 20,
    "created_at": "2020-04-21T19:17:42Z",
    "updated_at": "2020-08-26T21:52:12Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "This issue is a multi-months experience report on getting a pretty standard scientific software stack up on macOS. Thank you to @LDAmorim for trying and reporting all things in a dedicated manner. You are the best! :sparkles: \r\nThank you also already to everyone that helped us in the last months, you rock :rocket: \r\n\r\n### Setup a Compiler\r\n\r\nThe first steps are already problematic.\r\n`Clone`-and-go is not really an option even on the latest macOS Catalina, too many things are just GCC specific. One can document this, to ease the pain.\r\n\r\nUsers will try to bootstrap a GCC with `spack install gcc`. This usually/often/randomly(?) will fail when bootstrapping from AppleClang (latest test: works :tada:). The Slack-level work-around is to use `brew install gcc` and register that. If that's the only way to get started, then let's document that.\r\n\r\nAlternatively, let's try to get dependency/package issues fixed with AppleClang.\r\n\r\n### The Software Stack\r\n\r\n```\r\nspack install py-jupyter\r\nspack install py-scipy\r\nspack install py-matplotlib\r\nspack install py-docutils\r\nspack install py-packaging\r\nspack install py-sympy\r\nspack install py-mpi4py\r\nspack install py-sphinx\r\nspack install py-sphinxcontrib-programoutput\r\nspack install py-sphinx-rtd-theme\r\nspack install graphviz\r\nspack install git\r\nspack install mercurial\r\nspack install subversion\r\n```\r\n\r\n### Related Issues\r\n\r\nSo far, half of the newly reported issue were solvable. Other related macOS + GCC issues (among other open ones in which the user participates):\r\n\r\n- https://github.com/spack/spack/issues?q=is%3Aissue+author%3Aldamorim+\r\n\r\nStill challenging are even some basics:\r\n- `python` itself: https://github.com/spack/spack/issues/2230#issuecomment-614293185\r\n- `py-setuptools` https://github.com/ax3l/spack-emacs/runs/606176488?check_suite_focus=true\r\n- `py-numpy` does not build without disabling blas and lapack\r\n- `openblas`: IIRC, the source issue for `py-numpy`\r\n- `py-jupyter` https://github.com/spack/spack/issues/15410 (and below)\r\n- `glib` https://github.com/spack/spack/issues/16214\r\n\r\n### Time to Solution\r\n\r\nJust to mention, build times on Apple laptops for python stacks are problematic, in part since people keep older hardware (but with recent OS versions) for (too) many years and in part because all laptop build times are problematic (a maximum of 4 physical cores is what most people have these days).\r\n\r\nA single issue down the stack rebuilds many large dependencies such as `llvm` regularly, since such huge projects are used in many popular python packages. One cannot understate what an influence build caches for macOS would have.\r\n\r\n### Impact\r\n\r\nmacOS developer laptops are (for me) surprisingly common, for example more than half of our group develops on one. So covering common stacks reliably will have a large impact. (Memo to myself: `*Apply nudge to all of you to switch to Linux now. You are all just using a GNU/Linux software stack in an expensive case :-p *` Back to topic?)\r\n\r\n### Information on your system\r\n\r\nmacOS 10.15 Catalina",
    "performed_via_github_app": null
}