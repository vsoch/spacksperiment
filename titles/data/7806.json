{
    "url": "https://api.github.com/repos/spack/spack/issues/7806",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7806/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7806/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7806/events",
    "html_url": "https://github.com/spack/spack/issues/7806",
    "id": 315501469,
    "node_id": "MDU6SXNzdWUzMTU1MDE0Njk=",
    "number": 7806,
    "title": "TCL Module errors during `module whatis` when using 'autoload'",
    "user": {
        "login": "TheQueasle",
        "id": 13701545,
        "node_id": "MDQ6VXNlcjEzNzAxNTQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13701545?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheQueasle",
        "html_url": "https://github.com/TheQueasle",
        "followers_url": "https://api.github.com/users/TheQueasle/followers",
        "following_url": "https://api.github.com/users/TheQueasle/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheQueasle/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/TheQueasle/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheQueasle/subscriptions",
        "organizations_url": "https://api.github.com/users/TheQueasle/orgs",
        "repos_url": "https://api.github.com/users/TheQueasle/repos",
        "events_url": "https://api.github.com/users/TheQueasle/events{/privacy}",
        "received_events_url": "https://api.github.com/users/TheQueasle/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2018-04-18T14:21:17Z",
    "updated_at": "2018-08-07T17:56:12Z",
    "closed_at": "2018-08-07T17:56:12Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "TCL modules generated that include 'autoload' stanzas cause the `module whatis` command to throw out some error messages along with the intended output for said command.\r\n\r\nThis is more of a 'cosmetic' issue as it does not affect the functionality of the module.\r\n\r\nA pull request with what I think the solution is will be coming in shortly after this issue.  Just throwing this issue up for visibility and to see if anyone else has hit this.  \r\n\r\n### Expected Result\r\n\r\nNo error messages and just the expected output of `whatis`\r\n\r\n```console\r\n$ spack install htop@2.0.2\r\n$ module whatis htop-2.0.2-gcc-4.8.5-lywix6s\r\nhtop-2.0.2-gcc-4.8.5-lywix6s: htop is an interactive text-mode process viewer for Unix systems.\r\n\r\n```\r\n\r\n### Actual Result\r\n\r\nErrors are thrown when processing the 'autoload' stanzas.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install htop@2.0.2\r\n$ module whatis htop-2.0.2-gcc-4.8.5-lywix6s\r\nhtop-2.0.2-gcc-4.8.5-lywix6s(18):ERROR:102: Tcl command execution failed: if ![ is-loaded ncurses-6.0-gcc-4.8.5-zxqghp3 ] {\r\n    module load ncurses-6.0-gcc-4.8.5-zxqghp3\r\n}\r\n\r\nhtop-2.0.2-gcc-4.8.5-lywix6s: htop is an interactive text-mode process viewer for Unix systems.\r\n```\r\n\r\n### Information on your system\r\n\r\n- CentOS 7.4\r\n- Spack v0.11.2\r\n\r\n`modules.yaml`\r\n```yaml\r\n modules:\r\n   tcl:\r\n     all:\r\n       autoload:  'direct'\r\n```",
    "performed_via_github_app": null
}