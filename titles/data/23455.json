{
    "url": "https://api.github.com/repos/spack/spack/issues/23455",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23455/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23455/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23455/events",
    "html_url": "https://github.com/spack/spack/issues/23455",
    "id": 876745265,
    "node_id": "MDU6SXNzdWU4NzY3NDUyNjU=",
    "number": 23455,
    "title": "spack fails to generate a build environment when using intel-oneapi-mpi as mpi provider",
    "user": {
        "login": "frankwillmore",
        "id": 508437,
        "node_id": "MDQ6VXNlcjUwODQzNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/508437?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankwillmore",
        "html_url": "https://github.com/frankwillmore",
        "followers_url": "https://api.github.com/users/frankwillmore/followers",
        "following_url": "https://api.github.com/users/frankwillmore/following{/other_user}",
        "gists_url": "https://api.github.com/users/frankwillmore/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/frankwillmore/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/frankwillmore/subscriptions",
        "organizations_url": "https://api.github.com/users/frankwillmore/orgs",
        "repos_url": "https://api.github.com/users/frankwillmore/repos",
        "events_url": "https://api.github.com/users/frankwillmore/events{/privacy}",
        "received_events_url": "https://api.github.com/users/frankwillmore/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2426379301,
            "node_id": "MDU6TGFiZWwyNDI2Mzc5MzAx",
            "url": "https://api.github.com/repos/spack/spack/labels/alcf",
            "name": "alcf",
            "color": "17669e",
            "default": false,
            "description": ""
        },
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446645732,
            "node_id": "MDU6TGFiZWw0NDY2NDU3MzI=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-environment",
            "name": "build-environment",
            "color": "bfdadc",
            "default": false,
            "description": null
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        },
        {
            "id": 459210887,
            "node_id": "MDU6TGFiZWw0NTkyMTA4ODc=",
            "url": "https://api.github.com/repos/spack/spack/labels/mpi",
            "name": "mpi",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 2431479212,
            "node_id": "MDU6TGFiZWwyNDMxNDc5MjEy",
            "url": "https://api.github.com/repos/spack/spack/labels/oneapi",
            "name": "oneapi",
            "color": "b3f490",
            "default": false,
            "description": ""
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-05T18:56:48Z",
    "updated_at": "2021-05-05T18:56:48Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "<!-- Explain, in a clear and concise way, the command you ran and the result you were trying to achieve.\r\nExample: \"I ran `spack find` to list all the installed packages and ...\" -->\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install hdf5%oneapi ^intel-oneapi-mpi%oneapi target=x86_64 ^zlib%gcc ^patchelf%gcc  \r\n[+] /tmp/spack-nohome/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/patchelf-0.12-q7psre27l6oarnev2osaa3hafk4natxr\r\n[+] /tmp/spack-nohome/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/zlib-1.2.11-34iycv2fvx5ptn33e3ilykrfsdfvozve\r\n[+] /tmp/spack-nohome/opt/spack/linux-opensuse_leap15-x86_64/oneapi-2021.2.0/intel-oneapi-mpi-2021.2.0-t5eb3kisfoy24vdch3soj5ns344plce2\r\n[+] /tmp/spack-nohome/opt/spack/linux-opensuse_leap15-x86_64/oneapi-2021.2.0/hdf5-1.10.7-wdf22yfuslciunmiilfv3qdle2fh2szd\r\n$ spack build-env hdf5%oneapi ^intel-oneapi-mpi%oneapi target=x86_64 ^zlib%gcc ^patchelf%gcc  bash\r\n==> Error: Query of package 'openmpi' for 'headers' failed\r\n```\r\n\r\nintel-oneapi-mpi is specified as the mpi provider, not openmpi, so it's not clear why it's querying that package or how. \r\n\r\nI was able to install the package using the above spec, but my interest is in examining the build environment, as other packages using this mpi provider getting incorrect paths to mpicc, etc. \r\n\r\n### Error Message\r\n\r\n<!-- If Spack reported an error, provide the error message. If it did not report an error but the output appears incorrect, provide the incorrect output. If there was no error message and no output but the result is incorrect, describe how it does not match what you expect. -->\r\n```console\r\n$ spack --debug --stacktrace <command>\r\n$ spack --debug --stacktrace build-env hdf5%oneapi ^intel-oneapi-mpi%oneapi target=x86_64 ^zlib%gcc ^patchelf%gcc  \r\nbash                                                                                                                                                  \r\nlib/spack/spack/cmd/__init__.py:122 ==> [2021-05-05-18:47:24.756577] Imported build_env from built-in commands               \r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:24.760650] Reading config file /tmp/spack-nohome/etc/spack/defaults/config.yaml\r\nlib/spack/spack/cmd/__init__.py:122 ==> [2021-05-05-18:47:24.811545] Imported build_env from built-in commands\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:24.821921] Reading config file /tmp/spack-nohome/etc/spack/defaults/config.yaml\r\nlib/spack/spack/database.py:364 ==> [2021-05-05-18:47:24.870917] DATABASE LOCK TIMEOUT: 3s              \r\nlib/spack/spack/database.py:368 ==> [2021-05-05-18:47:24.871290] PACKAGE LOCK TIMEOUT: No timeout     \r\nlib/spack/spack/database.py:364 ==> [2021-05-05-18:47:24.872378] DATABASE LOCK TIMEOUT: 3s                                                          \r\nlib/spack/spack/database.py:368 ==> [2021-05-05-18:47:24.872770] PACKAGE LOCK TIMEOUT: No timeout     \r\nlib/spack/spack/bootstrap.py:199 ==> [2021-05-05-18:47:24.873147] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\nlib/spack/spack/bootstrap.py:211 ==> [2021-05-05-18:47:24.874098] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/tmp/spack-nohome/etc/spack/defaults\r\nlib/spack/spack/bootstrap.py:212 ==> [2021-05-05-18:47:24.874421] [BOOTSTRAP CONFIG SCOPE] name=defaults/linux, path=/tmp/spack-nohome/etc/spack/defau\r\nlts/linux                                                                                                                                             \r\nlib/spack/spack/bootstrap.py:211 ==> [2021-05-05-18:47:24.874743] [BOOTSTRAP CONFIG SCOPE] name=system, path=/etc/spack\r\nlib/spack/spack/bootstrap.py:212 ==> [2021-05-05-18:47:24.875050] [BOOTSTRAP CONFIG SCOPE] name=system/linux, path=/etc/spack/linux\r\nlib/spack/spack/bootstrap.py:211 ==> [2021-05-05-18:47:24.875368] [BOOTSTRAP CONFIG SCOPE] name=site, path=/tmp/spack-nohome/etc/spack\r\nlib/spack/spack/bootstrap.py:212 ==> [2021-05-05-18:47:24.875673] [BOOTSTRAP CONFIG SCOPE] name=site/linux, path=/tmp/spack-nohome/etc/spack/linux\r\nlib/spack/spack/bootstrap.py:211 ==> [2021-05-05-18:47:24.875994] [BOOTSTRAP CONFIG SCOPE] name=user, path=/home/willmore/.spack                      \r\nlib/spack/spack/bootstrap.py:212 ==> [2021-05-05-18:47:24.876299] [BOOTSTRAP CONFIG SCOPE] name=user/linux, path=/home/willmore/.spack/linux\r\nlib/spack/spack/bootstrap.py:248 ==> [2021-05-05-18:47:24.885146] [BOOTSTRAP ROOT SPEC] clingo: clingo-bootstrap@spack+python %gcc target=x86_64\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:24.887876] Reading config file /tmp/spack-nohome/etc/spack/defaults/config.yaml\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.139513] diffutils applying constraint iconv\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.159906] ncurses applying constraint pkgconfig          \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.161582] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.163352] gdbm applying constraint readline          \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.167548] perl applying constraint gdbm                     \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.169210] perl applying constraint berkeley-db           \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.170864] bison applying constraint diffutils                                     \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.172461] bison applying constraint m4                                                            lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.174075] bison applying constraint perl                                                          y~sqlite3+static~tpci+shared arch=linux-opelib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.176659] python applying constraint pkgconfig@0.9.0:                                             use_leap15-zen2 ^anv@1.16%oneapi@2021.2.0 alib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.179688] python applying constraint pkgconfig@0.9.0:                                             api@2021.2.0+cxx~dool@2.4.6%oneapi@2021.2.0lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.183589] clingo-bootstrap applying constraint cmake@3.16.0:                                      -opensuse_leap15-za2230ee048d2d07ace1062efe-rpath fabrics=none patches=60celib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.185584] clingo-bootstrap applying constraint re2c@0.13:                                         1.2.0 arch=linux-o_leap15-zen2 ^ncurses@6.2pi@2021.2.0 arch=linux-opensuse_lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.188279] clingo-bootstrap applying constraint bison@2.5:                                         -zen2 ^libpciaccesa3d7e00cc94,62fc8a8bf7665 arch=linux-opensuse_leap15-zen220bc14d98c572ef7883b9fcd254c3f232c2f3a1337748lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.190190] clingo-bootstrap applying constraint python                                              arch=linux-opensulib/spack/spack/config.py:981 ==> [2021-05-05-18:47:25.193324] Reading config file /tmp/spack-nohome/etc/spack/defaults/packages.yaml                 a2230ee048d2d07aceleap15-zen2 ^readline@8.1.0 arch=linux-opensuse_leap15-zenux-opensuse_leap15-zen2 ^libedit@3.1-2021021ap15-zen2 ^gdbm@1.19%oneapi@2021.2.0 arch=linux-opensuse_leap15-zenlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:25.266605] Reading config file /home/willmore/.spack/packages.yaml                                853c8 arch=linux-oeap15-zen2 ^zlib@1.2.11%o97ab2327a2230ee048d2d07ace1062ef=linux-opensuse_leap15-zen2 ^libsigsegv@2.13%.16%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libpciaccess@0toconf@2.69%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^automake@1.16.3%oneapi@2021.2.0 arch=linux-opensuse_lib/spack/spack/config.py:981 ==> [2021-05-05-18:47:25.272154] Reading config file /tmp/spack-nohome/etc/spack/defaults/config.yaml                   d78cbbb85de625bad2                         2%oneapi@2021.2.0~symlinks+terml3877ab548f88597ab2327a2230ee048d2d07ace1062ef021.2.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062n2 ^libedit@3.1-20210216%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libevent@2.1.12%oneapi@2021.2.0+openssllib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.414895] clingo-bootstrap applying constraint cmake@3.16.0:                                      8.5p1%oneapi@2021.                         afafec4c085a8825c006 arch=linux-ib abi=none arch=linux-opensuse_leap15-zen2 ^ ^numactl@2.0.14%oneapi@2021.2.0 patches=4e1d78cbbb85de625bad28705enux-opensuse_leap15-zen2 ^m4@1.4.18%oneapi@2021.2.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062eflib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.418804] clingo-bootstrap applying constraint re2c@0.13:                                         m+shared+threads a                         +cpanm+shared+threads arch=linux21.2.0 arch=linux-opensuse_leap15-zen2 ^opensap15-zen2 ^perl@5.32.1%oneapi@2021.2.0+cpanm+shared+threads arch=li8856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006 arch=linux-lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.421078] clingo-bootstrap applying constraint bison@2.5:                                         -zen2 ^util-macros                         -opensuse_leap15-zen2 ^xz@5.2.5%line@8.1%oneapi@2021.2.0 arch=linux-opensuse_ap15-zen2 ^zlib@1.2.11%oneapi@2021.2.0+optimize+pic+shared arch=lin.0 arch=linux-opensuse_leap15-zen2 ^util-macros@1.19.1%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^xz@5.2.5%lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.422758] bison applying constraint diffutils                                                     imize+pic+shared a                         lib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.423913] diffutils applying constraint libiconv                                \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.425545] bison applying constraint m4     \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.427297] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.428915] perl applying constraint gdbm              \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.430579] gdbm applying constraint readline     \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.432248] readline applying constraint ncurses                                                    \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.433597] ncurses applying constraint pkgconfig                                                   \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.435224] perl applying constraint berkeley-db                                                    \r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.437095] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.438297] python applying constraint pkgconfig@0.9.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.458556] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.462328] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.464477] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.466036] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.467289] diffutils applying constraint libiconv\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.468813] bison applying constraint m4\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.470430] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.471935] perl applying constraint gdbm\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.473482] gdbm applying constraint readline\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.475052] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.476254] ncurses applying constraint pkgconf\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.477817] perl applying constraint berkeley-db\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.479579] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.480731] python applying constraint pkgconf\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.497185] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.500937] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.503096] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.504635] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.505774] diffutils applying constraint libiconv\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.507311] bison applying constraint m4\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.508914] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.510425] perl applying constraint gdbm\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.511973] gdbm applying constraint readline\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.513670] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.514877] ncurses applying constraint pkgconf\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.516443] perl applying constraint berkeley-db\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.518207] clingo-bootstrap applying constraint python\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:25.532458] Reading config file /home/willmore/.spack/linux/compilers.yaml\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.697686] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.711750] openssl applying constraint perl@5.14.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.713649] perl applying constraint gdbm\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.715351] gdbm applying constraint readline\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.717053] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.718970] ncurses applying constraint pkgconf@1.7.4%gcc@10.2.0 arch=linux-opensuse_leap15-x86_64\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.720937] perl applying constraint berkeley-db\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.722574] openssl applying constraint zlib\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.724121] openssl applying constraint perl@5.14.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.726114] cmake applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.734222] cmake applying constraint openssl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.736131] cmake applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.738433] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.740905] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.742594] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.744052] diffutils applying constraint libiconv@1.16%gcc@10.2.0 arch=linux-opensuse_leap15-x86_64\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.745742] bison applying constraint m4\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.749606] m4 applying constraint libsigsegv\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.751173] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.752806] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.754567] bison applying constraint m4\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.756146] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.758159] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.760537] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.762902] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.765299] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.767340] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.835795] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.844054] cmake applying constraint openssl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.845854] openssl applying constraint zlib\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.847706] openssl applying constraint perl@5.14.0:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.849604] perl applying constraint gdbm\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.851324] gdbm applying constraint readline\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.853039] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.854781] ncurses applying constraint pkgconf@1.7.4%gcc@10.2.0 arch=linux-opensuse_leap15-x86_64\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.856747] perl applying constraint berkeley-db\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.858794] cmake applying constraint ncurses\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.861111] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.863621] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.865322] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.866804] diffutils applying constraint libiconv@1.16%gcc@10.2.0 arch=linux-opensuse_leap15-x86_64\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.868685] bison applying constraint m4\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.870466] m4 applying constraint libsigsegv\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.872118] bison applying constraint perl\r\nlib/spack/spack/spec.py:2817 ==> [2021-05-05-18:47:25.874144] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:25.930551] Ordered hashes [m4]: m4/29/3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39c\r\nd00, m4/37/fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:25.931071] Ordered hashes [berkeley-db]: berkeley-db/51/b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2\r\n176540d2c05aff41de522\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:26.040062] Reading config file /tmp/spack-nohome/etc/spack/defaults/repos.yaml\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:27.499412] Reading config file /home/willmore/.spack/linux/compilers.yaml\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:27.582452] Reading config file /tmp/spack-nohome/etc/spack/defaults/packages.yaml\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:27.621851] Reading config file /home/willmore/.spack/packages.yaml\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.709534] opt_criterion(15, version weight)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.709849] opt_criterion(14, number of non-default variants (roots))\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710014] opt_criterion(13, multi-valued variants + preferred providers for roots)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710180] opt_criterion(11, number of non-default variants (non-roots))\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710342] opt_criterion(9, number of non-default providers (non-roots))\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710499] opt_criterion(8, count of non-root multi-valued variants)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710655] opt_criterion(7, compiler mismatches)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710810] opt_criterion(6, version badness)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.710965] opt_criterion(5, non-preferred compilers)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.711120] opt_criterion(4, target matches)\r\nlib/spack/spack/solver/asp.py:1569 ==> [2021-05-05-18:47:35.711275] opt_criterion(3, non-preferred targets)\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:35.718693] Ordered hashes [openmpi]: openmpi/392/60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480\r\nf96466169ac4c8\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:35.719027] Ordered hashes [m4]: m4/64/3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39c\r\nd00, m4/67/d66f3af7fff6848d5969b1de4d3408e502e8a6633c7aa32e2c3541ab873c4ed9, m4/72/fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:35.719396] Ordered hashes [berkeley-db]: berkeley-db/89/b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2\r\n176540d2c05aff41de522\r\nlib/spack/spack/spec.py:2493 ==> [2021-05-05-18:47:35.719725] Ordered hashes [numactl]: numactl/194/4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd\r\n383a3d7e00cc94, numactl/195/62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006\r\nlib/spack/spack/config.py:981 ==> [2021-05-05-18:47:36.158232] Reading config file /tmp/spack-nohome/etc/spack/defaults/config.yaml\r\nlib/spack/spack/compilers/__init__.py:740 ==> [2021-05-05-18:47:36.201110] [TOOLCHAIN] MATCH Oneapi\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.207583] No libraries found for hwloc\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.207816] No headers found for hwloc\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.209136] No libraries found for libevent\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.209361] No headers found for libevent\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.210638] No libraries found for libiconv\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.210857] No headers found for libiconv\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.212154] No libraries found for libpciaccess\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.212380] No headers found for libpciaccess\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.213730] No libraries found for libxml2\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.215189] No headers found for ncurses\r\nlib/spack/spack/build_environment.py:384 ==> [2021-05-05-18:47:36.216561] No libraries found for numactl\r\nlib/spack/spack/build_environment.py:398 ==> [2021-05-05-18:47:36.216793] No headers found for numactl\r\nTraceback (most recent call last):\r\n  File \"/tmp/spack-nohome/bin/spack\", line 76, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/tmp/spack-nohome/lib/spack/spack/main.py\", line 774, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/main.py\", line 498, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/cmd/build_env.py\", line 16, in build_env\r\n    env_utility.emulate_env_utility('build-env', 'build', args)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/cmd/common/env_utility.py\", line 63, in emulate_env_utility\r\n    build_environment.setup_package(spec.package, args.dirty, context)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/build_environment.py\", line 794, in setup_package\r\n    set_build_environment_variables(pkg, env, dirty)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/build_environment.py\", line 396, in set_build_environment_variables\r\n    include_dirs.extend(query.headers.directories)\r\n  File \"/tmp/spack-nohome/lib/spack/spack/spec.py\", line 974, in __get__\r\n    raise AttributeError(message)\r\nAttributeError: Query of package 'openmpi' for 'headers' failed\r\n        prefix : /tmp/spack-nohome/opt/spack/linux-opensuse_leap15-zen2/oneapi-2021.2.0/openmpi-4.0.5-wp2bm2tfwua3e2aequ5lndpu3orepu75\r\n        spec : openmpi@4.0.5%oneapi@2021.2.0~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~singularit\r\ny~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8 schedulers=non\r\ne arch=linux-opensuse_leap15-zen2 ^autoconf@2.69%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^automake@1.16.3%oneapi@2021.2.0 arch=linux-opensuse_\r\nleap15-zen2 ^berkeley-db@18.1.40%oneapi@2021.2.0+cxx~docs+stl patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-open\r\nsuse_leap15-zen2 ^gdbm@1.19%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^hwloc@2.4.1%oneapi@2021.2.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci\r\n+shared arch=linux-opensuse_leap15-zen2 ^libedit@3.1-20210216%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libevent@2.1.12%oneapi@2021.2.0+openssl\r\n arch=linux-opensuse_leap15-zen2 ^libiconv@1.16%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libpciaccess@0.16%oneapi@2021.2.0 arch=linux-opensuse\r\n_leap15-zen2 ^libsigsegv@2.13%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libtool@2.4.6%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^libxml2@\r\n2.9.10%oneapi@2021.2.0~python arch=linux-opensuse_leap15-zen2 ^m4@1.4.18%oneapi@2021.2.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062ef\r\ne81fc92e91b7f39cd00,d66f3af7fff6848d5969b1de4d3408e502e8a6633c7aa32e2c3541ab873c4ed9,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 \r\narch=linux-opensuse_leap15-zen2 ^ncurses@6.2%oneapi@2021.2.0~symlinks+termlib abi=none arch=linux-opensuse_leap15-zen2 ^numactl@2.0.14%oneapi@2021.2.0\r\n patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006 arch=linux-\r\nopensuse_leap15-zen2 ^openssh@8.5p1%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^openssl@1.1.1k%oneapi@2021.2.0~docs+systemcerts arch=linux-opensu\r\nse_leap15-zen2 ^perl@5.32.1%oneapi@2021.2.0+cpanm+shared+threads arch=linux-opensuse_leap15-zen2 ^pkgconf@1.7.4%oneapi@2021.2.0 arch=linux-opensuse_le\r\nap15-zen2 ^readline@8.1%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^util-macros@1.19.1%oneapi@2021.2.0 arch=linux-opensuse_leap15-zen2 ^xz@5.2.5%\r\noneapi@2021.2.0~pic arch=linux-opensuse_leap15-zen2 ^zlib@1.2.11%oneapi@2021.2.0+optimize+pic+shared arch=linux-opensuse_leap15-zen2\r\n        queried as : openmpi\r\n        extra parameters : []\r\n\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n* **Spack:** 0.16.1-2508-901f7c14fb\r\n* **Python:** 3.6.12\r\n* **Platform:** linux-opensuse_leap15-zen2\r\n* **Concretizer:** clingo\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n\r\n<!-- We encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively!\r\n\r\nIf you want to ask a question about the tool (how to use it, what it can currently do, etc.), try the `#general` channel on our Slack first. We have a welcoming community and chances are you'll get your reply faster and without opening an issue.\r\n\r\nOther than that, thanks for taking the time to contribute to Spack! -->\r\n",
    "performed_via_github_app": null
}