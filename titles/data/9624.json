{
    "url": "https://api.github.com/repos/spack/spack/issues/9624",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9624/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9624/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9624/events",
    "html_url": "https://github.com/spack/spack/issues/9624",
    "id": 373614942,
    "node_id": "MDU6SXNzdWUzNzM2MTQ5NDI=",
    "number": 9624,
    "title": "Documented feature of conditionally autoloading dependencies doesn't work",
    "user": {
        "login": "SteVwonder",
        "id": 874707,
        "node_id": "MDQ6VXNlcjg3NDcwNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/874707?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/SteVwonder",
        "html_url": "https://github.com/SteVwonder",
        "followers_url": "https://api.github.com/users/SteVwonder/followers",
        "following_url": "https://api.github.com/users/SteVwonder/following{/other_user}",
        "gists_url": "https://api.github.com/users/SteVwonder/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/SteVwonder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SteVwonder/subscriptions",
        "organizations_url": "https://api.github.com/users/SteVwonder/orgs",
        "repos_url": "https://api.github.com/users/SteVwonder/repos",
        "events_url": "https://api.github.com/users/SteVwonder/events{/privacy}",
        "received_events_url": "https://api.github.com/users/SteVwonder/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-10-24T18:23:10Z",
    "updated_at": "2018-10-25T21:56:03Z",
    "closed_at": "2018-10-25T21:56:03Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I followed the documentation on [autoloading direct dependencies for packages dependent on python](https://spack.readthedocs.io/en/latest/module_file_support.html?highlight=autoload#autoload-dependencies) and now every package has it's direct dependencies autoloaded. (This happens for both lmod and tcl modules).\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ git clone https://github.com/spack/spack.git\r\n$ # follow the documented instructions linked above to add `^python: autoload: 'direct'` to `~/.spack/modules.yaml`\r\n$ spack install emacs\r\n$ module load emacs-26.1-gcc-4.8.5-6idl5st\r\n$ ml\r\n\r\nCurrently Loaded Modules:\r\n  1) pcre-8.42-gcc-4.8.5-vwvgnbn   2) ncurses-6.1-gcc-4.8.5-wkyck36   3) zlib-1.2.11-gcc-4.8.5-vhzh5cf   4) emacs-26.1-gcc-4.8.5-6idl5st\r\n```\r\n\r\n### Error Message\r\n\r\nSee above for the current, unexpected out (note that emacs and its direct dependencies are loaded).\r\nSee below for the expected output (note the lack of emacs' direct dependencies). This is the same output that I get if I don't include the `^python: autoload: 'direct'` that is suggested in the documentation.\r\n```console\r\n$ git clone https://github.com/spack/spack.git\r\n$ # follow the documented instructions linked above to add `^python: autoload: 'direct'` to `~/.spack/modules.yaml`\r\n$ spack install emacs\r\n$ module load emacs-26.1-gcc-4.8.5-6idl5st\r\n$ ml\r\n\r\nCurrently Loaded Modules:\r\n  1) emacs-26.1-gcc-4.8.5-6idl5st\r\n```\r\n\r\n### Information on your system\r\n\r\n 1. I'm running RHEL7\r\n 2. \r\n```\r\n\u2192 spack config blame modules\r\n---                                                                         modules:\r\n~/.spack/modules.yaml:17                                         enable:\r\n~/.spack/modules.yaml:18                                         - lmod\r\n~/.spack/modules.yaml:19                                         - tcl\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:19          - dotkit\r\n~/Repositories/spack/etc/spack/defaults/linux/modules.yaml:17    prefix_inspections:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:21            bin:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:22            - PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:23            man:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:24            - MANPATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:25            share/man:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:26            - MANPATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:27            share/aclocal:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:28            - ACLOCAL_PATH\r\n~/Repositories/spack/etc/spack/defaults/linux/modules.yaml:18      lib:\r\n~/Repositories/spack/etc/spack/defaults/linux/modules.yaml:19      - LD_LIBRARY_PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:30            - LIBRARY_PATH\r\n~/Repositories/spack/etc/spack/defaults/linux/modules.yaml:20      lib64:\r\n~/Repositories/spack/etc/spack/defaults/linux/modules.yaml:21      - LD_LIBRARY_PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:32            - LIBRARY_PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:33            include:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:34            - CPATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:35            lib/pkgconfig:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:36            - PKG_CONFIG_PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:37            lib64/pkgconfig:\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:38            - PKG_CONFIG_PATH\r\n~/Repositories/spack/etc/spack/defaults/modules.yaml:40            ? ''\r\n~/.spack/modules.yaml:23                                           : - CMAKE_PREFIX_PATH\r\n~/.spack/modules.yaml:26                                         lmod:\r\n~/.spack/modules.yaml:27                                           hierarchy:\r\n~/.spack/modules.yaml:27                                           - mpi\r\n~/.spack/modules.yaml:27                                           blacklist_implicits: False\r\n~/.spack/modules.yaml:27                                           verbose: False\r\n~/.spack/modules.yaml:24                                           hash_length: 7\r\n~/.spack/modules.yaml:25                                           core_compilers:\r\n~/.spack/modules.yaml:28                                           - gcc@4.8.5\r\n~/.spack/modules.yaml:29                                           ^python:\r\n~/.spack/modules.yaml:20                                             autoload: direct\r\n~/.spack/modules.yaml:21                                         tcl:\r\n~/.spack/modules.yaml:22                                           ^python:\r\n~/.spack/modules.yaml:22                                             autoload: direct\r\n~/.spack/modules.yaml:22                                           blacklist_implicits: False\r\n~/.spack/modules.yaml:22                                           verbose: False\r\n\r\n```",
    "performed_via_github_app": null
}