{
    "url": "https://api.github.com/repos/spack/spack/issues/9375",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9375/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9375/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9375/events",
    "html_url": "https://github.com/spack/spack/issues/9375",
    "id": 364625833,
    "node_id": "MDU6SXNzdWUzNjQ2MjU4MzM=",
    "number": 9375,
    "title": "spack buildcache doesn't generate module files",
    "user": {
        "login": "Lnk2past",
        "id": 6456398,
        "node_id": "MDQ6VXNlcjY0NTYzOTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6456398?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Lnk2past",
        "html_url": "https://github.com/Lnk2past",
        "followers_url": "https://api.github.com/users/Lnk2past/followers",
        "following_url": "https://api.github.com/users/Lnk2past/following{/other_user}",
        "gists_url": "https://api.github.com/users/Lnk2past/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Lnk2past/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Lnk2past/subscriptions",
        "organizations_url": "https://api.github.com/users/Lnk2past/orgs",
        "repos_url": "https://api.github.com/users/Lnk2past/repos",
        "events_url": "https://api.github.com/users/Lnk2past/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Lnk2past/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2018-09-27T19:43:16Z",
    "updated_at": "2018-10-15T18:18:17Z",
    "closed_at": "2018-10-12T17:43:07Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I have encountered what I believe to be 2 bugs with the ```buildcache``` feature\r\n\r\n- Bug 1: Cannot install dependencies from build cache\r\n- Bug 2: Modules must be refreshed after being installed from buildcache\r\n\r\n### Information on your system\r\nI am running spack inside of Docker containers for SLES12 SP1. Other than what Spack needs to run, nothing else is installed in any of the containers.\r\n\r\n### Bug 1 - cannot install from cache\r\nWithin Docker containers I have built a number of compilers using Spack (multiple versions of GCC and LLVM/Clang). For each one I created a buildcache and pushed them to a central webserver (all to the same repository, thus making me from index.html from each before uploading (otherwise we would be overwriting that file constantly).\r\n\r\nWhile in another Docker container, I want to install another package that may share dependencies with some GCC or LLVM that was already built. I want to simply use whatever is in the build cache if it is there. So I add the mirror and install whatever it is I want to install.\r\n\r\ne.g.\r\n```\r\nspack mirror add my_build_cache https://server/path/to/buildcache/\r\nspack install --use-cache llvm@3.5.1\r\n```\r\n\r\nIn this particular case, it is able to pull some packages out of the buildcache and build others that are not there, but fails with an unknown error when it tries to pull out ```bzip2@1.0.6``` from the build cache. _Nothing_ is reported, simply an ```==> Error:```\r\n\r\n### Bug 2 - modules installed from build cache must be refreshed\r\nAfter building a compiler in one Docker container and uploading it a build cache, I attempted to install it in another Docker container. I added my mirror pointing to the build cache, and simply did:\r\n\r\n```\r\nspack install gcc@8.2.0\r\n```\r\n\r\nThis installation completed, but spack could not find the new compiler. I had to do the following:\r\n\r\n```\r\nspack module refresh gcc@8.2.0\r\n```\r\n\r\nAt this point, spack was able to find the compiler.\r\n",
    "performed_via_github_app": null
}