{
    "url": "https://api.github.com/repos/spack/spack/issues/7061",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7061/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7061/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7061/events",
    "html_url": "https://github.com/spack/spack/issues/7061",
    "id": 291419632,
    "node_id": "MDU6SXNzdWUyOTE0MTk2MzI=",
    "number": 7061,
    "title": "`spack install opengl` fails during the fetch phase when it should fail during install",
    "user": {
        "login": "goxberry",
        "id": 321479,
        "node_id": "MDQ6VXNlcjMyMTQ3OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/321479?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/goxberry",
        "html_url": "https://github.com/goxberry",
        "followers_url": "https://api.github.com/users/goxberry/followers",
        "following_url": "https://api.github.com/users/goxberry/following{/other_user}",
        "gists_url": "https://api.github.com/users/goxberry/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/goxberry/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/goxberry/subscriptions",
        "organizations_url": "https://api.github.com/users/goxberry/orgs",
        "repos_url": "https://api.github.com/users/goxberry/repos",
        "events_url": "https://api.github.com/users/goxberry/events{/privacy}",
        "received_events_url": "https://api.github.com/users/goxberry/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2018-01-25T01:27:35Z",
    "updated_at": "2018-04-12T14:25:49Z",
    "closed_at": "2018-04-12T14:25:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "# Summary\r\n\r\n#6551 introduced a dummy `opengl` package that intends to throw an error during the `install` phase of execution with a helpful message asking a user to install OpenGL as an external package. However, this message will never throw because the URL supplied as an argument to the `version` directive is invalid, so instead, the package throws a generic error message that has nothing to do with OpenGL.\r\n\r\n### Expected Result\r\n\r\n```console\r\n$ spack install opengl\r\n==> Error: Unable to install opengl\r\nThis package is intended to be a placeholder for\r\nsystem-provided OpenGL libraries from hardware vendors.  Please\r\ndownload and install OpenGL drivers/libraries for your graphics\r\nhardware separately, and then set that up as an external package.\r\nAn example of a working packages.yaml:\r\n\r\npackages:\r\n    opengl:\r\n         paths:\r\n             opengl@4.5.0: /opt/opengl\r\n                  buildable: False\r\n\r\nIn that case, /opt/opengl/ should contain these two folders:\r\n\r\n        include/GL/       (opengl headers, including \"gl.h\")\r\n        lib               (opengl libraries, including \"libGL.so\")\"\"\"\r\n```\r\n\r\n### Actual Result\r\n\r\n```console\r\n$ spack install opengl\r\n==> Error: Unable to parse extension from https://www.opengl.org/.\r\n\r\nIf this URL is for a tarball but does not include the file extension\r\nin the name, you can explicitly declare it with the following syntax:\r\n\r\n    version('1.2.3', 'hash', extension='tar.gz')\r\n\r\nIf this URL is for a download like a .jar or .whl that does not need\r\nto be expanded, or an uncompressed installation script, you can tell\r\nSpack not to expand it with the following syntax:\r\n\r\n    version('1.2.3', 'hash', expand=False)\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install opengl\r\n```\r\n\r\n### Information on your system\r\n\r\nI think the only information needed to reproduce is a `packages.yaml` that does not contain an `opengl:` clause. My `packages.yaml` does not:\r\n\r\npackages.yaml\r\n```console\r\npackages:\r\n  perl:\r\n    variants: +cpanm+shared\r\n  ruby:\r\n    variants: +openssl+readline\r\n  pcre:\r\n    variants: +jit+utf\r\n  netcdf:\r\n    variants: +mpi\r\n  hdf5:\r\n    variants: +mpi\r\n  qt:\r\n    variants: +opengl\r\n  all:\r\n    compiler: [clang@8.1.0-apple, clang, gcc]\r\n    providers:\r\n      awk: [gawk]\r\n      blas: [openblas, atlas, intel-mkl, netlib-lapack]\r\n      daal: [intel-daal]\r\n      elf: [elfutils]\r\n      golang: [gcc]\r\n      ipp: [intel-ipp]\r\n      java: [jdk]\r\n      lapack: [openblas, atlas, intel-mkl, netlib-lapack]\r\n      mkl: [intel-mkl]\r\n      mpe: [mpe2]\r\n      mpi: [openmpi, mpich, intel-mpi]\r\n      opencl: [pocl]\r\n      openfoam: [openfoam-com, openfoam-org, foam-extend]\r\n      pil: [py-pillow]\r\n      pkgconfig: [pkgconf, pkg-config]\r\n      scalapack: [netlib-scalapack, intel-mkl]\r\n      szip: [libszip, libaec]\r\n      tbb: [intel-tbb]\r\n      jpeg: [libjpeg-turbo, libjpeg]\r\n      cmake: [cmake%clang]\r\n    paths: {}\r\n    modules: {}\r\n    buildable: true\r\n    version: []\r\n```",
    "performed_via_github_app": null
}