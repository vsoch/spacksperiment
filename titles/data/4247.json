{
    "url": "https://api.github.com/repos/spack/spack/issues/4247",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4247/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4247/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4247/events",
    "html_url": "https://github.com/spack/spack/issues/4247",
    "id": 228652118,
    "node_id": "MDU6SXNzdWUyMjg2NTIxMTg=",
    "number": 4247,
    "title": "For some packages (dos2unix, lmod) untaring the package results in errors when using tar built with spack instead of using /bin/tar",
    "user": {
        "login": "samfux84",
        "id": 11944875,
        "node_id": "MDQ6VXNlcjExOTQ0ODc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11944875?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/samfux84",
        "html_url": "https://github.com/samfux84",
        "followers_url": "https://api.github.com/users/samfux84/followers",
        "following_url": "https://api.github.com/users/samfux84/following{/other_user}",
        "gists_url": "https://api.github.com/users/samfux84/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/samfux84/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/samfux84/subscriptions",
        "organizations_url": "https://api.github.com/users/samfux84/orgs",
        "repos_url": "https://api.github.com/users/samfux84/repos",
        "events_url": "https://api.github.com/users/samfux84/events{/privacy}",
        "received_events_url": "https://api.github.com/users/samfux84/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446623247,
            "node_id": "MDU6TGFiZWw0NDY2MjMyNDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/unreproducible",
            "name": "unreproducible",
            "color": "fbca04",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-05-15T09:13:44Z",
    "updated_at": "2017-05-16T06:29:56Z",
    "closed_at": "2017-05-16T06:29:56Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hi,\r\n\r\nI have built tar with spack:\r\n\r\nspack install tar@1.29 %gcc@4.8.5 arch=linux-centos7-x86_64\r\n\r\nThe package has built without giving any error message. I would like spack to use this tar version to unpack the sources for any other spack package that is installed. For most packages this works without any problem. For some cases (dos2unix, lmod), using the self-compiled tar instead of the one in /bin/tar results in error messages:\r\n\r\n```\r\n[spackapps@lo-login-02 bin]$ spack install dos2unix@7.3.4 %gcc@4.8.5 arch=linux-centos7-x86_64\r\n==> Installing dos2unix\r\n==> Fetching https://waterlan.home.xs4all.nl/dos2unix/dos2unix-7.3.4.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /cluster/apps/spack/var/spack/stage/dos2unix-7.3.4-zlsgdhmavstgkyubcnmucmi3gfb3cqrm/dos2unix-7.3.4.tar.gz\r\n/cluster/spack/apps/linux-centos7-x86_64/sfos/bin/tar: Skipping to next header\r\n/cluster/spack/apps/linux-centos7-x86_64/sfos/bin/tar: Exiting with failure status due to previous errors\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/cluster/spack/apps/linux-centos7-x86_64/sfos/bin/tar' '-xf' '/cluster/apps/spack/var/spack/stage/dos2unix-7.3.4-zlsgdhmavstgkyubcnmucmi3gfb3cqrm/dos2unix-7.3.4.tar.gz'\r\n/cluster/apps/spack/lib/spack/spack/package.py:939, in do_stage:\r\n     932      def do_stage(self, mirror_only=False):\r\n     933          \"\"\"Unpacks the fetched tarball, then changes into the expanded tarball\r\n     934             directory.\"\"\"\r\n     935          if not self.spec.concrete:\r\n     936              raise ValueError(\"Can only stage concrete packages.\")\r\n     937  \r\n     938          self.do_fetch(mirror_only)\r\n  >> 939          self.stage.expand_archive()\r\n     940          self.stage.chdir_to_source()\r\n\r\n\r\n[spackapps@lo-login-02 bin]$\r\n```\r\nWhen using the tar version from /bin/tar, the error does not show up.\r\n\r\nDid anyone else also notice this problem ?",
    "performed_via_github_app": null
}