{
    "url": "https://api.github.com/repos/spack/spack/issues/16007",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16007/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16007/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16007/events",
    "html_url": "https://github.com/spack/spack/issues/16007",
    "id": 598403055,
    "node_id": "MDU6SXNzdWU1OTg0MDMwNTU=",
    "number": 16007,
    "title": "Installation issue: rust on macOS",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1888436240,
            "node_id": "MDU6TGFiZWwxODg4NDM2MjQw",
            "url": "https://api.github.com/repos/spack/spack/labels/rust",
            "name": "rust",
            "color": "B7410E",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-04-12T03:42:16Z",
    "updated_at": "2020-04-13T22:02:37Z",
    "closed_at": "2020-04-13T22:02:37Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install rust\r\n...\r\n     Running `/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2-tools/release/build/openssl-sys-f5b6b6a6bcfd2d47/build-script-main`\r\nerror: failed to run custom build command for `openssl-sys v0.9.53`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2-tools/release/build/openssl-sys-f5b6b6a6bcfd2d47/build-script-main` (exit code: 101)\r\n--- stdout\r\ncargo:rustc-cfg=const_fn\r\ncargo:rerun-if-env-changed=X86_64_APPLE_DARWIN_OPENSSL_LIB_DIR\r\nX86_64_APPLE_DARWIN_OPENSSL_LIB_DIR unset\r\ncargo:rerun-if-env-changed=OPENSSL_LIB_DIR\r\nOPENSSL_LIB_DIR unset\r\ncargo:rerun-if-env-changed=X86_64_APPLE_DARWIN_OPENSSL_INCLUDE_DIR\r\nX86_64_APPLE_DARWIN_OPENSSL_INCLUDE_DIR unset\r\ncargo:rerun-if-env-changed=OPENSSL_INCLUDE_DIR\r\nOPENSSL_INCLUDE_DIR unset\r\ncargo:rerun-if-env-changed=X86_64_APPLE_DARWIN_OPENSSL_DIR\r\nX86_64_APPLE_DARWIN_OPENSSL_DIR unset\r\ncargo:rerun-if-env-changed=OPENSSL_DIR\r\nOPENSSL_DIR unset\r\nrun pkg_config fail: \"Failed to run `\\\"pkg-config\\\" \\\"--libs\\\" \\\"--cflags\\\" \\\"openssl\\\"`: No such file or directory (os error 2)\"\r\n\r\n--- stderr\r\nrustc command: \"DYLD_LIBRARY_PATH\"=\"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2/lib\" \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2/bin/rustc\" \"--crate-name\" \"probe0\" \"--crate-type=lib\" \"--out-dir\" \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2-tools/x86_64-apple-darwin/release/build/openssl-sys-0dac76d1a259d6d8/out\" \"--emit=llvm-ir\" \"--target\" \"x86_64-apple-darwin\" \"-\" \"--sysroot\" \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2\" \"-C\" \"debug-assertions=n\"\r\nsysroot: \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2\"\r\nlibdir: \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/x86_64-apple-darwin/stage2/lib\"\r\nthread 'main' panicked at '\r\n\r\nCould not find directory of OpenSSL installation, and this `-sys` crate cannot\r\nproceed without this knowledge. If OpenSSL is installed and this crate had\r\ntrouble finding it,  you can set the `OPENSSL_DIR` environment variable for the\r\ncompilation process.\r\n\r\nMake sure you also have the development packages of openssl installed.\r\nFor example, `libssl-dev` on Ubuntu or `openssl-devel` on Fedora.\r\n\r\nIf you're in a situation where you think the directory *should* be found\r\nautomatically, please open a bug at https://github.com/sfackler/rust-openssl\r\nand include information about your system as well as this message.\r\n\r\n$HOST = x86_64-apple-darwin\r\n$TARGET = x86_64-apple-darwin\r\nopenssl-sys = 0.9.53\r\n\r\n\r\n\r\nIt looks like you're compiling on macOS, where the system contains a version of\r\nOpenSSL 0.9.8. This crate no longer supports OpenSSL 0.9.8.\r\n\r\nAs a consumer of this crate, you can fix this error by using Homebrew to\r\ninstall the `openssl` package, or as a maintainer you can use the openssl-sys\r\n0.7 crate for support with OpenSSL 0.9.8.\r\n\r\nUnfortunately though the compile cannot continue, so aborting.\r\n\r\n', /private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/vendor/openssl-sys/build/find_normal.rs:150:5\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\ncommand did not execute successfully: \"/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/spack_bootstrap/bin/cargo\" \"build\" \"-Zconfig-profile\" \"--target\" \"x86_64-apple-darwin\" \"-Zbinary-dep-depinfo\" \"-j\" \"4\" \"-v\" \"--release\" \"--frozen\" \"--manifest-path\" \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/src/tools/cargo/Cargo.toml\" \"--message-format\" \"json-render-diagnostics\"\r\nexpected success, got: exit code: 101\r\nTraceback (most recent call last):\r\n  File \"./x.py\", line 11, in <module>\r\n    bootstrap.main()\r\n  File \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/src/bootstrap/bootstrap.py\", line 951, in main\r\n    bootstrap(help_triggered)\r\n  File \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/src/bootstrap/bootstrap.py\", line 937, in bootstrap\r\n    run(args, env=env, verbose=build.verbose)\r\n  File \"/private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/src/bootstrap/bootstrap.py\", line 141, in run\r\n    raise RuntimeError(err)\r\nRuntimeError: failed to run: /private/var/folders/21/hwq39zyj4g36x6zjfyl5l8080000gn/T/Adam/spack-stage/spack-stage-rust-1.42.0-bstzydu5kantx3k4npotzo5mqqw3fafw/spack-src/build/bootstrap/debug/bootstrap build\r\n```\r\nWe might need to add a build dependency on `pkgconfig` or set `OPENSSL_DIR`.\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.14.1-593-08a491b062\r\n* **Python:** 3.7.6\r\n* **Platform:** darwin-catalina-ivybridge\r\n\r\n### Additional information\r\n\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/4465818/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/4465819/spack-build-env.txt)\r\n\r\n@AndrewGaspar \r\n\r\n### General information\r\n\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}