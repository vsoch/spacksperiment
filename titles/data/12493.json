{
    "url": "https://api.github.com/repos/spack/spack/issues/12493",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12493/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12493/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12493/events",
    "html_url": "https://github.com/spack/spack/issues/12493",
    "id": 483142609,
    "node_id": "MDU6SXNzdWU0ODMxNDI2MDk=",
    "number": 12493,
    "title": "hdf5 not installing with intel-mpi",
    "user": {
        "login": "ianbrobin",
        "id": 26293559,
        "node_id": "MDQ6VXNlcjI2MjkzNTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/26293559?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ianbrobin",
        "html_url": "https://github.com/ianbrobin",
        "followers_url": "https://api.github.com/users/ianbrobin/followers",
        "following_url": "https://api.github.com/users/ianbrobin/following{/other_user}",
        "gists_url": "https://api.github.com/users/ianbrobin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ianbrobin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ianbrobin/subscriptions",
        "organizations_url": "https://api.github.com/users/ianbrobin/orgs",
        "repos_url": "https://api.github.com/users/ianbrobin/repos",
        "events_url": "https://api.github.com/users/ianbrobin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ianbrobin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "becker33",
            "id": 13971568,
            "node_id": "MDQ6VXNlcjEzOTcxNTY4",
            "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/becker33",
            "html_url": "https://github.com/becker33",
            "followers_url": "https://api.github.com/users/becker33/followers",
            "following_url": "https://api.github.com/users/becker33/following{/other_user}",
            "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
            "organizations_url": "https://api.github.com/users/becker33/orgs",
            "repos_url": "https://api.github.com/users/becker33/repos",
            "events_url": "https://api.github.com/users/becker33/events{/privacy}",
            "received_events_url": "https://api.github.com/users/becker33/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2019-08-21T00:31:23Z",
    "updated_at": "2020-05-16T15:40:41Z",
    "closed_at": "2020-05-16T15:40:41Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I am trying to install hdf5 with intel mpi, but I get the following error:\r\n```console\r\n$ spack install hdf5@1.10.5^intel-mpi@2019.4.243\r\n==> intel-mpi is already installed in /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub\r\n==> zlib is already installed in /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/zlib-1.2.11-wlsguaqpnjri6ufyhgrxdqw7p4otzsrf\r\n==> Installing hdf5\r\n==> Searching for binary cache of hdf5\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for hdf5 found: installing from source\r\n==> Using cached archive: /usr/local/spack/var/spack/cache/hdf5/hdf5-1.10.5.tar.gz\r\n==> Staging archive: /usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/hdf5-1.10.5.tar.gz\r\n==> Created stage in /usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj\r\n==> No patches needed for hdf5\r\n==> Building hdf5 [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 77:\r\n    '/usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-src/configure' '--prefix=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj' '--enable-unsupported' '--enable-symbols=yes' '--disable-threadsafe' '--disable-cxx' '--disable-hl' '--disable-fortran' '--without-szlib' '--enable-build-mode=production' '--enable-shared' 'CFLAGS=-fPIC' 'CXXFLAGS=-fPIC' 'FCFLAGS=-fPIC' '--enable-parallel' 'CC=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub/compilers_and_libraries_2019.4.243/linux/mpi/intel64/bin/mpicc' '--with-zlib=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/zlib-1.2.11-wlsguaqpnjri6ufyhgrxdqw7p4otzsrf'\r\n\r\n2 errors found in build log:\r\n     30    checking for config ./config/site-specific/host-ssg.ucar.edu... no\r\n     31    checking for config ./config/site-specific/host-ucar.edu... no\r\n     32    checking for config ./config/site-specific/host-edu... no\r\n     33    checking build mode... production\r\n     34    checking for gcc... /usr/local/spack/opt/spack/linux-centos7-x86_64/\r\n           gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub/comp\r\n           ilers_and_libraries_2019.4.243/linux/mpi/intel64/bin/mpicc\r\n     35    checking whether the C compiler works... no\r\n  >> 36    configure: error: in `/usr/local/spack/var/spack/stage/hdf5-1.10.5-n\r\n           g6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-src':\r\n  >> 37    configure: error: C compiler cannot create executables\r\n     38    See `config.log' for more details\r\n\r\nSee build log for details:\r\n  /usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-build-out.txt\r\n\r\n$ cat /usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-build-out.txt\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> [2019-08-20-20:10:17.374376] '/usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-src/configure' '--prefix=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj' '--enable-unsupported' '--enable-symbols=yes' '--disable-threadsafe' '--disable-cxx' '--disable-hl' '--disable-fortran' '--without-szlib' '--enable-build-mode=production' '--enable-shared' 'CFLAGS=-fPIC' 'CXXFLAGS=-fPIC' 'FCFLAGS=-fPIC' '--enable-parallel' 'CC=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub/compilers_and_libraries_2019.4.243/linux/mpi/intel64/bin/mpicc' '--with-zlib=/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/zlib-1.2.11-wlsguaqpnjri6ufyhgrxdqw7p4otzsrf'\r\nchecking for a BSD-compatible install... /bin/install -c\r\nchecking whether build environment is sane... yes\r\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\r\nchecking for gawk... gawk\r\nchecking whether make sets $(MAKE)... yes\r\nchecking whether make supports nested variables... yes\r\nchecking whether make supports nested variables... (cached) yes\r\nchecking whether to enable maintainer-specific portions of Makefiles... no\r\nchecking build system type... x86_64-unknown-linux-gnu\r\nchecking host system type... x86_64-unknown-linux-gnu\r\nchecking shell variables initial values... done\r\nchecking if basename works... yes\r\nchecking if xargs works... yes\r\nchecking for cached host... none\r\nchecking for config x86_64-unknown-linux-gnu... no\r\nchecking for config x86_64-unknown-linux-gnu... no\r\nchecking for config unknown-linux-gnu... no\r\nchecking for config unknown-linux-gnu... no\r\nchecking for config x86_64-linux-gnu... no\r\nchecking for config x86_64-linux-gnu... no\r\nchecking for config x86_64-unknown... no\r\nchecking for config linux-gnu... found\r\ncompiler '/usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub/compilers_and_libraries_2019.4.243/linux/mpi/intel64/bin/mpicc' is GNU gcc-9.1.0\r\ncompiler '/usr/local/spack/lib/spack/env/gcc/gfortran' is GNU gfortran-9.1.0\r\ncompiler '/usr/local/spack/lib/spack/env/gcc/g++' is GNU g++-9.1.0\r\nchecking for config ./config/site-specific/host-hl02.ssg.ucar.edu... no\r\nchecking for config ./config/site-specific/host-ssg.ucar.edu... no\r\nchecking for config ./config/site-specific/host-ucar.edu... no\r\nchecking for config ./config/site-specific/host-edu... no\r\nchecking build mode... production\r\nchecking for gcc... /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-9.1.0/intel-mpi-2019.4.243-u2ukgstakhmzbvzhx6at22bxq3jtzbub/compilers_and_libraries_2019.4.243/linux/mpi/intel64/bin/mpicc\r\nchecking whether the C compiler works... no\r\nconfigure: error: in `/usr/local/spack/var/spack/stage/hdf5-1.10.5-ng6znwkpqz3bnrsgcoyqfsjbifjtexxj/spack-src':\r\nconfigure: error: C compiler cannot create executables\r\nSee `config.log' for more details\r\n...\r\n```\r\n[config.log](https://github.com/spack/spack/files/3523080/config.log)\r\n\r\nI am able to compile with my C compiler:\r\n```console\r\n$ cat test.c\r\n#include<stdio.h>\r\nint main(){\r\n  printf(\"Hello World!\\n\");\r\n  return 0;\r\n}\r\n$ gcc test.c\r\n$ ./a.out\r\nHello World!\r\n```\r\n\r\n### Information on my system\r\n\r\n```console\r\n$ cat /etc/centos-release\r\nCentOS Linux release 7.5.1804 (Core)\r\n$ uname -r\r\n3.10.0-693.el7.x86_64\r\n$ cat /usr/local/spack/etc/spack/compilers.yaml\r\ncompilers:\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: centos7\r\n    paths:\r\n      cc: /usr/bin/gcc\r\n      cxx: /usr/bin/g++\r\n      f77: /usr/bin/gfortran\r\n      fc: /usr/bin/gfortran\r\n    spec: gcc@4.8.5\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: centos7\r\n    paths:\r\n      cc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gcc\r\n      cxx: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/g++\r\n      f77: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gfortran\r\n      fc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gfortran\r\n    spec: gcc@9.1.0\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: centos7\r\n    paths:\r\n      cc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gcc\r\n      cxx: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/g++\r\n      f77: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gfortran\r\n      fc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gfortran\r\n    spec: gcc@5.5.0\r\n    target: x86_64\r\n$ spack config blame compilers\r\n---                                           compilers:\r\n/usr/local/spack/etc/spack/compilers.yaml:2   - compiler:\r\n/usr/local/spack/etc/spack/compilers.yaml:3       environment: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:4       extra_rpaths: []\r\n/usr/local/spack/etc/spack/compilers.yaml:5       flags: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:6       modules: []\r\n/usr/local/spack/etc/spack/compilers.yaml:7       operating_system: centos7\r\n/usr/local/spack/etc/spack/compilers.yaml:8       paths:\r\n/usr/local/spack/etc/spack/compilers.yaml:9         cc: /usr/bin/gcc\r\n/usr/local/spack/etc/spack/compilers.yaml:10        cxx: /usr/bin/g++\r\n/usr/local/spack/etc/spack/compilers.yaml:11        f77: /usr/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:12        fc: /usr/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:13      spec: gcc@4.8.5\r\n/usr/local/spack/etc/spack/compilers.yaml:14      target: x86_64\r\n/usr/local/spack/etc/spack/compilers.yaml:15  - compiler:\r\n/usr/local/spack/etc/spack/compilers.yaml:16      environment: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:17      extra_rpaths: []\r\n/usr/local/spack/etc/spack/compilers.yaml:18      flags: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:19      modules: []\r\n/usr/local/spack/etc/spack/compilers.yaml:20      operating_system: centos7\r\n/usr/local/spack/etc/spack/compilers.yaml:21      paths:\r\n/usr/local/spack/etc/spack/compilers.yaml:22        cc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gcc\r\n/usr/local/spack/etc/spack/compilers.yaml:23        cxx: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/g++\r\n/usr/local/spack/etc/spack/compilers.yaml:24        f77: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:25        fc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-9.1.0-mj7s6dgfnhgi2n42fyxgmitnuslcyol3/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:26      spec: gcc@9.1.0\r\n/usr/local/spack/etc/spack/compilers.yaml:27      target: x86_64\r\n/usr/local/spack/etc/spack/compilers.yaml:28  - compiler:\r\n/usr/local/spack/etc/spack/compilers.yaml:29      environment: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:30      extra_rpaths: []\r\n/usr/local/spack/etc/spack/compilers.yaml:31      flags: {}\r\n/usr/local/spack/etc/spack/compilers.yaml:32      modules: []\r\n/usr/local/spack/etc/spack/compilers.yaml:33      operating_system: centos7\r\n/usr/local/spack/etc/spack/compilers.yaml:34      paths:\r\n/usr/local/spack/etc/spack/compilers.yaml:35        cc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gcc\r\n/usr/local/spack/etc/spack/compilers.yaml:36        cxx: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/g++\r\n/usr/local/spack/etc/spack/compilers.yaml:37        f77: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:38        fc: /usr/local/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gcc-5.5.0-iaqd4pqrvklcasb73bn3ugs6zx7wcghh/bin/gfortran\r\n/usr/local/spack/etc/spack/compilers.yaml:39      spec: gcc@5.5.0\r\n/usr/local/spack/etc/spack/compilers.yaml:40      target: x86_64\r\n\r\n$ spack find\r\n==> 99 installed packages\r\n-- linux-centos7-x86_64 / gcc@4.8.5 -----------------------------\r\nautoconf@2.69    gdbm@1.18.1  libsigsegv@2.11  mpfr@3.1.6     readline@7.0\r\nautomake@1.16.1  gmp@6.1.2    libtool@2.4.6    ncurses@6.1    zlib@1.2.11\r\ngcc@5.5.0        isl@0.15     m4@1.4.18        perl@5.26.2\r\ngcc@9.1.0        isl@0.19     mpc@1.1.0        pkgconf@1.6.1\r\n\r\n-- linux-centos7-x86_64 / gcc@5.5.0 -----------------------------\r\nautoconf@2.69     gettext@0.19.8.1     libxml2@2.9.9   readline@7.0\r\nautomake@1.16.1   help2man@1.47.8      m4@1.4.18       tar@1.31\r\nbison@3.0.5       libiconv@1.15        mvapich2@2.3.1  texinfo@6.5\r\nbzip2@1.0.8       libpciaccess@0.13.5  mvapich2@2.3.1  util-macros@1.19.1\r\ndiffutils@3.7     libsigsegv@2.11      ncurses@6.1     xz@5.2.4\r\nfindutils@4.6.0   libtool@2.4.6        perl@5.26.2     zlib@1.2.11\r\ngdbm@1.18.1       libuuid@1.0.3        pkgconf@1.6.1\r\ngettext@0.19.8.1  libxml2@2.9.9        psm@3.3\r\n\r\n-- linux-centos7-x86_64 / gcc@9.1.0 -----------------------------\r\nautoconf@2.69     hdf5@1.10.5           libxml2@2.9.9   python@2.7.16\r\nautomake@1.16.1   hwloc@1.11.11         lz4@1.9.0       python@3.6.1\r\nbzip2@1.0.8       intel-mpi@2019.4.243  m4@1.4.18       readline@7.0\r\ncurl@7.63.0       json-c@0.13.1         mpich@3.3.1     slurm@18-08-0-1\r\ndiffutils@3.7     libbsd@0.9.1          munge@0.5.13    sqlite@3.28.0\r\nemacs@26.1        libevent@2.1.8        nano@2.6.3      tar@1.31\r\nexpat@2.2.5       libffi@3.2.1          ncurses@6.1     texinfo@6.5\r\nfindutils@4.6.0   libgcrypt@1.8.4       numactl@2.0.12  tmux@2.8\r\ngdbm@1.18.1       libgpg-error@1.36     openmpi@3.1.4   util-macros@1.19.1\r\ngettext@0.19.8.1  libiconv@1.15         openssl@1.1.1b  vim@8.1.0338\r\nglib@2.56.3       libpciaccess@0.13.5   pcre@8.42       xz@5.2.4\r\nhdf5@1.10.5       libsigsegv@2.11       perl@5.26.2     zlib@1.2.11\r\nhdf5@1.10.5       libtool@2.4.6         pkgconf@1.6.1\r\n\r\n```\r\n",
    "performed_via_github_app": null
}