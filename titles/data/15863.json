{
    "url": "https://api.github.com/repos/spack/spack/issues/15863",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15863/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15863/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15863/events",
    "html_url": "https://github.com/spack/spack/issues/15863",
    "id": 593904706,
    "node_id": "MDU6SXNzdWU1OTM5MDQ3MDY=",
    "number": 15863,
    "title": "Installation issue: openfoam-org v7",
    "user": {
        "login": "orliac",
        "id": 36704287,
        "node_id": "MDQ6VXNlcjM2NzA0Mjg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/36704287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/orliac",
        "html_url": "https://github.com/orliac",
        "followers_url": "https://api.github.com/users/orliac/followers",
        "following_url": "https://api.github.com/users/orliac/following{/other_user}",
        "gists_url": "https://api.github.com/users/orliac/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/orliac/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/orliac/subscriptions",
        "organizations_url": "https://api.github.com/users/orliac/orgs",
        "repos_url": "https://api.github.com/users/orliac/repos",
        "events_url": "https://api.github.com/users/orliac/events{/privacy}",
        "received_events_url": "https://api.github.com/users/orliac/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-04-04T14:50:07Z",
    "updated_at": "2020-04-07T22:04:55Z",
    "closed_at": "2020-04-07T22:04:55Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "<!--*Thanks for taking the time to report this build failure. To proceed with the\r\nreport please:*\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively!\r\n-->\r\n\r\n\r\n### Spack version\r\n<!-- Add the output to the command below -->\r\n```console\r\n$ spack --version\r\n0.13.3-1344-ce52a26\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install openfoam-org@7%gcc@8.3.0\r\n...\r\n==> 186626: openfoam-org: Building openfoam-org [Package]\r\n==> 186626: openfoam-org: Executing phase: 'configure'\r\n==> 186626: openfoam-org: Executing phase: 'build'\r\n==> 186626: openfoam-org: Executing phase: 'install'\r\n==> 186626: openfoam-org: Successfully installed openfoam-org\r\n  Fetch: 0.10s.  Build: 5m 46.71s.  Total: 5m 46.81s.\r\n```\r\nSeems to install normally but many expected binaries are actually missing. In the build log we have this:\r\n> fatal error: FlexLexer.h: No such file or directory\r\n\r\n```console\r\nflex -+ -o/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.L.C -f surfaceFo\r\nrmats/stl/STLsurfaceFormatASCII.L && g++ -std=c++11 -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra -Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno\r\n-attributes -O3 -Wl,-rpath,/dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/platforms/linux64GccDPInt32RpathOpt/lib -DNoRepository -\r\nftemplate-depth-100 -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/fileFormats/lnInclude -IlnInclude -I. -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-\r\n7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OpenFOAM/lnInclude -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OSspecific/POSIX/lnInclude   -fPIC -Wno-o\r\nld-style-cast -Wno-unused-local-typedefs -Wno-array-bounds -c /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfa\r\nceFormats/stl/STLsurfaceFormatASCII.L.C -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsu\r\nrfaceFormatASCII.o\r\n/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.L.C:301:10: fatal error: FlexLexer.h: No such file or directory\r\n \r\n          ^            \r\ncompilation terminated.\r\nmake: *** [/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.o] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\n==> 186626: openfoam-org: Executing phase: 'install'\r\n... \r\n```\r\n\r\n### Platform and user environment\r\n\r\n<!-- Please report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux nuvolari 4.15.0-29-generic #31-Ubuntu SMP Tue Jul 17 15:39:52 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tUbuntu 18.04.1 LTS\r\n``` \r\nand, if relevant, post or attach:\r\n\r\n- `packages.yaml`\r\n- `compilers.yaml`\r\n\r\nto the issue\r\n-->\r\nLinux 3.10.0-1062.18.1.el7.x86_64 #1 SMP Tue Mar 17 23:49:17 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n### Additional information\r\n\r\n```console\r\n$ spack spec --install-status openfoam-org@7%gcc@8.3.0\r\nInput spec\r\n--------------------------------\r\n -   openfoam-org@7%gcc@8.3.0\r\n\r\nConcretized\r\n--------------------------------\r\n[+]  openfoam-org@7%gcc@8.3.0~float32~int64~metis patches=73103e6b1bdbf3b1e0d517cbbd11562e98c6e9464df5f43e5125e9a5b457d1c5,ecfa93afa8900f583a23c179db7cf0dc066828a9fd872e061164f21301c2a222 +source arch=linux-centos7-skylake_avx512\r\n[^]      ^cmake@3.16.2%gcc@8.3.0~doc+ncurses+openssl+ownlibs~qt arch=linux-centos7-skylake_avx512\r\n[^]          ^ncurses@6.1%gcc@8.3.0~symlinks~termlib arch=linux-centos7-skylake_avx512\r\n[^]              ^pkgconf@1.6.3%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]          ^openssl@1.0.2k%gcc@8.3.0+systemcerts arch=linux-centos7-skylake_avx512\r\n[^]      ^flex@2.6.4%gcc@8.3.0+lex patches=09c22e5c6fef327d3e48eb23f0d610dcd3a35ab9207f12e0f875701c677978d3 arch=linux-centos7-skylake_avx512\r\n[^]          ^autoconf@2.69%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]              ^m4@1.4.16%gcc@8.3.0+sigsegv arch=linux-centos7-skylake_avx512\r\n[^]              ^perl@5.30.1%gcc@8.3.0+cpanm+shared+threads arch=linux-centos7-skylake_avx512\r\n[^]                  ^gdbm@1.18.1%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]                      ^readline@8.0%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]          ^automake@1.16.1%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]          ^bison@3.4.2%gcc@8.3.0 patches=89aa362716d898edd0b5c6ae4208dc1b6992887774848a09e8021afd676f7d61 arch=linux-centos7-skylake_avx512\r\n[^]              ^diffutils@3.7%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]                  ^libiconv@1.16%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]              ^help2man@1.47.11%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]                  ^gettext@0.20.1%gcc@8.3.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-skylake_avx512\r\n[^]                      ^bzip2@1.0.8%gcc@8.3.0+shared arch=linux-centos7-skylake_avx512\r\n[^]                      ^libxml2@2.9.9%gcc@8.3.0~python arch=linux-centos7-skylake_avx512\r\n[^]                          ^xz@5.2.4%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]                          ^zlib@1.2.11%gcc@8.3.0+optimize+pic+shared arch=linux-centos7-skylake_avx512\r\n[^]                      ^tar@1.32%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]          ^findutils@4.6.0%gcc@8.3.0 patches=84b916c0bf8c51b7e7b28417692f0ad3e7030d1f3c248ba77c42ede5c1c5d11e,bd9e4e5cc280f9753ae14956c4e4aa17fe7a210f55dd6c84aa60b12d106d47a2 arch=linux-centos7-skylake_avx512\r\n[^]              ^libtool@2.4.6%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]              ^texinfo@6.5%gcc@8.3.0 patches=12f6edb0c6b270b8c8dba2ce17998c580db01182d871ee32b7b6e4129bd1d23a,1732115f651cff98989cb0215d8f64da5e0f7911ebf0c13b064920f088f2ffe1 arch=linux-centos7-skylake_avx512\r\n[+]      ^openmpi@3.1.5%gcc@8.3.0~cuda+cxx_exceptions fabrics=none ~java~legacylaunchers~memchecker~pmi schedulers=none ~sqlite3~thread_multiple+vt arch=linux-centos7-skylake_avx512\r\n[^]          ^hwloc@1.11.11%gcc@8.3.0~cairo~cuda~gl+libxml2~nvml+pci+shared arch=linux-centos7-skylake_avx512\r\n[^]              ^libpciaccess@0.13.5%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]                  ^util-macros@1.19.1%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[^]              ^numactl@2.0.12%gcc@8.3.0 arch=linux-centos7-skylake_avx512\r\n[+]      ^scotch@6.0.8%gcc@8.3.0+compression~esmumps~int64~metis+mpi+shared arch=linux-centos7-skylake_avx512\r\n``` \r\n\r\n```console\r\n$ spack log-parse --show=errors,warnings /dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/.spack/spack-build-out.txt \r\n2 errors\r\n2 warnings\r\n     17      gcc -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -O3   -fPIC dirToString.c -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/w\r\n             make/platforms/linux64Gcc/dirToString\r\n     18      flex wmkdep.l; \\\r\n     19      gcc -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -O3   -fPIC lex.yy.c -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/wmake/\r\n             platforms/linux64Gcc/wmkdep\r\n  >> 20      lex.yy.c:1286:16: warning: 'input' defined but not used [-Wunused-function]\r\n     21       #else\r\n     22                      ^\r\n  >> 23      lex.yy.c:1243:17: warning: 'yyunput' defined but not used [-Wunused-function]\r\n     24      \r\n     25                       ^\r\n     26      Allwmake: no ThirdParty directory found - skipping\r\n\r\n     ...\r\n\r\n     1154    g++ -std=c++11 -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra -Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-attributes -O3 -Wl,-rp\r\n             ath,/dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/platforms/linux64GccDPInt32RpathOpt/lib -DNoRepository -ftemplate\r\n             -depth-100 -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/fileFormats/lnInclude -IlnInclude -I. -I/tmp/eorliac/spack-stage/spack-stage-openfoam\r\n             -org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OpenFOAM/lnInclude -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OSspecific/POSIX/lnInc\r\n             lude   -fPIC -c surfaceFormats/stl/STLsurfaceFormatCore.C -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/s\r\n             urfMesh/surfaceFormats/stl/STLsurfaceFormatCore.o\r\n     1155    g++ -std=c++11 -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra -Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-attributes -O3 -Wl,-rp\r\n             ath,/dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/platforms/linux64GccDPInt32RpathOpt/lib -DNoRepository -ftemplate\r\n             -depth-100 -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/fileFormats/lnInclude -IlnInclude -I. -I/tmp/eorliac/spack-stage/spack-stage-openfoam\r\n             -org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OpenFOAM/lnInclude -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OSspecific/POSIX/lnInc\r\n             lude   -fPIC -c surfaceFormats/stl/STLsurfaceFormatRunTime.C -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/sr\r\n             c/surfMesh/surfaceFormats/stl/STLsurfaceFormatRunTime.o\r\n     1156    flex -+ -o/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.L.\r\n             C -f surfaceFormats/stl/STLsurfaceFormatASCII.L && g++ -std=c++11 -m64 -Dlinux64 -DWM_ARCH_OPTION=64 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra -Wold-style-cast -Wnon-virtual-dtor -Wno-unused-paramete\r\n             r -Wno-invalid-offsetof -Wno-attributes -O3 -Wl,-rpath,/dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/platforms/linu\r\n             x64GccDPInt32RpathOpt/lib -DNoRepository -ftemplate-depth-100 -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/fileFormats/lnInclude -IlnInclude \r\n             -I. -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/src/OpenFOAM/lnInclude -I/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvl\r\n             jpfzvpwyx6bnz/OpenFOAM-7/src/OSspecific/POSIX/lnInclude   -fPIC -Wno-old-style-cast -Wno-unused-local-typedefs -Wno-array-bounds -c /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3\r\n             nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.L.C -o /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvl\r\n             jpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.o\r\n  >> 1157    /tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.L.C:301:10: \r\n             fatal error: FlexLexer.h: No such file or directory\r\n     1158    \r\n     1159              ^\r\n     1160    compilation terminated.\r\n  >> 1161    make: *** [/tmp/eorliac/spack-stage/spack-stage-openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz/OpenFOAM-7/platforms/linux64GccDPInt32RpathOpt/src/surfMesh/surfaceFormats/stl/STLsurfaceFormatASCII.o\r\n             ] Error 1\r\n     1162    make: *** Waiting for unfinished jobs....\r\n     1163    ==> 186626: openfoam-org: Executing phase: 'install'\r\n     1164    ==> [2020-04-04-15:59:41.901451, 79589] Installing Allwmake to /dcsrsoft/sandbox/eorliac/spack/opt/spack/linux-centos7-skylake_avx512/gcc-8.3.0/openfoam-org-7-p7veu3cz7cm2p3nznvljpfzvpwyx6bnz\r\n\r\n\r\nRebuilding the package with the following options:\r\n```console\r\n$ spack -d install -j 1 <spec>\r\n...\r\n```\r\n\r\nAttached: \r\n\r\n[spack-cc-openfoam-org-p7veu3c.in.log](https://github.com/spack/spack/files/4431719/spack-cc-openfoam-org-p7veu3c.in.log)\r\n[spack-cc-openfoam-org-p7veu3c.out.log](https://github.com/spack/spack/files/4431724/spack-cc-openfoam-org-p7veu3c.out.log)\r\n\r\n\r\n\r\n### General information\r\n\r\n- [x] I have run `spack --version` and reported the version of Spack\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}