{
    "url": "https://api.github.com/repos/spack/spack/issues/10255",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/10255/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/10255/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/10255/events",
    "html_url": "https://github.com/spack/spack/issues/10255",
    "id": 396112524,
    "node_id": "MDU6SXNzdWUzOTYxMTI1MjQ=",
    "number": 10255,
    "title": "depends_on can specify matching dependencies",
    "user": {
        "login": "benzwick",
        "id": 33216696,
        "node_id": "MDQ6VXNlcjMzMjE2Njk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/33216696?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benzwick",
        "html_url": "https://github.com/benzwick",
        "followers_url": "https://api.github.com/users/benzwick/followers",
        "following_url": "https://api.github.com/users/benzwick/following{/other_user}",
        "gists_url": "https://api.github.com/users/benzwick/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/benzwick/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/benzwick/subscriptions",
        "organizations_url": "https://api.github.com/users/benzwick/orgs",
        "repos_url": "https://api.github.com/users/benzwick/repos",
        "events_url": "https://api.github.com/users/benzwick/events{/privacy}",
        "received_events_url": "https://api.github.com/users/benzwick/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        },
        {
            "id": 1620878194,
            "node_id": "MDU6TGFiZWwxNjIwODc4MTk0",
            "url": "https://api.github.com/repos/spack/spack/labels/package%20dsl",
            "name": "package dsl",
            "color": "96e0f7",
            "default": false,
            "description": ""
        },
        {
            "id": 466955297,
            "node_id": "MDU6TGFiZWw0NjY5NTUyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/proposal",
            "name": "proposal",
            "color": "0e8a16",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2019-01-05T00:36:58Z",
    "updated_at": "2020-02-06T13:45:09Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "It would be nice to have a simple way to specify matching dependencies for related packages. For example, petsc4py always depends on a matching version of petsc:\r\n```\r\n    depends_on('petsc@3.10:3.10.99+mpi', when='@3.10:3.10.99')\r\n    depends_on('petsc@3.9:3.9.99+mpi', when='@3.9:3.9.99')\r\n    depends_on('petsc@3.8:3.8.99+mpi', when='@3.8:3.8.99')\r\n    depends_on('petsc@3.7:3.7.99+mpi', when='@3.7:3.7.99')\r\n    depends_on('petsc@3.6:3.6.99+mpi', when='@3.6:3.6.99')\r\n```\r\nThe above lines could then be replaced by the single line:\r\n```\r\n    depends_on('petsc+mpi', match=\"3.10\")\r\n```\r\nor perhaps:\r\n```\r\n    depends_on('petsc+mpi', match=\"@3.10:3.10.99\")\r\n```\r\nwhere the \"3.10\" would be extrapolated to all available versions e.g. 3.6.1 petsc4py would match with 3.6.3 petsc (similar to how the URL is currently extrapolated from the url field in the package).\r\n\r\nMatching dependencies would make it easier to fix issues like this: \r\n\r\n- version constraints are somewhat not respected and break concretizer #5753\r\n\r\nIt would also prevent updates of one package (in this case petsc to 3.11) breaking the installation of another package (petsc4py) because the dependent package (petsc4py) may not yet have been updated with:\r\n```\r\ndepends_on('petsc@3.11:3.11.99+mpi', when='@3.11:3.11.99')\r\n```\r\n",
    "performed_via_github_app": null
}