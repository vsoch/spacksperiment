{
    "url": "https://api.github.com/repos/spack/spack/issues/8736",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8736/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8736/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8736/events",
    "html_url": "https://github.com/spack/spack/issues/8736",
    "id": 342115820,
    "node_id": "MDU6SXNzdWUzNDIxMTU4MjA=",
    "number": 8736,
    "title": "lmod: incorrect delimiter for LUA_PATH & LUA_CPATH",
    "user": {
        "login": "SteVwonder",
        "id": 874707,
        "node_id": "MDQ6VXNlcjg3NDcwNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/874707?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/SteVwonder",
        "html_url": "https://github.com/SteVwonder",
        "followers_url": "https://api.github.com/users/SteVwonder/followers",
        "following_url": "https://api.github.com/users/SteVwonder/following{/other_user}",
        "gists_url": "https://api.github.com/users/SteVwonder/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/SteVwonder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SteVwonder/subscriptions",
        "organizations_url": "https://api.github.com/users/SteVwonder/orgs",
        "repos_url": "https://api.github.com/users/SteVwonder/repos",
        "events_url": "https://api.github.com/users/SteVwonder/events{/privacy}",
        "received_events_url": "https://api.github.com/users/SteVwonder/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-07-17T22:46:11Z",
    "updated_at": "2018-08-01T19:12:22Z",
    "closed_at": "2018-08-01T10:58:55Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The generated lmod lua files should have lines like `prepend_path(LUA_PATH, \"PATH\", \";\")` but they are missing the last argument, which means that delimiter is `:`.  It seems that the tcl modules do the right thing in this case.  It is just the lmod modules that are affected.\r\n\r\n### Expected Result\r\n\r\n```\r\n-- -*- lua -*-                                                                                                                                                                                                                                                                            \r\n-- Module file created by spack (https://github.com/spack/spack) on 2018-07-17 15:27:07.428036                                                                                                                                                                                            \r\n--                                                                                                                                                                                                                                                                                        \r\n-- lua@5.1.5%gcc@4.9.3 arch=linux-rhel7-ppc64le /dnygn7v                                                                                                                                                                                                                                  \r\n--                                                                                                                                                                                                                                                                                        \r\n\r\nwhatis([[Name : lua]])\r\nwhatis([[Version : 5.1.5]])\r\nwhatis([[Short description : The Lua programming language interpreter and library.]])\r\n\r\nhelp([[The Lua programming language interpreter and library.]])\r\n\r\n\r\n\r\nprepend_path(\"PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/bin\")\r\nprepend_path(\"MANPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/man\")\r\nprepend_path(\"LIBRARY_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib\")\r\nprepend_path(\"LD_LIBRARY_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib\")\r\nprepend_path(\"CPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/include\")\r\nprepend_path(\"CMAKE_PREFIX_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/share/lua/5.1/?.lua\", \";\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/share/lua/5.1/?/init.lua\", \";\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?.lua\", \";\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?/init.lua\", \";\")\r\nprepend_path(\"LUA_CPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?.so\", \";\")\r\n```\r\n\r\n### Actual Result\r\n\r\n```\r\n-- -*- lua -*-                                                                                                                                                                                                                                                                            \r\n-- Module file created by spack (https://github.com/spack/spack) on 2018-07-17 15:27:07.428036                                                                                                                                                                                            \r\n--                                                                                                                                                                                                                                                                                        \r\n-- lua@5.1.5%gcc@4.9.3 arch=linux-rhel7-ppc64le /dnygn7v                                                                                                                                                                                                                                  \r\n--                                                                                                                                                                                                                                                                                        \r\n\r\nwhatis([[Name : lua]])\r\nwhatis([[Version : 5.1.5]])\r\nwhatis([[Short description : The Lua programming language interpreter and library.]])\r\n\r\nhelp([[The Lua programming language interpreter and library.]])\r\n\r\n\r\n\r\nprepend_path(\"PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/bin\")\r\nprepend_path(\"MANPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/man\")\r\nprepend_path(\"LIBRARY_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib\")\r\nprepend_path(\"LD_LIBRARY_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib\")\r\nprepend_path(\"CPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/include\")\r\nprepend_path(\"CMAKE_PREFIX_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/share/lua/5.1/?.lua\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/share/lua/5.1/?/init.lua\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?.lua\")\r\nprepend_path(\"LUA_PATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?/init.lua\")\r\nprepend_path(\"LUA_CPATH\", \"/usr/workspace/wsrzd/herbein1/spack/blueos3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/lua-5.1.5-dnygn7vkbcem2fwsc6dxrhjg2jxoy33j/lib/lua/5.1/?.so\")\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install lua@5.1.5 # i believe this could be any package that requires modifying the LUA_PATH env\r\n$ spack module refresh -m lmod\r\n$ cat $SPACK_ROOT/share/spack/modules/$ARCH_STR/Core/lua/5.1.5/lua\r\n...\r\n```\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n 1. platform: blueos3 ppc64le\r\n 2. modules.yaml:\r\n\r\n```\r\nmodules:\r\n   enable::\r\n      - lmod\r\n   lmod:\r\n      hash_length: 0\r\n      core_compilers:\r\n        - 'gcc@4.9.3'\r\n      blacklist: ['pcre']\r\n```",
    "performed_via_github_app": null
}