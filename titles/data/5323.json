{
    "url": "https://api.github.com/repos/spack/spack/issues/5323",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5323/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5323/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5323/events",
    "html_url": "https://github.com/spack/spack/pull/5323",
    "id": 256453216,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwMTc3ODA1",
    "number": 5323,
    "title": "Change glog from Autotools to CMakePackage",
    "user": {
        "login": "pramodskumbhar",
        "id": 27898197,
        "node_id": "MDQ6VXNlcjI3ODk4MTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/27898197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pramodskumbhar",
        "html_url": "https://github.com/pramodskumbhar",
        "followers_url": "https://api.github.com/users/pramodskumbhar/followers",
        "following_url": "https://api.github.com/users/pramodskumbhar/following{/other_user}",
        "gists_url": "https://api.github.com/users/pramodskumbhar/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pramodskumbhar/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pramodskumbhar/subscriptions",
        "organizations_url": "https://api.github.com/users/pramodskumbhar/orgs",
        "repos_url": "https://api.github.com/users/pramodskumbhar/repos",
        "events_url": "https://api.github.com/users/pramodskumbhar/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pramodskumbhar/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2017-09-09T17:25:52Z",
    "updated_at": "2017-09-10T23:54:20Z",
    "closed_at": "2017-09-10T23:22:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/5323",
        "html_url": "https://github.com/spack/spack/pull/5323",
        "diff_url": "https://github.com/spack/spack/pull/5323.diff",
        "patch_url": "https://github.com/spack/spack/pull/5323.patch"
    },
    "body": "Installing glog with system gcc worked fine. But I have also `gcc 5.3.0` compiled by Spack. While compiling with this newer gcc I had multiple link errors:\r\n\r\n```\r\n\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/demangle_unittest src/demangle_unittest-demangle_unittest.o -pthread  ./.libs/libglog.so -lunwind -L/usr/lib64 -lgtest -lgflags -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/symbolize_unittest src/symbolize_unittest-symbolize_unittest.o -pthread  ./.libs/libglog.so -lunwind -L/usr/lib64 -lgtest -lgflags -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/logging_striptest0 src/logging_striptest0-logging_striptest_main.o  ./.libs/libglog.so -lgflags -lunwind -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/utilities_unittest src/utilities_unittest-utilities_unittest.o -pthread  ./.libs/libglog.so -lunwind -L/usr/lib64 -lgtest -lgflags -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/stacktrace_unittest src/stacktrace_unittest-stacktrace_unittest.o  ./.libs/libglog.so -lgflags -lunwind -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/logging_striptest2 src/logging_striptest2-logging_striptest2.o  ./.libs/libglog.so -lgflags -lunwind -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nlibtool: link: /gpfs/bbp.cscs.ch/home/kumbhar-adm/SPACK_HOME/spack/lib/spack/env/gcc/g++ -pthread -I/usr/include -pthread -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -DNO_FRAME_POINTER -pthread -o .libs/signalhandler_unittest src/signalhandler_unittest-signalhandler_unittest.o -pthread  ./.libs/libglog.so -lunwind -L/usr/lib64 -lgtest -lgflags -lpthread -pthread -Wl,-rpath -Wl,/gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.4-3lulcx7y/lib\r\nsrc/demangle_unittest-demangle_unittest.o: In function `testing::Message::GetString() const':\r\ndemangle_unittest.cc:(.text._ZNK7testing7Message9GetStringEv[_ZNK7testing7Message9GetStringEv]+0x22): undefined reference to `testing::internal::StrStreamToString(std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >*)'\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [demangle_unittest] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\nsrc/stl_logging_unittest-stl_logging_unittest.o: In function `testing::Message::GetString() const':\r\nstl_logging_unittest.cc:(.text._ZNK7testing7Message9GetStringEv[_ZNK7testing7Message9GetStringEv]+0x22): undefined reference to `testing::internal::StrStreamToString(std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >*)'\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [stl_logging_unittest] Error 1\r\nsrc/symbolize_unittest-symbolize_unittest.o: In function `testing::Message::GetString() const':\r\nsymbolize_unittest.cc:(.text._ZNK7testing7Message9GetStringEv[_ZNK7testing7Message9GetStringEv]+0x22): undefined reference to `testing::internal::StrStreamToString(std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >*)'\r\ncollect2: error: ld returned 1 exit status\r\nsrc/logging_unittest-logging_unittest.o: In function `testing::Message::GetString() const':\r\nlogging_unittest.cc:(.text._ZNK7testing7Message9GetStringEv[_ZNK7testing7Message9GetStringEv]+0x22): undefined reference to `testing::internal::StrStreamToString(std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >*)'\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [symbolize_unittest] Error 1\r\nmake: *** [logging_unittest] Error 1\r\n==> Error: ProcessError: Command exited with statu\r\n```\r\n\r\nUsing `CMake` it seems more stable:\r\n\r\n```\r\n$ spack install -v glog %gcc@5.3.0\r\n....\r\n-version.cmake\r\n-- Installing: /gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.5-owsws472/lib/cmake/glog/glog-targets.cmake\r\n-- Installing: /gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.5-owsws472/lib/cmake/glog/glog-targets-relwithdebinfo.cmake\r\n==> Successfully installed glog\r\n  Fetch: 0.01s.  Build: 25.37s.  Total: 25.37s.\r\n[+] /gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.5-owsws472\r\n\r\n$ $ ll /gpfs/bbp.cscs.ch/scratch/gss/bgq/kumbhar-adm/SPACK_HOME/install_home/bbpviz/install/linux-rhel6-x86_64/gcc-5.3.0/glog-0.3.5-owsws472/lib/\r\ntotal 1024\r\ndrwxr-xr-x 3 kumbhar-adm bbp   4096 Sep  9 19:24 cmake\r\nlrwxrwxrwx 1 kumbhar-adm bbp     16 Sep  9 19:24 libglog.so -> libglog.so.0.3.5\r\n-rwxr-xr-x 1 kumbhar-adm bbp 935738 Sep  9 19:24 libglog.so.0\r\nlrwxrwxrwx 1 kumbhar-adm bbp     12 Sep  9 19:24 libglog.so.0.3.5 -> libglog.so.0",
    "performed_via_github_app": null
}