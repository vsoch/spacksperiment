{
    "url": "https://api.github.com/repos/spack/spack/issues/3298",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/3298/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/3298/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/3298/events",
    "html_url": "https://github.com/spack/spack/pull/3298",
    "id": 211299661,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4NjkzOTYy",
    "number": 3298,
    "title": "WIP: Make Paraview work",
    "user": {
        "login": "certik",
        "id": 20568,
        "node_id": "MDQ6VXNlcjIwNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/certik",
        "html_url": "https://github.com/certik",
        "followers_url": "https://api.github.com/users/certik/followers",
        "following_url": "https://api.github.com/users/certik/following{/other_user}",
        "gists_url": "https://api.github.com/users/certik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/certik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/certik/subscriptions",
        "organizations_url": "https://api.github.com/users/certik/orgs",
        "repos_url": "https://api.github.com/users/certik/repos",
        "events_url": "https://api.github.com/users/certik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/certik/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 13,
    "created_at": "2017-03-02T06:16:41Z",
    "updated_at": "2017-03-02T23:07:26Z",
    "closed_at": "2017-03-02T23:07:26Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/3298",
        "html_url": "https://github.com/spack/spack/pull/3298",
        "diff_url": "https://github.com/spack/spack/pull/3298.diff",
        "patch_url": "https://github.com/spack/spack/pull/3298.patch"
    },
    "body": "I use a stock Ubuntu 16.04. Paraview fails to build due to a missing opengl library. In Hashdist I build Paraview with os mesa, then things work. The +osmesa flag to paraview fails (missing osmesa library).\r\n\r\nSo I first concentrate on the mesa library. Below I made the modifications to build it just like in Hashdist (as the default spack version fails to build due to `configure: error: libudev-dev or sysfs required for building DRI`). I build it with `spack install mesa@10.2.4 %gcc@5.4.0`. \r\n\r\nIt fails with:\r\n```\r\n==> 'make' '-j32' 'autoreconf -fi'\r\nmake: *** No rule to make target 'autoreconf -fi'.  Stop.\r\n```\r\nBut I have to call autoreconf, otherwise (if I comment the line that calls autoreconf), i.e.:\r\n```diff\r\n--- a/var/spack/repos/builtin/packages/mesa/package.py\r\n+++ b/var/spack/repos/builtin/packages/mesa/package.py\r\n@@ -65,7 +65,7 @@ class Mesa(AutotoolsPackage):\r\n \r\n \r\n     def configure_args(self):\r\n-        make('autoreconf -fi')\r\n+        #make('autoreconf -fi')\r\n         return ['--enable-osmesa', '--disable-dri', '--disable-egl',\r\n                 '--enable-xlib-glx', '--disable-gallium-llvm',\r\n                 '--with-dri-drivers=', '--with-gallium-drivers=']\r\n```\r\nthe configure phase succeeds, but the make phase fails with:\r\n```\r\n==> 'make' '-j32'\r\nCDPATH=\"${ZSH_VERSION+.}:\" && cd /home/certik/repos/spack/var/spack/stage/mesa-10.2.4-gqowes7nvl5cnpgvpakilmzrcktjvnhs/Mesa-10.2.4 && /bin/bash /tmp/certik/spack-stage/spack-stage-_yG_LZ/Mesa-10.2.4/bin/missing aclocal-1.14 -I m4\r\n/tmp/certik/spack-stage/spack-stage-_yG_LZ/Mesa-10.2.4/bin/missing: line 81: aclocal-1.14: command not found\r\nWARNING: 'aclocal-1.14' is missing on your system.\r\n         You should only need it if you modified 'acinclude.m4' or\r\n         'configure.ac' or m4 files included by 'configure.ac'.\r\n         The 'aclocal' program is part of the GNU Automake package:\r\n         <http://www.gnu.org/software/automake>\r\n         It also requires GNU Autoconf, GNU m4 and Perl in order to run:\r\n         <http://www.gnu.org/software/autoconf>\r\n         <http://www.gnu.org/software/m4/>\r\n         <http://www.perl.org/>\r\nMakefile:557: recipe for target '/home/certik/repos/spack/var/spack/stage/mesa-10.2.4-gqowes7nvl5cnpgvpakilmzrcktjvnhs/Mesa-10.2.4/aclocal.m4' failed\r\nmake: *** [/home/certik/repos/spack/var/spack/stage/mesa-10.2.4-gqowes7nvl5cnpgvpakilmzrcktjvnhs/Mesa-10.2.4/aclocal.m4] Error 127\r\n```\r\n\r\n\r\nI don't know what else to do. I tried to also debug it by doing:\r\n```\r\n$ spack cd mesa@10.2.4 %gcc@5.4.0\r\n~/.../mesa-10.2.4-gqowes7nvl5cnpgvpakilmzrcktjvnhs/Mesa-10.2.4$ spack env mesa@10.2.4 %gcc@5.4.0\r\nTraceback (most recent call last):\r\n  File \"/home/certik/repos/spack/bin/spack\", line 212, in <module>\r\n    main(sys.argv)\r\n  File \"/home/certik/repos/spack/bin/spack\", line 208, in main\r\n    _main(args, unknown)\r\n  File \"/home/certik/repos/spack/bin/spack\", line 174, in _main\r\n    return_val = command(parser, args)\r\n  File \"/home/certik/repos/spack/lib/spack/spack/cmd/env.py\", line 62, in env\r\n    build_env.setup_package(spec.package)\r\n  File \"/home/certik/repos/spack/lib/spack/spack/build_environment.py\", line 513, in setup_package\r\n    dpkg.setup_dependent_environment(spack_env, run_env, spec)\r\n  File \"/home/certik/repos/spack/var/spack/repos/builtin/packages/python/package.py\", line 358, in setup_dependent_environment\r\n    raise RuntimeError('Cannot locate python executable')\r\nRuntimeError: Cannot locate python executable\r\n```\r\n\r\nSo that seems like another, unrelated bug, so I reported it as #3319. But it prevents me from debugging it that way.",
    "performed_via_github_app": null
}