{
    "url": "https://api.github.com/repos/spack/spack/issues/21823",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21823/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21823/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21823/events",
    "html_url": "https://github.com/spack/spack/issues/21823",
    "id": 812500246,
    "node_id": "MDU6SXNzdWU4MTI1MDAyNDY=",
    "number": 21823,
    "title": "\u3010kbd\u3011An Error Is Reported When the Spack Is Used to Install the KBD on the SUSE Linux OS",
    "user": {
        "login": "Tom-python0121",
        "id": 77763324,
        "node_id": "MDQ6VXNlcjc3NzYzMzI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/77763324?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Tom-python0121",
        "html_url": "https://github.com/Tom-python0121",
        "followers_url": "https://api.github.com/users/Tom-python0121/followers",
        "following_url": "https://api.github.com/users/Tom-python0121/following{/other_user}",
        "gists_url": "https://api.github.com/users/Tom-python0121/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Tom-python0121/subscriptions",
        "organizations_url": "https://api.github.com/users/Tom-python0121/orgs",
        "repos_url": "https://api.github.com/users/Tom-python0121/repos",
        "events_url": "https://api.github.com/users/Tom-python0121/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Tom-python0121/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-02-20T03:21:33Z",
    "updated_at": "2021-02-22T01:11:15Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\nHello\uff0cI meet a problem about an Error Is Reported When the Spack Is Used to Install the KBD on the SUSE Linux OS and this issue has been resolved,but I'm not sure if this solution is in scope. Can you look at it for me?\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\nsuse:~ # spack install --keep-stage -v kbd\r\n......\r\n2 errors found in build log:\r\n     4     ==> [2021-02-20-11:00:20.274094] Warning: * If the default procedure fails, consider implementing *\r\n     5     ==> [2021-02-20-11:00:20.274133] Warning: *        a custom AUTORECONF phase in the package       *\r\n     6     ==> [2021-02-20-11:00:20.274169] Warning: *********************************************************\r\n     7     ==> [2021-02-20-11:00:20.274897] '/home/spack/opt/spack/linux-sles15-aarch64/gcc-7.4.0/autoconf-2.69-jg44afikddsjy7thn23jcaq3are2sk5t/bin/autoreconf' '-ivf' '-I' '/home/spack/opt/spack/linux-sles15-\r\n           aarch64/gcc-7.4.0/automake-1.16.2-4wmfdqjqd7upy7my3evelquksrvmlezw/share/aclocal' '-I' '/home/spack/opt/spack/linux-sles15-aarch64/gcc-7.4.0/libtool-2.4.6-642gizlyjpkvm56odjurf34f2hfrcmxx/share/aclo\r\n           cal'\r\n     8     autoreconf: Entering directory `.'\r\n     9     autoreconf: running: autopoint --force\r\n  >> 10    Can't exec \"autopoint\": No such file or directory at /home/spack/opt/spack/linux-sles15-aarch64/gcc-7.4.0/autoconf-2.69-jg44afikddsjy7thn23jcaq3are2sk5t/share/autoconf/Autom4te/FileUtils.pm line 345\r\n           .\r\n  >> 11    autoreconf: failed to run autopoint: No such file or directory\r\n     12    autoreconf: autopoint is needed because this package uses Gettext\r\n\r\nSee build log for details:\r\n  /home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-build-out.txt\r\nsuse:~ # spack edit kbd\r\nfrom spack import *\r\nclass Kbd(AutotoolsPackage):\r\n    \"\"\"The kbd project contains tools for managing Linux console\r\n    (Linux console, virtual terminals, keyboard, etc.) - mainly,\r\n    what they do is loading console fonts and keyboard maps.\"\"\"\r\n\r\n    homepage = \"http://kbd-project.org/\"\r\n    url      = \"https://github.com/legionus/kbd/archive/v2.3.0.tar.gz\"\r\n\r\n    version('2.3.0',  sha256='28f05450cfde08259341b9641d222027844c075f77a2bac6ce143b3f33a6eb4e')\r\n    version('2.2.90', sha256='a310a915f474c85ee28cd860677a34a529aca940daa44634a428dd6df58c196e')\r\n    version('2.2.0',  sha256='5dec023c7a05b4d11d8ae795f59fab2b0bacfcc5c20a3d534dc7566cfe47ccf7')\r\n\r\n+  depends_on('gettext', type='build')\r\n    depends_on('autoconf', type='build')\r\n    depends_on('automake', type='build')\r\n    depends_on('libtool',  type='build')\r\n    depends_on('m4',       type='build')\r\n    depends_on('libpam')\r\nsuse:~ # spack install --keep-stage -v kbd\r\n\u2026\u2026\r\n../../config/ylwrap: line 175: yacc: command not found\r\nmake[3]: *** [Makefile:617: parser.c] Error 127\r\nmake[3]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/src/libkeymap'\r\nmake[2]: *** [Makefile:1032: all-recursive] Error 1\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/src'\r\nmake[1]: *** [Makefile:478: all-recursive] Error 1\r\nmake[1]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\nmake: *** [Makefile:409: all] Error 2\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\u2026\u2026\r\nsuse:~ # spack find yacc\r\n==> 2 installed packages\r\n-- linux-sles15-aarch64 / gcc@7.4.0 -----------------------------\r\nbison@3.6.4  byacc@master\r\nsuse:~ # spack edit kbd\r\n\r\nfrom spack import *\r\n\r\n\r\nclass Kbd(AutotoolsPackage):\r\n    \"\"\"The kbd project contains tools for managing Linux console\r\n    (Linux console, virtual terminals, keyboard, etc.) - mainly,\r\n    what they do is loading console fonts and keyboard maps.\"\"\"\r\n\r\n    homepage = \"http://kbd-project.org/\"\r\n    url      = \"https://github.com/legionus/kbd/archive/v2.3.0.tar.gz\"\r\n\r\n    version('2.3.0',  sha256='28f05450cfde08259341b9641d222027844c075f77a2bac6ce143b3f33a6eb4e')\r\n    version('2.2.90', sha256='a310a915f474c85ee28cd860677a34a529aca940daa44634a428dd6df58c196e')\r\n    version('2.2.0',  sha256='5dec023c7a05b4d11d8ae795f59fab2b0bacfcc5c20a3d534dc7566cfe47ccf7')\r\n\r\n+  depends_on('bison', type='build')\r\n+  depends_on('gettext', type='build')\r\n    depends_on('autoconf', type='build')\r\n    depends_on('automake', type='build')\r\n    depends_on('libtool',  type='build')\r\n    depends_on('m4',       type='build')\r\n    depends_on('libpam')\r\nsuse:~ # spack install --keep-stage -v kbd\r\n\u2026\u2026\r\n3 errors found in build log:\r\n     445      LEX      analyze.c\r\n     446      CC       parser.lo\r\n     447      CC       modifiers.lo\r\n     448      CC       ksyms.lo\r\n     449      CC       loadkeys.lo\r\n     450      CC       analyze.lo\r\n  >> 451    gcc: error: analyze.c: No such file or directory\r\n  >> 452    gcc: fatal error: no input files\r\n     453    compilation terminated.\r\n     454    make[4]: *** [Makefile:607: analyze.lo] Error 1\r\n     455    make[4]: *** Waiting for unfinished jobs....\r\n  >> 456    parser.y:21:10: fatal error: analyze.h: No such file or directory\r\n\u2026\u2026\r\nsuse:~ # spack edit kbd\r\nfrom spack import *\r\n\r\n\r\nclass Kbd(AutotoolsPackage):\r\n    \"\"\"The kbd project contains tools for managing Linux console\r\n    (Linux console, virtual terminals, keyboard, etc.) - mainly,\r\n    what they do is loading console fonts and keyboard maps.\"\"\"\r\n\r\n    homepage = \"http://kbd-project.org/\"\r\n    url      = \"https://github.com/legionus/kbd/archive/v2.3.0.tar.gz\"\r\n\r\n    version('2.3.0',  sha256='28f05450cfde08259341b9641d222027844c075f77a2bac6ce143b3f33a6eb4e')\r\n    version('2.2.90', sha256='a310a915f474c85ee28cd860677a34a529aca940daa44634a428dd6df58c196e')\r\n    version('2.2.0',  sha256='5dec023c7a05b4d11d8ae795f59fab2b0bacfcc5c20a3d534dc7566cfe47ccf7')\r\n\r\n + depends_on('flex', type='build')\r\n + depends_on('bison', type='build')\r\n + depends_on('gettext', type='build')\r\n    depends_on('autoconf', type='build')\r\n    depends_on('automake', type='build')\r\n    depends_on('libtool',  type='build')\r\n    depends_on('m4',       type='build')\r\n    depends_on('libpam')\r\nsuse:~ # spack install --keep-stage -v kbd\r\n\u2026\u2026\r\nmake[3]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/src'\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/src'\r\nMaking all in data\r\nmake[2]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/data'\r\nmake[2]: Nothing to be done for 'all'.\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/data'\r\nMaking all in po\r\nmake[2]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/po'\r\n*** error: gettext infrastructure mismatch: using a Makefile.in.in from gettext version 0.19 but the autoconf macros are from gettext version 0.20\r\nmake[2]: *** [Makefile:293: stamp-po] Error 1\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/po'\r\nmake[1]: *** [Makefile:478: all-recursive] Error 1\r\nmake[1]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\nmake: *** [Makefile:409: all] Error 2\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\u2026\u2026\r\nsuse:~ # spack edit kbd\r\nfrom spack import *\r\n\r\n\r\nclass Kbd(AutotoolsPackage):\r\n    \"\"\"The kbd project contains tools for managing Linux console\r\n    (Linux console, virtual terminals, keyboard, etc.) - mainly,\r\n    what they do is loading console fonts and keyboard maps.\"\"\"\r\n\r\n    homepage = \"http://kbd-project.org/\"\r\n    url      = \"https://github.com/legionus/kbd/archive/v2.3.0.tar.gz\"\r\n\r\n    version('2.3.0',  sha256='28f05450cfde08259341b9641d222027844c075f77a2bac6ce143b3f33a6eb4e')\r\n    version('2.2.90', sha256='a310a915f474c85ee28cd860677a34a529aca940daa44634a428dd6df58c196e')\r\n    version('2.2.0',  sha256='5dec023c7a05b4d11d8ae795f59fab2b0bacfcc5c20a3d534dc7566cfe47ccf7')\r\n\r\n + depends_on('flex', type='build')\r\n + depends_on('bison', type='build')\r\n + depends_on('gettext', type='build')\r\n    depends_on('autoconf', type='build')\r\n    depends_on('automake', type='build')\r\n    depends_on('libtool',  type='build')\r\n    depends_on('m4',       type='build')\r\n    depends_on('libpam')\r\n\r\n + def autoreconf(self, spec, prefix):\r\n +     sh = which('sh')\r\n +     sh('./autogen.sh')\r\nsuse:~ # spack install --keep-stage -v kbd\r\n\u2026\u2026\r\n==> [2021-02-20-11:15:53.187225] '/usr/bin/sh' './autogen.sh'\r\n\r\nChecking build-system utilities: OK\r\n\r\nGenerating build-system with:\r\n    autopoint: version 0.21\r\n   libtoolize: version 2.4.6\r\n      aclocal: version 1.16.2\r\n     autoconf: version 2.69\r\n   autoheader: version 2.69\r\n     automake: version 1.16.2\r\n\u2026\u2026\r\nmake[3]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests/libtswrap'\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests/libtswrap'\r\nmake[2]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests'\r\nmake[3]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests'\r\nmake[3]: Nothing to be done for 'install-exec-am'.\r\nmake[3]: Nothing to be done for 'install-data-am'.\r\nmake[3]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests'\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests'\r\nmake[1]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src/tests'\r\nmake[1]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\nmake[2]: Entering directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\nmake[2]: Nothing to be done for 'install-exec-am'.\r\nmake[2]: Nothing to be done for 'install-data-am'.\r\nmake[2]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\nmake[1]: Leaving directory '/home/stage/root/spack-stage-kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp/spack-src'\r\n[+] /home/spack/opt/spack/linux-sles15-aarch64/gcc-7.4.0/kbd-2.3.0-rbjgotygsmyfnq2mbjq6yxi2alpflymp\r\n```\r\nNow, the **kbd** installation and compilation problem has been solved, but I'm not sure if there are any other vulnerabilities, can you tell me?\r\n### Information on your system\r\nsuse:~ # spack debug report\r\n* **Spack:** 0.16.0-77-98460b6f4\r\n* **Python:** 3.6.5\r\n* **Platform:** linux-sles15-aarch64\r\n* **Concretizer:** original\r\n<!-- Please include the output of `spack debug report` -->\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n* [spack-build-out.txt]()\r\n* [spack-build-env.txt]()\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [ ] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [ ] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [ ] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}