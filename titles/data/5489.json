{
    "url": "https://api.github.com/repos/spack/spack/issues/5489",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5489/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5489/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5489/events",
    "html_url": "https://github.com/spack/spack/pull/5489",
    "id": 260734937,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQzMjE3NjAy",
    "number": 5489,
    "title": "Feature to support jailing spack inside a chroot jail",
    "user": {
        "login": "TheTimmy",
        "id": 9502809,
        "node_id": "MDQ6VXNlcjk1MDI4MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9502809?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheTimmy",
        "html_url": "https://github.com/TheTimmy",
        "followers_url": "https://api.github.com/users/TheTimmy/followers",
        "following_url": "https://api.github.com/users/TheTimmy/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheTimmy/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/TheTimmy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheTimmy/subscriptions",
        "organizations_url": "https://api.github.com/users/TheTimmy/orgs",
        "repos_url": "https://api.github.com/users/TheTimmy/repos",
        "events_url": "https://api.github.com/users/TheTimmy/events{/privacy}",
        "received_events_url": "https://api.github.com/users/TheTimmy/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-09-26T19:05:28Z",
    "updated_at": "2017-09-29T16:22:32Z",
    "closed_at": "2017-09-29T16:22:32Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/5489",
        "html_url": "https://github.com/spack/spack/pull/5489",
        "diff_url": "https://github.com/spack/spack/pull/5489.diff",
        "patch_url": "https://github.com/spack/spack/pull/5489.patch"
    },
    "body": "This feature support to jail Spack inside a chroot (see #5193 approach 3 for details).\r\nThis allows to find potential missing depends_on calls.\r\n\r\nIt introduces the commands:\r\n\r\n./spack isolate --build-environment path/to/jail/dir --tarball path/to/tarball\r\nTo create a jail for Spack and mount bind /dev, /sys and /proc to be available inside the jail.\r\n\r\n./spack isolate --remove-environment\r\nTo unmount the mounted /dev, /sys and /proc directories.\r\n\r\n./spack isolate --cli\r\nTo start a shell inside the jail.\r\n\r\nTo create a bootstrap environment it is possible to use an already generated tarball from OpenStack or by using mkosi. A restriction is, that the root directory of the tarball must be a directory which contains the distribution.\r\n\r\nBecause the mount bind process requires root rights, there are currently three approaches to solve this issue.\r\n1) By being root user.\r\n2) By register the /dev, /sys and /proc directories into fstab via the --permanent option, when building the jail with --build-environment. This operation requires to be root.\r\n3) By starting a daemon via ./spack isolate --start-daemon. This allows every user to mount bind /dev, /sys and /proc to the desired location.\r\n4) If someone knows a better method I'm happy to change the current one.",
    "performed_via_github_app": null
}