{
    "url": "https://api.github.com/repos/spack/spack/issues/4843",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4843/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4843/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4843/events",
    "html_url": "https://github.com/spack/spack/issues/4843",
    "id": 244670170,
    "node_id": "MDU6SXNzdWUyNDQ2NzAxNzA=",
    "number": 4843,
    "title": "Error: KeyError: 'No spec with name cbtf-krell in openspeedshop...",
    "user": {
        "login": "spco",
        "id": 11610738,
        "node_id": "MDQ6VXNlcjExNjEwNzM4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11610738?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/spco",
        "html_url": "https://github.com/spco",
        "followers_url": "https://api.github.com/users/spco/followers",
        "following_url": "https://api.github.com/users/spco/following{/other_user}",
        "gists_url": "https://api.github.com/users/spco/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/spco/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/spco/subscriptions",
        "organizations_url": "https://api.github.com/users/spco/orgs",
        "repos_url": "https://api.github.com/users/spco/repos",
        "events_url": "https://api.github.com/users/spco/events{/privacy}",
        "received_events_url": "https://api.github.com/users/spco/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446630669,
            "node_id": "MDU6TGFiZWw0NDY2MzA2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/dependencies",
            "name": "dependencies",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "adamjstewart",
            "id": 12021217,
            "node_id": "MDQ6VXNlcjEyMDIxMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adamjstewart",
            "html_url": "https://github.com/adamjstewart",
            "followers_url": "https://api.github.com/users/adamjstewart/followers",
            "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
            "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
            "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
            "repos_url": "https://api.github.com/users/adamjstewart/repos",
            "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 12,
    "created_at": "2017-07-21T13:33:16Z",
    "updated_at": "2017-07-27T16:07:24Z",
    "closed_at": "2017-07-27T16:07:23Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "From a brand-new spack installation, running\r\n```./spack install openspeedshop```\r\nfrom `spack/bin` gives me (after many other dependencies install)\r\n```\r\n...\r\n[+] /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/cbtf-1.8-2grslvlcfrybzbsq2uh2e4vuiygvv3sm\r\n==> flex is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/flex-2.6.4-htapbeuibpjr2wvsgy7y3lstuhcm6xqc\r\n==> zlib is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/zlib-1.2.11-yrijbmajetpxrkyaa4uclsyw62zbhc5m\r\n==> bison is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/bison-3.0.4-c5ytubd6ywscu36h5fjthcj7gcy6xbi7\r\n==> gettext is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gettext-0.19.8.1-6nnpyxiwhkiphhqg3bkofgt7xihixay3\r\n==> m4 is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/m4-1.4.18-q4wgufspmqjhpfohffdbd73atohe4ncx\r\n==> Installing binutils\r\n==> Fetching https://ftp.gnu.org/gnu/binutils/binutils-2.24.tar.bz2\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/s/sc676/spack/var/spack/stage/binutils-2.24-kw4ffc2lzzpf6lp6rymi3rqp3frtwrm6/binutils-2.24.tar.bz2\r\n==> Created stage in /home/s/sc676/spack/var/spack/stage/binutils-2.24-kw4ffc2lzzpf6lp6rymi3rqp3frtwrm6\r\n==> Applied patch cr16.patch\r\n==> Applied patch binutilskrell-2.24.patch\r\n==> Ran patch() for binutils\r\n==> Building binutils [AutotoolsPackage]\r\n==> Executing phase : 'autoreconf'\r\n==> Executing phase : 'configure'\r\n==> Executing phase : 'build'\r\n==> Executing phase : 'install'\r\n==> Successfully installed binutils\r\n  Fetch: 8.87s.  Build: 3m 45.77s.  Total: 3m 54.64s.\r\n[+] /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/binutils-2.24-kw4ffc2lzzpf6lp6rymi3rqp3frtwrm6\r\n==> libdwarf is already installed in /home/s/sc676/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/libdwarf-20160507-ycnds3jamytca2v2tel6en5mqpbmkxoi\r\n==> Installing openspeedshop\r\n==> Error: KeyError: 'No spec with name cbtf-krell in openspeedshop@2.3%gcc@4.8.5+cbtf~cuda~frontend~mpich~mpich2~mpt~mvapich~mvapich2~offline~openmpi~rtfe~runtime~useqt4gui arch=linux-centos7-x86_64 ^binutils@2.24%gcc@4.8.5+gold+krellpatch~libiberty~plugins arch=linux-centos7-x86_64 ^bison@3.0.4%gcc@4.8.5 arch=linux-centos7-x86_64 ^boost@1.59.0%gcc@4.8.5+atomic+chrono+date_time~debug+filesystem~graph~icu+iostreams+locale+log+math~mpi+multithreaded+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer+wave arch=linux-centos7-x86_64 ^bzip2@1.0.6%gcc@4.8.5+shared arch=linux-centos7-x86_64 ^cbtf@1.8%gcc@4.8.5~runtime arch=linux-centos7-x86_64 ^cmake@3.8.1%gcc@4.8.5~doc+ncurses+openssl+ownlibs~qt arch=linux-centos7-x86_64 ^dyninst@9.3.2%gcc@4.8.5~stat_dysect arch=linux-centos7-x86_64 ^elfutils@0.163%gcc@4.8.5 arch=linux-centos7-x86_64 ^flex@2.6.4%gcc@4.8.5+lex arch=linux-centos7-x86_64 ^font-util@1.3.1%gcc@4.8.5 arch=linux-centos7-x86_64 ^fontconfig@2.12.3%gcc@4.8.5 arch=linux-centos7-x86_64 ^freetype@2.7.1%gcc@4.8.5 arch=linux-centos7-x86_64 ^gettext@0.19.8.1%gcc@4.8.5+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-x86_64 ^gperf@3.0.4%gcc@4.8.5 arch=linux-centos7-x86_64 ^help2man@1.47.4%gcc@4.8.5 arch=linux-centos7-x86_64 ^icu4c@58.2%gcc@4.8.5 arch=linux-centos7-x86_64 ^inputproto@2.3.2%gcc@4.8.5 arch=linux-centos7-x86_64 ^jpeg@9b%gcc@4.8.5 arch=linux-centos7-x86_64 ^kbproto@1.0.7%gcc@4.8.5 arch=linux-centos7-x86_64 ^lcms@2.8%gcc@4.8.5 arch=linux-centos7-x86_64 ^libdwarf@20160507%gcc@4.8.5 arch=linux-centos7-x86_64 ^libmng@2.0.3%gcc@4.8.5 arch=linux-centos7-x86_64 ^libpng@1.2.57%gcc@4.8.5 arch=linux-centos7-x86_64 ^libpthread-stubs@0.4%gcc@4.8.5 arch=linux-centos7-x86_64 ^libsigsegv@2.11%gcc@4.8.5 arch=linux-centos7-x86_64 ^libtiff@4.0.8%gcc@4.8.5 arch=linux-centos7-x86_64 ^libx11@1.6.5%gcc@4.8.5 arch=linux-centos7-x86_64 ^libxau@1.0.8%gcc@4.8.5 arch=linux-centos7-x86_64 ^libxcb@1.12%gcc@4.8.5 arch=linux-centos7-x86_64 ^libxdmcp@1.1.2%gcc@4.8.5 arch=linux-centos7-x86_64 ^libxml2@2.9.4%gcc@4.8.5+python arch=linux-centos7-x86_64 ^m4@1.4.18%gcc@4.8.5+sigsegv arch=linux-centos7-x86_64 ^mrnet@5.0.1-2%gcc@4.8.5+lwthreads arch=linux-centos7-x86_64 ^ncurses@6.0%gcc@4.8.5~symlinks arch=linux-centos7-x86_64 ^openssl@1.0.2k%gcc@4.8.5 arch=linux-centos7-x86_64 ^pkg-config@0.29.2%gcc@4.8.5+internal_glib arch=linux-centos7-x86_64 ^python@2.7.13%gcc@4.8.5+shared~tk~ucs4 arch=linux-centos7-x86_64 ^qt@3.3.8b%gcc@4.8.5~dbus~examples~gtk+krellpatch~mesa+opengl~phonon~webkit arch=linux-centos7-x86_64 ^readline@7.0%gcc@4.8.5 arch=linux-centos7-x86_64 ^sqlite@3.18.0%gcc@4.8.5 arch=linux-centos7-x86_64 ^tar@1.29%gcc@4.8.5 arch=linux-centos7-x86_64 ^util-macros@1.19.1%gcc@4.8.5 arch=linux-centos7-x86_64 ^xcb-proto@1.12%gcc@4.8.5 arch=linux-centos7-x86_64 ^xerces-c@3.1.4%gcc@4.8.5 arch=linux-centos7-x86_64 ^xextproto@7.3.0%gcc@4.8.5 arch=linux-centos7-x86_64 ^xproto@7.0.31%gcc@4.8.5 arch=linux-centos7-x86_64 ^xtrans@1.3.5%gcc@4.8.5 arch=linux-centos7-x86_64 ^xz@5.2.3%gcc@4.8.5 arch=linux-centos7-x86_64 ^zlib@1.2.11%gcc@4.8.5+pic+shared arch=linux-centos7-x86_64'\r\n/home/s/sc676/spack/var/spack/repos/builtin/packages/openspeedshop/package.py:337, in setup_environment:\r\n     305      def setup_environment(self, spack_env, run_env):\r\n     306          \"\"\"Set up the compile and runtime environments for a package.\"\"\"\r\n     307  \r\n     308          # Common settings to both offline and cbtf versions\r\n     309          # of OpenSpeedShop\r\n     310          run_env.prepend_path('PATH', self.prefix.bin)\r\n     311  \r\n     312          # Find Dyninst library path, this is needed to\r\n     313          # set the DYNINSTAPI_RT_LIB library which is\r\n     314          # required for OpenSpeedShop to find loop level\r\n     315          # performance information\r\n     316          dyninst_libdir = find_libraries('libdyninstAPI_RT',\r\n     317                                          root=self.spec['dyninst'].prefix,\r\n     318                                          shared=True, recurse=True)\r\n     319  \r\n     320          # Set Dyninst RT library path to support OSS loop resolution code\r\n     321          run_env.set('DYNINSTAPI_RT_LIB', dyninst_libdir)\r\n     322  \r\n     323          # Find openspeedshop library path\r\n     324          oss_libdir = find_libraries('libopenss-framework',\r\n     325                                      root=self.spec['openspeedshop'].prefix,\r\n     326                                      shared=True, recurse=True)\r\n     327          run_env.prepend_path('LD_LIBRARY_PATH',\r\n     328                               os.path.dirname(oss_libdir.joined()))\r\n     329  \r\n     330          # Settings specific to the version, checking here\r\n     331          # for the cbtf instrumentor\r\n     332          if '+cbtf' in self.spec:\r\n     333              cbtf_mc = '/sbin/cbtf_mrnet_commnode'\r\n     334              cbtf_lmb = '/sbin/cbtf_libcbtf_mrnet_backend'\r\n     335              run_env.set('XPLAT_RSH', 'ssh')\r\n     336              run_env.set('MRNET_COMM_PATH',\r\n  >> 337                          join_path(self.spec['cbtf-krell'].prefix + cbtf_mc))\r\n     338  \r\n     339              run_env.set('CBTF_MRNET_BACKEND_PATH',\r\n     340                          join_path(self.spec['cbtf-krell'].prefix + cbtf_lmb))\r\n     341  \r\n     342              run_env.prepend_path('PATH', self.spec['mrnet'].prefix.bin)\r\n     343              run_env.prepend_path('PATH', self.spec['cbtf-krell'].prefix.bin)\r\n     344              run_env.prepend_path('PATH', self.spec['cbtf-krell'].prefix.sbin)\r\n     345  \r\n     346          elif '+offline' in self.spec:\r\n     347              # Had to use this form of syntax self.prefix.lib and\r\n     348              # self.prefix.lib64 returned None all the time\r\n     349              run_env.set('OPENSS_RAWDATA_DIR', '.')\r\n     350              run_env.set('OPENSS_PLUGIN_PATH',\r\n     351                          join_path(oss_libdir + '/openspeedshop'))\r\n     352              run_env.prepend_path('PATH', self.spec['papi'].prefix.bin)\r\n     353              run_env.prepend_path('PATH', self.spec['libdwarf'].prefix.bin)\r\n     354  \r\n     355              if '+mpich' in self.spec:\r\n     356                  run_env.set('OPENSS_MPI_IMPLEMENTATION', 'mpich')\r\n     357              if '+mpich2' in self.spec:\r\n     358                  run_env.set('OPENSS_MPI_IMPLEMENTATION', 'mpich2')\r\n     359              if '+mvapich2' in self.spec:\r\n     360                  run_env.set('OPENSS_MPI_IMPLEMENTATION', 'mvapich2')\r\n     361              if '+openmpi' in self.spec:\r\n     362                  run_env.set('OPENSS_MPI_IMPLEMENTATION', 'openmpi')\r\n```\r\n\r\nNaively (first-time spack user) I've tried `./spack install cbtf-krell`, which succeeded, but re-running `./spack install openspeedshop` gives identical error message.\r\n\r\nAny help?",
    "performed_via_github_app": null
}