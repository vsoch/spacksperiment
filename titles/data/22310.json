{
    "url": "https://api.github.com/repos/spack/spack/issues/22310",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22310/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22310/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22310/events",
    "html_url": "https://github.com/spack/spack/issues/22310",
    "id": 832285993,
    "node_id": "MDU6SXNzdWU4MzIyODU5OTM=",
    "number": 22310,
    "title": "amrex@21.03: segfault during compile w/ gcc@8.1.0 on RHEL7",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2021-03-15T23:46:12Z",
    "updated_at": "2021-03-16T23:54:40Z",
    "closed_at": "2021-03-16T23:54:40Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "`amrex@21.03` fails to build using:\r\n* `spack@develop` (195341113e7da85611553d1ea9bd907ccabeff64 from `Mon Mar 15 21:38:35 2021 +0100`)\r\n* GCC 8.1.0 (built with Spack)\r\n* Docker images:\r\n  *  `ecpe4s/rhel7-runner-x86_64:2021-03-01`\r\n  *  `ecpe4s/rhel7-runner-ppc64le:2021-03-01`\r\n\r\n\r\nConcrete spec: [amrex-fze7ei.spec.yaml.txt](https://github.com/spack/spack/files/6094290/amrex-fze7ei.spec.yaml.txt)\r\nConfigure args: [amrex-spack-configure-args.txt](https://github.com/spack/spack/files/6094300/amrex-spack-configure-args.txt)\r\nBuild log: [amrex-spack-build-out.txt](https://github.com/spack/spack/files/6145088/amrex-spack-build-out.txt)\r\n\r\n\r\n```\r\n$> spack install -f ./amrex-fze7ei.spec.yaml\r\n...\r\n==> Installing amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x\r\n==> Fetching https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/_source-cache/archive/63/6307bf75c80c2076bf5bd1cff4d12483280a32b5175fe117f32eed9c89cd1ac5.tar.gz\r\n######################################################################## 100.0%\r\n==> No patches needed for amrex\r\n==> amrex: Executing phase: 'cmake'\r\n==> amrex: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j32'\r\n\r\n3 errors found in build log:\r\n     271    /tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-src/Src/LinearSolvers/MLMG/AMReX_MLNodeLaplacian.cpp:2061:21: internal compiler\r\n             error: Segmentation fault\r\n     272                         });\r\n     273                         ^\r\n     274    Please submit a full bug report,\r\n     275    with preprocessed source if appropriate.\r\n     276    See <https://github.com/spack/spack/issues> for instructions.\r\n  >> 277    make[2]: *** [Src/CMakeFiles/amrex.dir/LinearSolvers/MLMG/AMReX_MLNodeLaplacian.cpp.o] Error 1\r\n     278    make[2]: *** Waiting for unfinished jobs....\r\n     279    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-build-fze7eil'\r\n  >> 280    make[1]: *** [Src/CMakeFiles/amrex.dir/all] Error 2\r\n     281    make[1]: Leaving directory `/tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-build-fze7eil'\r\n  >> 282    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-build-out.txt\r\n```\r\n\r\nBacktrace\r\n```\r\n/tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-src/Src/LinearSolvers/MLMG/AMReX_MLNodeLaplacian.cpp: In lambda function:\r\n/tmp/root/spack-stage/spack-stage-amrex-21.03-fze7eilhl2hqne5r5u7g2qbxtex5uc2x/spack-src/Src/LinearSolvers/MLMG/AMReX_MLNodeLaplacian.cpp:2061:21: internal compiler error: Segmentation fault\r\n                     });\r\n                     ^\r\n0xb34b5f crash_signal\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/toplev.c:325\r\n0x58c9e5 prune_lambda_captures\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/lambda.c:1489\r\n0x58c9e5 finish_lambda_function(tree_node*)\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/lambda.c:1519\r\n0x681239 cp_parser_lambda_body\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:10692\r\n0x681239 cp_parser_lambda_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:10187\r\n0x681239 cp_parser_primary_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:5263\r\n0x692059 cp_parser_postfix_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:7022\r\n0x6929b1 cp_parser_unary_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:8317\r\n0x674f71 cp_parser_cast_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9085\r\n0x67576a cp_parser_binary_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9186\r\n0x676e44 cp_parser_assignment_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9481\r\n0x678b26 cp_parser_parenthesized_expression_list\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:7756\r\n0x691bf0 cp_parser_postfix_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:7096\r\n0x6929b1 cp_parser_unary_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:8317\r\n0x674f71 cp_parser_cast_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9085\r\n0x67576a cp_parser_binary_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9186\r\n0x676e44 cp_parser_assignment_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9481\r\n0x675f83 cp_parser_constant_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9765\r\n0x676dc7 cp_parser_initializer_clause\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:21942\r\n0x676f6a cp_parser_assignment_expression\r\n\t/tmp/root/spack-stage/spack-stage-gcc-8.1.0-fde6qts62r4baorvcrpkjxc7c6vzmn3w/spack-src/gcc/cp/parser.c:9502\r\n```\r\n\r\nIf this is a compiler bug that others will encounter, perhaps we should add a conflict statement for `%gcc@8.1.0` ?\r\n\r\n@mic84 @asalmgren @eschnett ",
    "performed_via_github_app": null
}