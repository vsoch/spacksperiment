{
    "url": "https://api.github.com/repos/spack/spack/issues/19828",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19828/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19828/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19828/events",
    "html_url": "https://github.com/spack/spack/issues/19828",
    "id": 739435373,
    "node_id": "MDU6SXNzdWU3Mzk0MzUzNzM=",
    "number": 19828,
    "title": "Error in concretization when using dev-build",
    "user": {
        "login": "psakievich",
        "id": 12102506,
        "node_id": "MDQ6VXNlcjEyMTAyNTA2",
        "avatar_url": "https://avatars.githubusercontent.com/u/12102506?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psakievich",
        "html_url": "https://github.com/psakievich",
        "followers_url": "https://api.github.com/users/psakievich/followers",
        "following_url": "https://api.github.com/users/psakievich/following{/other_user}",
        "gists_url": "https://api.github.com/users/psakievich/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/psakievich/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/psakievich/subscriptions",
        "organizations_url": "https://api.github.com/users/psakievich/orgs",
        "repos_url": "https://api.github.com/users/psakievich/repos",
        "events_url": "https://api.github.com/users/psakievich/events{/privacy}",
        "received_events_url": "https://api.github.com/users/psakievich/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "becker33",
            "id": 13971568,
            "node_id": "MDQ6VXNlcjEzOTcxNTY4",
            "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/becker33",
            "html_url": "https://github.com/becker33",
            "followers_url": "https://api.github.com/users/becker33/followers",
            "following_url": "https://api.github.com/users/becker33/following{/other_user}",
            "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
            "organizations_url": "https://api.github.com/users/becker33/orgs",
            "repos_url": "https://api.github.com/users/becker33/repos",
            "events_url": "https://api.github.com/users/becker33/events{/privacy}",
            "received_events_url": "https://api.github.com/users/becker33/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-11-09T23:09:12Z",
    "updated_at": "2021-04-08T00:13:10Z",
    "closed_at": "2021-04-08T00:13:10Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I've been trying to do a `dev-build` of trilinos .  When I do the dependency on netcdf gets ignored by the concretizer.  This leads to a build failure in the CMake phase.\r\n  \r\n### Steps to reproduce the issue\r\n\r\nYou can see the difference just from using `spack spec -I` and comparing the results when using `@dev` vs `@develop`\r\n\r\n```console\r\n[psakiev@ascicgpu24 packages]$ spack spec -I  trilinos@dev+netcdf\r\nInput spec\r\n--------------------------------\r\n -   trilinos@dev+netcdf\r\n\r\nConcretized\r\n--------------------------------\r\n -   trilinos@dev%gcc@7.4.0~adios2~alloptpkgs~amesos+amesos2~anasazi~aztec+belos+boost~cgns~chaco~complex~cuda~debug~dtk~epetra~epetraext+exodus+explicit_template_instantiation~float~fortran+glm+gtest+hdf5~hwloc~hypre~ifpack+ifpack2~intrepid~intrepid2~ipo~isorropia+kokkos+matio~mesquite~metis~minitensor~ml+mpi+muelu~mumps+netcdf~nox~openmp~phalanx~piro+pnetcdf~python~rol~rythmos~sacado+shards~shared~shylu+stk~stratimikos~strumpack~suite-sparse+superlu~superlu-dist~teko~tempus+teuchos+tpetra~wrapper~x11~xsdkflags+zlib+zoltan+zoltan2 build_type=Release cuda_arch=none cxxstd=11 gotype=long arch=linux-rhel7-x86_64\r\n[+]      ^boost@1.74.0%gcc@7.4.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=98 visibility=hidden arch=linux-rhel7-x86_64\r\n[+]          ^bzip2@1.0.8%gcc@7.4.0+shared arch=linux-rhel7-x86_64\r\n[+]              ^diffutils@3.7%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]                  ^libiconv@1.16%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]          ^zlib@1.2.11%gcc@7.4.0+optimize+pic+shared arch=linux-rhel7-x86_64\r\n[+]      ^cmake@3.12.2%gcc@7.4.0~doc+ncurses+openssl+ownlibs~qt patches=1c540040c7e203dd8e27aa20345ecb07fe06570d56410a24a266ae570b1c4c39,93488edf3f89cef6f3c77e821007c022e88e9f1f566ae9bf824a87ecbac97ebb,dd3a40d4d92f6b2158b87d6fb354c277947c776424aa03f6dc8096cf3135f5d0 arch=linux-rhel7-x86_64\r\n -       ^glm@0.9.7.1%gcc@7.4.0~ipo build_type=Release arch=linux-rhel7-x86_64\r\n -       ^hdf5@1.10.7%gcc@7.4.0~cxx~debug~fortran+hl~java+mpi+pic+shared~szip~threadsafe api=none arch=linux-rhel7-x86_64\r\n[+]          ^openmpi@4.0.2%gcc@7.2.0~atomics~cuda~cxx~cxx_exceptions+gpfs~java~legacylaunchers~lustre~memchecker~pmi~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none patches=073477a76bba780c67c36e959cd3ee6910743e2735c7e76850ffba6791d498e4 schedulers=none arch=linux-rhel7-x86_64\r\n -       ^matio@1.5.17%gcc@7.4.0+hdf5+shared+zlib arch=linux-rhel7-x86_64\r\n -       ^netlib-lapack@3.8.0%gcc@7.4.0~external-blas~ipo+lapacke+shared~xblas build_type=Release patches=5c79286f3d08a0b0f1f3acba2a92ee698647716ba8c6c0ae20c9cc2713e6f139,ad3d41fe9ff94b7661e09fceaf2b2e4b8c83510c1465c016e161541b4429b5ee arch=linux-rhel7-x86_64\r\n -       ^superlu@4.3%gcc@7.4.0+pic arch=linux-rhel7-x86_64\r\n\r\n[psakiev@ascicgpu24 packages]$ spack spec -I  trilinos@develop+netcdf\r\nInput spec\r\n--------------------------------\r\n -   trilinos@develop+netcdf\r\n\r\nConcretized\r\n--------------------------------\r\n -   trilinos@develop%gcc@7.4.0~adios2~alloptpkgs~amesos+amesos2~anasazi~aztec+belos+boost~cgns~chaco~complex~cuda~debug~dtk~epetra~epetraext+exodus+explicit_template_instantiation~float~fortran+glm+gtest+hdf5~hwloc~hypre~ifpack+ifpack2~intrepid~intrepid2~ipo~isorropia+kokkos+matio~mesquite~metis~minitensor~ml+mpi+muelu~mumps+netcdf~nox~openmp~phalanx~piro+pnetcdf~python~rol~rythmos~sacado+shards~shared~shylu+stk~stratimikos~strumpack~suite-sparse+superlu~superlu-dist~teko~tempus+teuchos+tpetra~wrapper~x11~xsdkflags+zlib+zoltan+zoltan2 build_type=Release cuda_arch=none cxxstd=11 gotype=long arch=linux-rhel7-x86_64\r\n[+]      ^boost@1.74.0%gcc@7.4.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=98 visibility=hidden arch=linux-rhel7-x86_64\r\n[+]          ^bzip2@1.0.8%gcc@7.4.0+shared arch=linux-rhel7-x86_64\r\n[+]              ^diffutils@3.7%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]                  ^libiconv@1.16%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]          ^zlib@1.2.11%gcc@7.4.0+optimize+pic+shared arch=linux-rhel7-x86_64\r\n[+]      ^cmake@3.12.2%gcc@7.4.0~doc+ncurses+openssl+ownlibs~qt patches=1c540040c7e203dd8e27aa20345ecb07fe06570d56410a24a266ae570b1c4c39,93488edf3f89cef6f3c77e821007c022e88e9f1f566ae9bf824a87ecbac97ebb,dd3a40d4d92f6b2158b87d6fb354c277947c776424aa03f6dc8096cf3135f5d0 arch=linux-rhel7-x86_64\r\n -       ^glm@0.9.7.1%gcc@7.4.0~ipo build_type=Release arch=linux-rhel7-x86_64\r\n -       ^hdf5@1.10.7%gcc@7.4.0~cxx~debug~fortran+hl~java+mpi+pic+shared~szip~threadsafe api=none arch=linux-rhel7-x86_64\r\n[+]          ^openmpi@4.0.2%gcc@7.2.0~atomics~cuda~cxx~cxx_exceptions+gpfs~java~legacylaunchers~lustre~memchecker~pmi~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none patches=073477a76bba780c67c36e959cd3ee6910743e2735c7e76850ffba6791d498e4 schedulers=none arch=linux-rhel7-x86_64\r\n -       ^matio@1.5.17%gcc@7.4.0+hdf5+shared+zlib arch=linux-rhel7-x86_64\r\n -       ^netcdf-c@4.7.4%gcc@7.4.0~dap~hdf4~jna+mpi+parallel-netcdf+pic+shared arch=linux-rhel7-x86_64\r\n[+]          ^m4@1.4.18%gcc@7.4.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-rhel7-x86_64\r\n[+]              ^libsigsegv@2.12%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n -           ^parallel-netcdf@1.12.1%gcc@7.4.0~burstbuffer+cxx+fortran+pic+shared arch=linux-rhel7-x86_64\r\n -               ^perl@5.32.0%gcc@7.4.0+cpanm+shared+threads arch=linux-rhel7-x86_64\r\n[+]                  ^berkeley-db@18.1.40%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]                  ^gdbm@1.18.1%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]                      ^readline@8.0%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n[+]                          ^ncurses@6.2%gcc@7.4.0~symlinks+termlib arch=linux-rhel7-x86_64\r\n[+]                              ^pkgconf@1.7.3%gcc@7.4.0 arch=linux-rhel7-x86_64\r\n -       ^netlib-lapack@3.8.0%gcc@7.4.0~external-blas~ipo+lapacke+shared~xblas build_type=Release patches=5c79286f3d08a0b0f1f3acba2a92ee698647716ba8c6c0ae20c9cc2713e6f139,ad3d41fe9ff94b7661e09fceaf2b2e4b8c83510c1465c016e161541b4429b5ee arch=linux-rhel7-x86_64\r\n -       ^superlu@4.3%gcc@7.4.0+pic arch=linux-rhel7-x86_64\r\n...\r\n```\r\n\r\n### Error Message\r\nWhen I actually go to do the build this error persists. \r\n`spack dev-build -n trilinos@dev+netcdf`\r\n\r\ndies with this:\r\n```console\r\n/projects/wind/spack-manager/spack/var/spack/repos/builtin/packages/trilinos/package.py:597, in cmake_args:\r\n        594\r\n        595        options.append(define_tpl_enable('Netcdf'))\r\n        596        if '+netcdf' in spec:\r\n  >>    597            options.append(define('NetCDF_ROOT', spec['netcdf-c'].prefix))\r\n        598\r\n        599        options.append(define_tpl_enable('HYPRE'))\r\n        600        if '+hypre' in spec:\r\n```\r\n\r\n### Information on your system\r\n\r\n```\r\n[psakiev@ascicgpu24 ~]$ spack debug report\r\n* **Spack:** 0.15.3-1888-9619f77\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel7-skylake_avx512\r\n```\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [ ] I have run the failing commands in debug mode and reported the output\r\n\r\n\r\n",
    "performed_via_github_app": null
}