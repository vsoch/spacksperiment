{
    "url": "https://api.github.com/repos/spack/spack/issues/8237",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8237/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8237/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8237/events",
    "html_url": "https://github.com/spack/spack/issues/8237",
    "id": 325178172,
    "node_id": "MDU6SXNzdWUzMjUxNzgxNzI=",
    "number": 8237,
    "title": "Spack Mismatches OS and/or Compiler",
    "user": {
        "login": "ax3l",
        "id": 1353258,
        "node_id": "MDQ6VXNlcjEzNTMyNTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1353258?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ax3l",
        "html_url": "https://github.com/ax3l",
        "followers_url": "https://api.github.com/users/ax3l/followers",
        "following_url": "https://api.github.com/users/ax3l/following{/other_user}",
        "gists_url": "https://api.github.com/users/ax3l/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ax3l/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ax3l/subscriptions",
        "organizations_url": "https://api.github.com/users/ax3l/orgs",
        "repos_url": "https://api.github.com/users/ax3l/repos",
        "events_url": "https://api.github.com/users/ax3l/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ax3l/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 73908755,
            "node_id": "MDU6TGFiZWw3MzkwODc1NQ==",
            "url": "https://api.github.com/repos/spack/spack/labels/duplicate",
            "name": "duplicate",
            "color": "cccccc",
            "default": true,
            "description": null
        },
        {
            "id": 455855856,
            "node_id": "MDU6TGFiZWw0NTU4NTU4NTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/external-packages",
            "name": "external-packages",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-05-22T07:51:53Z",
    "updated_at": "2018-06-16T10:34:13Z",
    "closed_at": "2018-06-16T10:31:24Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I am running [Spack on Travis-CI](https://spack.readthedocs.io/en/latest/workflows.html#using-spack-on-travis-ci). This works splendid so far.\r\n\r\nFor some reason with a [minimal PR](https://github.com/openPMD/openPMD-api/pull/190) to add an additional dependency, spack starts to [select an OSX compiler on Ubuntu](https://travis-ci.org/openPMD/openPMD-api/jobs/381153380) and causes similar confusing runtime mismatches:\r\n  https://travis-ci.org/openPMD/openPMD-api/builds/381153375\r\n\r\n\r\n```\r\nStill running (1 of 20): spack install adios ~mpi %clang@5.0.0\r\nThe command spack install adios ~mpi %clang@5.0.0 exited with 1.\r\nLog:\r\n==> Error: No compilers with spec clang@8.1.0 found for operating system ubuntu14.04 and target x86_64.\r\nRun 'spack compiler find' to add compilers.\r\n```\r\n\r\nMy config files are multi-platform:\r\n  https://github.com/openPMD/openPMD-api/tree/dev/.travis/spack\r\n\r\n### Expected Result\r\n\r\nStill select the right OS and compilers.\r\n\r\n### Actual Result\r\n\r\nOn Ubuntu 14.04 and with Clang 5.0 it suddenly tries to select clang 8.0 from OSX (which fails). Other images/configs show similar confusing output.\r\n\r\n### Steps to reproduce the issue\r\n\r\nConfig files: (did I set something quite off here?)\r\n  https://github.com/openPMD/openPMD-api/tree/dev/.travis/spack\r\n\r\nSpack setup and install lines:\r\n  https://github.com/openPMD/openPMD-api/blob/7240ebe2fc2a22f60f0f40ff7bb4329fa6224ffd/.travis.yml#L210-L297\r\n\r\nPR that breaks compiler selection and OS detection:\r\n  https://github.com/openPMD/openPMD-api/pull/190\r\n\r\n### Information on your system\r\n\r\nTravis-CI Ubuntu 14.04 and OSX images: https://docs.travis-ci.com/user/reference/overview/#Virtualisation-Environment-vs-Operating-System",
    "performed_via_github_app": null
}