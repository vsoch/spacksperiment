{
    "url": "https://api.github.com/repos/spack/spack/issues/1266",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/1266/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/1266/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/1266/events",
    "html_url": "https://github.com/spack/spack/issues/1266",
    "id": 165889081,
    "node_id": "MDU6SXNzdWUxNjU4ODkwODE=",
    "number": 1266,
    "title": "`No such spec in database` error",
    "user": {
        "login": "eschnett",
        "id": 213514,
        "node_id": "MDQ6VXNlcjIxMzUxNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/213514?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eschnett",
        "html_url": "https://github.com/eschnett",
        "followers_url": "https://api.github.com/users/eschnett/followers",
        "following_url": "https://api.github.com/users/eschnett/following{/other_user}",
        "gists_url": "https://api.github.com/users/eschnett/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eschnett/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eschnett/subscriptions",
        "organizations_url": "https://api.github.com/users/eschnett/orgs",
        "repos_url": "https://api.github.com/users/eschnett/repos",
        "events_url": "https://api.github.com/users/eschnett/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eschnett/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2016-07-15T22:27:11Z",
    "updated_at": "2016-10-11T09:35:46Z",
    "closed_at": "2016-10-11T09:35:46Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "This command\n\n```\nspack install -j24 cactusext +funhpc +julia +llvm +simulationio %gcc@6.1.0-spack\n```\n\nled to this error:\n\n```\n==> Installing cactusext\n==> openmpi is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/openmpi-2.0.0-5l3pomaqonrx3phvbm4kblzsms56ljtj\n==> hwloc is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/hwloc-1.11.3-xgdwohjb2o26uftzaqtcmwf2ejxlhidw\n==> git is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/git-2.8.1-jh72meyfuritl2wexqmckrshmufe7az4\n==> papi is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/papi-5.4.3-tnovpyennp4cerqns4xnfscfvl6d3zlz\n==> hdf5-blosc is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/hdf5-blosc-master-6m7xtyqubxsb2merc36i2oyhtdvno3zp\n==> lmod is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/lmod-6.4.1-i2xu3l63aipam7bdlu3ig4eriqtjnbbd\n==> hdf5 is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/hdf5-1.10.0-patch1-jfa4zar7ysebuadia7zlhoebrlaeo5lv\n==> python is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/python-2.7.11-y6bfneoxof25qt6wgdsbfsra62grfdnz\n==> lua is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/lua-5.3.2-xe6niqb4cwgkdpq33qjoi3rby3vcdnew\n==> fftw is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/fftw-3.3.4-ojokm7aahpro46e4tvoqgsc57lzbfdum\n==> openssl is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/openssl-1.0.2h-ookfh4fsbv5ijqjsewerc5vvf4hzfme6\n==> julia is already installed in /home/ux452368/comet/src/spack/opt/spack/linux-centos6-x86_64/gcc-6.1.0-spack/julia-master-bzqdzwekzl3geaeyuexssnelbnwfiwsf\nTraceback (most recent call last):\n  File \"/home/ux452368/comet/src/spack/bin/spack\", line 179, in <module>\n    main()\n  File \"/home/ux452368/comet/src/spack/bin/spack\", line 157, in main\n    return_val = command(parser, args)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/cmd/install.py\", line 91, in install\n    explicit=True)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/package.py\", line 943, in do_install\n    run_tests=run_tests)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/package.py\", line 1096, in do_install_dependencies\n    dep.package.do_install(**kwargs)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/package.py\", line 925, in do_install\n    rec = spack.installed_db.get_record(self.spec)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/database.py\", line 76, in converter\n    return function(self, spec_like, *args, **kwargs)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/database.py\", line 461, in get_record\n    key = self._get_matching_spec_key(spec, **kwargs)\n  File \"/home/ux452368/comet/src/spack/lib/spack/spack/database.py\", line 456, in _get_matching_spec_key\n    raise KeyError(\"No such spec in database! %s\" % spec)\nKeyError: 'No such spec in database! julia@master%gcc@6.1.0-spack+binutils~cxx+hdf5+mpi~plot~python arch=linux-centos6-x86_64^binutils@2.25%gcc@6.1.0-spack+gold~krellpatch~libiberty arch=linux-centos6-x86_64^bzip2@1.0.6%gcc@6.1.0-spack arch=linux-centos6-x86_64^cmake@3.5.2%gcc@6.1.0-spack~doc+ncurses+openssl~qt arch=linux-centos6-x86_64^curl@7.49.1%gcc@6.1.0-spack arch=linux-centos6-x86_64^expat@2.1.0%gcc@6.1.0-spack arch=linux-centos6-x86_64^git@2.8.1%gcc@6.1.0-spack arch=linux-centos6-x86_64^hdf5@1.10.0-patch1%gcc@6.1.0-spack+cxx~debug+fortran+mpi+shared~szip~threadsafe arch=linux-centos6-x86_64^hwloc@1.11.3%gcc@6.1.0-spack arch=linux-centos6-x86_64^libpciaccess@0.13.4%gcc@6.1.0-spack arch=linux-centos6-x86_64^libsigsegv@2.10%gcc@6.1.0-spack arch=linux-centos6-x86_64^m4@1.4.17%gcc@6.1.0-spack+sigsegv arch=linux-centos6-x86_64^ncurses@6.0%gcc@6.1.0-spack arch=linux-centos6-x86_64^openmpi@2.0.0%gcc@6.1.0-spack~mxm~pmi~psm~psm2~slurm~sqlite3~thread_multiple~tm+verbs+vt arch=linux-centos6-x86_64^openssl@1.0.2h%gcc@6.1.0-spack arch=linux-centos6-x86_64^python@2.7.11%gcc@6.1.0-spack~ucs4 arch=linux-centos6-x86_64^readline@6.3%gcc@6.1.0-spack arch=linux-centos6-x86_64^sqlite@3.8.5%gcc@6.1.0-spack arch=linux-centos6-x86_64^zlib@1.2.8%gcc@6.1.0-spack arch=linux-centos6-x86_64'\n```\n\nThis happens on Comet at SDSC; the same Spack command works fine on other systems. How do I debug this?\n",
    "performed_via_github_app": null
}