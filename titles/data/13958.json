{
    "url": "https://api.github.com/repos/spack/spack/issues/13958",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13958/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13958/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13958/events",
    "html_url": "https://github.com/spack/spack/issues/13958",
    "id": 531595416,
    "node_id": "MDU6SXNzdWU1MzE1OTU0MTY=",
    "number": 13958,
    "title": "Installation issue: gcc@9.2.0 built using linuxbrew gcc ",
    "user": {
        "login": "Char-Aznable",
        "id": 32589713,
        "node_id": "MDQ6VXNlcjMyNTg5NzEz",
        "avatar_url": "https://avatars.githubusercontent.com/u/32589713?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Char-Aznable",
        "html_url": "https://github.com/Char-Aznable",
        "followers_url": "https://api.github.com/users/Char-Aznable/followers",
        "following_url": "https://api.github.com/users/Char-Aznable/following{/other_user}",
        "gists_url": "https://api.github.com/users/Char-Aznable/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Char-Aznable/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Char-Aznable/subscriptions",
        "organizations_url": "https://api.github.com/users/Char-Aznable/orgs",
        "repos_url": "https://api.github.com/users/Char-Aznable/repos",
        "events_url": "https://api.github.com/users/Char-Aznable/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Char-Aznable/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446615268,
            "node_id": "MDU6TGFiZWw0NDY2MTUyNjg=",
            "url": "https://api.github.com/repos/spack/spack/labels/compilers",
            "name": "compilers",
            "color": "f9d0c4",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 9,
    "created_at": "2019-12-02T23:01:22Z",
    "updated_at": "2020-09-20T02:42:51Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install gcc@9.2.0 % gcc@5.5.0\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux foo.bar.host 3.10.0-957.27.2.el7.x86_64 #1 SMP foo.bar.time.zone x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tCentOS Linux release 7.7.1908 (Core)\r\n``` \r\nand, if relevant, post or attach:\r\n\r\n- `packages.yaml`\r\n- `compilers.yaml`\r\n\r\nto the issue\r\n\r\n### Additional information\r\n\r\nSometimes the issue benefits from additional details. In these cases there are\r\na few things we can suggest doing. First of all, you can post the full output of:\r\n```console\r\n$ spack spec --install-status <spec>\r\nInput spec\r\n--------------------------------\r\n -   gcc@9.2.0%gcc@5.5.0\r\n\r\nConcretized\r\n--------------------------------\r\n -   gcc@9.2.0%gcc@5.5.0~binutils languages=c,c++,fortran ~nvptx~piclibs~strip arch=linux-centos7-haswell\r\n[+]      ^gmp@6.1.2%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]          ^autoconf@2.69%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]              ^m4@1.4.18%gcc@5.5.0 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-centos7-haswell\r\n[+]                  ^libsigsegv@2.12%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]              ^perl@5.30.0%gcc@5.5.0+cpanm+shared+threads arch=linux-centos7-haswell\r\n[+]                  ^gdbm@1.18.1%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]                      ^readline@8.0%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]                          ^ncurses@6.1%gcc@5.5.0~symlinks~termlib arch=linux-centos7-haswell\r\n[+]                              ^pkgconf@1.6.3%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]          ^automake@1.16.1%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]          ^libtool@2.4.6%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]      ^isl@0.20%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]      ^mpc@1.1.0%gcc@5.5.0 arch=linux-centos7-haswell\r\n[+]          ^mpfr@3.1.6%gcc@5.5.0 patches=66a5d58364113a21405fc53f4a48f4e8 arch=linux-centos7-haswell\r\n[+]      ^zlib@1.2.11%gcc@5.5.0+optimize+pic+shared arch=linux-centos7-haswell\r\n```\r\n\r\n\r\nto show people whether Spack installed a faulty software or if it was not able to\r\nbuild it at all. \r\n\r\nIf your build didn't make it past the configure stage, Spack as also commands to parse \r\nlogs and report error and warning messages:\r\n```console\r\n$ spack log-parse --show=errors,warnings <file-to-parse>\r\n5 errors\r\n2 warnings\r\n     2288    libtool: install: (cd /tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg\r\n             5jwcnuawg3fu3k2fof/spack-src/spack-build/lto-plugin/../gcc && { ln -s -f liblto_plug\r\n             in.so.0.0.0 liblto_plugin.so.0 || { rm -f liblto_plugin.so.0 && ln -s liblto_plugin.\r\n             so.0.0.0 liblto_plugin.so.0; }; })\r\n     2289    libtool: install: (cd /tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg\r\n             5jwcnuawg3fu3k2fof/spack-src/spack-build/lto-plugin/../gcc && { ln -s -f liblto_plug\r\n             in.so.0.0.0 liblto_plugin.so || { rm -f liblto_plugin.so && ln -s liblto_plugin.so.0\r\n             .0.0 liblto_plugin.so; }; })\r\n     2290    libtool: install: /home/aznb/.linuxbrew/bin/ginstall -c .libs/lib\r\n             lto_plugin.lai /tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnua\r\n             wg3fu3k2fof/spack-src/spack-build/lto-plugin/../gcc/liblto_plugin.la\r\n  >> 2291    libtool: install: warning: remember to run `libtool --finish /home/aznb/spack/opt/spack/linux-centos7-haswell/gcc-5.5.0/gcc-9.2.0-gbut6zz33tegfg5jwcn\r\n             uawg3fu3k2fof/libexec/gcc/x86_64-pc-linux-gnu/9.2.0'\r\n     2292    make[4]: Leaving directory `/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz3\r\n             3tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/lto-plugin'\r\n     2293    make[3]: Leaving directory `/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz3\r\n             3tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/lto-plugin'\r\n     2294    Configuring stage 1 in ./gcc\r\n\r\n     ...\r\n\r\n     2533    checking whether getchar_unlocked is declared... yes\r\n     2534    checking for VALGRIND_DISCARD in <memcheck.h>... no\r\n     2535    checking for multiarch configuration... auto\r\n  >> 2536    configure: WARNING: fixed-point is not supported for this target, ignored\r\n     2537    yes\r\n     2538    checking whether make sets $(MAKE)... checking whether getc_unlocked is declared... \r\n             yes\r\n     2539    checking for gawk... gawk\r\n\r\n     ...\r\n\r\n     4867    checking whether the C compiler works... yes\r\n     4868    checking for C compiler default output file name... a.out\r\n     4869    checking for suffix of executables...\r\n  >> 4870    checking whether we are cross compiling... configure: error: in `/tmp/aznb/spack\r\n             -stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/\r\n             x86_64-pc-linux-gnu/libgomp':\r\n  >> 4871    configure: error: cannot run C compiled programs.\r\n     4872    If you meant to cross compile, use `--host'.\r\n     4873    See `config.log' for more details\r\n  >> 4874    make[2]: *** [configure-stage1-target-libgomp] Error 1\r\n     4875    make[2]: Leaving directory `/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz3\r\n             3tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build'\r\n  >> 4876    make[1]: *** [stage1-bubble] Error 2\r\n     4877    make[1]: Leaving directory `/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz3\r\n             3tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build'\r\n  >> 4878    make: *** [all] Error 2\r\n\r\n```\r\nYou might want to run this command on the `config.log` or any other similar file\r\nfound in the stage directory: \r\n```console\r\n$ spack location -s <spec>\r\n```\r\nIn case in `config.log` there are other settings that you think might be the cause \r\nof the build failure, you can consider attaching the file to this issue.\r\n\r\nRebuilding the package with the following options:\r\n```console\r\n$ spack -d install -j 1 <spec>\r\n...\r\n```\r\nwill provide additional debug information. After the failure you will find two files in the current directory:\r\n\r\n1. `spack-cc-<spec>.in`, which contains details on the command given in input \r\n    to Spack's compiler wrapper  \r\n1. `spack-cc-<spec>.out`, which contains the command used to compile / link the \r\n    failed object after Spack's compiler wrapper did its processing \r\n\r\nYou can post or attach those files to provide maintainers with more information on what\r\nis causing the failure.\r\n\r\nSorry for ignoring some part of the template but it's tedious and irrelevant. The relevant error is this:\r\n```\r\nchecking whether we are cross compiling... configure: error: in `/tmp/aznb/spack\r\n             -stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/\r\n             x86_64-pc-linux-gnu/libgomp\r\n```\r\nand here's the relevant error from `/tmp/aznb/spack\r\n             -stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/\r\n             x86_64-pc-linux-gnu/libgomp/config.log`:\r\n```\r\nconfigure:4019: checking whether we are cross compiling\r\nconfigure:4027: /tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/./gcc/xgcc -B/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/./gcc/ -B/home/aznb/spack/opt/spack/linux-centos7-haswell/gcc-5.5.0/gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/x86_64-pc-linux-gnu/sys-include   -fno-checking -o conftest -g -O2   conftest.c  >&5\r\nconfigure:4031: $? = 0\r\nconfigure:4038: ./conftest\r\n./conftest: P\u00ba'\u008d\u00ff\u007f: \u007fELF\u0002\u0001\u0001: x\u0002: Error 18446744073188821367\r\nconfigure:4042: $? = 127\r\nconfigure:4049: error: in `/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/x86_64-pc-linux-gnu/libgomp':\r\nconfigure:4051: error: cannot run C compiled programs.\r\nIf you meant to cross compile, use `--host'.\r\nSee `config.log' for more details\r\n\r\n```\r\nHere's the background: the gcc@5.5.0 I am using to build gcc@9.2.0 is from linuxbrew. Linuxbrew's gcc is a stand alone toolchain that is built and configured with linuxbrew's glibc, which I have been using for a few years without problem. In this case, gcc@5.5.0 has its own spec file pointing to the location of the linuxbrew interpreter and glibc. \r\n\r\nWhen I tried to run the compilation command above ` /tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/./gcc/xgcc -B/tmp/aznb/spack-stage/spack-stage-gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/spack-src/spack-build/./gcc/ -B/home/aznb/spack/opt/spack/linux-centos7-haswell/gcc-5.5.0/gcc-9.2.0-gbut6zz33tegfg5jwcnuawg3fu3k2fof/x86_64-pc-linux-gnu/sys-include   -fno-checking -o conftest -g -O2   conftest.c ` I got the error: \r\n```\r\nSpack compiler must be run from Spack! Input 'SPACK_ENV_PATH' is missing.\r\ncollect2: error: ld returned 1 exit status\r\n```\r\nso I am totally lost here",
    "performed_via_github_app": null
}