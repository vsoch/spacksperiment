{
    "url": "https://api.github.com/repos/spack/spack/issues/20456",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20456/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20456/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20456/events",
    "html_url": "https://github.com/spack/spack/issues/20456",
    "id": 770447516,
    "node_id": "MDU6SXNzdWU3NzA0NDc1MTY=",
    "number": 20456,
    "title": "py-greenlet@0.4.13 build fails on power arch: platform/switch_ppc64_linux.h",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        },
        {
            "id": 883727171,
            "node_id": "MDU6TGFiZWw4ODM3MjcxNzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/power",
            "name": "power",
            "color": "8a8edb",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2020-12-17T23:23:09Z",
    "updated_at": "2020-12-18T03:38:44Z",
    "closed_at": "2020-12-18T03:38:44Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Building `py-greenlet@0.14.3` fails using `spack@develop` (c5b4a667d3e8d44efe5395c33a5c57ec66dc5056 from `Thu Dec 17 16:56:39 2020 -0500`).\r\n\r\nI believe this is due to a fairly recent change (post ~ 2020-12-14)\r\n\r\nSystem info:\r\n* `Ubuntu 18.04` for `ppc64le`\r\n* `GCC 7.5.0`\r\n* Docker container image: `ecpe4s/ubuntu18.04-runner-ppc64le:2020-12-01`\r\n\r\nConcrete spec: [py-greenlet-5gtlvi.yml.txt](https://github.com/spack/spack/files/5712651/py-greenlet-5gtlvi.yml.txt)\r\nBuild log: [py-greenlet-build-out.txt](https://github.com/spack/spack/files/5712667/py-greenlet-build-out.txt)\r\n\r\n```\r\n$> spack install -f ./py-greenlet-5gtlvi.yml\r\n...\r\n==> Installing py-greenlet-0.4.13-6qd3bhzb723ij5pzq5pj46fnowefblhq\r\n==> Fetching https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/_source-cache/archive/0f/0fef83d43bf87a5196c91e73cb9772f945a4caaff91242766c5916d1dd1381e4.tar.gz\r\n############################################################################################################################################################ 100.0%\r\n==> py-greenlet: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/opt/spack/opt/spack/linux-ubuntu18.04-ppc64le/gcc-7.5.0/python-3.8.6-ywxntapm3srwjfo4yd5s3gdu76d3w3nm/bin/python3.8' '-s' 'setup.py' '--no-user-cfg' 'build'\r\n\r\n3 errors found in build log:\r\n     6     creating build\r\n     7     creating build/temp.linux-ppc64le-3.8\r\n     8     /opt/spack/lib/spack/env/gcc/gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -fPIC -I/opt/spack/opt/spack/linux-ubuntu18.04-p\r\n           pc64le/gcc-7.5.0/python-3.8.6-ywxntapm3srwjfo4yd5s3gdu76d3w3nm/include/python3.8 -c greenlet.c -o build/temp.linux-ppc64le-3.8/greenlet.o -fno-tree-dom\r\n           inator-opts\r\n     9     In file included from slp_platformselect.h:16:0,\r\n     10                     from greenlet.c:328:\r\n     11    platform/switch_ppc64_linux.h: In function 'slp_switch':\r\n  >> 12    platform/switch_ppc64_linux.h:72:5: error: PIC register clobbered by 'r2' in 'asm'\r\n     13         __asm__ volatile (\"\" : : : REGS_TO_SAVE);\r\n     14         ^~~~~~~\r\n  >> 15    platform/switch_ppc64_linux.h:85:5: error: PIC register clobbered by 'r2' in 'asm'\r\n     16         __asm__ volatile (\"\" : : : REGS_TO_SAVE);\r\n     17         ^~~~~~~\r\n  >> 18    error: command '/opt/spack/lib/spack/env/gcc/gcc' failed with exit status 1\r\n\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-py-greenlet-0.4.13-6qd3bhzb723ij5pzq5pj46fnowefblhq/spack-build-out.txt\r\n```\r\n\r\n@adamjstewart @becker33\r\n\r\nAny ideas?\r\n\r\n",
    "performed_via_github_app": null
}