{
    "url": "https://api.github.com/repos/spack/spack/issues/15522",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15522/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15522/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15522/events",
    "html_url": "https://github.com/spack/spack/issues/15522",
    "id": 583228030,
    "node_id": "MDU6SXNzdWU1ODMyMjgwMzA=",
    "number": 15522,
    "title": "Installation/Build error - Trilinos",
    "user": {
        "login": "hpcnpatel",
        "id": 33021055,
        "node_id": "MDQ6VXNlcjMzMDIxMDU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/33021055?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hpcnpatel",
        "html_url": "https://github.com/hpcnpatel",
        "followers_url": "https://api.github.com/users/hpcnpatel/followers",
        "following_url": "https://api.github.com/users/hpcnpatel/following{/other_user}",
        "gists_url": "https://api.github.com/users/hpcnpatel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hpcnpatel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hpcnpatel/subscriptions",
        "organizations_url": "https://api.github.com/users/hpcnpatel/orgs",
        "repos_url": "https://api.github.com/users/hpcnpatel/repos",
        "events_url": "https://api.github.com/users/hpcnpatel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hpcnpatel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2020-03-17T18:54:06Z",
    "updated_at": "2020-07-29T18:45:40Z",
    "closed_at": "2020-05-16T15:40:41Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I am facing Trilinos build error, at the config phase - Fortran/CXX Compiler Compatibility - Failed\r\n\r\nTried different Trilinos versions with both GCC and Intel compilers resulting same error described below.\r\n\r\nAny help is appreciated.\r\n\r\n```console\r\n$ spack --version\r\n0.13.4\r\n```\r\n\r\n```console\r\n$ spack install trilinos%intel+alloptpkgs+hdf5 ^hdf5+cxx+fortran+hl+mpi+pic+shared+szip+threadsafe\r\n\r\n5 errors found in build log:\r\n     530    -- Found Perl: /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/perl/5.30.0-intel-uospf4i/bin/perl (found version \"5.30.0\")\r\n     531    -- Fortran name mangling: LOWER UNDER\r\n     532    -- Detecting Fortran/C Interface\r\n     533    -- Detecting Fortran/C Interface - Found GLOBAL and MODULE mangling\r\n     534    -- Verifying Fortran/CXX Compiler Compatibility\r\n     535    -- Verifying Fortran/CXX Compiler Compatibility - Failed\r\n  >> 536    CMake Error at /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/cmake/3.15.4-intel-fylpsm5/share/cmake-3.15/Modules/FortranCInterface.cmake:383 (message):\r\n     537      The Fortran compiler:\r\n     538    \r\n     539        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/intel-mpi/2019.6.166-intel-ce47aas/compilers_and_libraries_2020.0.166/linux/mpi/intel64/bin/mpiifort\r\n     540    \r\n     541      and the CXX compiler:\r\n     542    \r\n\r\n     ...\r\n\r\n     584        [ 83%] Building CXX object CMakeFiles/VerifyFortranC.dir/VerifyCXX.cxx.o\r\n     585        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/intel-mpi/2019.6.166-intel-ce47aas/compilers_and_libraries_2020.0.166/linux/mpi/intel64/bin/mpiicpc  -DVERIFY_CXX -I/tmp/di36pex/haswell/spack-stage-trilino\r\n            s-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX  -DMUMPS_5_0 -O3 -DNDEBUG   -o CMakeFiles/VerifyFortranC.dir/VerifyCXX.cxx.o -c /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stac\r\n            k/opt/haswell/cmake/3.15.4-intel-fylpsm5/share/cmake-3.15/Modules/FortranCInterface/Verify/VerifyCXX.cxx\r\n     586        [100%] Linking CXX executable VerifyFortranC\r\n     587        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/cmake/3.15.4-intel-fylpsm5/bin/cmake -E cmake_link_script CMakeFiles/VerifyFortranC.dir/link.txt --verbose=1\r\n     588        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/intel-mpi/2019.6.166-intel-ce47aas/compilers_and_libraries_2020.0.166/linux/mpi/intel64/bin/mpiicpc  -DMUMPS_5_0 -O3 -DNDEBUG   CMakeFiles/VerifyFortranC.di\r\n            r/main.c.o CMakeFiles/VerifyFortranC.dir/VerifyC.c.o CMakeFiles/VerifyFortranC.dir/VerifyCXX.cxx.o  -o VerifyFortranC libVerifyFortran.a\r\n     589        /usr/lib64/gcc/x86_64-suse-linux/7/../../../../x86_64-suse-linux/bin/ld: libVerifyFortran.a(VerifyFortran.f.o): in function `verifyfortran_':\r\n  >> 590    VerifyFortran.f:(.text+0x3b): undefined reference to `for_write_seq_lis'\r\n  >> 591        gmake[3]: *** [CMakeFiles/VerifyFortranC.dir/build.make:118: VerifyFortranC] Error 1\r\n     592        gmake[3]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n  >> 593        gmake[2]: *** [CMakeFiles/Makefile2:112: CMakeFiles/VerifyFortranC.dir/all] Error 2\r\n     594        gmake[2]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n  >> 595        gmake[1]: *** [CMakeFiles/Makefile2:124: CMakeFiles/VerifyFortranC.dir/rule] Error 2\r\n     596        gmake[1]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n     597        gmake: *** [Makefile:134: VerifyFortranC] Error 2\r\n     598    \r\n     599    \r\n     600    Call Stack (most recent call first):\r\n     601      cmake/tribits/core/package_arch/TribitsFortranMangling.cmake:50 (FortranCInterface_VERIFY)\r\n\r\nor\r\n$ spack install trilinos\r\n\r\nresults the same as shown above\r\n```\r\n\r\n```commandline\r\n$ uname -a \r\nLinux cm2devel 4.12.14-197.34-default #1 SMP Tue Feb 25 13:00:08 UTC 2020 (3701ec1) x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tSUSE Linux Enterprise Server 15 SP1\r\n``` \r\n\r\n```console\r\n$ spack spec --install-status trilinos%intel+alloptpkgs+hdf5 ^hdf5+cxx+fortran+hl+mpi+pic+shared+szip+threadsafe\r\nInput spec\r\n--------------------------------\r\n -   trilinos%intel+alloptpkgs+hdf5\r\n -       ^hdf5+cxx+fortran+hl+mpi+pic+shared+szip+threadsafe\r\n\r\nConcretized\r\n--------------------------------\r\n -   trilinos@12.14.1%intel@19.0.5.281~adios2+alloptpkgs+amesos+amesos2+anasazi+aztec+belos+boost build_type=RelWithDebInfo ~cgns~chaco~complex~debug~dtk+epetra+epetraext+exodus+explicit_template_instantiation~float+fortran~fortrilinos+gtest+hdf5+hypre+ifpack+ifpack2~intrepid~intrepid2~isorropia+kokkos+metis~minitensor+ml+muelu+mumps~nox~openmp~phalanx~piro~pnetcdf~python~rol~rythmos+sacado~shards+shared~shylu~stk+suite-sparse~superlu~superlu-dist~teko~tempus+teuchos+tpetra~x11~xsdkflags~zlib+zoltan+zoltan2 arch=linux-sles15-haswell\r\n[+]      ^boost@1.70.0%intel@19.0.5.281+atomic+chrono~clanglibcpp~context~coroutine cxxstd=98 +date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy patches=2ab6c72d03dec6a4ae20220a9dfd5c8c572c5294252155b85c6874d97c323199 ~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout visibility=hidden +wave arch=linux-sles15-haswell\r\n[+]          ^bzip2@1.0.8%intel@19.0.5.281+shared arch=linux-sles15-haswell\r\n[+]              ^diffutils@3.7%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]                  ^libiconv@1.16%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]          ^zlib@1.2.11%intel@19.0.5.281+optimize+pic+shared arch=linux-sles15-haswell\r\n[+]      ^cmake@3.15.4%intel@19.0.5.281~doc+ncurses+openssl+ownlibs~qt arch=linux-sles15-haswell\r\n[+]          ^ncurses@6.1%intel@19.0.5.281~symlinks~termlib arch=linux-sles15-haswell\r\n[+]              ^pkgconf@1.6.3%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]          ^openssl@1.0.2j%intel@19.0.5.281+systemcerts arch=linux-sles15-haswell\r\n[+]      ^glm@0.9.7.1%intel@19.0.5.281 build_type=RelWithDebInfo arch=linux-sles15-haswell\r\n[+]      ^hdf5@1.10.5%intel@19.0.5.281+cxx~debug+fortran+hl+mpi+pic+shared+szip+threadsafe arch=linux-sles15-haswell\r\n[+]          ^intel-mpi@2019.6.166%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]          ^libszip@2.1.1%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]          ^numactl@2.0.12%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]              ^autoconf@2.69%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]                  ^m4@1.4.18%intel@19.0.5.281 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-sles15-haswell\r\n[+]                      ^libsigsegv@2.12%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]                  ^perl@5.30.0%intel@19.0.5.281+cpanm+shared+threads arch=linux-sles15-haswell\r\n[+]                      ^gdbm@1.18.1%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]                          ^readline@8.0%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]              ^automake@1.16.1%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]              ^libtool@2.4.6%intel@19.0.5.281 arch=linux-sles15-haswell\r\n[+]      ^hypre@2.18.1%intel@19.0.5.281~complex~debug~int64~internal-superlu~mixedint+mpi~openmp+shared~superlu-dist arch=linux-sles15-haswell\r\n[+]          ^intel-mkl@2019.5.281%intel@19.0.5.281~ilp64+shared threads=none arch=linux-sles15-haswell\r\n[+]      ^matio@1.5.13%intel@19.0.5.281+hdf5+shared+zlib arch=linux-sles15-haswell\r\n[+]      ^metis@5.1.0%intel@19.0.5.281~gdb~int64~real64 arch=linux-sles15-haswell\r\n[+]          ^metis-shared@5.1.0%intel@19.0.5.281 build_type=Release ~gdb~int64 patches=4991da938c1d3a1d3dea78e49bbebecba00273f98df2a656e38b83d55b281da1 ~real64+shared arch=linux-sles15-haswell\r\n[+]          ^metis-static@5.1.0%intel@19.0.5.281 build_type=Release ~gdb~int64 patches=4991da938c1d3a1d3dea78e49bbebecba00273f98df2a656e38b83d55b281da1 ~real64~shared arch=linux-sles15-haswell\r\n[+]      ^mumps@5.2.0%intel@19.0.5.281+complex+double+float~int64~metis+mpi~parmetis~ptscotch~scotch+shared arch=linux-sles15-haswell\r\n[+]      ^netcdf@4.7.1%intel@19.0.5.281~dap~hdf4 maxdims=1024 maxvars=8192 +mpi~parallel-netcdf+pic+shared arch=linux-sles15-haswell\r\n[+]      ^parmetis@4.0.3%intel@19.0.5.281 build_type=RelWithDebInfo ~gdb patches=4f892531eb0a807eb1b82e683a416d3e35154a455274cf9b162fb02054d11a5b,50ed2081bc939269689789942067c58b3e522c269269a430d5d34c00edbc5870,704b84f7c7444d4372cb59cca6e1209df4ef3b033bc4ee3cf50f369bce972a9d +shared arch=linux-sles15-haswell\r\n[+]      ^suite-sparse@5.3.0%intel@19.0.5.281~cuda~openmp+pic~tbb arch=linux-sles15-haswell\r\n```\r\n\r\n```console\r\n$ spack log-parse --show=errors,warnings <file-to-parse>\r\n5 errors\r\n1 warnings\r\n     39     \r\n     40     Setting up major user options ...\r\n     41     \r\n  >> 42     CMake Warning (dev) at cmake/tribits/core/utils/AdvancedSet.cmake:57 (SET):\r\n     43       implicitly converting 'FILENAME' to 'STRING' type.\r\n     44     Call Stack (most recent call first):\r\n     45       cmake/tribits/core/package_arch/TribitsGlobalMacros.cmake:701 (ADVANCED_SET)\r\n\r\n     ...\r\n\r\n     533    -- Detecting Fortran/C Interface - Found GLOBAL and MODULE mangling\r\n     534    -- Verifying Fortran/CXX Compiler Compatibility\r\n     535    -- Verifying Fortran/CXX Compiler Compatibility - Failed\r\n  >> 536    CMake Error at /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/cmake/3.15.4-intel-fylpsm5/share/cmake-3.15/Modules/FortranCInterface.cmake:383 (message):\r\n     537      The Fortran compiler:\r\n     538    \r\n     539        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/intel-mpi/2019.6.166-intel-ce47aas/compilers_and_libraries_2020.0.166/linux/mpi/intel64/bin/mpiifort\r\n\r\n     ...\r\n\r\n     587        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/cmake/3.15.4-intel-fylpsm5/bin/cmake -E cmake_link_script CMakeFiles/VerifyFortranC.dir/link.txt --verbose=1\r\n     588        /dss/dsshome1/09/di36pex/SPACK_lrz_dir/stack/opt/haswell/intel-mpi/2019.6.166-intel-ce47aas/compilers_and_libraries_2020.0.166/linux/mpi/intel64/bin/mpiicpc  -DMUMPS_5_0 -O3 -DNDEBUG   CMakeFiles/VerifyFortranC.di\r\n            r/main.c.o CMakeFiles/VerifyFortranC.dir/VerifyC.c.o CMakeFiles/VerifyFortranC.dir/VerifyCXX.cxx.o  -o VerifyFortranC libVerifyFortran.a\r\n     589        /usr/lib64/gcc/x86_64-suse-linux/7/../../../../x86_64-suse-linux/bin/ld: libVerifyFortran.a(VerifyFortran.f.o): in function `verifyfortran_':\r\n  >> 590    VerifyFortran.f:(.text+0x3b): undefined reference to `for_write_seq_lis'\r\n  >> 591        gmake[3]: *** [CMakeFiles/VerifyFortranC.dir/build.make:118: VerifyFortranC] Error 1\r\n     592        gmake[3]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n  >> 593        gmake[2]: *** [CMakeFiles/Makefile2:112: CMakeFiles/VerifyFortranC.dir/all] Error 2\r\n     594        gmake[2]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n  >> 595        gmake[1]: *** [CMakeFiles/Makefile2:124: CMakeFiles/VerifyFortranC.dir/rule] Error 2\r\n     596        gmake[1]: Leaving directory '/tmp/di36pex/haswell/spack-stage-trilinos-12.14.1-ykq75bnjarcbifooftolrs4dr2j6h3yj/spack-build/CMakeFiles/FortranCInterface/VerifyCXX'\r\n     597        gmake: *** [Makefile:134: VerifyFortranC] Error 2\r\n     598    \r\n\r\n```\r\n[spack-cc-trilinos-ykq75bn.in.log](https://github.com/spack/spack/files/4345220/spack-cc-trilinos-ykq75bn.in.log)\r\n[spack-cc-trilinos-ykq75bn.out.log](https://github.com/spack/spack/files/4345221/spack-cc-trilinos-ykq75bn.out.log)\r\n\r\n### General information\r\n\r\n- [*] I have run `spack --version` and reported the version of Spack\r\n- [*] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}