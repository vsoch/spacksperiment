{
    "url": "https://api.github.com/repos/spack/spack/issues/7855",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7855/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7855/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7855/events",
    "html_url": "https://github.com/spack/spack/issues/7855",
    "id": 316455448,
    "node_id": "MDU6SXNzdWUzMTY0NTU0NDg=",
    "number": 7855,
    "title": "py-matplotlib build fails on Fedora",
    "user": {
        "login": "fmahebert",
        "id": 881747,
        "node_id": "MDQ6VXNlcjg4MTc0Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881747?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fmahebert",
        "html_url": "https://github.com/fmahebert",
        "followers_url": "https://api.github.com/users/fmahebert/followers",
        "following_url": "https://api.github.com/users/fmahebert/following{/other_user}",
        "gists_url": "https://api.github.com/users/fmahebert/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/fmahebert/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fmahebert/subscriptions",
        "organizations_url": "https://api.github.com/users/fmahebert/orgs",
        "repos_url": "https://api.github.com/users/fmahebert/repos",
        "events_url": "https://api.github.com/users/fmahebert/events{/privacy}",
        "received_events_url": "https://api.github.com/users/fmahebert/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 26,
    "created_at": "2018-04-21T02:52:26Z",
    "updated_at": "2019-02-13T23:38:15Z",
    "closed_at": "2019-02-13T23:38:15Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "\r\nOn my Fedora 27 system, `spack install py-matplotlib` from a clean Spack clone fails. Spack installs all the Matplotlib dependencies, but then `py-matplotlib` itself fails during its build phase.\r\n\r\nIt looks like Matplotlib is failing to find FreeType, even though this package was installed.\r\n\r\n### Expected Result\r\n\r\n`py-matplotlib` is installed.\r\n\r\n### Actual Result\r\n\r\nBuild log:\r\n```\r\n==> Executing phase: 'build'\r\n==> '/home/francois/spack/opt/spack/linux-fedora27-x86_64/gcc-7.3.1/python-2.7.14-belgizkwgkpujlt5kj2ukdfemba65kpf/bin/python2.7' '-s' 'setup.py' '--no-user-cfg' 'build'\r\n============================================================================\r\nEdit setup.cfg to change the build options\r\n\r\nBUILDING MATPLOTLIB\r\n            matplotlib: yes [2.2.2]\r\n                python: yes [2.7.14 (default, Apr 20 2018, 18:36:46)  [GCC\r\n                        7.3.1 20180303 (Red Hat 7.3.1-5)]]\r\n              platform: yes [linux2]\r\n\r\nREQUIRED DEPENDENCIES AND EXTENSIONS\r\n                 numpy: yes [version 1.13.3]\r\n      install_requires: yes [handled by setuptools]\r\n                libagg: yes [pkg-config information for 'libagg' could not\r\n                        be found. Using local copy.]\r\n              freetype: no  [The C/C++ header for freetype2 (ft2build.h)\r\n                        could not be found.  You may need to install the\r\n                        development package.]\r\n                   png: yes [version 1.6.34]\r\n                 qhull: yes [pkg-config information for 'libqhull' could not\r\n                        be found. Using local copy.]\r\n\r\nOPTIONAL SUBPACKAGES\r\n           sample_data: yes [installing]\r\n              toolkits: yes [installing]\r\n                 tests: no  [skipping due to configuration]\r\n        toolkits_tests: no  [skipping due to configuration]\r\n\r\nOPTIONAL BACKEND EXTENSIONS\r\n                macosx: no  [Mac OS-X only]\r\n                qt5agg: no  [PySide2 not found; PyQt5 not found]\r\n                qt4agg: no  [PySide not found; PyQt4 not found]\r\n               gtk3agg: no  [Requires pygobject to be installed.]\r\n             gtk3cairo: no  [Requires cairocffi or pycairo to be installed.]\r\n                gtkagg: no  [Requires pygtk]\r\n                 tkagg: yes [installing; run-time loading from Python Tcl /\r\n                        Tk]\r\n                 wxagg: no  [requires wxPython]\r\n                   gtk: no  [Requires pygtk]\r\n                   agg: yes [installing]\r\n                 cairo: no  [cairocffi or pycairo not found]\r\n             windowing: no  [Microsoft Windows only]\r\n\r\nOPTIONAL LATEX DEPENDENCIES\r\n                dvipng: yes [version 1.15]\r\n           ghostscript: yes [version 9.22]\r\n                 latex: yes [version 3.14159265]\r\n               pdftops: yes [version 0.57.0]\r\n\r\nOPTIONAL PACKAGE DATA\r\n                  dlls: no  [skipping due to configuration]\r\n\r\n============================================================================\r\n                        * The following required packages can not be built:\r\n                        * freetype\r\n                        * Try installing freetype with `dnf install\r\n                        * freetype-devel` and pkg-config with `dnf install\r\n                        * pkg-config`\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ git clone https://github.com/llnl/spack.git\r\n$ spack/bin/spack install py-matplotlib\r\n```\r\n\r\nThis is using today's `develop`, i.e. c8e3c94c6\r\n\r\n### Information on your system\r\n\r\n 1. `$ spack arch` reports `linux-fedora27-x86_64`\r\n 2. `packages.yaml` sets the default compiler to `gcc`, BLAS/LAPACK to `openblas`, OpenSSL to system\r\n 3. The system's package manager provides `freetype-devel`.",
    "performed_via_github_app": null
}