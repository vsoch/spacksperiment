{
    "url": "https://api.github.com/repos/spack/spack/issues/22373",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22373/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22373/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22373/events",
    "html_url": "https://github.com/spack/spack/issues/22373",
    "id": 834332916,
    "node_id": "MDU6SXNzdWU4MzQzMzI5MTY=",
    "number": 22373,
    "title": "\u3010r-sf@0.9-7\u3011Software package to be enabled during the test",
    "user": {
        "login": "Tom-python0121",
        "id": 77763324,
        "node_id": "MDQ6VXNlcjc3NzYzMzI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/77763324?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Tom-python0121",
        "html_url": "https://github.com/Tom-python0121",
        "followers_url": "https://api.github.com/users/Tom-python0121/followers",
        "following_url": "https://api.github.com/users/Tom-python0121/following{/other_user}",
        "gists_url": "https://api.github.com/users/Tom-python0121/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Tom-python0121/subscriptions",
        "organizations_url": "https://api.github.com/users/Tom-python0121/orgs",
        "repos_url": "https://api.github.com/users/Tom-python0121/repos",
        "events_url": "https://api.github.com/users/Tom-python0121/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Tom-python0121/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446619526,
            "node_id": "MDU6TGFiZWw0NDY2MTk1MjY=",
            "url": "https://api.github.com/repos/spack/spack/labels/new-package",
            "name": "new-package",
            "color": "444444",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-03-18T02:35:23Z",
    "updated_at": "2021-03-22T15:38:22Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "<!-- Explain, in a clear and concise way, the command you ran and the result you were trying to achieve.\r\nExample: \"I ran `spack find` to list all the installed packages and ...\" -->\r\nHello,I meet a question about many test dependency packages are not enabled. As a result, the test fails to be added when test r-sf@0.9-7.See #21392\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n[root@centos8 spack-src]# ls\r\nbuild    config.log     configure     demo         inst     man  NAMESPACE  proj_conf_test    proj_conf_test.cpp  src    tools\r\ncleanup  config.status  configure.ac  DESCRIPTION  LICENSE  MD5  NEWS.md    proj_conf_test.c  R                   tests  vignettes\r\n[root@centos8 spack-src]# cat DESCRIPTION\r\n\u2026\u2026\r\nBugReports: https://github.com/r-spatial/sf/issues/\r\nDepends: methods, R (>= 3.3.0)\r\nImports: classInt (>= 0.4-1), DBI (>= 0.8), graphics, grDevices, grid,\r\n        magrittr, Rcpp (>= 0.12.18), stats, tools, units (>= 0.6-0),\r\n        utils\r\nSuggests: blob, covr, dplyr (>= 0.8-3), ggplot2, knitr, lwgeom (>=\r\n        0.2-1), maps, mapview, microbenchmark, odbc, pillar, pool,\r\n        raster, rgdal, rgeos, rlang, rmarkdown, RPostgres (>= 1.1.0),\r\n        RPostgreSQL, RSQLite, s2 (>= 1.0.1), sp (>= 1.2-4), spatstat,\r\n        spatstat.utils, stars (>= 0.2-0), testthat, tibble (>= 1.4.1),\r\n        tidyr (>= 1.0-0), tidyselect (>= 1.0.0), tmap (>= 2.0), vctrs\r\nLinkingTo: Rcpp\r\nVignetteBuilder: knitr\r\nEncoding: UTF-8\r\nRoxygenNote: 7.1.1\r\nSystemRequirements: C++11, GDAL (>= 2.0.1), GEOS (>= 3.4.0), PROJ (>=\r\n        4.8.0), sqlite3\r\n\u2026\u2026\r\nNow,When I added all of this software to the R package environment, the test passed.\r\n[root@centos8 tests]# Rscript testthat.R\r\nCoordinate Reference System:\r\n  User input: EPSG:4326\r\n  wkt:\r\nGEOGCRS[\"WGS 84\",\r\n    DATUM[\"World Geodetic System 1984\",\r\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\r\n            LENGTHUNIT[\"metre\",1]]],\r\n    PRIMEM[\"Greenwich\",0,\r\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n    CS[ellipsoidal,2],\r\n        AXIS[\"geodetic latitude (Lat)\",north,\r\n            ORDER[1],\r\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n        AXIS[\"geodetic longitude (Lon)\",east,\r\n            ORDER[2],\r\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n    USAGE[\r\n        SCOPE[\"unknown\"],\r\n        AREA[\"World\"],\r\n        BBOX[-90,-180,90,180]],\r\n    ID[\"EPSG\",4326]]\r\nCoordinate Reference System:\r\n  No user input\r\n  wkt:\r\nGEOGCRS[\"WGS 84\",\r\n    DATUM[\"World Geodetic System 1984\",\r\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\r\n            LENGTHUNIT[\"metre\",1]]],\r\n    PRIMEM[\"Greenwich\",0,\r\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n    CS[ellipsoidal,2],\r\n        AXIS[\"geodetic latitude (Lat)\",north,\r\n            ORDER[1],\r\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n        AXIS[\"geodetic longitude (Lon)\",east,\r\n            ORDER[2],\r\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\r\n    USAGE[\r\n        SCOPE[\"unknown\"],\r\n        AREA[\"World\"],\r\n        BBOX[-90,-180,90,180]],\r\n    ID[\"EPSG\",4326]]\r\nCannot open layer foo\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\nReading layer `nospatial' from data source `/usr/lib64/R/library/sf/gpkg/nospatial.gpkg' using driver `GPKG'\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\nReading layer `nospatial' from data source `/usr/lib64/R/library/sf/gpkg/nospatial.gpkg' using driver `GPKG'\r\nOGR: Unsupported geometry type\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\nFailed to create feature 1 in x\r\nFailed to create feature 1 in x\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n        - 'VirtualXPath'        [XML Path Language - XPath]\r\n\u2550\u2550 Skipped tests \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\u25cf could not connect to postgis database (46)\r\n\u25cf empty test (6)\r\n\u25cf sf_extSoftVersion()[[\"GDAL\"]] < \"2.5.0\" && sf_extSoftVersion()[[\"proj.4\"]] <\r\n    \"6.0.0\" is not TRUE (1)\r\n\u25cf sf_extSoftVersion()[[\"GDAL\"]] < \"2.5.0\" is not TRUE (1)\r\n\u25cf sf_extSoftVersion()[[\"proj.4\"]] < \"6.0.0\" is not TRUE (3)\r\n\u25cf Sys.getenv(\"USER\") %in% c(\"edzer\", \"travis\") is not TRUE (3)\r\n\r\n[ FAIL 0 | WARN 8 | SKIP 60 | PASS 734 ]\r\n```\r\nWhen I added all of this software to the R package environment, the test passed.Now I don't want to add these test dependency packages through the R environment, I want to load them through the spack, but I'm sure in addition to these software: **methods, graphics, grDevices, grid, stats, tools, lwgeom, mapview, microbenchmark, pool, RPostgres, s2, spatstat.utils, stars, tmap** are not enabled in the R package. As a result, the test fails and all other packages have been enabled. Can you ask R community developers to enable these packages in the spack to solve the test problem?\r\n\r\n### Information on your system\r\n[root@centos8 spack-src]# spack debug report\r\n* **Spack:** 0.16.1-1728-364b9e7a27\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos8-aarch64\r\n* **Concretizer:** original\r\n<!-- Please include the output of `spack debug report` -->\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [ ] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [ ] I have searched the issues of this repo and believe this is not a duplicate\r\n- [ ] I have run the failing commands in debug mode and reported the output\r\n\r\n<!-- We encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively!\r\n\r\nIf you want to ask a question about the tool (how to use it, what it can currently do, etc.), try the `#general` channel on our Slack first. We have a welcoming community and chances are you'll get your reply faster and without opening an issue.\r\n\r\nOther than that, thanks for taking the time to contribute to Spack! -->\r\n",
    "performed_via_github_app": null
}