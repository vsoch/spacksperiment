{
    "url": "https://api.github.com/repos/spack/spack/issues/7119",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7119/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7119/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7119/events",
    "html_url": "https://github.com/spack/spack/issues/7119",
    "id": 292736414,
    "node_id": "MDU6SXNzdWUyOTI3MzY0MTQ=",
    "number": 7119,
    "title": "package.py hashing",
    "user": {
        "login": "tgamblin",
        "id": 299842,
        "node_id": "MDQ6VXNlcjI5OTg0Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgamblin",
        "html_url": "https://github.com/tgamblin",
        "followers_url": "https://api.github.com/users/tgamblin/followers",
        "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
        "organizations_url": "https://api.github.com/users/tgamblin/orgs",
        "repos_url": "https://api.github.com/users/tgamblin/repos",
        "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgamblin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 759411369,
            "node_id": "MDU6TGFiZWw3NTk0MTEzNjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/buildcache",
            "name": "buildcache",
            "color": "bf354c",
            "default": false,
            "description": null
        },
        {
            "id": 446626162,
            "node_id": "MDU6TGFiZWw0NDY2MjYxNjI=",
            "url": "https://api.github.com/repos/spack/spack/labels/hashes",
            "name": "hashes",
            "color": "9a69b7",
            "default": false,
            "description": null
        },
        {
            "id": 519278357,
            "node_id": "MDU6TGFiZWw1MTkyNzgzNTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/releases",
            "name": "releases",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 446630556,
            "node_id": "MDU6TGFiZWw0NDY2MzA1NTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/specs",
            "name": "specs",
            "color": "b60205",
            "default": false,
            "description": null
        },
        {
            "id": 821056453,
            "node_id": "MDU6TGFiZWw4MjEwNTY0NTM=",
            "url": "https://api.github.com/repos/spack/spack/labels/task",
            "name": "task",
            "color": "0052cc",
            "default": false,
            "description": null
        },
        {
            "id": 456341797,
            "node_id": "MDU6TGFiZWw0NTYzNDE3OTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/tests",
            "name": "tests",
            "color": "b60205",
            "default": false,
            "description": "General test capability(ies)"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scottwittenburg",
        "id": 6527504,
        "node_id": "MDQ6VXNlcjY1Mjc1MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6527504?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scottwittenburg",
        "html_url": "https://github.com/scottwittenburg",
        "followers_url": "https://api.github.com/users/scottwittenburg/followers",
        "following_url": "https://api.github.com/users/scottwittenburg/following{/other_user}",
        "gists_url": "https://api.github.com/users/scottwittenburg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scottwittenburg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scottwittenburg/subscriptions",
        "organizations_url": "https://api.github.com/users/scottwittenburg/orgs",
        "repos_url": "https://api.github.com/users/scottwittenburg/repos",
        "events_url": "https://api.github.com/users/scottwittenburg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scottwittenburg/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scottwittenburg",
            "id": 6527504,
            "node_id": "MDQ6VXNlcjY1Mjc1MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6527504?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scottwittenburg",
            "html_url": "https://github.com/scottwittenburg",
            "followers_url": "https://api.github.com/users/scottwittenburg/followers",
            "following_url": "https://api.github.com/users/scottwittenburg/following{/other_user}",
            "gists_url": "https://api.github.com/users/scottwittenburg/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scottwittenburg/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scottwittenburg/subscriptions",
            "organizations_url": "https://api.github.com/users/scottwittenburg/orgs",
            "repos_url": "https://api.github.com/users/scottwittenburg/repos",
            "events_url": "https://api.github.com/users/scottwittenburg/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scottwittenburg/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2018-01-30T10:48:55Z",
    "updated_at": "2019-08-22T23:59:23Z",
    "closed_at": "2019-08-22T23:59:23Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "To do release management as described in #7116 and #7117, we need to include the hash of `package.py` files in the `spec`, so that changes to builds are reflected in the Spack hash.\r\n\r\nWe have had logic to do this for a while, in the `features/package-hash` branch.  This branch canonicalizes packages by removing comments, directive metadata, and unused version-specific `@when` decorators, then it hashes what's left and factors that into the spec.\r\n\r\nWe haven't worked this into Spack proper yet, because there needs to be additional support in the concretizer to make it less disruptive.  But we'll at least need it to detect that packages have changed meaningfully since the last build.\r\n\r\n- [x] Rebase `features/package-hash` on `develop` and get it working. (#7193)\r\n\r\n- [x] Depending on whether the new concretizer is ready, decide whether to make the package hash part of the spec hash, or whether we should just use it for builds.\r\n     * merge in appropriate support\r\n     * **Decision**: we will just use this to detect builds for now.  The support for full hashing is in place, but full hashing won't be in production until we have the new concretizer.\r\n\r\n- [x] ensure that binaries are rebuilt when changes are made to `package.py` files on a release branch, see #8387 for discussion.",
    "performed_via_github_app": null
}