{
    "url": "https://api.github.com/repos/spack/spack/issues/9435",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9435/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9435/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9435/events",
    "html_url": "https://github.com/spack/spack/issues/9435",
    "id": 366804419,
    "node_id": "MDU6SXNzdWUzNjY4MDQ0MTk=",
    "number": 9435,
    "title": "Installation issue: cgal - demos don't work",
    "user": {
        "login": "baberlevi",
        "id": 5819098,
        "node_id": "MDQ6VXNlcjU4MTkwOTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5819098?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/baberlevi",
        "html_url": "https://github.com/baberlevi",
        "followers_url": "https://api.github.com/users/baberlevi/followers",
        "following_url": "https://api.github.com/users/baberlevi/following{/other_user}",
        "gists_url": "https://api.github.com/users/baberlevi/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/baberlevi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/baberlevi/subscriptions",
        "organizations_url": "https://api.github.com/users/baberlevi/orgs",
        "repos_url": "https://api.github.com/users/baberlevi/repos",
        "events_url": "https://api.github.com/users/baberlevi/events{/privacy}",
        "received_events_url": "https://api.github.com/users/baberlevi/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-10-04T13:59:14Z",
    "updated_at": "2019-10-21T20:53:09Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install cgal+demos\r\n```\r\nDisclaimer: I have never used CGAL & don't know what I'm doing with it beyond a cursory glance at the docs.\r\n\r\nCGAL builds successfully, but I can't seem to get most demos to work.\r\n\r\nThe spack cgal package doesn't seem to actually install the demos, but just includes the additional dependencies needed for demos (that's not an issue - just stating my understanding for confirmation).\r\n\r\nSo, I download the release from github that has the demos, and go into the demo directory and try building some after I have the cgal module loaded. I've also loaded the cmake module.\r\n\r\nMany demos seem to complain about needing qt & cgal (even though both of those modules are loaded), and so cmake fails:\r\n```console\r\n$ pwd\r\n/work/LAS/researchit/baber/CGAL-4.12/demo/Triangulation_2\r\n...\r\n-- NOTICE: This demo requires CGAL and Qt5, and will not be compiled.\r\n```\r\n\r\nSome work, like Mesh_2 (I can sucessfully run conform and convert a poly file)\r\n\r\nThis one seems like the biggest issue though:\r\n```console\r\n$ pwd\r\n/work/LAS/researchit/baber/CGAL-4.12/demo/Geomview\r\n[baber@condodebug001 Geomview]$ cmake .\r\n-- __cplusplus is 199711\r\n-- Boost version: 1.67.0\r\n-- Found the following Boost libraries:\r\n--   thread\r\n--   system\r\n--   chrono\r\n--   date_time\r\n--   atomic\r\n-- Boost include dirs: /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/include\r\n-- Boost libraries:    /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/lib/libboost_thread-mt.so;/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/lib/libboost_system-mt.so;/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/lib/libboost_chrono-mt.so;/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/lib/libboost_date_time-mt.so;/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/boost-1.67.0-pdy2xxoavfvnde2bfgyhj4sftlxtubd4/lib/libboost_atomic-mt.so\r\n-- Build type: \r\n-- USING CXXFLAGS = ' '\r\n-- USING EXEFLAGS = ' '\r\n-- Targetting Unix Makefiles\r\n-- Using /usr/bin/c++ compiler.\r\n-- Requested component: MPFR\r\n-- Requested component: GMP\r\nCMake Warning at /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/cgal-4.12-2sx3nswvlxqychv7slocmf2i7n4i6gcv/lib64/cmake/CGAL/CGAL_enable_end_of_configuration_hook.cmake:32 (message):\r\n  =======================================================================\r\n\r\n  CGAL performance notice:\r\n\r\n  The variable CMAKE_BUILD_TYPE is set to \"\".  For performance reasons, you\r\n  should set CMAKE_BUILD_TYPE to \"Release\".\r\n\r\n  Set CGAL_DO_NOT_WARN_ABOUT_CMAKE_BUILD_TYPE to TRUE if you want to disable\r\n  this warning.\r\n\r\n  =======================================================================\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:9999 (CGAL_run_at_the_end_of_configuration)\r\n\r\n\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /work/LAS/researchit/baber/CGAL-4.12/demo/Geomview\r\n[baber@condodebug001 Geomview]$ make \r\n[ 33%] Built target input\r\n[ 66%] Built target kernel\r\n[100%] Built target gv_terrain\r\n[baber@condodebug001 Geomview]$ ./gv_terrain \r\nStarting Geomview...execl geomview failed\r\nerror number 2 (check `man execlp')\r\nterminate called after throwing an instance of 'CGAL::Assertion_exception'\r\n  what():  CGAL ERROR: assertion violation!\r\nFile: /opt/spack/var/spack/stage/cgal-4.12-2sx3nswvlxqychv7slocmf2i7n4i6gcv/CGAL-4.12/include/CGAL/IO/Geomview_stream_impl.h\r\nLine: 126\r\n```\r\nThe demo builds, but throws an error apparently attempting to use a header file from the stage directory (which is of course gone at this point).\r\n\r\nThe header file it should be using seems to be in the right spot:\r\n```console\r\n$ ll /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/cgal-4.12-2sx3nswvlxqychv7slocmf2i7n4i6gcv/include/CGAL/IO/Geomview_stream_impl.h \r\n-rw-r--r--. 1 root root 15719 Apr 25 08:37 /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/cgal-4.12-2sx3nswvlxqychv7slocmf2i7n4i6gcv/include/CGAL/IO/Geomview_stream_impl.h\r\n```\r\nI'm not sure what would be causing it to try looking in stage instead.\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux build.las.iastate.edu 3.10.0-862.3.2.el7.x86_64 #1 SMP Tue May 15 18:22:15 EDT 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ cat /etc/redhat-release \r\nRed Hat Enterprise Linux Server release 7.5 (Maipo)\r\n``` \r\n\r\n### Additional information\r\n\r\nThe full concretized spec\r\n```console\r\n[+]  2sx3nsw  cgal@4.12%gcc@4.8.5 build_type=Release ~core+demos~imageio+shared arch=linux-rhel7-x86_64 \r\n[+]  pdy2xxo      ^boost@1.67.0%gcc@4.8.5+atomic+chrono~clanglibcpp+date_time~debug+exception+filesystem~graph~icu+iostreams+locale+log+math+mpi+multithreaded~numpy+program_options+python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave arch=linux-rhel7-x86_64 \r\n[+]  qrd3gzl          ^bzip2@1.0.6%gcc@4.8.5+shared arch=linux-rhel7-x86_64 \r\n[+]  athyebf          ^openmpi@3.1.0%gcc@4.8.5~cuda fabrics=libfabric ~java~memchecker+pmi schedulers=slurm ~sqlite3~thread_multiple+vt arch=linux-rhel7-x86_64 \r\n[+]  gold444              ^hwloc@1.11.9%gcc@4.8.5~cairo~cuda+libxml2+pci+shared arch=linux-rhel7-x86_64 \r\n[+]  qxhgslw                  ^libpciaccess@0.13.5%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  ffzbok4                  ^libxml2@2.9.8%gcc@4.8.5~python arch=linux-rhel7-x86_64 \r\n[+]  rh7gav6                      ^xz@5.2.4%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  vhzh5cf                      ^zlib@1.2.11%gcc@4.8.5+optimize+pic+shared arch=linux-rhel7-x86_64 \r\n[+]  d5tronv                  ^numactl@2.0.11%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  rz4zjo6              ^libfabric@1.6.0%gcc@4.8.5 fabrics=psm,psm2,sockets,udp,verbs arch=linux-rhel7-x86_64 \r\n[+]  jyw65r7                  ^opa-psm2@10.3-37%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  qxuq6tw                  ^psm@2017-04-28%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  n4dikzc                      ^libuuid@1.0.3%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  wwgwvxd                  ^rdma-core@13%gcc@4.8.5 build_type=RelWithDebInfo arch=linux-rhel7-x86_64 \r\n[+]  dy57k3z                      ^libnl@3.3.0%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  xuocyol          ^python@2.7.14%gcc@4.8.5+dbm~optimizations patches=123082ab3483ded78e86d7c809e98a804b3465b4683c96bd79a2fd799f572244 +pic+shared+tk~ucs4 arch=linux-rhel7-x86_64 \r\n[+]  7zby6of              ^gdbm@1.14.1%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  jushdjv                  ^readline@7.0%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  3ncf3bb                      ^ncurses@6.0%gcc@4.8.5 patches=f84b2708a42777aadcc7f502a261afe10ca5646a51c1ef8b5e60d2070d926b57 ~symlinks~termlib arch=linux-rhel7-x86_64 \r\n[+]  ycmyhhj              ^openssl@1.0.2n%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  7bttd2h              ^sqlite@3.21.0%gcc@4.8.5 patches=5bbcba091045e547eb550e6e9b9372009c41be0a9de8a5c030d03361c11ff939 arch=linux-rhel7-x86_64 \r\n[+]  6n6yu4g              ^tcl@8.6.6%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  ygpdzkg              ^tk@8.6.6%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  6zkj6ch                  ^libx11@1.6.5%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  xjtsozl                      ^kbproto@1.0.7%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  d2pppsa                      ^libxcb@1.12%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  ysy56bb                          ^libpthread-stubs@0.4%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  33gftuo                          ^libxau@1.0.8%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  wtblcw4                              ^xproto@7.0.31%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  lsgxmwu                          ^libxdmcp@1.1.2%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  kookqqj                      ^xextproto@7.3.0%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  5odxtlx      ^gmp@6.1.2%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  gzm2jew      ^mpfr@3.1.5%gcc@4.8.5 patches=88dfefa6d39c9fd5a26a40d9bbc73df8da93f946c65c06038026261d78d919f5,dfd62a42a239c427bb44087b4a520edbcd65bae6ad1fbe07303c96ee8696afbd arch=linux-rhel7-x86_64 \r\n[+]  vkppetg      ^qt@5.10.0%gcc@4.8.5~dbus~examples~gtk~krellpatch~opengl patches=7f34d48d2faaa108dc3fcc47187af1ccd1d37ee0f931b42597b820f03a99864c,c52f72dac7fdff5a296467536cc9ea024d78f94b49903286395f53fd0eb66e5e ~phonon~webkit arch=linux-rhel7-x86_64 \r\n[+]  vjsdvjt          ^fontconfig@2.12.3%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  ftmvg2y              ^font-util@1.3.1%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  gdaxxa5              ^freetype@2.7.1%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  3ivpdto                  ^libpng@1.6.29%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  kdrhlrn          ^glib@2.55.1%gcc@4.8.5~libmount patches=c325997b72a205ad1638bb3e3ba0e5b73e3d32ce63b2d0d3282f3e3a2ff4663c tracing= arch=linux-rhel7-x86_64 \r\n[+]  gdjis6z              ^gettext@0.19.8.1%gcc@4.8.5+bzip2+curses+git~libunistring+libxml2 patches=9acdb4e73f67c241b5ef32505c9ddf7cf6884ca8ea661692f21dca28483b04b8 +tar+xz arch=linux-rhel7-x86_64 \r\n[+]  ucx2vrv                  ^tar@1.30%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  4s3dshk              ^libffi@3.2.1%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  vwvgnbn              ^pcre@8.42%gcc@4.8.5~jit+utf arch=linux-rhel7-x86_64 \r\n[+]  ei7q6gg              ^perl@5.24.1%gcc@4.8.5+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=linux-rhel7-x86_64 \r\n[+]  6yusggv          ^icu4c@60.1%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  plsq6cx          ^libjpeg-turbo@1.5.0%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  boetshl          ^libmng@2.0.3%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  p4xpr43              ^lcms@2.9%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n[+]  ktztape                  ^libtiff@4.0.9%gcc@4.8.5 arch=linux-rhel7-x86_64 \r\n```",
    "performed_via_github_app": null
}