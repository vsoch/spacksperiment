{
    "url": "https://api.github.com/repos/spack/spack/issues/16893",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16893/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16893/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16893/events",
    "html_url": "https://github.com/spack/spack/pull/16893",
    "id": 628631094,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDI2MTM3MTgy",
    "number": 16893,
    "title": "fix satisfaction checks for exluding variants from matrices",
    "user": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-06-01T18:14:35Z",
    "updated_at": "2020-06-02T09:02:37Z",
    "closed_at": "2020-06-02T09:02:30Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/16893",
        "html_url": "https://github.com/spack/spack/pull/16893",
        "diff_url": "https://github.com/spack/spack/pull/16893.diff",
        "patch_url": "https://github.com/spack/spack/pull/16893.patch"
    },
    "body": "Because of the way abstract variants are implemented, the following spec matrix does not work as intended.\r\n\r\n```\r\nmatrix:\r\n- [foo]\r\n- [bar=a, bar=b]\r\nexclude:\r\n- bar=a\r\n```\r\n\r\nThis should output one spec `foo bar=b`, but it now outputs zero specs, because abstract variants always satisfy any variant of the same name, regardless of values.\r\n\r\nThis PR converts abstract variants to whatever their appropriate type is before running satisfaction checks for the `excludes` clause in a matrix. \r\n\r\nFixes #16841 \r\nCloses #16853 ",
    "performed_via_github_app": null
}