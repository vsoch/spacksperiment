{
    "url": "https://api.github.com/repos/spack/spack/issues/18066",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/18066/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/18066/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/18066/events",
    "html_url": "https://github.com/spack/spack/pull/18066",
    "id": 678983557,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3ODM5ODQ5",
    "number": 18066,
    "title": "nfs-utils: fix compile error on ubuntu",
    "user": {
        "login": "darmac",
        "id": 29532367,
        "node_id": "MDQ6VXNlcjI5NTMyMzY3",
        "avatar_url": "https://avatars.githubusercontent.com/u/29532367?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darmac",
        "html_url": "https://github.com/darmac",
        "followers_url": "https://api.github.com/users/darmac/followers",
        "following_url": "https://api.github.com/users/darmac/following{/other_user}",
        "gists_url": "https://api.github.com/users/darmac/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/darmac/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/darmac/subscriptions",
        "organizations_url": "https://api.github.com/users/darmac/orgs",
        "repos_url": "https://api.github.com/users/darmac/repos",
        "events_url": "https://api.github.com/users/darmac/events{/privacy}",
        "received_events_url": "https://api.github.com/users/darmac/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446630669,
            "node_id": "MDU6TGFiZWw0NDY2MzA2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/dependencies",
            "name": "dependencies",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-08-14T08:10:06Z",
    "updated_at": "2020-09-01T06:37:06Z",
    "closed_at": "2020-08-16T22:27:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/18066",
        "html_url": "https://github.com/spack/spack/pull/18066",
        "diff_url": "https://github.com/spack/spack/pull/18066.diff",
        "patch_url": "https://github.com/spack/spack/pull/18066.patch"
    },
    "body": "`nfs-utils` compile fail on `ubuntu`\r\nthe `configure` will check `libblkid` by using a mini c code, and check fail because an undefined symbol.\r\n(that symbol realized in `libintl`).\r\nSo we need to add `libintl` dependency and export it in `LIBS` to make `configure` using it.\r\n```\r\n==> 84811: Installing nfs-utils\r\n==> Finding buildcaches at http://172.19.16.223/spack_mirror/build_cache\r\n==> Fetching http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml\r\n\r\ncurl: (22) The requested URL returned error: 404 Not Found\r\n==> Failed to fetch file from URL: http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml\r\n    URL http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml was not found!\r\n==> Fetching from http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml failed.\r\n==> Using cached archive: /home/spack-develop/var/spack/cache/_source-cache/archive/bb/bb08106cd7bd397c6cc34e2461bc7818a664450d2805da08b07e1ced88e5155f.tar.gz\r\n==> Staging archive: /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/download\r\n==> Created stage in /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6\r\n==> No patches needed for nfs-utils\r\n==> 84811: nfs-utils: Building nfs-utils [AutotoolsPackage]\r\n==> 84811: nfs-utils: Executing phase: 'autoreconf'\r\n==> 84811: nfs-utils: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-src/configure' '--prefix=/home/spack-develop/opt/spack/linux-ubuntu19.10-aarch64/gcc-9.2.1/nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6' '--disable-gss' '--with-rpcgen=internal'\r\n\r\n1 error found in build log:\r\n     166    checking for dm_task_create in -ldevmapper... yes\r\n     167    checking libdevmapper.h usability... yes\r\n     168    checking libdevmapper.h presence... yes\r\n     169    checking for libdevmapper.h... yes\r\n     170    checking for sys/inotify.h... (cached) yes\r\n     171    checking for blkid_get_library_version in -lblkid... no\r\n  >> 172    configure: error: libblkid needed\r\n\r\nSee build log for details:\r\n  /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-build-out.txt\r\n\r\n==> Error: Failed to install nfs-utils due to ChildError: ProcessError: Command exited with status 1:\r\n    '/home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-src/configure' '--prefix=/home/spack-develop/opt/spack/linux-ubuntu19.10-aarch64/gcc-9.2.1/nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6' '--disable-gss' '--with-rpcgen=internal'\r\n1 error found in build log:\r\n     166    checking for dm_task_create in -ldevmapper... yes\r\n     167    checking libdevmapper.h usability... yes\r\n     168    checking libdevmapper.h presence... yes\r\n     169    checking for libdevmapper.h... yes\r\n     170    checking for sys/inotify.h... (cached) yes\r\n     171    checking for blkid_get_library_version in -lblkid... no\r\n  >> 172    configure: error: libblkid needed\r\n```",
    "performed_via_github_app": null
}