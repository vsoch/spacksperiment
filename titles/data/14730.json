{
    "url": "https://api.github.com/repos/spack/spack/issues/14730",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14730/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14730/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14730/events",
    "html_url": "https://github.com/spack/spack/issues/14730",
    "id": 559186708,
    "node_id": "MDU6SXNzdWU1NTkxODY3MDg=",
    "number": 14730,
    "title": "Compiler version in install path matches neither compilers.yaml nor package versions",
    "user": {
        "login": "matz-e",
        "id": 2151261,
        "node_id": "MDQ6VXNlcjIxNTEyNjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2151261?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/matz-e",
        "html_url": "https://github.com/matz-e",
        "followers_url": "https://api.github.com/users/matz-e/followers",
        "following_url": "https://api.github.com/users/matz-e/following{/other_user}",
        "gists_url": "https://api.github.com/users/matz-e/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/matz-e/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matz-e/subscriptions",
        "organizations_url": "https://api.github.com/users/matz-e/orgs",
        "repos_url": "https://api.github.com/users/matz-e/repos",
        "events_url": "https://api.github.com/users/matz-e/events{/privacy}",
        "received_events_url": "https://api.github.com/users/matz-e/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446615268,
            "node_id": "MDU6TGFiZWw0NDY2MTUyNjg=",
            "url": "https://api.github.com/repos/spack/spack/labels/compilers",
            "name": "compilers",
            "color": "f9d0c4",
            "default": false,
            "description": null
        },
        {
            "id": 512483390,
            "node_id": "MDU6TGFiZWw1MTI0ODMzOTA=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-medium",
            "name": "impact-medium",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 474580738,
            "node_id": "MDU6TGFiZWw0NzQ1ODA3Mzg=",
            "url": "https://api.github.com/repos/spack/spack/labels/versions",
            "name": "versions",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-02-03T16:17:27Z",
    "updated_at": "2020-02-20T20:20:13Z",
    "closed_at": "2020-02-20T20:20:13Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "We would like to make it simple for users to specify which compilers certain packages should use. As such, we make good use of the `%gcc`, `%intel` spec parts. But we noticed a few unexpected installation directories when, e.g., `%intel@19` is used in an attempt to match the installed version of the intel compiler from 2019 (without being overly specific). This results in a new installation tree:\r\n```\r\n\u276f spack install nano%intel@19\r\n==> ncurses@6.1 : externally installed in /some/path/linux-rhel7-x86_64/gcc-8.3.0/ncurses-6.1-esk7yfugjx\r\n==> ncurses@6.1 : generating module file\r\n==> ncurses@6.1 : registering into DB\r\n==> Installing nano\r\n<snip>\r\n==> Successfully installed nano\r\n  Fetch: 0.71s.  Build: 1m 28.70s.  Total: 1m 29.41s.\r\n[+] /gpfs/bbp.cscs.ch/home/matwolf/.cache/spack/install/linux-rhel7-x86_64/intel-19/nano-4.4-qqaacp\r\n```\r\nNotice the `/intel-19/`, where we would have expected `/intel-19.0.4.243/`, in line with the version given in `compilers.yaml`:\r\n```\r\n\u276f spack compiler list\r\n==> Available compilers\r\n-- intel rhel7-x86_64 -------------------------------------------\r\nintel@19.0.4.243\r\n```\r\nIs this expected? Could the behavior changed to either produce an error if the version is not matched exactly, or to actually match the highest version found in the full spec? Our configuration for the install path scheme:\r\n```\r\n\u276f spack config get config|rg install_path\r\n  install_path_scheme: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH:6}\r\n```\r\n\r\n@pramodk, FYI.",
    "performed_via_github_app": null
}