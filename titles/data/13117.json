{
    "url": "https://api.github.com/repos/spack/spack/issues/13117",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13117/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13117/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13117/events",
    "html_url": "https://github.com/spack/spack/issues/13117",
    "id": 505024109,
    "node_id": "MDU6SXNzdWU1MDUwMjQxMDk=",
    "number": 13117,
    "title": "Refactoring FLANG out of main LLVM package",
    "user": {
        "login": "naromero77",
        "id": 7633854,
        "node_id": "MDQ6VXNlcjc2MzM4NTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7633854?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naromero77",
        "html_url": "https://github.com/naromero77",
        "followers_url": "https://api.github.com/users/naromero77/followers",
        "following_url": "https://api.github.com/users/naromero77/following{/other_user}",
        "gists_url": "https://api.github.com/users/naromero77/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/naromero77/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/naromero77/subscriptions",
        "organizations_url": "https://api.github.com/users/naromero77/orgs",
        "repos_url": "https://api.github.com/users/naromero77/repos",
        "events_url": "https://api.github.com/users/naromero77/events{/privacy}",
        "received_events_url": "https://api.github.com/users/naromero77/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 14,
    "created_at": "2019-10-10T04:20:58Z",
    "updated_at": "2020-01-13T18:38:16Z",
    "closed_at": "2020-01-11T22:13:04Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "This occurs on Ubuntu 18.04 TLS with Spack develop branch.\r\n\r\nI believe this line:\r\nhttps://github.com/spack/spack/blob/develop/var/spack/repos/builtin/packages/llvm/package.py#L593-595\r\n\r\ncauses an unintentional conflict with GCC@8: and llvm@flang-20180921. Error message is show below.\r\n\r\nThe easiest way to fix this is to have `flang` appear as a suffix instead of a prefix. Then you would have:\r\n```\r\n>>> Version(\"20180921-flang\") < Version(5)\r\nFalse\r\n```\r\nThe other possibility is to have flang for LLVM be a variant instead of a version number.\r\n\r\n```\r\n(base) [naromero@naromero-desktop ~]$ spack spec flang\r\nInput spec\r\n--------------------------------\r\nflang\r\nConcretized\r\n--------------------------------\r\n==> Error: Conflicts in concretized spec \"flang@20180921%gcc@8.3.0 build_type=RelWithDebInfo arch=linux-ubuntu18.04-westmere/ddlkqug\"\r\nList of matching conflicts for spec:\r\n    llvm@flang-20180921%gcc@8.3.0~all_targets build_type=Release +clang+compiler-rt+gold+internal_unwind+libcxx~link_dylib+lld+lldb~omp_tsan+polly~python~shared_libs arch=linux-ubuntu18.04-westmere\r\n        ^binutils@2.32%gcc@8.3.0+gold~headers~libiberty+nls~plugins arch=linux-ubuntu18.04-westmere\r\n            ^gettext@0.19.8.1%gcc@8.3.0+bzip2+curses+git~libunistring+libxml2 patches=9acdb4e73f67c241b5ef32505c9ddf7cf6884ca8ea661692f21dca28483b04b8 +tar+xz arch=linux-ubuntu18.04-westmere\r\n                ^bzip2@1.0.8%gcc@8.3.0+shared arch=linux-ubuntu18.04-westmere\r\n                    ^diffutils@3.7%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                        ^libiconv@1.15%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                ^libxml2@2.9.9%gcc@8.3.0~python arch=linux-ubuntu18.04-westmere\r\n                    ^pkgconf@1.6.1%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                    ^xz@5.2.4%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                    ^zlib@1.2.11%gcc@8.3.0+optimize+pic+shared arch=linux-ubuntu18.04-westmere\r\n                ^ncurses@6.1%gcc@8.3.0~symlinks~termlib arch=linux-ubuntu18.04-westmere\r\n                ^tar@1.31%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^cmake@3.15.3%gcc@8.3.0~doc+ncurses+openssl+ownlibs~qt arch=linux-ubuntu18.04-westmere\r\n            ^openssl@1.1.1c%gcc@8.3.0+systemcerts arch=linux-ubuntu18.04-westmere\r\n                ^perl@5.26.2%gcc@8.3.0+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=linux-ubuntu18.04-westmere\r\n                    ^gdbm@1.18.1%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                        ^readline@7.0%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^gmp@6.1.2%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^autoconf@2.69%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n                ^m4@1.4.18%gcc@8.3.0 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-ubuntu18.04-westmere\r\n                    ^libsigsegv@2.11%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^automake@1.16.1%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^libtool@2.4.6%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^isl@0.19%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^libedit@3.1-20170329%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^perl-data-dumper@2.173%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n        ^python@2.7.16%gcc@8.3.0+bz2+ctypes+dbm+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zlib arch=linux-ubuntu18.04-westmere\r\n            ^expat@2.2.5%gcc@8.3.0+libbsd arch=linux-ubuntu18.04-westmere\r\n                ^libbsd@0.9.1%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^libffi@3.2.1%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^sqlite@3.29.0%gcc@8.3.0~column_metadata+fts~functions~rtree arch=linux-ubuntu18.04-westmere\r\n        ^swig@4.0.0%gcc@8.3.0 arch=linux-ubuntu18.04-westmere\r\n            ^pcre@8.42%gcc@8.3.0~jit+multibyte+utf arch=linux-ubuntu18.04-westmere\r\n1. \"%gcc@8:\" conflicts with \"llvm@:5\"\r\n```",
    "performed_via_github_app": null
}