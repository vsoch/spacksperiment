{
    "url": "https://api.github.com/repos/spack/spack/issues/23285",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23285/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23285/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23285/events",
    "html_url": "https://github.com/spack/spack/pull/23285",
    "id": 868989657,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjI0NDI0OTU0",
    "number": 23285,
    "title": "mesa18: depends on binutils+plugins for build",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446630669,
            "node_id": "MDU6TGFiZWw0NDY2MzA2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/dependencies",
            "name": "dependencies",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-04-27T15:41:09Z",
    "updated_at": "2021-04-28T11:53:15Z",
    "closed_at": "2021-04-28T11:53:15Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/23285",
        "html_url": "https://github.com/spack/spack/pull/23285",
        "diff_url": "https://github.com/spack/spack/pull/23285.diff",
        "patch_url": "https://github.com/spack/spack/pull/23285.patch"
    },
    "body": "I think `mesa18` needs `binutils+plugins` -- it's not building for me otherwise. Can someone check me on this?\r\n\r\nHere's the error I see when trying to build `mesa18 ^binutils~plugins`:\r\n\r\nConcrete spec: [mesa18-kgrn2o.spec.yaml.txt](https://github.com/spack/spack/files/6385826/mesa18-kgrn2o.spec.yaml.txt)\r\nContainer used: `ecpe4s/ubuntu20.04-runner-x86_64:2021-03-10`\r\n\r\n```\r\n$> spack install -f ./mesa18-kgrn2o.spec.yaml\r\n...\r\n==> Installing mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd\r\n==> Using cached archive: /spack/var/spack/cache/_source-cache/git//mesa/mesa.git/mesa-18.3.6.tar.gz\r\n==> Warning: Fetching from mirror without a checksum!\r\n  This package is normally checked out from a version control system, but it has been archived on a spack mirror.  This means we cannot know a checksum for the tarball in advance. Be sure that your connection to this mirror is secure!\r\n==> Applied patch /spack/var/spack/repos/builtin/packages/mesa18/autotools-x11-nodri.patch\r\n==> mesa18: Executing phase: 'autoreconf'\r\n==> mesa18: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 77:\r\n    '/tmp/root/spack-stage/spack-stage-mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd/spack-src/configure' '--prefix=/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd' 'LDFLAGS=-L/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/ncurses-6.2-n5vhymfigwg6e45k7thdfyeswuhxojtx/lib' '--enable-shared' '--disable-static' '--disable-libglvnd' '--disable-nine' '--disable-omx-bellagio' '--disable-omx-tizonia' '--disable-opencl' '--disable-opencl-icd' '--disable-va' '--disable-vdpau' '--disable-xa' '--disable-xvmc' '--disable-osmesa' '--with-vulkan-drivers=' '--disable-egl' '--disable-gbm' '--disable-dri' '--enable-opengl' '--enable-gallium-osmesa' '--enable-glx=gallium-xlib' '--disable-gles1' '--disable-gles2' '--enable-shared-glapi' '--disable-llvm' '--with-platforms=x11' '--with-gallium-drivers=swrast' '--with-dri-drivers='\r\n\r\n2 errors found in build log:\r\n     41    checking whether GID '0' is supported by ustar format... yes\r\n     42    checking how to create a ustar tar archive... gnutar\r\n     43    checking whether make supports nested variables... (cached) yes\r\n     44    checking whether make supports the include directive... yes (GNU style)\r\n     45    checking for gcc... /spack/lib/spack/env/gcc/gcc\r\n     46    checking whether the C compiler works... no\r\n  >> 47    configure: error: in `/tmp/root/spack-stage/spack-stage-mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd/spack-src':\r\n  >> 48    configure: error: C compiler cannot create executables\r\n     49    See `config.log' for more details\r\n\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd/spack-build-out.txt\r\n```\r\n\r\nConfig.log excerpt:\r\n```\r\nconfigure:4697: checking whether the C compiler works\r\nconfigure:4719: /spack/lib/spack/env/gcc/gcc   -L/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/ncurses-6.2-n5vhymfigwg6e45k7thdfyeswuhxojtx/lib conftest.c  >&5\r\n/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/binutils-2.33.1-anrzgmmeofq33lbws3zhrmblqxjhjnum/bin/ld: fatal error: cannot use --plugin: /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/binutils-2.33.1-anrzgmmeofq33lbws3zhrmblqxjhjnum/bin/ld was compiled without plugin support\r\ncollect2: error: ld returned 1 exit status\r\nconfigure:4723: $? = 1\r\nconfigure:4761: result: no\r\nconfigure: failed program was:\r\n| /* confdefs.h */\r\n| #define PACKAGE_NAME \"Mesa\"\r\n| #define PACKAGE_TARNAME \"mesa\"\r\n| #define PACKAGE_VERSION \"18.3.6\"\r\n| #define PACKAGE_STRING \"Mesa 18.3.6\"\r\n| #define PACKAGE_BUGREPORT \"https://bugs.freedesktop.org/enter_bug.cgi?product=Mesa\"\r\n| #define PACKAGE_URL \"\"\r\n| #define PACKAGE \"mesa\"\r\n| #define VERSION \"18.3.6\"\r\n| /* end confdefs.h.  */\r\n|\r\n| int\r\n| main ()\r\n| {\r\n|\r\n|   ;\r\n|   return 0;\r\n| }\r\nconfigure:4766: error: in `/tmp/root/spack-stage/spack-stage-mesa18-18.3.6-kgrn2ooedrobqfri4ehkcfr6hyumensd/spack-src':\r\nconfigure:4768: error: C compiler cannot create executables\r\nSee `config.log' for more details\r\n```\r\n\r\nThoughts?\r\n\r\n@chuckatkins @v-dobrev @ChristianTackeGSI ",
    "performed_via_github_app": null
}