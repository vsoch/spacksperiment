{
    "url": "https://api.github.com/repos/spack/spack/issues/21451",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21451/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21451/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21451/events",
    "html_url": "https://github.com/spack/spack/issues/21451",
    "id": 799698130,
    "node_id": "MDU6SXNzdWU3OTk2OTgxMzA=",
    "number": 21451,
    "title": "py-petsc4py fails on all systems, all arch",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 12,
    "created_at": "2021-02-02T21:19:21Z",
    "updated_at": "2021-02-08T17:43:47Z",
    "closed_at": "2021-02-08T17:43:47Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "`py-petsc4py@3.14.0` build fails using `spack@develop` (7dcf3f7aedbfdf085451f8fffb2ecdfb08c96c7d from `Tue Feb 2 11:11:51 2021 -0800`)\r\n* `Ubuntu 18.04` w/ `gcc@7.5.0`\r\n* `Ubuntu 20.04` w/ `gcc@9.3.0`\r\n* `RHEL 7` w/ `gcc@8.1.0`\r\n* `RHEL 8` w/ `gcc@8.3.1`\r\n\r\nConcrete spec: [py-petsc4py-endo3v.spec.yaml.txt](https://github.com/spack/spack/files/5914488/py-petsc4py-endo3v.spec.yaml.txt)\r\nFull build log: [py-petsc4py-build-out.txt](https://github.com/spack/spack/files/5914490/py-petsc4py-build-out.txt)\r\nConcretize output: [py-petsc4py-dag.txt](https://github.com/spack/spack/files/5914497/py-petsc4py-dag.txt)\r\n\r\n```\r\n$> spack install -f ./py-petsc4py-endo3v.spec.yml\r\n...\r\n==> Installing py-petsc4py-3.14.0-endo3vxvolun3ajpssfvyqgypqzkrh43\r\n==> Using cached archive: /opt/spack/var/spack/cache/_source-cache/archive/33/33ac9fb55a541e4c1deabd6e2144da96d5ae70e70c830a55de558000cf3f0ec5.tar.gz\r\n==> py-petsc4py: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/python-3.8.6-4aev2ilejphuclznv7zazjxohanwz46i/bin/python3.8' '-s' 'setup.py' '--no-user-cfg' 'build'\r\n\r\n2 errors found in build log:\r\n     42    src/petsc4py.PETSc.c:326298:30: note: variable tracking size limit exceeded with '-fvar-tracking-assignments', retrying without\r\n     43    326298 | static CYTHON_SMALL_CODE int __pyx_pymod_exec_PETSc(PyObject *__pyx_pyinit_module)\r\n     44           |                              ^~~~~~~~~~~~~~~~~~~~~~\r\n     45    /opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.3.2-knmzscajrauwght5atlc2vevwjzwn2ke/bin/mpicc -pthread -fPIC -fPIC -Wno-unused-result -Wsign-compare\r\n           -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zlib-1.2.11-p7dmb5pqi6svirhovljrkp3uyfiytz3m/include -I/opt/spack/opt/sp\r\n           ack/linux-ubuntu20.04-x86_64/gcc-9.3.0/metis-5.1.0-lxkd2thzi5xc5z3aqvw4eodot57r53y5/include -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/parmetis-4.0.3-7\r\n           b3zkab7n54xkxkba2etquagx46mr6ze/include -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hdf5-1.10.7-t4jqnkp2mejfioelbtantmf7t2vdnoup/include -I/opt/spack/op\r\n           t/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/superlu-dist-6.4.0-qn52fuce45s64duiwjrv3n5nugai6f2p/include -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hypre\r\n           -2.20.0-celzcb34v2s6hppgktqyrdpubyp4rk5g/include -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/petsc-3.14.1-wakbzwrwms2g3xcyc643cnof4s4lf23r/include -Isrc\r\n           /include -I/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/py-numpy-1.20.0-q5r54n5m4zhq6ujwxaaqqlm2hovb54lv/lib/python3.8/site-packages/numpy/core/include -I/\r\n           opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/python-3.8.6-4aev2ilejphuclznv7zazjxohanwz46i/include/python3.8 -c src/libpetsc4py.c -o build/temp.linux-x86_64\r\n           -3.8/src/libpetsc4py.o\r\n     46    /opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.3.2-knmzscajrauwght5atlc2vevwjzwn2ke/bin/mpicc -pthread -fPIC /opt/spack/lib/spack/env/gcc/gcc -shared\r\n            -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/bzip2-1.0.8-5m22qwv5akdogbbq3qbuhilvi\r\n           ppzqeli/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/expat-2.2.10-r4dctmf674e37q4jc2pvphiy5ik4riz3/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_6\r\n           4/gcc-9.3.0/gdbm-1.18.1-iowiob4u4kujr6pyhbolir3nokuqylwh/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/gettext-0.21-yt6n2phbjvscurpwbkm2gfx52rsd4rkm/l\r\n           ib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libffi-3.3-hvrhttuiahh5krx6w4oskf3mryadojct/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0\r\n           /ncurses-6.2-pzjdrlluvcj4s6ah6lxbd77vok3eoeaz/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/openssl-1.1.1i-6peexc2wtn22oxuevnyhrimerrpmqxeh/lib -L/opt\r\n           /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/readline-8.0-do42wztg5acct7tiuewpgnvgktwrkudh/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/sqlite\r\n           -3.33.0-2vrxq4lf2wh2qac4v2ngc2eqbna47oej/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/util-linux-uuid-2.36-qm5gupet6fiuoat4m2rnlusdwb5xiot7/lib -L/op\r\n           t/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/xz-5.2.5-kamfyq4jqy3je7qoimrp2tgs6gqswzcf/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zlib-1.2.\r\n           11-p7dmb5pqi6svirhovljrkp3uyfiytz3m/lib build/temp.linux-x86_64-3.8/src/PETSc.o build/temp.linux-x86_64-3.8/src/libpetsc4py.o -L/opt/spack/opt/spack/linux-ubuntu20.04\r\n           -x86_64/gcc-9.3.0/petsc-3.14.1-wakbzwrwms2g3xcyc643cnof4s4lf23r/lib -L/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/python-3.8.6-4aev2ilejphuclznv7zazjxohan\r\n           wz46i/lib -Wl,--enable-new-dtags,-R/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/petsc-3.14.1-wakbzwrwms2g3xcyc643cnof4s4lf23r/lib -Wl,--enable-new-dtags,-R\r\n           /opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/python-3.8.6-4aev2ilejphuclznv7zazjxohanwz46i/lib -lpetsc -o build/lib.linux-x86_64-3.8/petsc4py/lib/PETSc.cpy\r\n           thon-38-x86_64-linux-gnu.so\r\n     47    /opt/spack/lib/spack/env/gcc/gcc: file not recognized: file format not recognized\r\n  >> 48    collect2: error: ld returned 1 exit status\r\n  >> 49    error: command '/opt/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.3.2-knmzscajrauwght5atlc2vevwjzwn2ke/bin/mpicc' failed with exit status 1\r\n```\r\n\r\nThis breakage happened fairly recently (~ last month). I will try a bisect to see when this broke.\r\n\r\n@balay @adamjstewart \r\n\r\n\r\n",
    "performed_via_github_app": null
}