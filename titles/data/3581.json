{
    "url": "https://api.github.com/repos/spack/spack/issues/3581",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/3581/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/3581/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/3581/events",
    "html_url": "https://github.com/spack/spack/issues/3581",
    "id": 217558956,
    "node_id": "MDU6SXNzdWUyMTc1NTg5NTY=",
    "number": 3581,
    "title": "paraview: openmpi spec not constructed properly during install?",
    "user": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-03-28T13:26:04Z",
    "updated_at": "2017-11-23T10:22:54Z",
    "closed_at": "2017-11-23T10:22:54Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "This problem has been reported first in #3537 by @olesenm . The following command:\r\n```console\r\n$ spack install --only=dependencies paraview\r\n```\r\nresults in the error:\r\n```console\r\n...\r\n==> jpeg is already installed in /home/mculpo/PycharmProjects/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.8/jpeg-9b-ltd7bgtodplrr66etkl2eqa7434ppip5\r\n==> Installing openmpi\r\n==> Using cached archive: /home/mculpo/PycharmProjects/spack/var/spack/cache/openmpi/openmpi-2.1.0.tar.bz2\r\n==> Staging archive: /home/mculpo/PycharmProjects/spack/var/spack/stage/openmpi-2.1.0-6i2dsekkgbsvfdx24vtgwcsflhi725px/openmpi-2.1.0.tar.bz2\r\n==> Created stage in /home/mculpo/PycharmProjects/spack/var/spack/stage/openmpi-2.1.0-6i2dsekkgbsvfdx24vtgwcsflhi725px\r\n==> Ran patch() for openmpi\r\n==> Building openmpi [AutotoolsPackage]\r\n==> Executing phase : 'autoreconf'\r\n==> Executing phase : 'configure'\r\n==> Error: KeyError: 'No spec with name hwloc in openmpi@2.1.0%gcc@4.8~java~mxm~pmi~psm~psm2~slurm~sqlite3~thread_multiple~tm~verbs+vt arch=linux-ubuntu14-x86_64'\r\n/home/mculpo/PycharmProjects/spack/var/spack/repos/builtin/packages/openmpi/package.py:223, in configure_args:\r\n     176      def configure_args(self):\r\n     177          spec = self.spec\r\n     178  \r\n     179          config_args = [\r\n     180              '--enable-shared',\r\n     181              '--enable-static',\r\n     182              '--enable-mpi-cxx',\r\n     183              # Schedulers\r\n     184              '--with-tm' if '+tm' in spec else '--without-tm',\r\n     185              '--with-slurm' if '+slurm' in spec else '--without-slurm',\r\n     186              # Fabrics\r\n     187              '--with-psm' if '+psm' in spec else '--without-psm',\r\n     188          ]\r\n     189  \r\n     190          # Intel PSM2 support\r\n     191          if spec.satisfies('@1.10:'):\r\n     192              if '+psm2' in spec:\r\n     193                  config_args.append('--with-psm2')\r\n     194              else:\r\n     195                  config_args.append('--without-psm2')\r\n     196  \r\n     197          # PMI support\r\n     198          if spec.satisfies('@1.5.5:'):\r\n     199              if '+pmi' in spec:\r\n     200                  config_args.append('--with-pmi')\r\n     201              else:\r\n     202                  config_args.append('--without-pmi')\r\n     203  \r\n     204          # Mellanox Messaging support\r\n     205          if spec.satisfies('@1.5.4:'):\r\n     206              if '+mxm' in spec:\r\n     207                  config_args.append('--with-mxm')\r\n     208              else:\r\n     209                  config_args.append('--without-mxm')\r\n     210  \r\n     211          # OpenFabrics verbs support\r\n     212          if '+verbs' in spec:\r\n     213              path = _verbs_dir()\r\n     214              if path is not None and path not in ('/usr', '/usr/local'):\r\n     215                  config_args.append('--with-{0}={1}'.format(self.verbs, path))\r\n     216              else:\r\n     217                  config_args.append('--with-{0}'.format(self.verbs))\r\n     218          else:\r\n     219              config_args.append('--without-{0}'.format(self.verbs))\r\n     220  \r\n     221          # Hwloc support\r\n     222          if spec.satisfies('@1.5.2:'):\r\n  >> 223              config_args.append('--with-hwloc={0}'.format(spec['hwloc'].prefix))\r\n     224  \r\n     225          # Java support\r\n     226          if spec.satisfies('@1.7.4:'):\r\n     227              if '+java' in spec:\r\n     228                  config_args.extend([\r\n     229                      '--enable-java',\r\n     230                      '--enable-mpi-java',\r\n     231                      '--with-jdk-dir={0}'.format(spec['jdk'].prefix)\r\n     232                  ])\r\n     233              else:\r\n     234                  config_args.extend([\r\n     235                      '--disable-java',\r\n     236                      '--disable-mpi-java'\r\n     237                  ])\r\n     238  \r\n     239          # SQLite3 support\r\n     240          if spec.satisfies('@1.7.3:1.999'):\r\n     241              if '+sqlite3' in spec:\r\n     242                  config_args.append('--with-sqlite3')\r\n     243              else:\r\n     244                  config_args.append('--without-sqlite3')\r\n     245  \r\n     246          # VampirTrace support\r\n     247          if spec.satisfies('@1.3:1.999'):\r\n     248              if '+vt' not in spec:\r\n     249                  config_args.append('--enable-contrib-no-build=vt')\r\n     250  \r\n     251          # Multithreading support\r\n     252          if spec.satisfies('@1.5.4:'):\r\n     253              if '+thread_multiple' in spec:\r\n     254                  config_args.append('--enable-mpi-thread-multiple')\r\n     255              else:\r\n     256                  config_args.append('--disable-mpi-thread-multiple')\r\n     257  \r\n     258          return config_args\r\n\r\nSee build log for details:\r\n  /tmp/pytest-of-mculpo/pytest-0/test_keep_exceptions1/tmp/spack-stage/spack-stage-G8U6yt/openmpi-2.1.0/spack-build.out\r\n```",
    "performed_via_github_app": null
}