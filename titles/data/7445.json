{
    "url": "https://api.github.com/repos/spack/spack/issues/7445",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7445/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7445/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7445/events",
    "html_url": "https://github.com/spack/spack/issues/7445",
    "id": 303953795,
    "node_id": "MDU6SXNzdWUzMDM5NTM3OTU=",
    "number": 7445,
    "title": "packages sometimes pull in system dependencies",
    "user": {
        "login": "baberlevi",
        "id": 5819098,
        "node_id": "MDQ6VXNlcjU4MTkwOTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5819098?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/baberlevi",
        "html_url": "https://github.com/baberlevi",
        "followers_url": "https://api.github.com/users/baberlevi/followers",
        "following_url": "https://api.github.com/users/baberlevi/following{/other_user}",
        "gists_url": "https://api.github.com/users/baberlevi/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/baberlevi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/baberlevi/subscriptions",
        "organizations_url": "https://api.github.com/users/baberlevi/orgs",
        "repos_url": "https://api.github.com/users/baberlevi/repos",
        "events_url": "https://api.github.com/users/baberlevi/events{/privacy}",
        "received_events_url": "https://api.github.com/users/baberlevi/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446630669,
            "node_id": "MDU6TGFiZWw0NDY2MzA2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/dependencies",
            "name": "dependencies",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 455855856,
            "node_id": "MDU6TGFiZWw0NTU4NTU4NTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/external-packages",
            "name": "external-packages",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-03-09T19:28:57Z",
    "updated_at": "2018-03-29T13:57:12Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I am building some packages via singularity containers, and through that process I have found some packages that seem to be missing dependencies (mostly zlib and zip so far). \r\n\r\nMy container (rhel7) doesn't have zlib-devel for example, so the issue becomes apparent then.  When installing on our regular build box (also rhel7) but with zlib-devel installed, the packages install without the dependency listed in the package.py. \r\n\r\nSpack seems to build against the system library if it is there, but my understanding is that this shouldn't be happening in the sanitized build environment.\r\n\r\n### Expected Result\r\n\r\nThe sanitized build environment would prevent system libraries from being linked\r\n\r\n\r\n### Example:\r\n\r\nOn rhel container:\r\n```\r\nldd cdbfasta\r\n...\r\nlibz.so.1 => /opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/zlib-1.2.11-vhzh5cfaki5lx5sjuth5iuojq5azdkbd/lib/libz.so.1 (0x00007f8f5f5e3000)\r\n```\r\nOn regular rhel server:\r\n```\r\nldd cdbfasta\r\n...\r\nlibz.so.1 => /lib64/libz.so.1 (0x00007f8c21078000)\r\n```\r\n-----\r\nRelates to:\r\n#7274 \r\n\r\nand a whole bunch of my PRs:\r\n#7444 #7443 #7442 #7418 #7413 \r\n",
    "performed_via_github_app": null
}