{
    "url": "https://api.github.com/repos/spack/spack/issues/23977",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23977/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23977/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23977/events",
    "html_url": "https://github.com/spack/spack/pull/23977",
    "id": 904224186,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjU1Mzg4NTkx",
    "number": 23977,
    "title": "intel-tbb: install pkgconfig file",
    "user": {
        "login": "KoyamaSohei",
        "id": 17472875,
        "node_id": "MDQ6VXNlcjE3NDcyODc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/17472875?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/KoyamaSohei",
        "html_url": "https://github.com/KoyamaSohei",
        "followers_url": "https://api.github.com/users/KoyamaSohei/followers",
        "following_url": "https://api.github.com/users/KoyamaSohei/following{/other_user}",
        "gists_url": "https://api.github.com/users/KoyamaSohei/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/KoyamaSohei/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/KoyamaSohei/subscriptions",
        "organizations_url": "https://api.github.com/users/KoyamaSohei/orgs",
        "repos_url": "https://api.github.com/users/KoyamaSohei/repos",
        "events_url": "https://api.github.com/users/KoyamaSohei/events{/privacy}",
        "received_events_url": "https://api.github.com/users/KoyamaSohei/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-05-27T21:40:56Z",
    "updated_at": "2021-07-06T07:11:59Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/23977",
        "html_url": "https://github.com/spack/spack/pull/23977",
        "diff_url": "https://github.com/spack/spack/pull/23977.diff",
        "patch_url": "https://github.com/spack/spack/pull/23977.patch"
    },
    "body": "Currently, `intel-tbb` doesn't export `tbb.pc` files, and cannot be referenced from dependents by pkg-config.\r\n\r\npkg-config generation [may be introduced](https://github.com/oneapi-src/oneTBB/issues/5), but not available in now or earlier versions (e.g. version 2020.3). \r\n\r\nThis changes allows to export  `tbb.pc` , like [leveldb do](https://github.com/spack/spack/pull/3441).\r\n\r\nI'll explain how it will affect `intel-tbb` users.\r\n\r\n---\r\n\r\n[pmemkv](https://github.com/spack/spack/blob/4e8d87e5cc9c6cc536e4bd919e5f53aa7c3a7c75/var/spack/repos/builtin/packages/pmemkv/package.py#L47) is one of packages which want to use  `intel-tbb` 's  `tbb.pc`.\r\n\r\n`pmemkv` finds `tbb` from [pkg-config](https://github.com/pmem/pmemkv/blob/4ab5a4608d44c534e713f9f644fe117a0d6b9bda/CMakeLists.txt#L281), deb, rpm, or [`TBB_DIR`](https://github.com/pmem/pmemkv/blob/4ab5a4608d44c534e713f9f644fe117a0d6b9bda/cmake/tbb.cmake#L19).\r\n\r\nSo `pmemkv` cannot reference `intel-tbb` now ( and I want to fix that ).\r\n\r\nFor `pmemkv`, generating `tbb.pc` in `intel-tbb` is the easiest way since `pmemkv` doesn't have to know where `intel-tbb` is installed.\r\n\r\nTo set `TBB_DIR`, we need to write complicated patch. It is not a good solution.\r\n\r\n\r\n---\r\n[xtensor](https://github.com/spack/spack/blob/3d2cd480486648cd60c2400b9771df34e7aca684/var/spack/repos/builtin/packages/xtensor/package.py#L41) is one of packages which uses [FindTBB](https://github.com/justusc/FindTBB) to find TBB with [find_path](https://github.com/justusc/FindTBB/blob/25ecdea817b3af4a26d74ddcd439642dbd706acb/FindTBB.cmake#L177).\r\n\r\nxtensor doesn't use `pkg_check_modules` and pkg-config, so there is no effect for xtensor.\r\n\r\n[As far as I can find](https://github.com/spack/spack/search?l=Python&q=tbb), most packages take this approach.\r\n\r\n",
    "performed_via_github_app": null
}