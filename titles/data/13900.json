{
    "url": "https://api.github.com/repos/spack/spack/issues/13900",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13900/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13900/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13900/events",
    "html_url": "https://github.com/spack/spack/issues/13900",
    "id": 528812651,
    "node_id": "MDU6SXNzdWU1Mjg4MTI2NTE=",
    "number": 13900,
    "title": "racon: wrong path generated in install phase",
    "user": {
        "login": "phxyz12",
        "id": 11509797,
        "node_id": "MDQ6VXNlcjExNTA5Nzk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11509797?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/phxyz12",
        "html_url": "https://github.com/phxyz12",
        "followers_url": "https://api.github.com/users/phxyz12/followers",
        "following_url": "https://api.github.com/users/phxyz12/following{/other_user}",
        "gists_url": "https://api.github.com/users/phxyz12/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/phxyz12/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/phxyz12/subscriptions",
        "organizations_url": "https://api.github.com/users/phxyz12/orgs",
        "repos_url": "https://api.github.com/users/phxyz12/repos",
        "events_url": "https://api.github.com/users/phxyz12/events{/privacy}",
        "received_events_url": "https://api.github.com/users/phxyz12/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 512483297,
            "node_id": "MDU6TGFiZWw1MTI0ODMyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-low",
            "name": "impact-low",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 480333036,
            "node_id": "MDU6TGFiZWw0ODAzMzMwMzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/workaround",
            "name": "workaround",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tldahlgren",
            "id": 35777542,
            "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tldahlgren",
            "html_url": "https://github.com/tldahlgren",
            "followers_url": "https://api.github.com/users/tldahlgren/followers",
            "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
            "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
            "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
            "repos_url": "https://api.github.com/users/tldahlgren/repos",
            "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2019-11-26T15:49:53Z",
    "updated_at": "2020-03-06T16:58:59Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hi\r\n\r\nI tired to install package racon but is fails in the install phase. Spack comlains about a non-existing file/folder on a path that has been generated wrong - most likely by Spack itself.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install -v racon%gcc@7.3.0 target=x86_64 ^python@3.6.5\r\n```\r\n\r\n### Error Message\r\n\r\n```console\r\n==> Executing phase: 'install'\r\n==> [2019-11-26-16:36:13.988573] Installing spack-build/bin to /cfs/software/spack/linux-centos7-x86_64/gcc-7.3.0/racon-1.3.2-bnlynnveyuymp2pcnlfrcdnqcgrbwzuu/bin\r\n==> Error: IOError: [Errno 2] No such file or directory: '/tmp/swadm/spack-stage/spack-stage-racon-1.3.2-bnlynnveyuymp2pcnlfrcdnqcgrbwzuu/spack-src/spack-build/bin/'\r\n\r\n/data/swadm/spack/v0.13/spack/var/spack/repos/builtin/packages/racon/package.py:33, in install:\r\n         32    def install(self, spec, prefix):\r\n  >>     33        install_tree('spack-build/bin', prefix.bin)\r\n         34        install_tree('spack-build/lib', prefix.lib)\r\n\r\nSee build log for details:\r\n  /tmp/swadm/spack-stage/spack-stage-racon-1.3.2-bnlynnveyuymp2pcnlfrcdnqcgrbwzuu/spack-build-out.txt\r\nTraceback (most recent call last):\r\n  File \"/data/swadm/spack/v0.13/spack/lib/spack/spack/build_environment.py\", line 806, in child_process\r\n    return_value = function()\r\n  File \"/data/swadm/spack/v0.13/spack/lib/spack/spack/package.py\", line 1713, in build_process\r\n    phase(self.spec, self.prefix)\r\n  File \"/data/swadm/spack/v0.13/spack/lib/spack/spack/package.py\", line 111, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/data/swadm/spack/v0.13/spack/var/spack/repos/builtin/packages/racon/package.py\", line 34, in install\r\n    install_tree('spack-build/lib', prefix.lib)\r\n  File \"/data/swadm/spack/v0.13/spack/lib/spack/llnl/util/filesystem.py\", line 479, in install_tree\r\n    copy_tree(src, dest, symlinks=symlinks, ignore=ignore, _permissions=True)\r\n  File \"/data/swadm/spack/v0.13/spack/lib/spack/llnl/util/filesystem.py\", line 460, in copy_tree\r\n    shutil.copyfile(s, d)\r\n  File \"/usr/lib64/python2.7/shutil.py\", line 82, in copyfile\r\n    with open(src, 'rb') as fsrc:\r\nIOError: [Errno 2] No such file or directory: '/tmp/swadm/spack-stage/spack-stage-racon-1.3.2-bnlynnveyuymp2pcnlfrcdnqcgrbwzuu/spack-src/spack-build/bin/'\r\n\r\n```\r\nAs you an see, in the error line there is a constructed path including this part:\r\n\r\n/spack-src/spack-build/\r\n\r\nThis does not exist, the two folders \"spack-src\" and \"spack-build\" coexist in the same directory, they are not nested.\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n1. Platform:\r\nLinux build02.hpc.zhaw.ch 3.10.0-1062.4.1.el7.x86_64 #1 SMP Fri Oct 18 17:15:30 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n2. Spack version: 0.13.1\r\n\r\n3. any relevant configuration detail --> see attachments\r\n\r\n[spack-cc-racon-bnlynnv.out.log](https://github.com/spack/spack/files/3892675/spack-cc-racon-bnlynnv.out.log)\r\n\r\n[spack-cc-racon-bnlynnv.in.log](https://github.com/spack/spack/files/3892676/spack-cc-racon-bnlynnv.in.log)\r\n\r\n[config-files.tar.gz](https://github.com/spack/spack/files/3892686/config-files.tar.gz)\r\n\r\n[spack-build-out.txt.gz](https://github.com/spack/spack/files/3892693/spack-build-out.txt.gz)\r\n\r\n\r\n\r\n",
    "performed_via_github_app": null
}