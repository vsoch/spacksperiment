{
    "url": "https://api.github.com/repos/spack/spack/issues/8905",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8905/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8905/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8905/events",
    "html_url": "https://github.com/spack/spack/issues/8905",
    "id": 348114755,
    "node_id": "MDU6SXNzdWUzNDgxMTQ3NTU=",
    "number": 8905,
    "title": "fails bootstrapping new compiler",
    "user": {
        "login": "23skdu",
        "id": 22246993,
        "node_id": "MDQ6VXNlcjIyMjQ2OTkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/22246993?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/23skdu",
        "html_url": "https://github.com/23skdu",
        "followers_url": "https://api.github.com/users/23skdu/followers",
        "following_url": "https://api.github.com/users/23skdu/following{/other_user}",
        "gists_url": "https://api.github.com/users/23skdu/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/23skdu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/23skdu/subscriptions",
        "organizations_url": "https://api.github.com/users/23skdu/orgs",
        "repos_url": "https://api.github.com/users/23skdu/repos",
        "events_url": "https://api.github.com/users/23skdu/events{/privacy}",
        "received_events_url": "https://api.github.com/users/23skdu/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446615268,
            "node_id": "MDU6TGFiZWw0NDY2MTUyNjg=",
            "url": "https://api.github.com/repos/spack/spack/labels/compilers",
            "name": "compilers",
            "color": "f9d0c4",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-08-06T23:27:37Z",
    "updated_at": "2018-08-07T06:43:42Z",
    "closed_at": "2018-08-07T00:08:39Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Summary:  Builiding a new compiler bombs out, saying g++ is not installed, yet it is.\r\n[root@centos75 SRC]# rpm -qa | grep -i c++\r\ngcc-c++-4.8.5-28.el7_5.1.x86_64\r\nlibstdc++-devel-4.8.5-28.el7_5.1.x86_64\r\ngcc-c++-x86_64-linux-gnu-4.8.5-16.el7.1.x86_64\r\nlibstdc++-4.8.5-28.el7_5.1.x86_64\r\n\r\n### Expected Result: gcc 4.9.3 gets built\r\n\r\n### Actual Result\r\n[root@centos75 SRC]# spack install gcc@4.9.3\r\n==> libsigsegv is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/libsigsegv-2.11-qpmaxx6z62df4s4hwyehdwptv6kmrfhf\r\n==> m4 is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/m4-1.4.18-o24gxan6j2b5dyfnkwv3ilyh7hvr7p6o\r\n==> pkgconf is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/pkgconf-1.4.2-lq2llfax3ikzxy7fel7kvlrxogtolr7w\r\n==> ncurses is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/ncurses-6.1-rqw3cmcwvd76h4rjgtaxpvrqg47prwkg\r\n==> readline is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/readline-7.0-b4z2xcjalfc4z7tgktx7txhe2my3wlfd\r\n==> gdbm is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gdbm-1.14.1-xdrlyqkflqshxl2so56p5qhwjf77dxbt\r\n==> perl is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.26.2-hnx5wqjxdsqb2l3g3zjebpdul4wuurov\r\n==> autoconf is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/autoconf-2.69-uxvf55ypu6mag4oaendwmdxjrf7e5s2f\r\n==> automake is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/automake-1.16.1-vig6f2apycmxxxbx355yn6ypdxoriwqj\r\n==> libtool is already installed in /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/libtool-2.4.6-bcbiddkmbu4gy7wx6ftntmxqe3c5br3z\r\n==> Installing gmp\r\n==> Using cached archive: /SRC/spack/var/spack/cache/gmp/gmp-6.1.2.tar.bz2\r\n==> Staging archive: /SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm/gmp-6.1.2.tar.bz2\r\n==> Created stage in /SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm\r\n==> No patches needed for gmp\r\n==> Building gmp [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm/gmp-6.1.2/configure' '--prefix=/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gmp-6.1.2-6b                                       sovvkqwx6zscwtbvjj6egrgizbyycm' '--enable-cxx'\r\n\r\n1 error found in build log:\r\n     74    checking for build system compiler math library... -lm\r\n     75    checking for g++... g++\r\n     76    checking whether we are using the GNU C++ compiler... no\r\n     77    checking whether g++ accepts -g... no\r\n     78    checking C++ compiler g++  -O2 -pedantic -fomit-frame-pointer -m64 -mtune=k8 -march=k8... no\r\n     79    checking C++ compiler g++  ... no\r\n  >> 80    configure: error: C++ compiler not available, see config.log for details\r\n\r\nSee build log for details:\r\n  /SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm/gmp-6.1.2/spack-build.out\r\n\r\n[root@centos75 SRC]# cat   /SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm/gmp-6.1.2/spack-build.out\r\n==> Executing phase: 'autoreconf'\r\n==> Configure script not found: trying to generate it\r\n==> Warning: *********************************************************\r\n==> Warning: * If the default procedure fails, consider implementing *\r\n==> Warning: *        a custom AUTORECONF phase in the package       *\r\n==> Warning: *********************************************************\r\n==> '/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/libtool-2.4.6-bcbiddkmbu4gy7wx6ftntmxqe3c5br3z/bin/libtoolize'\r\nlibtoolize: Consider adding 'AC_CONFIG_MACRO_DIRS([m4])' to configure.ac,\r\nlibtoolize: and rerunning libtoolize and aclocal.\r\nlibtoolize: Consider adding '-I m4' to ACLOCAL_AMFLAGS in Makefile.am.\r\nlibtoolize: 'AC_PROG_RANLIB' is rendered obsolete by 'LT_INIT'\r\n==> '/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/automake-1.16.1-vig6f2apycmxxxbx355yn6ypdxoriwqj/bin/aclocal'\r\n==> '/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/autoconf-2.69-uxvf55ypu6mag4oaendwmdxjrf7e5s2f/bin/autoreconf' '-ivf' '-I' '/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/pkgconf-1.4.2-lq2llfax3ikzxy7fel7kvlrxogtolr7w/share/aclocal'\r\nautoreconf: Entering directory `.'\r\nautoreconf: configure.ac: not using Gettext\r\nautoreconf: running: aclocal -I /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/pkgconf-1.4.2-lq2llfax3ikzxy7fel7kvlrxogtolr7w/share/aclocal --force\r\nautoreconf: configure.ac: tracing\r\nautoreconf: running: libtoolize --copy --force\r\nlibtoolize: putting auxiliary files in '.'.\r\nlibtoolize: copying file './ltmain.sh'\r\nlibtoolize: Consider adding 'AC_CONFIG_MACRO_DIRS([m4])' to configure.ac,\r\nlibtoolize: and rerunning libtoolize and aclocal.\r\nlibtoolize: Consider adding '-I m4' to ACLOCAL_AMFLAGS in Makefile.am.\r\nlibtoolize: 'AC_PROG_RANLIB' is rendered obsolete by 'LT_INIT'\r\nautoreconf: running: /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/autoconf-2.69-uxvf55ypu6mag4oaendwmdxjrf7e5s2f/bin/autoconf --include=/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/pkgconf-1.4.2-lq2llfax3ikzxy7fel7kvlrxogtolr7w/share/aclocal --force\r\nautoreconf: running: /SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/autoconf-2.69-uxvf55ypu6mag4oaendwmdxjrf7e5s2f/bin/autoheader --include=/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/pkgconf-1.4.2-lq2llfax3ikzxy7fel7kvlrxogtolr7w/share/aclocal --force\r\nautoreconf: running: automake --add-missing --copy --force-missing\r\nconfigure.ac:2385: installing './compile'\r\nconfigure.ac:80: installing './missing'\r\nMakefile.am:295: warning: source file 'cxx/dummy.cc' is in a subdirectory,\r\nMakefile.am:295: but option 'subdir-objects' is disabled\r\nautomake: warning: possible forward-incompatibility.\r\nautomake: At least a source file is in a subdirectory, but the 'subdir-objects'\r\nautomake: automake option hasn't been enabled.  For now, the corresponding output\r\nautomake: object file(s) will be placed in the top-level directory.  However,\r\nautomake: this behaviour will change in future Automake versions: they will\r\nautomake: unconditionally cause object files to be placed in the same subdirectory\r\nautomake: of the corresponding sources.\r\nautomake: You are advised to start using 'subdir-objects' option throughout your\r\nautomake: project, to avoid future incompatibilities.\r\nautoreconf: Leaving directory `.'\r\n==> Executing phase: 'configure'\r\n==> '/SRC/spack/var/spack/stage/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm/gmp-6.1.2/configure' '--prefix=/SRC/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/gmp-6.1.2-6bsovvkqwx6zscwtbvjj6egrgizbyycm' '--enable-cxx'\r\nchecking build system type... x86_64-pc-linux-gnu\r\nchecking host system type... x86_64-pc-linux-gnu\r\nchecking for a BSD-compatible install... /usr/bin/install -c\r\nchecking whether build environment is sane... yes\r\nchecking for a thread-safe mkdir -p... /usr/bin/mkdir -p\r\nchecking for gawk... gawk\r\nchecking whether make sets $(MAKE)... yes\r\nchecking whether make supports nested variables... yes\r\nchecking whether to enable maintainer-specific portions of Makefiles... no\r\nchecking ABI=64\r\nchecking compiler /SRC/spack/lib/spack/env/gcc/gcc -O2 -pedantic -fomit-frame-pointer -m64 ... yes\r\nchecking compiler /SRC/spack/lib/spack/env/gcc/gcc -O2 -pedantic -fomit-frame-pointer -m64  -mtune=k8... yes\r\nchecking compiler /SRC/spack/lib/spack/env/gcc/gcc -O2 -pedantic -fomit-frame-pointer -m64 -mtune=k8  -march=k8... yes\r\nchecking for gcc... /SRC/spack/lib/spack/env/gcc/gcc\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables...\r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether /SRC/spack/lib/spack/env/gcc/gcc accepts -g... yes\r\nchecking for /SRC/spack/lib/spack/env/gcc/gcc option to accept ISO C89... none needed\r\nchecking whether /SRC/spack/lib/spack/env/gcc/gcc understands -c and -o together... yes\r\nchecking for /SRC/spack/lib/spack/env/gcc/gcc option to accept ISO C99... -std=gnu99\r\nchecking for /SRC/spack/lib/spack/env/gcc/gcc -std=gnu99 option to accept ISO Standard C... (cached) -std=gnu99\r\nchecking how to run the C preprocessor... /SRC/spack/lib/spack/env/gcc/gcc -std=gnu99 -E\r\nchecking build system compiler /SRC/spack/lib/spack/env/gcc/gcc -std=gnu99... yes\r\nchecking for build system preprocessor... /SRC/spack/lib/spack/env/gcc/gcc -std=gnu99 -E\r\nchecking for build system executable suffix...\r\nchecking whether build system compiler is ANSI... yes\r\nchecking for build system compiler math library... -lm\r\nchecking for g++... g++\r\nchecking whether we are using the GNU C++ compiler... no\r\nchecking whether g++ accepts -g... no\r\nchecking C++ compiler g++  -O2 -pedantic -fomit-frame-pointer -m64 -mtune=k8 -march=k8... no\r\nchecking C++ compiler g++  ... no\r\nconfigure: error: C++ compiler not available, see config.log for details\r\n\r\n",
    "performed_via_github_app": null
}