{
    "url": "https://api.github.com/repos/spack/spack/issues/14094",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14094/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14094/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14094/events",
    "html_url": "https://github.com/spack/spack/issues/14094",
    "id": 535890739,
    "node_id": "MDU6SXNzdWU1MzU4OTA3Mzk=",
    "number": 14094,
    "title": "buildcache creation does not properly clean up temporary area",
    "user": {
        "login": "iarspider",
        "id": 636602,
        "node_id": "MDQ6VXNlcjYzNjYwMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/636602?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/iarspider",
        "html_url": "https://github.com/iarspider",
        "followers_url": "https://api.github.com/users/iarspider/followers",
        "following_url": "https://api.github.com/users/iarspider/following{/other_user}",
        "gists_url": "https://api.github.com/users/iarspider/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/iarspider/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iarspider/subscriptions",
        "organizations_url": "https://api.github.com/users/iarspider/orgs",
        "repos_url": "https://api.github.com/users/iarspider/repos",
        "events_url": "https://api.github.com/users/iarspider/events{/privacy}",
        "received_events_url": "https://api.github.com/users/iarspider/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 759411369,
            "node_id": "MDU6TGFiZWw3NTk0MTEzNjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/buildcache",
            "name": "buildcache",
            "color": "bf354c",
            "default": false,
            "description": null
        },
        {
            "id": 512483297,
            "node_id": "MDU6TGFiZWw1MTI0ODMyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-low",
            "name": "impact-low",
            "color": "fef2c0",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2019-12-10T17:55:15Z",
    "updated_at": "2020-02-15T14:45:48Z",
    "closed_at": "2020-02-15T14:45:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "When creating buildcache, spack creates a lot of temporary folders named `tmpXXXXXXXX`, but doesn't delete some of them, filling up temporary area (`/tmp` - does the `config.yaml` option change this?).\r\n\r\nI have started with a clean `/tmp`, and ended up with this:\r\n<details><summary>ls /tmp/tmp*</summary>\r\n<p>\r\n```console\r\n$ ls -d /tmp/tmp*\r\n/tmp/tmp00bvxpfs  /tmp/tmp26w_7i2m  /tmp/tmp5ayc6lwf  /tmp/tmp8vrf7zc6  /tmp/tmpaylv_x_1  /tmp/tmpcjl8nr_z  /tmp/tmpdwbc4jq1  /tmp/tmpgfxsn5jt  /tmp/tmpijbq_a9l  /tmp/tmpkl9znsho  /tmp/tmpmk1e0xnv  /tmp/tmpobms40vk  /tmp/tmpq4bdydra  /tmp/tmps07m_441  /tmp/tmptb7a2u9l  /tmp/tmpvc07eal7  /tmp/tmpyi4rjlmr\r\n/tmp/tmp00d8puti  /tmp/tmp28pvqkti  /tmp/tmp5br25jr1  /tmp/tmp8wsx0s67  /tmp/tmpb0suzsbh  /tmp/tmpckdwym20  /tmp/tmpdxqy7tvl  /tmp/tmpgjzcfgc_  /tmp/tmp_iokjwj0  /tmp/tmpklbcl5ig  /tmp/tmpmkt1e8yu  /tmp/tmpofx_pxnw  /tmp/tmpqanjcd8a  /tmp/tmps59ew9e4  /tmp/tmptc1ahfl7  /tmp/tmpvfe9wzhz  /tmp/tmpys9yyn59\r\n/tmp/tmp098btdxy  /tmp/tmp28xkcsqg  /tmp/tmp5erbaiyb  /tmp/tmp92vgpbrw  /tmp/tmpb3xjysm8  /tmp/tmpcn31v_fu  /tmp/tmpe0afuvqg  /tmp/tmpgkz5p0hd  /tmp/tmpirv0mj3m  /tmp/tmpkobi61fa  /tmp/tmpmlw8ya99  /tmp/tmpoi671mdq  /tmp/tmpqcu3lad4  /tmp/tmps6_wir9x  /tmp/tmptiulfbh5  /tmp/tmpvgxclvao  /tmp/tmpyujyjr7r\r\n/tmp/tmp0cyj0upj  /tmp/tmp2abwxrkk  /tmp/tmp5ioi_xu5  /tmp/tmp92x15823  /tmp/tmpbau69u39  /tmp/tmpcqyu94qn  /tmp/tmpe1uvuiim  /tmp/tmpgnykgm5p  /tmp/tmpis1u054b  /tmp/tmpkoy5p70i  /tmp/tmpmmm_ybw8  /tmp/tmpokdbxr7q  /tmp/tmpqiyp_1hi  /tmp/tmps70zhq90  /tmp/tmptn28o6c_  /tmp/tmpviog732k  /tmp/tmpyyos7168\r\n/tmp/tmp0evfbnnb  /tmp/tmp2eujzurj  /tmp/tmp5j7c1uuh  /tmp/tmp9422avoa  /tmp/tmpbf4gd9u4  /tmp/tmpcrks5h52  /tmp/tmp_e4zeejk  /tmp/tmpgoju52so  /tmp/tmpis7r63uz  /tmp/tmpkp9_h6_o  /tmp/tmpn09ehmds  /tmp/tmpokn2lnqc  /tmp/tmpqk0us9p6  /tmp/tmpsa7vm8d6  /tmp/tmptu002yc9  /tmp/tmpvqzsnpl1  /tmp/tmpzdamrw10\r\n/tmp/tmp0l_r_to0  /tmp/tmp2p5ps_d5  /tmp/tmp_5k8utqj  /tmp/tmp9_5emvjr  /tmp/tmpbhf4cpwq  /tmp/tmpcv5gs9da  /tmp/tmpe6qbcccs  /tmp/tmpgpacgsem  /tmp/tmpj1ckpwy0  /tmp/tmpl0cbgu0z  /tmp/tmpn2aot2qh  /tmp/tmpolg_5evi  /tmp/tmpqlac2b1x  /tmp/tmpsagzbzwk  /tmp/tmptx8s47ti  /tmp/tmpvsfpxvqx  /tmp/tmpzgmx_63_\r\n/tmp/tmp0m8pv77r  /tmp/tmp2pb1uo0l  /tmp/tmp5s6x5bk6  /tmp/tmp9_dq5f9i  /tmp/tmpbi857jpt  /tmp/tmpcx6fanvn  /tmp/tmpegnvr0hs  /tmp/tmpg_tnj5ww  /tmp/tmpj2tqfuir  /tmp/tmpl7fqc3bj  /tmp/tmpn8xi4qv8  /tmp/tmpolj52_jv  /tmp/tmpqp472a0y  /tmp/tmpsda3edo1  /tmp/tmpu0ost1ou  /tmp/tmpvu7uanns  /tmp/tmpzk6xti9p\r\n/tmp/tmp0oo11a4j  /tmp/tmp2yu6fvs8  /tmp/tmp5vhnbdck  /tmp/tmp9drx21a2  /tmp/tmp_bijhfk7  /tmp/tmpd0wxbuau  /tmp/tmpen2ssmkx  /tmp/tmph2526027  /tmp/tmpj72k6okf  /tmp/tmpla8hh6u2  /tmp/tmpnau5ipkw  /tmp/tmpomi240fz  /tmp/tmpqs9q61l2  /tmp/tmpsdv58f33  /tmp/tmp_u0ztlsp  /tmp/tmpvz0xgxpp  /tmp/tmpzknwfela\r\n/tmp/tmp0p1qd2f_  /tmp/tmp318elw8e  /tmp/tmp5wcg1wxh  /tmp/tmp9ghe72a1  /tmp/tmpbk2lparm  /tmp/tmpd2q7fdba  /tmp/tmpenl5byjq  /tmp/tmph3_op64n  /tmp/tmpj8kp9_xj  /tmp/tmplinvzfmu  /tmp/tmpnccxuilh  /tmp/tmpoq8lgir0  /tmp/tmpq_u9y3gy  /tmp/tmpsepk3h0a  /tmp/tmpu25lsz4n  /tmp/tmpw11vjqje  /tmp/tmpzkyn5akg\r\n/tmp/tmp0p8izvqd  /tmp/tmp37dixadk  /tmp/tmp66zswxss  /tmp/tmp9lhu9zki  /tmp/tmpbkv9gmru  /tmp/tmpd4i_orz7  /tmp/tmpes971aho  /tmp/tmph4kq0u09  /tmp/tmpjg5pdo0a  /tmp/tmpljvmce_z  /tmp/tmpndf9z4ua  /tmp/tmpow930tm7  /tmp/tmpqyn0qj3i  /tmp/tmpser3kmo6  /tmp/tmpu9ael_6t  /tmp/tmpwfhuhzrw  /tmp/tmpzmi1130e\r\n/tmp/tmp0pvr43as  /tmp/tmp3jtou4pt  /tmp/tmp6bfl76dn  /tmp/tmp9_lxb5jy  /tmp/tmpbnffn0k8  /tmp/tmpd7go9ecg  /tmp/tmpewfxehiv  /tmp/tmph7m2sc0b  /tmp/tmpj_jia870  /tmp/tmplnhpr24k  /tmp/tmpnefr_c1z  /tmp/tmpozcn_8b6  /tmp/tmpr3x3nt_4  /tmp/tmpshq84bly  /tmp/tmpuas8hfyn  /tmp/tmpwj8s523h  /tmp/tmpzs9t904l\r\n/tmp/tmp0s8a0td8  /tmp/tmp3qvmkd3a  /tmp/tmp6m327kid  /tmp/tmp9mpd7roh  /tmp/tmpbo9oqb6v  /tmp/tmpd8fxn5du  /tmp/tmpf03h5_qk  /tmp/tmpha0_ynwy  /tmp/tmpjnxjj844  /tmp/tmpls86dkhq  /tmp/tmpnfi_j2ke  /tmp/tmpp029fm81  /tmp/tmpr4ja4qmy  /tmp/tmpsn_euxqh  /tmp/tmpuf1_atm1  /tmp/tmpwpp1nruz  /tmp/tmpzt6clm37\r\n/tmp/tmp0v1xjh77  /tmp/tmp3v2a0l9n  /tmp/tmp6nqek8nh  /tmp/tmp9ot4ir91  /tmp/tmpbsnjbrop  /tmp/tmpderjpurc  /tmp/tmpf0b_f6hz  /tmp/tmphd9pqihp  /tmp/tmpjom0g3cc  /tmp/tmpltw2me_1  /tmp/tmpnkumdyp3  /tmp/tmpp61tsm6z  /tmp/tmp_r8x8twf  /tmp/tmpsq5bpz_1  /tmp/tmpuike_sd6  /tmp/tmpx02wdr4v  /tmp/tmpztdqzz82\r\n/tmp/tmp14nmcz0n  /tmp/tmp4bx0o_q9  /tmp/tmp7197adwn  /tmp/tmp9rrnmsw3  /tmp/tmpbwiiepxe  /tmp/tmpdfbw9t1w  /tmp/tmpf3remkaw  /tmp/tmphnn82rjy  /tmp/tmpjqteeb4m  /tmp/tmplx594sga  /tmp/tmpnkyi43jq  /tmp/tmpp6mnh1xj  /tmp/tmpr9kbwhq3  /tmp/tmp_ssrhic_  /tmp/tmpumzdbi3d  /tmp/tmpx3pr52p1  /tmp/tmpzweo32x9\r\n/tmp/tmp15g3w6ko  /tmp/tmp4n4xcuwg  /tmp/tmp72i9h2iw  /tmp/tmp9sy8nw1a  /tmp/tmpbwrj0i5k  /tmp/tmpdk4n0396  /tmp/tmpfirurozo  /tmp/tmphogcg6h8  /tmp/tmpjreetpei  /tmp/tmplx890k06  /tmp/tmpnq50yriu  /tmp/tmpp7oxwau_  /tmp/tmprhwgc0xl  /tmp/tmpstc15160  /tmp/tmpuq8d23h_  /tmp/tmpxb0d112u  /tmp/tmpzx3_wi0h\r\n/tmp/tmp1bgd4xp1  /tmp/tmp4qfow5e8  /tmp/tmp77mrqcnq  /tmp/tmp9trt0q1j  /tmp/tmpbzop3egc  /tmp/tmpdluja8rr  /tmp/tmpfja3aw5r  /tmp/tmphyeauq8v  /tmp/tmpjunn08g_  /tmp/tmpm0cn3c2u  /tmp/tmpnqxj20vj  /tmp/tmppba2p8h9  /tmp/tmprjs2k930  /tmp/tmpsuf7qeif  /tmp/tmpuq8rsemu  /tmp/tmpxbx7nsjb  /tmp/tmpzxfrbi8j\r\n/tmp/tmp1fomprl_  /tmp/tmp4sfvqcnv  /tmp/tmp7byya2ta  /tmp/tmp9vgvn2mb  /tmp/tmpc5z0duvv  /tmp/tmpdmd72gee  /tmp/tmpfnl2ely5  /tmp/tmpi54nw89q  /tmp/tmpjv17ryxd  /tmp/tmpm1tp6ha6  /tmp/tmpns5sr6lo  /tmp/tmppl2w750w  /tmp/tmprs9vre7c  /tmp/tmpsx5r6v_f  /tmp/tmpurbpeovr  /tmp/tmpxmeekgcj\r\n/tmp/tmp1ibkuxyt  /tmp/tmp4snbpti2  /tmp/tmp7ktnhf2h  /tmp/tmp9vtq5hxc  /tmp/tmpc9ubw5lg  /tmp/tmpdp_d_lp1  /tmp/tmpfojc0fiy  /tmp/tmpi5ji4aeb  /tmp/tmpjxo22o9o  /tmp/tmp__m208vt  /tmp/tmpnuti_d9n  /tmp/tmppn3r6yrw  /tmp/tmp_rsu0ycj  /tmp/tmpt1gc_n1v  /tmp/tmpuyr0xyd7  /tmp/tmpxyralrvd\r\n/tmp/tmp1il3usj5  /tmp/tmp4vvvtnhx  /tmp/tmp7u2vii2d  /tmp/tmpae3487uv  /tmp/tmpcb5z7bf7  /tmp/tmpdphqs2dl  /tmp/tmpg1193p_a  /tmp/tmpi7fuud34  /tmp/tmpjyv5li_q  /tmp/tmpm66sgp36  /tmp/tmpnz0fp96g  /tmp/tmppo6ep3h5  /tmp/tmprt8ofe93  /tmp/tmpt1sijcbz  /tmp/tmpuzsnbzbp  /tmp/tmpxz5ia088\r\n/tmp/tmp1o00gcpi  /tmp/tmp56_qttef  /tmp/tmp80k7gk6q  /tmp/tmpaghneqpt  /tmp/tmpcech4dm1  /tmp/tmpdq03ju2b  /tmp/tmpg34lnppt  /tmp/tmpi8qe2_rp  /tmp/tmpkc441p2e  /tmp/tmpm8c8i4hi  /tmp/tmpnz1bd07r  /tmp/tmppoaycbx5  /tmp/tmprte_zloa  /tmp/tmpt3ttctrm  /tmp/tmpv374viyy  /tmp/tmpy07vj08m\r\n/tmp/tmp1uvha5fw  /tmp/tmp56torny1  /tmp/tmp84egmk23  /tmp/tmpal4flgqp  /tmp/tmpcfw9nbm0  /tmp/tmpdqam6keu  /tmp/tmpg3yo8ncg  /tmp/tmpih03bmxe  /tmp/tmpkdx3w1mm  /tmp/tmpme1ykko6  /tmp/tmpo2ojxsog  /tmp/tmpppb6dqkw  /tmp/tmprww55x13  /tmp/tmpt8zz_lde  /tmp/tmpv6sxfisb  /tmp/tmpy59sckox\r\n/tmp/tmp269sg3nb  /tmp/tmp58he6lts  /tmp/tmp8t4ufg7s  /tmp/tmpap7gotof  /tmp/tmpcirlch96  /tmp/tmpdrslyngt  /tmp/tmpgerweuhk  /tmp/tmpiixj8udl  /tmp/tmpkjaeqjnb  /tmp/tmpmgjvl4kw  /tmp/tmpo61xwfac  /tmp/tmpp_w0_cn0  /tmp/tmpryk6ngy8  /tmp/tmptaa2bk7c  /tmp/tmp_vastyll  /tmp/tmpyfni1e5d\r\n```\r\n</p>\r\n</details>\r\n\r\nThese are definitely from spack, e.g.:\r\n```console\r\n$ tree /tmp/tmpw11vjqje\r\n/tmp/tmpw11vjqje\r\n\u2514\u2500\u2500 build_cache\r\n    \u2514\u2500\u2500 linux-centos7-skylake\r\n        \u2514\u2500\u2500 gcc-8.3.0\r\n            \u2514\u2500\u2500 lcg-release-96b\r\n                \u2514\u2500\u2500 linux-centos7-skylake-gcc-8.3.0-lcg-release-96b-txeho2ifmfdwebcxbzzfkxfvy2mtrip4.tar.gz\r\n\r\n4 directories, 1 file\r\n```\r\n\r\n\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack buildcache create -a root\r\n$ tree /tmp/tmp*\r\n```\r\n\r\n### Error Message\r\n\r\nNo errors.\r\n\r\n### Information on your system\r\n\r\n\r\nspack `develop` commit c627e5a6fcefb44330b4980835f0cf3a34ff2944\r\n",
    "performed_via_github_app": null
}