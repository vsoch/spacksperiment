{
    "url": "https://api.github.com/repos/spack/spack/issues/7057",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7057/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7057/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7057/events",
    "html_url": "https://github.com/spack/spack/issues/7057",
    "id": 291343511,
    "node_id": "MDU6SXNzdWUyOTEzNDM1MTE=",
    "number": 7057,
    "title": "`time spack spec visit` takes a really long time (over 6 hours)",
    "user": {
        "login": "goxberry",
        "id": 321479,
        "node_id": "MDQ6VXNlcjMyMTQ3OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/321479?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/goxberry",
        "html_url": "https://github.com/goxberry",
        "followers_url": "https://api.github.com/users/goxberry/followers",
        "following_url": "https://api.github.com/users/goxberry/following{/other_user}",
        "gists_url": "https://api.github.com/users/goxberry/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/goxberry/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/goxberry/subscriptions",
        "organizations_url": "https://api.github.com/users/goxberry/orgs",
        "repos_url": "https://api.github.com/users/goxberry/repos",
        "events_url": "https://api.github.com/users/goxberry/events{/privacy}",
        "received_events_url": "https://api.github.com/users/goxberry/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2018-01-24T20:10:30Z",
    "updated_at": "2019-12-13T11:11:42Z",
    "closed_at": "2019-12-13T11:11:42Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Summary\r\n\r\nRunning `time spack spec visit` takes over 6 hours and counting:\r\n\r\n```console\r\nUvalde:~ oxberry1$ time spack spec visit\r\nInput spec\r\n--------------------------------\r\nvisit\r\n\r\nConcretized\r\n--------------------------------\r\n^C\r\n==> Error: Keyboard interrupt.\r\n\r\nreal    416m9.002s\r\nuser    314m12.662s\r\nsys     15m5.101s\r\n```\r\n\r\n### Expected Result\r\n\r\n`time spack spec visit` returns in, say, 5 minutes or less.\r\n\r\n### Actual Result\r\n\r\nWhat happened instead\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ time spack spec visit\r\n$ #wait 6 hours\r\n```\r\n\r\n### Information on your system\r\n\r\nPlatform: macOS/OS X Sierra, version 10.12.6, spack commit `b5daa51c06095fde57ffe05622bb1079355d3b73`\r\n\r\nlmod modules loaded:\r\n```console\r\nCurrently Loaded Modules:\r\n  1) ncurses/6.0   2) zlib/1.2.11   3) emacs/25.3   4) openssl/1.0.2n   5) libevent/2.0.21   6) tmux/2.6   7) exuberant-ctags/5.8   8) global/6.5\r\n```\r\n\r\noutput of `ml --version`:\r\n```console\r\nModules based on Lua: Version 7.7.13  2017-10-31 10:46 -05:00\r\n    by Robert McLay mclay@tacc.utexas.edu\r\n```\r\n\r\npackages.yaml:\r\n```console\r\npackages:\r\n  perl:\r\n    variants: +cpanm+shared\r\n  ruby:\r\n    variants: +openssl+readline\r\n  pcre:\r\n    variants: +jit+utf\r\n  netcdf:\r\n    variants: +mpi\r\n  hdf5:\r\n    variants: +mpi\r\n  qt:\r\n    variants: +opengl\r\n  all:\r\n    compiler: [clang@8.1.0-apple, clang, gcc]\r\n    providers:\r\n      awk: [gawk]\r\n      blas: [openblas, atlas, intel-mkl, netlib-lapack]\r\n      daal: [intel-daal]\r\n      elf: [elfutils]\r\n      golang: [gcc]\r\n      ipp: [intel-ipp]\r\n      java: [jdk]\r\n      lapack: [openblas, atlas, intel-mkl, netlib-lapack]\r\n      mkl: [intel-mkl]\r\n      mpe: [mpe2]\r\n      mpi: [openmpi, mpich, intel-mpi]\r\n      opencl: [pocl]\r\n      openfoam: [openfoam-com, openfoam-org, foam-extend]\r\n      pil: [py-pillow]\r\n      pkgconfig: [pkgconf, pkg-config]\r\n      scalapack: [netlib-scalapack, intel-mkl]\r\n      szip: [libszip, libaec]\r\n      tbb: [intel-tbb]\r\n      jpeg: [libjpeg-turbo, libjpeg]\r\n      cmake: [cmake%clang]\r\n    paths: {}\r\n    modules: {}\r\n    buildable: true\r\n    version: []\r\n```\r\n\r\ncompilers.yaml\r\n```console\r\ncompilers:\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sierra\r\n    paths:\r\n      cc: /usr/bin/clang\r\n      cxx: /usr/bin/clang++\r\n      f77: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n      fc: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n    spec: clang@8.1.0-apple\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sierra\r\n    paths:\r\n      cc: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gcc\r\n      cxx: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/g++\r\n      f77: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n      fc: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n    spec: gcc@7.2.0\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sierra\r\n    paths:\r\n      cc: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/llvm-5.0.1-nadhxw7izy3thxuzopkinnqrecg76h2n/bin/clang\r\n      cxx: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/llvm-5.0.1-nadhxw7izy3thxuzopkinnqrecg76h2n/bin/clang++\r\n      f77: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n      fc: /Users/oxberry1/spack/opt/spack/darwin-sierra-x86_64/clang-8.1.0-apple/gcc-7.2.0-swfonpqzedbxtb6gfy7t4yphnw4vrkr2/bin/gfortran\r\n    spec: clang@5.0.1\r\n    target: x86_6\r\n```\r\n\r\nmodules.yaml\r\n```console\r\nmodules:\r\n  enable::\r\n    - lmod\r\n  lmod:\r\n    core_compilers:\r\n      - 'clang@8.1.0-apple'\r\n    hierarchy:\r\n      - mpi\r\n      - lapack\r\n    hash_length: 0\r\n    ^python:\r\n      autoload: 'direct'\r\n    mumps:\r\n      suffixes:\r\n        '~mpi': no-mpi\r\n    all:\r\n      suffixes:\r\n        '+debug': debug\r\n```",
    "performed_via_github_app": null
}