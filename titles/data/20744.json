{
    "url": "https://api.github.com/repos/spack/spack/issues/20744",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20744/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20744/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20744/events",
    "html_url": "https://github.com/spack/spack/issues/20744",
    "id": 781906710,
    "node_id": "MDU6SXNzdWU3ODE5MDY3MTA=",
    "number": 20744,
    "title": "Installation issue: py-numexpr",
    "user": {
        "login": "jamesETsmith",
        "id": 11277676,
        "node_id": "MDQ6VXNlcjExMjc3Njc2",
        "avatar_url": "https://avatars.githubusercontent.com/u/11277676?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesETsmith",
        "html_url": "https://github.com/jamesETsmith",
        "followers_url": "https://api.github.com/users/jamesETsmith/followers",
        "following_url": "https://api.github.com/users/jamesETsmith/following{/other_user}",
        "gists_url": "https://api.github.com/users/jamesETsmith/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jamesETsmith/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jamesETsmith/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesETsmith/orgs",
        "repos_url": "https://api.github.com/users/jamesETsmith/repos",
        "events_url": "https://api.github.com/users/jamesETsmith/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jamesETsmith/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2021-01-08T07:14:50Z",
    "updated_at": "2021-01-11T22:45:39Z",
    "closed_at": "2021-01-11T22:45:39Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hello! I'm in the process of setting up Spack on my laptop and I've run into a bit of trouble. Originally I was trying to install `py-pandas`, but it kept failing during the `py-numexpr` build. I found that trying to build `py-numexpr` alone reproduces the error.\r\n\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install py-numexpr@2.7.2%apple-clang ^python@3.9.0\r\n...\r\n```\r\n\r\nThe output:\r\n\r\n```\r\n==> Warning: Missing a source id for py-numexpr@2.7.2\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/openblas-0.3.12-5jrtdfwrly3ta6rtmzkocbfxouvil27h\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/libiconv-1.16-sowrrpikn2hi6jpdxhyntu4ahz3fn2rr\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/expat-2.2.10-oleactd5dt4b7acybvnrbtyqnvpghki6\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/pkgconf-1.7.3-5s6dxm3fbtajznnnpcn2ws2p3blye5sh\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/xz-5.2.5-szsbxkgowq2pnbxiaku5n4x4h5wo4j3p\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/zlib-1.2.11-f7owbzfu4zsr6yn7x7hljransoof6ach\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/libffi-3.3-2j7gj7xxx4pdap2p6err6qorm46s3jtd\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/berkeley-db-18.1.40-ygxqdidhypbixxzbe72opxltva5oxbgs\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/tar-1.32-u6hcjnhkgjiq2tb7wufifriwiw5iif3h\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/diffutils-3.7-zzpuja6m5gm4lqkqr2bwovq3c74hqa4v\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/ncurses-6.2-dm65m6q5po4h26risjlupezireqpu7mc\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/libxml2-2.9.10-6zobotti57rdxjur2isarjadmredssh3\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/bzip2-1.0.8-2dus3gqxvmyqppaiznb2o2lg7jzg6jng\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/readline-8.0-oy6qlg2qjw4gniyigms7rss6qhavkodp\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/gettext-0.21-tna5kgtzbi5h7j37nxjdumcpdadjsfbd\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/gdbm-1.18.1-6vvmgxllfpiydrjkly77on7n6sxvy7sp\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/sqlite-3.33.0-5rldkmyremzhreywsyfihexs3oiivnuc\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/perl-5.32.0-blezcszeu2qhoi6vdd4iadqjfv7vkhg5\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/openssl-1.1.1i-gjm45rosxiip6o7gbvnjo4an7knkqh5w\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/python-3.9.0-w7656f5b5zhvc6fbclc32rraf4a2r4j3\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/py-setuptools-50.3.2-7e7nfzqf6oi3w6b2wtl37vzm3hlbhr5n\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/py-cython-0.29.21-m5wjgiriz76j3vbo5zyiw2ktk5qpiao4\r\n[+] /Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/py-numpy-1.19.4-qdhbnwix6j6ny5gcdlwxceq6tlfal43p\r\n==> Installing py-numexpr-2.7.2-ord4xbpkch3sxaotz5kbi3vsj3n5h64k\r\n==> No binary for py-numexpr-2.7.2-ord4xbpkch3sxaotz5kbi3vsj3n5h64k found: installing from source\r\n/Users/jsmith/apps/spack/lib/spack/spack/architecture.py:203: UserWarning: microarchitecture specific optimizations are not supported yet on mixed compiler toolchains [check apple-clang@12.0.0 for further details]\r\n  warnings.warn(msg.format(compiler))\r\n==> Warning: There is no checksum on file to fetch py-numexpr@2.7.2 safely.\r\n==>   Fetch anyway? [y/N] y\r\n==> Fetching https://github.com/pydata/numexpr/archive/v2.7.2.tar.gz\r\n##################################################################################################################################################################################################################################### 100.0%  -=O=-#      #         #            #\r\n==> py-numexpr: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/python-3.9.0-w7656f5b5zhvc6fbclc32rraf4a2r4j3/bin/python3.9' '-s' 'setup.py' '--no-user-cfg' 'build'\r\n\r\n1 error found in build log:\r\n     48    clang++: numexpr/numexpr_object.cpp\r\n     49    clang++: numexpr/interpreter.cpp\r\n     50    clangclang: warning: optimization flag '-funroll-all-loops' is not supported [-Wignored-optimization-argument]\r\n     51    : warning: clang: optimization flag '-funroll-all-loops' is not supported [-Wignored-optimization-argument]warning\r\n     52    : optimization flag '-funroll-all-loops' is not supported [-Wignored-optimization-argument]\r\n     53    /usr/bin/gcc++ -bundle -undefined dynamic_lookup build/temp.macosx-10.15.7-x86_64-3.9/numexpr/interpreter.o build/temp.macosx-10.15.7-x86_64-3.9/numexpr/module.o build/temp.macosx-10.15.7-x86_64-3.9/numexpr/numexpr_object.o\r\n           -L/Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/python-3.9.0-w7656f5b5zhvc6fbclc32rraf4a2r4j3/lib -lm -o build/lib.macosx-10.15.7-x86_64-3.9/numexpr/interpreter.cpython-39-darwin.so\r\n  >> 54    error: Command \"/usr/bin/gcc++ -bundle -undefined dynamic_lookup build/temp.macosx-10.15.7-x86_64-3.9/numexpr/interpreter.o build/temp.macosx-10.15.7-x86_64-3.9/numexpr/module.o build/temp.macosx-10.15.7-x86_64-3.9/numexpr/n\r\n           umexpr_object.o -L/Users/jsmith/apps/spack/opt/spack/darwin-catalina-skylake/apple-clang-12.0.0/python-3.9.0-w7656f5b5zhvc6fbclc32rraf4a2r4j3/lib -lm -o build/lib.macosx-10.15.7-x86_64-3.9/numexpr/interpreter.cpython-39-darw\r\n           in.so\" failed with exit status 127\r\n```\r\n\r\n### Information on your system\r\n\r\n```\r\n\u279c  ~ spack debug report\r\n* **Spack:** 0.16.0-261-e0e6a0199\r\n* **Python:** 3.9.0\r\n* **Platform:** darwin-catalina-skylake\r\n* **Concretizer:** original\r\n```\r\n\r\n### Additional information\r\n* [compilers.yaml](https://github.com/spack/spack/files/5785698/compilers.yaml.txt)\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/5785683/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/5785685/spack-build-env.txt)\r\n\r\n\r\n### Possible Solution?\r\nThis issue pops up because `/usr/bin/gcc++` doesn't exist. I'm not sure where in the build that compiler path is coming from. Any help would be much appreciated!\r\n",
    "performed_via_github_app": null
}