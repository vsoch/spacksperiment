{
    "url": "https://api.github.com/repos/spack/spack/issues/5482",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5482/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5482/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5482/events",
    "html_url": "https://github.com/spack/spack/issues/5482",
    "id": 260687403,
    "node_id": "MDU6SXNzdWUyNjA2ODc0MDM=",
    "number": 5482,
    "title": "Fetching/expanding errors",
    "user": {
        "login": "akthoma",
        "id": 28635376,
        "node_id": "MDQ6VXNlcjI4NjM1Mzc2",
        "avatar_url": "https://avatars.githubusercontent.com/u/28635376?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/akthoma",
        "html_url": "https://github.com/akthoma",
        "followers_url": "https://api.github.com/users/akthoma/followers",
        "following_url": "https://api.github.com/users/akthoma/following{/other_user}",
        "gists_url": "https://api.github.com/users/akthoma/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/akthoma/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/akthoma/subscriptions",
        "organizations_url": "https://api.github.com/users/akthoma/orgs",
        "repos_url": "https://api.github.com/users/akthoma/repos",
        "events_url": "https://api.github.com/users/akthoma/events{/privacy}",
        "received_events_url": "https://api.github.com/users/akthoma/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-09-26T16:24:41Z",
    "updated_at": "2017-09-26T17:40:20Z",
    "closed_at": "2017-09-26T17:33:27Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I'm having fetching/expanding errors. I thought it could just be the one package I was trying to install (mrtrix3), but then the same happened with another when I was working on a different package that had a dependency, lcms, that is already part of the spack repo.\r\n\r\nmrtrix3 error:\r\n```\r\n==> Installing mira\r\n==> Fetching file://~/.spack/manual_mirror/mira/mira-4.9.6.tar.bz2\r\ncurl: (37) Couldn't open file /.spack/manual_mirror/mira/mira-4.9.6.tar.bz2\r\n==> Fetching from file://~/.spack/manual_mirror/mira/mira-4.9.6.tar.bz2 failed.\r\n==> Fetching https://downloads.sourceforge.net/project/mira-assembler/MIRA/development/mira-4.9.6.tar.bz2\r\n######################################################################## 100.0%\r\n==> Warning: The contents of \r\n  the archive\r\n   look like HTML.\r\n  The checksum will likely be bad.  If it is, you can use\r\n  'spack clean <package>' to remove the bad archive, then\r\n  fix your internet gateway issue and install again.\r\n==> Staging archive: /home/las_thoma15/spack/var/spack/stage/mira-4.9.6-2yksp37tj3ae3vzvzb5mtrr63ayzbgjr/mira-4.9.6.tar.bz2\r\nbzip2: (stdin) is not a bzip2 file.\r\n/usr/bin/tar: Child returned status 2\r\n/usr/bin/tar: Error is not recoverable: exiting now\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/usr/bin/tar' '-xf' '/home/las_thoma15/spack/var/spack/stage/mira-4.9.6-2yksp37tj3ae3vzvzb5mtrr63ayzbgjr/mira-4.9.6.tar.bz2'\r\n==> Error: [Errno 2] No such file or directory: '/home/las_thoma15/spack/var/spack/stage/mira-4.9.6-2yksp37tj3ae3vzvzb5mtrr63ayzbgjr/spack-expanded-archive/spack-build.out'\r\n```\r\n\r\nLCMS error:\r\n```\r\n==> Installing lcms\r\n==> Fetching file://~/.spack/manual_mirror/lcms/lcms-2.8.tar.gz\r\ncurl: (37) Couldn't open file /.spack/manual_mirror/lcms/lcms-2.8.tar.gz\r\n==> Fetching from file://~/.spack/manual_mirror/lcms/lcms-2.8.tar.gz failed.\r\n==> Fetching http://downloads.sourceforge.net/project/lcms/lcms/2.8/lcms2-2.8.tar.gz\r\n######################################################################## 100.0%\r\n==> Warning: The contents of \r\n  the archive\r\n   look like HTML.\r\n  The checksum will likely be bad.  If it is, you can use\r\n  'spack clean <package>' to remove the bad archive, then\r\n  fix your internet gateway issue and install again.\r\n==> Error: ChecksumError: md5 checksum failed for /home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/lcms2-2.8.tar.gz\r\n    Expected 87a5913f1a52464190bb655ad230539c but got cb530d737c8f2d1023797cf0587b4e05\r\nChecksumError: ChecksumError: md5 checksum failed for /home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/lcms2-2.8.tar.gz\r\n    Expected 87a5913f1a52464190bb655ad230539c but got cb530d737c8f2d1023797cf0587b4e05\r\n\r\n/home/las_thoma15/spack/lib/spack/spack/package.py:970, in do_fetch:\r\n     29            self._fetch_time = time.time() - start_time\r\n     30    \r\n     31            if spack.do_checksum and self.version in self.versions:\r\n  >> 32                self.stage.check()\r\n     33    \r\n     34            self.stage.cache_local()\r\n```\r\nchanged checksum just to see what happened, got this:\r\n```\r\n==> Installing lcms\r\n==> Already downloaded /home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/lcms2-2.8.tar.gz\r\n==> Staging archive: /home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/lcms2-2.8.tar.gz\r\n\r\ngzip: stdin: not in gzip format\r\n/usr/bin/tar: Child returned status 1\r\n/usr/bin/tar: Error is not recoverable: exiting now\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/usr/bin/tar' '-xf' '/home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/lcms2-2.8.tar.gz'\r\n==> Error: [Errno 2] No such file or directory: '/home/las_thoma15/spack/var/spack/stage/lcms-2.8-iwdk5sfmnx6ofw4ntewzcd5uulrzxnmo/spack-expanded-archive/spack-build.out'\r\n```\r\n\r\nI also did notice that a pr I submitted failed the Travis-CI build with a similar checksum error like in both examples above.",
    "performed_via_github_app": null
}