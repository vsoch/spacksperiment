{
    "url": "https://api.github.com/repos/spack/spack/issues/18664",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/18664/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/18664/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/18664/events",
    "html_url": "https://github.com/spack/spack/issues/18664",
    "id": 701231549,
    "node_id": "MDU6SXNzdWU3MDEyMzE1NDk=",
    "number": 18664,
    "title": "Installation issue: qbox (installation paths, python shebang and deps)",
    "user": {
        "login": "payerle",
        "id": 19287807,
        "node_id": "MDQ6VXNlcjE5Mjg3ODA3",
        "avatar_url": "https://avatars.githubusercontent.com/u/19287807?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/payerle",
        "html_url": "https://github.com/payerle",
        "followers_url": "https://api.github.com/users/payerle/followers",
        "following_url": "https://api.github.com/users/payerle/following{/other_user}",
        "gists_url": "https://api.github.com/users/payerle/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/payerle/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/payerle/subscriptions",
        "organizations_url": "https://api.github.com/users/payerle/orgs",
        "repos_url": "https://api.github.com/users/payerle/repos",
        "events_url": "https://api.github.com/users/payerle/events{/privacy}",
        "received_events_url": "https://api.github.com/users/payerle/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-09-14T16:01:03Z",
    "updated_at": "2020-09-15T14:54:27Z",
    "closed_at": "2020-09-15T14:54:27Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\n\r\n### Steps to reproduce the issue\r\nThe command\r\n```console\r\nspack install qbox\r\n```\r\nsucceeds, and puts content in the installation directory, but there are some issues:\r\n\r\n1) Almost everything is installed immediately below the installation prefix for the package.  The qbox website implies that the python/gnuplot scripts should be in the utils subdir, and there are a number of broken symlinks (e.g. qbdriver/H_HSCV_PBE-1.0.xml which seems to be because qbdriver should have been installed as a subdir of util, etc).\r\n\r\n2) The main qb executable is installed (and the sole file in) the src subdirectory --- this seems rather incongruous.\r\n\r\n3) The spack produced Tcl modulefile does not include a PATH setting to find the qb executable (this appears to be related to issue (2))\r\n\r\n4) Most of the python scripts included have shebangs using /usr/bin/python.  This is problematic as:\r\n  1. This forces use of system installed (as opposed to spack installed) python\r\n  2. RHEL8 systems often have only /usr/bin/python2 and /usr/bin/python3, not /usr/bin/python\r\n  3. The scripts fail under python3 (I did not look into in detail, but most of the scripts have\r\n  python2 style print statements as opposed to python3 style print functions.  Not sure if \r\n  there are any more significant python2-isms)\r\nI am not sure if there is a major issue of using system vs spack installed python (assuming\r\nsystem installed exists and is compatible version) --- I do not see any evidence of the scripts\r\nusing non-standard python modules, and they seem to be self-contained.  \r\n\r\n5) The utilities include python(python2) scripts and gnuplot scripts, but neither python2 nor gnuplot included as run dependencies.\r\n\r\nI am not an user of qbox (I am installing on behalf of one of my users), but issues 1, 2, and 3\r\nseem wrong.  I think the shebangs for the python scripts should use python from the user's\r\npath (thereby allowing use of system python unless someone sets up a spack python). \r\n\r\n\r\n\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n\r\n\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```console\r\nspack debug report\r\n* **Spack:** 0.14.2\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel8-ivybridge\r\n```\r\n\r\n### Additional information\r\n\r\nThe spack-build-out.txt, spack-build-env.txt files do not seem relevant, as the installation\r\ntechnically succeeds.\r\n\r\nNo maintainers found for qbox\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x ] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x ] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [x ] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}