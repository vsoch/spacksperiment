{
    "url": "https://api.github.com/repos/spack/spack/issues/15141",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15141/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15141/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15141/events",
    "html_url": "https://github.com/spack/spack/issues/15141",
    "id": 568652702,
    "node_id": "MDU6SXNzdWU1Njg2NTI3MDI=",
    "number": 15141,
    "title": "Building from buildcache with the argument --no-check-signature does not respect the argument",
    "user": {
        "login": "rubendibattista",
        "id": 8077364,
        "node_id": "MDQ6VXNlcjgwNzczNjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077364?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rubendibattista",
        "html_url": "https://github.com/rubendibattista",
        "followers_url": "https://api.github.com/users/rubendibattista/followers",
        "following_url": "https://api.github.com/users/rubendibattista/following{/other_user}",
        "gists_url": "https://api.github.com/users/rubendibattista/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rubendibattista/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rubendibattista/subscriptions",
        "organizations_url": "https://api.github.com/users/rubendibattista/orgs",
        "repos_url": "https://api.github.com/users/rubendibattista/repos",
        "events_url": "https://api.github.com/users/rubendibattista/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rubendibattista/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-02-20T23:55:44Z",
    "updated_at": "2020-02-20T23:55:44Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I'm testing buildcaches. I'm on Gitlab CI (so within docker). I uploaded manually the build caches to http://buildcache.spack.rdb.is. But I'm getting strange errors. The packages are not signed and I'm installing using `spack install --no-check-signature`\r\n\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ Use [this `spack.yaml`](http://sprunge.us/GuNWxZ)\r\n$ spack install --no-check-signature\r\n...\r\n```\r\n\r\n### Error Message\r\n```\r\n[+] /opt/software/linux-centos7-x86_64/gcc-4.8.5/inputproto-2.3.2-pxrsfzrdl6dspsp46wj6og6m3nyzjbdo\r\n744 ==> Error: Failed to install xproto due to NoVerifyException: Package spec file failed signature verification.\r\n745 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n746 ==> Warning: Skipping build of libice since xproto failed\r\n747 ==> Warning: Skipping build of libsm since libice failed\r\n748 ==> Warning: Skipping build of libxau since xproto failed\r\n749 ==> Error: Failed to install libpciaccess due to NoVerifyException: Package spec file failed signature verification.\r\n750 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n751 ==> Error: Failed to install xextproto due to NoVerifyException: Package spec file failed signature verification.\r\n752 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n753 ==> 50: Installing xproto\r\n754 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n755 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/xproto-7.0.31/linux-centos7-x86_64-gcc-4.8.5-xproto-7.0.31-bjjto7ps3ybyj5u56pmnrzxutslkwnsc.spack\r\n756 ==> Installing xproto from binary cache\r\n757 ==> 50: Installing libpciaccess\r\n758 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n759 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/libpciaccess-0.13.5/linux-centos7-x86_64-gcc-4.8.5-libpciaccess-0.13.5-5chyfxo6gpmcf74gpv3sqni2aa6v5x57.spack\r\n760 ==> Installing libpciaccess from binary cache\r\n761 ==> 50: Installing xextproto\r\n762 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n763 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/xextproto-7.3.0/linux-centos7-x86_64-gcc-4.8.5-xextproto-7.3.0-v5vttf7jlxd4lkqhrtc4x5zflbudgpov.spack\r\n764 ==> Installing xextproto from binary cache\r\n[snip...]\r\n[+] /opt/software/linux-centos7-x86_64/gcc-4.8.5/m4-1.4.18-kafywd7zgwmjie7hchum4d6emu3sngi2\r\n849 ==> Error: Failed to install libedit due to NoVerifyException: Package spec file failed signature verification.\r\n850 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n851 ==> Error: Failed to install readline due to NoVerifyException: Package spec file failed signature verification.\r\n852 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n853 ==> Warning: Skipping build of gdbm since readline failed\r\n854 ==> Warning: Skipping build of perl since gdbm failed\r\n855 ==> Warning: Skipping build of perl-data-dumper since perl failed\r\n856 ==> Warning: Skipping build of sqlite since readline failed\r\n857 ==> Error: Failed to install cmake due to NoVerifyException: Package spec file failed signature verification.\r\n858 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n859 ==> Warning: Skipping build of eigen since cmake failed\r\n860 ==> Warning: Skipping build of libjpeg-turbo since cmake failed\r\n861 ==> Warning: Skipping build of jsoncpp since cmake failed\r\n862 ==> Warning: Skipping build of double-conversion since cmake failed\r\n863 ==> Error: Failed to install numactl due to NoVerifyException: Package spec file failed signature verification.\r\n864 Use spack buildcache keys to download and install a key for verification from the mirror.\r\n865 ==> Error: Installation of vtk failed.  Review log for details\r\n866 ==> 50: Installing libedit\r\n867 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n868 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/libedit-3.1-20191231/linux-centos7-x86_64-gcc-4.8.5-libedit-3.1-20191231-smlxsfbenlhmrnktdilabsvk6tjsqtx7.spack\r\n869 ==> Installing libedit from binary cache\r\n870 ==> 50: Installing readline\r\n871 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n872 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/readline-8.0/linux-centos7-x86_64-gcc-4.8.5-readline-8.0-5vnh6ifcu6s47ugsvk7gaqfxikuwffds.spack\r\n873 ==> Installing readline from binary cache\r\n874 ==> 50: Installing cmake\r\n875 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n876 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/cmake-3.16.2/linux-centos7-x86_64-gcc-4.8.5-cmake-3.16.2-y4rlclqlivsevjzyqgik3z2vzofcawdy.spack\r\n877 ==> Installing cmake from binary cache\r\n878 ==> 50: Installing numactl\r\n879 ==> Finding buildcaches at http://buildcache.spack.rdb.is/build_cache\r\n880 ==> Fetching http://buildcache.spack.rdb.is/build_cache/linux-centos7-x86_64/gcc-4.8.5/numactl-2.0.12/linux-centos7-x86_64-gcc-4.8.5-numactl-2.0.12-i43do2bjh7xwr7akweicmxacdnfkhihd.spack\r\n881 ==> Installing numactl from binary cache\r\n882 The command '/bin/bash -l -c cd /opt/spack-environment && spack install --no-check-signature  &&     spack gc -y' returned a non-zero code: 1\r\n886 ERROR: Job failed: exit code 1\r\n```\r\n`spack`is complaining about the buildcache signing, but it keeps downloading until it does not.\r\n\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\nRunning on Python 3.7.4, CentOS 7",
    "performed_via_github_app": null
}