{
    "url": "https://api.github.com/repos/spack/spack/issues/11253",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/11253/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/11253/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/11253/events",
    "html_url": "https://github.com/spack/spack/issues/11253",
    "id": 435792374,
    "node_id": "MDU6SXNzdWU0MzU3OTIzNzQ=",
    "number": 11253,
    "title": "Installation issue: llvm@7.0.1",
    "user": {
        "login": "jlconlin",
        "id": 1275437,
        "node_id": "MDQ6VXNlcjEyNzU0Mzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1275437?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlconlin",
        "html_url": "https://github.com/jlconlin",
        "followers_url": "https://api.github.com/users/jlconlin/followers",
        "following_url": "https://api.github.com/users/jlconlin/following{/other_user}",
        "gists_url": "https://api.github.com/users/jlconlin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jlconlin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jlconlin/subscriptions",
        "organizations_url": "https://api.github.com/users/jlconlin/orgs",
        "repos_url": "https://api.github.com/users/jlconlin/repos",
        "events_url": "https://api.github.com/users/jlconlin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jlconlin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-04-22T16:37:02Z",
    "updated_at": "2019-08-17T12:39:42Z",
    "closed_at": "2019-07-19T23:49:08Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install llvm@7.0.1\r\n==> diffutils is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/diffutils-3.7-psvwzkvsoks4vvdjichze2yik2emvkbs\r\n==> bzip2 is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/bzip2-1.0.6-syohzw57v2jfag5du2x4bowziw3m5p67\r\n==> libiconv is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/libiconv-1.15-u27q4rowrbactosi7n57ever5q44jddx\r\n==> pkgconf is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/pkgconf-1.6.0-j3vc3pai7g4ntidfkmexu65hrwnedy7n\r\n==> xz is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/xz-5.2.4-i47twa3ynjmijdjvt4nag47wtg65m7jc\r\n==> zlib is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/zlib-1.2.11-uw6agnye4za7cpgyyaaejrzorhbhqno5\r\n==> libxml2 is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/libxml2-2.9.8-wte4j5hpklvenw4ma3w2hmc6slcmhuvp\r\n==> ncurses is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/ncurses-6.1-zvaa4lhlhilypw5quj3akyd3apbq5gap\r\n==> tar is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/tar-1.31-c4bqqxoqh26lo6dt5qsvhbi53plmxzsk\r\n==> gettext is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/gettext-0.19.8.1-p2mxxnwlbmjdzqpttd37jcn5hbph2xzb\r\n==> binutils is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/binutils-2.31.1-yvyb2algz7nindo5tjnnesolv53yhl5l\r\n==> curl is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/curl-7.63.0-jmk7fd3zgpevb4foxfa4aqm6ot5trfan\r\n==> expat is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/expat-2.2.5-a3ige4ieqqilj3uut6myog7m7tg7vvuw\r\n==> lz4 is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/lz4-1.9.0-vpfgqgp5apb2ieogo7c3ch3hew5lwduj\r\n==> lzo is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/lzo-2.10-uqn3fwuzkyka5lv24sppnf32mnzbdmnh\r\n==> libsigsegv is already installed in /Users/jlconlin/spack/opt/spack/darwin-mojave-x86_64/clang-10.0.0-apple/libsigsegv-2.11-yzxmqil6vnuqwwu57qlwxxovqm3z524r\r\n==> Installing m4\r\n==> Searching for binary cache of m4\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for m4 found: installing from source\r\n==> Using cached archive: /Users/jlconlin/spack/var/spack/cache/m4/m4-1.4.18.tar.gz\r\n==> Using cached archive: /Users/jlconlin/spack/var/spack/cache/m4/m4-1.4.18-glibc-change-work-around.patch\r\n==> Staging archive: /Users/jlconlin/spack/var/spack/stage/m4-1.4.18-yepm6w7ghtdzllac5ely7yapdebjrzg6/m4-1.4.18.tar.gz\r\n==> Created stage in /Users/jlconlin/spack/var/spack/stage/m4-1.4.18-yepm6w7ghtdzllac5ely7yapdebjrzg6\r\n==> Applied patch /Users/jlconlin/spack/var/spack/repos/builtin/packages/m4/gnulib-pgi.patch\r\n==> Applied patch /Users/jlconlin/spack/var/spack/repos/builtin/packages/m4/secure_snprintf.patch\r\n==> Applied patch https://src.fedoraproject.org/rpms/m4/raw/5d147168d4b93f38a4833f5dd1d650ad88af5a8a/f/m4-1.4.18-glibc-change-work-around.patch\r\n==> Building m4 [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: AttributeError: 'ArchSpec' object has no attribute 'platform_os'\r\n\r\n/Users/jlconlin/spack/var/spack/repos/builtin/packages/m4/package.py:54, in configure_args:\r\n         51\r\n         52        # http://lists.gnu.org/archive/html/bug-m4/2016-09/msg00002.html\r\n         53        arch = spec.architecture\r\n  >>     54        if (arch.platform == 'darwin' and arch.platform_os == 'sierra' and\r\n         55            '%gcc' in spec):\r\n         56            args.append('ac_cv_type_struct_sched_param=yes')\r\n         57\r\n\r\nSee build log for details:\r\n  /Users/jlconlin/spack/var/spack/stage/m4-1.4.18-yepm6w7ghtdzllac5ely7yapdebjrzg6/spack-build.out\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nDarwin radagast.lanl.gov 18.5.0 Darwin Kernel Version 18.5.0: Mon Mar 11 20:40:32 PDT 2019; root:xnu-4903.251.3~3/RELEASE_X86_64 x86_64\r\n$ lsb_relase -d\r\nbash: lsb_relase: command not found\r\n``` \r\n- `packages.yaml` This has been attached.\r\n- `compilers.yaml` It exist in `~/.spack/darwin/` Should I look somewhere else?\r\n\r\n### Additional information\r\n\r\n```console\r\n$ spack spec --install-status llvm@7.0.1\r\nInput spec\r\n--------------------------------\r\n -   llvm@7.0.1\r\n\r\nConcretized\r\n--------------------------------\r\n -   llvm@7.0.1%clang@10.0.0-apple+all_targets build_type=Release +clang+compiler-rt+gold+internal_unwind+libcxx~link_dylib+lld+lldb+polly~python~shared_libs arch=darwin-mojave-x86_64\r\n[+]      ^binutils@2.31.1%clang@10.0.0-apple+gold~headers~libiberty+nls~plugins arch=darwin-mojave-x86_64\r\n[+]          ^gettext@0.19.8.1%clang@10.0.0-apple+bzip2+curses+git~libunistring+libxml2 patches=9acdb4e73f67c241b5ef32505c9ddf7cf6884ca8ea661692f21dca28483b04b8 +tar+xz arch=darwin-mojave-x86_64\r\n[+]              ^bzip2@1.0.6%clang@10.0.0-apple+shared arch=darwin-mojave-x86_64\r\n[+]                  ^diffutils@3.7%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]              ^libxml2@2.9.8%clang@10.0.0-apple~python arch=darwin-mojave-x86_64\r\n[+]                  ^libiconv@1.15%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]                  ^pkgconf@1.6.0%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]                  ^xz@5.2.4%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]                  ^zlib@1.2.11%clang@10.0.0-apple+optimize+pic+shared arch=darwin-mojave-x86_64\r\n[+]              ^ncurses@6.1%clang@10.0.0-apple~symlinks~termlib arch=darwin-mojave-x86_64\r\n[+]              ^tar@1.31%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -       ^cmake@3.14.2%clang@10.0.0-apple~doc+ncurses+openssl~ownlibs~qt arch=darwin-mojave-x86_64\r\n[+]          ^curl@7.63.0%clang@10.0.0-apple+darwinssl~libssh~libssh2~nghttp2 arch=darwin-mojave-x86_64\r\n[+]          ^expat@2.2.5%clang@10.0.0-apple~libbsd arch=darwin-mojave-x86_64\r\n -           ^libarchive@3.3.2%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]              ^lz4@1.9.0%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n[+]              ^lzo@2.10%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -               ^nettle@3.4%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                   ^gmp@6.1.2%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                       ^autoconf@2.69%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                           ^m4@1.4.18%clang@10.0.0-apple patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,c0a408fbffb7255fcc75e26bd8edab116fc81d216bfd18b473668b7739a4158e,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=darwin-mojave-x86_64\r\n[+]                              ^libsigsegv@2.11%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                           ^perl@5.26.2%clang@10.0.0-apple+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=darwin-mojave-x86_64\r\n -                               ^gdbm@1.18.1%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                                   ^readline@7.0%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                       ^automake@1.16.1%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                       ^libtool@2.4.6%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -               ^openssl@1.1.1b%clang@10.0.0-apple+systemcerts arch=darwin-mojave-x86_64\r\n -           ^libuv@1.25.0%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -           ^rhash@1.3.5%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -       ^libedit@3.1-20170329%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -       ^perl-data-dumper@2.173%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -       ^py-lit@0.7.1%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -           ^py-setuptools@40.8.0%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -               ^python@2.7.16%clang@10.0.0-apple+bz2+ctypes+dbm+lzma~nis~optimizations patches=210df3f28cde02a8135b58cc4168e70ab91dbf9097359d05938f1e2843875e57 +pic+pyexpat+pythoncmd+readline~shared+sqlite3+ssl~tkinter~ucs4~uuid+zlib arch=darwin-mojave-x86_64\r\n -                   ^libffi@3.2.1%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -                   ^sqlite@3.26.0%clang@10.0.0-apple~functions arch=darwin-mojave-x86_64\r\n -       ^swig@3.0.12%clang@10.0.0-apple arch=darwin-mojave-x86_64\r\n -           ^pcre@8.42%clang@10.0.0-apple~jit+multibyte+utf arch=darwin-mojave-x86_64\r\n\r\n...\r\n```\r\n\r\n```console\r\n\r\n$ spack log-parse --show=errors,warnings   /Users/jlconlin/spack/var/spack/stage/m4-1.4.18-yepm6w7ghtdzllac5ely7yapdebjrzg6/spack-build.out\r\n0 errors\r\n0 warnings\r\n\r\n```\r\nYou might want to run this command on the `config.log` or any other similar file\r\nfound in the stage directory: \r\n```console\r\n$ spack location -s llvm@7.0.1\r\n/Users/jlconlin/spack/var/spack/stage/llvm-7.0.1-gfpajxnsihxkz2tgobpq5wyrpujbudn3\r\n\r\n```\r\n\r\n```console\r\n$ spack -d install -j 1 llvm@7.0.1\r\n```\r\nThis gave a lot of output, but it did not create `spack-cc-llvm@7.0.1.in` or `spack-cc-llvm@7.0.1.out`\r\n[compilers.yaml.txt](https://github.com/spack/spack/files/3104066/compilers.yaml.txt)\r\n",
    "performed_via_github_app": null
}