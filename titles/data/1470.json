{
    "url": "https://api.github.com/repos/spack/spack/issues/1470",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/1470/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/1470/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/1470/events",
    "html_url": "https://github.com/spack/spack/issues/1470",
    "id": 169997169,
    "node_id": "MDU6SXNzdWUxNjk5OTcxNjk=",
    "number": 1470,
    "title": "Can't install r-rcpp (something odd with Makeconf vs/and Makeconf.spack?)",
    "user": {
        "login": "hartzell",
        "id": 312978,
        "node_id": "MDQ6VXNlcjMxMjk3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/312978?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hartzell",
        "html_url": "https://github.com/hartzell",
        "followers_url": "https://api.github.com/users/hartzell/followers",
        "following_url": "https://api.github.com/users/hartzell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hartzell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hartzell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hartzell/subscriptions",
        "organizations_url": "https://api.github.com/users/hartzell/orgs",
        "repos_url": "https://api.github.com/users/hartzell/repos",
        "events_url": "https://api.github.com/users/hartzell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hartzell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2016-08-08T18:53:30Z",
    "updated_at": "2016-08-08T20:53:48Z",
    "closed_at": "2016-08-08T20:28:56Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I'm having trouble building r-rcpp.  Here's what's happening (check out the line just before those that being 'g++: error:' and the 'g++: error:' lines themselves):\n\n```\n[throgg@spack-central spack]$ spack install -v r-rcpp\n==> Installing r-rcpp\n==> R is already installed in /home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py\n==> Already downloaded /home/throgg/spack/var/spack/stage/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/r-rcpp-0.12.6.tar.gz\n==> Already staged r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq in /home/throgg/spack/var/spack/stage/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq\n==> No patches needed for r-rcpp\n==> Building r-rcpp\n==> '/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/bin/R' 'CMD' 'INSTALL' '--library=/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/rlib/R/library' '/home/throgg/spack/var/spack/stage/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/Rcpp'\n* installing *source* package \u2018Rcpp\u2019 ...\n** package \u2018Rcpp\u2019 successfully unpacked and MD5 sums checked\n** libs\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:132: warning: overriding recipe for target `.c.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:132: warning: ignoring old recipe for target `.c.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:134: warning: overriding recipe for target `.c.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:134: warning: ignoring old recipe for target `.c.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:137: warning: overriding recipe for target `.cc.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:137: warning: ignoring old recipe for target `.cc.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:139: warning: overriding recipe for target `.cpp.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:139: warning: ignoring old recipe for target `.cpp.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:141: warning: overriding recipe for target `.cc.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:141: warning: ignoring old recipe for target `.cc.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:144: warning: overriding recipe for target `.cpp.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:144: warning: ignoring old recipe for target `.cpp.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:147: warning: overriding recipe for target `.m.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:147: warning: ignoring old recipe for target `.m.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:149: warning: overriding recipe for target `.m.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:149: warning: ignoring old recipe for target `.m.d'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:152: warning: overriding recipe for target `.mm.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:152: warning: ignoring old recipe for target `.mm.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:154: warning: overriding recipe for target `.M.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:154: warning: ignoring old recipe for target `.M.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:156: warning: overriding recipe for target `.f.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:156: warning: ignoring old recipe for target `.f.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:158: warning: overriding recipe for target `.f95.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:158: warning: ignoring old recipe for target `.f95.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack:160: warning: overriding recipe for target `.f90.o'\n/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf:160: warning: ignoring old recipe for target `.f90.o'\n/home/throgg/spack/lib/spack/env/gcc/g++ -shared -L/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/lib -L/usr/local/lib64 -o Rcpp.so Date.o Module.o Rcpp_init.o api.o attributes.o barrier.o SHLIB_LIBADD = -L/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/lib -lR\ng++: error: SHLIB_LIBADD: No such file or directory\ng++: error: =: No such file or directory\nmake: *** [Rcpp.so] Error 1\nERROR: compilation failed for package \u2018Rcpp\u2019\n* removing \u2018/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/rlib/R/library/Rcpp\u2019\n==> Error: Command exited with status 1:\n'/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/bin/R' 'CMD' 'INSTALL' '--library=/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/rlib/R/library' '/home/throgg/spack/var/spack/stage/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/Rcpp'\n\nSee build log for details:\n  /tmp/throgg/spack-stage/spack-stage-OhkFfh/Rcpp/spack-build.out\n\n/home/throgg/spack/var/spack/repos/builtin/packages/r-rcpp/package.py:50, in install:\n     48       def install(self, spec, prefix):\n     49           R('CMD', 'INSTALL', '--library={0}'.format(self.module.r_lib_dir),\n  >> 50             self.stage.source_path)\n==> Error: Installation process had nonzero exit code : 256\n```\n\nClearly the the string 'SHLIB_LDDADD =' should not be getting interpolated literally in the link line.\n\nWhile poking psuedo-randomly around at it, I assigned different values to the variable in both Makeconf and Makeconf.spack and discovered that the value being used is the value in Makeconf.  I thought that this setting of R_MAKEVARS_SITE would make the Makeconf.spack value \"win\".\n\n```\n[throgg@spack-central spack]$ spack env r-rcpp bash\n[throgg@spack-central spack]$ printenv | egrep '^R'\nR_MAKEVARS_SITE=/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/R-3.3.1-jw6b5cxsuwmiuepqaboaum7jx45i36py/rlib/R/etc/Makeconf.spack\nR_LIBS=/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/r-rcpp-0.12.6-uyk74pfyiunrhwlpuy756vqz6megyxeq/rlib/R/library\n[throgg@spack-central spack]$\n```\n\nIt's also odd that there are all of those warnings involving  Makeconf.spack and Makeconf before R tries to link the library.\n",
    "performed_via_github_app": null
}