{
    "url": "https://api.github.com/repos/spack/spack/issues/19932",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19932/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19932/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19932/events",
    "html_url": "https://github.com/spack/spack/issues/19932",
    "id": 743357469,
    "node_id": "MDU6SXNzdWU3NDMzNTc0Njk=",
    "number": 19932,
    "title": "openblas 0.3.12 x86_64 build fails on RHEL7: dasum_k_SKYLAKEX: incompatible type",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2020-11-15T22:13:34Z",
    "updated_at": "2020-11-25T04:15:31Z",
    "closed_at": "2020-11-19T04:52:32Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "`openblas@0.3.12 target=x86_64` fails to build for `RHEL 7` on `x86_64` using:\r\n* `GCC 8.3.1`\r\n* `spack@develop`\r\n* 3536433c41fa67b7ad006ab0c8787f91b3294d58\r\n* `Sun Nov 15 11:54:39 2020 -0600`\r\n\r\nConcrete spec: [openblas.spec.yaml.txt](https://github.com/spack/spack/files/5543207/openblas.spec.yaml.txt)\r\nFull build log: [openblas-build-out.txt](https://github.com/spack/spack/files/5543215/openblas-build-out.txt)\r\n\r\n```\r\n$> spack install -f ./openblas.spec.yaml\r\n...\r\n6 errors found in build log:\r\n     7200    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_iunncopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_iunncopy_SKYLAKEX_ -DNAME=dtrmm_iunncopy_SKYLAKEX_ -DCNAME=dtrmm_iunncopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_iunncopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_iunncopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -ULOWER -UUNIT generic/\r\n             trmm_uncopy_16.c -o dtrmm_iunncopy_SKYLAKEX.o\r\n     7201    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_ilnucopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_ilnucopy_SKYLAKEX_ -DNAME=dtrmm_ilnucopy_SKYLAKEX_ -DCNAME=dtrmm_ilnucopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_ilnucopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_ilnucopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -DLOWER -DUNIT generic/\r\n             trmm_lncopy_16.c -o dtrmm_ilnucopy_SKYLAKEX.o\r\n     7202    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_ilnncopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_ilnncopy_SKYLAKEX_ -DNAME=dtrmm_ilnncopy_SKYLAKEX_ -DCNAME=dtrmm_ilnncopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_ilnncopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_ilnncopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -DLOWER -UUNIT generic/\r\n             trmm_lncopy_16.c -o dtrmm_ilnncopy_SKYLAKEX.o\r\n     7203    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_iutucopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_iutucopy_SKYLAKEX_ -DNAME=dtrmm_iutucopy_SKYLAKEX_ -DCNAME=dtrmm_iutucopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_iutucopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_iutucopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -ULOWER -DUNIT generic/\r\n             trmm_utcopy_16.c -o dtrmm_iutucopy_SKYLAKEX.o\r\n     7204    In file included from ../kernel/x86_64/dasum.c:8:\r\n     7205    ../kernel/x86_64/dasum_microk_skylakex-2.c: In function 'dasum_kernel':\r\n  >> 7206    ../kernel/x86_64/dasum_microk_skylakex-2.c:42:38: error: incompatible type for argument 1 of '_mm512_abs_pd'\r\n     7207                 accum_0 += _mm512_abs_pd(_mm512_load_pd(&x1[i + 0]));\r\n     7208                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     7209    In file included from /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/immintrin.h:45,\r\n     7210                     from ../kernel/x86_64/dasum_microk_skylakex-2.c:6,\r\n     7211                     from ../kernel/x86_64/dasum.c:8:\r\n     7212    /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/avx512fintrin.h:7730:23: note: expected '__m512' {aka '\r\n             __vector(16) float'} but argument is of type '__m512d' {aka '__vector(8) double'}\r\n     7213     _mm512_abs_pd (__m512 __A)\r\n     7214                    ~~~~~~~^~~\r\n     7215    In file included from ../kernel/x86_64/dasum.c:8:\r\n  >> 7216    ../kernel/x86_64/dasum_microk_skylakex-2.c:43:38: error: incompatible type for argument 1 of '_mm512_abs_pd'\r\n     7217                 accum_1 += _mm512_abs_pd(_mm512_load_pd(&x1[i + 8]));\r\n     7218                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     7219    In file included from /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/immintrin.h:45,\r\n     7220                     from ../kernel/x86_64/dasum_microk_skylakex-2.c:6,\r\n     7221                     from ../kernel/x86_64/dasum.c:8:\r\n     7222    /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/avx512fintrin.h:7730:23: note: expected '__m512' {aka '\r\n             __vector(16) float'} but argument is of type '__m512d' {aka '__vector(8) double'}\r\n     7223     _mm512_abs_pd (__m512 __A)\r\n     7224                    ~~~~~~~^~~\r\n     7225    In file included from ../kernel/x86_64/dasum.c:8:\r\n  >> 7226    ../kernel/x86_64/dasum_microk_skylakex-2.c:44:38: error: incompatible type for argument 1 of '_mm512_abs_pd'\r\n     7227                 accum_2 += _mm512_abs_pd(_mm512_load_pd(&x1[i +16]));\r\n     7228                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     7229    In file included from /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/immintrin.h:45,\r\n     7230                     from ../kernel/x86_64/dasum_microk_skylakex-2.c:6,\r\n     7231                     from ../kernel/x86_64/dasum.c:8:\r\n     7232    /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/avx512fintrin.h:7730:23: note: expected '__m512' {aka '\r\n             __vector(16) float'} but argument is of type '__m512d' {aka '__vector(8) double'}\r\n     7233     _mm512_abs_pd (__m512 __A)\r\n     7234                    ~~~~~~~^~~\r\n     7235    In file included from ../kernel/x86_64/dasum.c:8:\r\n  >> 7236    ../kernel/x86_64/dasum_microk_skylakex-2.c:45:38: error: incompatible type for argument 1 of '_mm512_abs_pd'\r\n     7237                 accum_3 += _mm512_abs_pd(_mm512_load_pd(&x1[i +24]));\r\n     7238                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     7239    In file included from /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/immintrin.h:45,\r\n     7240                     from ../kernel/x86_64/dasum_microk_skylakex-2.c:6,\r\n     7241                     from ../kernel/x86_64/dasum.c:8:\r\n     7242    /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/avx512fintrin.h:7730:23: note: expected '__m512' {aka '\r\n             __vector(16) float'} but argument is of type '__m512d' {aka '__vector(8) double'}\r\n\r\n     ...\r\n\r\n     7286    /opt/software/linux-rhel7-x86_64/gcc-4.8.5/gcc-8.1.0-eesg3q2ggeqhvjpopgbpobxgyv6m5hg4/lib/gcc/x86_64-pc-linux-gnu/8.1.0/include/emmintrin.h:700:35: note: expected 'const __vector(2) l\r\n             ong long int *' but argument is of type 'double *'\r\n     7287     _mm_loadu_si128 (__m128i_u const *__P)\r\n     7288                      ~~~~~~~~~~~~~~~~~^~~\r\n     7289    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_iutncopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_iutncopy_SKYLAKEX_ -DNAME=dtrmm_iutncopy_SKYLAKEX_ -DCNAME=dtrmm_iutncopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_iutncopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_iutncopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -ULOWER -UUNIT generic/\r\n             trmm_utcopy_16.c -o dtrmm_iutncopy_SKYLAKEX.o\r\n     7290    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_iltucopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_iltucopy_SKYLAKEX_ -DNAME=dtrmm_iltucopy_SKYLAKEX_ -DCNAME=dtrmm_iltucopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_iltucopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_iltucopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -DLOWER -DUNIT generic/\r\n             trmm_ltcopy_16.c -o dtrmm_iltucopy_SKYLAKEX.o\r\n     7291    /opt/spack/lib/spack/env/gcc/gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DDYNAMIC_ARCH -DNO_WARMUP -DMAX_CPU_NUMBER=72 -DMAX_PARALLEL_NUMBER=1 -DBUILD_SING\r\n             LE=1 -DBUILD_DOUBLE=1 -DBUILD_COMPLEX=1 -DBUILD_COMPLEX16=1 -DVERSION=\\\"0.3.12\\\" -UASMNAME -UASMFNAME -UNAME -UCNAME -UCHAR_NAME -UCHAR_CNAME -DASMNAME=dtrmm_iltncopy_SKYLAKEX -DASMFN\r\n             AME=dtrmm_iltncopy_SKYLAKEX_ -DNAME=dtrmm_iltncopy_SKYLAKEX_ -DCNAME=dtrmm_iltncopy_SKYLAKEX -DCHAR_NAME=\\\"dtrmm_iltncopy_SKYLAKEX_\\\" -DCHAR_CNAME=\\\"dtrmm_iltncopy_SKYLAKEX\\\" -DNO_AFF\r\n             INITY -DTS=_SKYLAKEX -I.. -DBUILD_KERNEL -DTABLE_NAME=gotoblas_SKYLAKEX -march=skylake-avx512 -DDOUBLE  -UCOMPLEX -Wno-uninitialized -DDOUBLE -UCOMPLEX -UOUTER -DLOWER -UUNIT generic/\r\n             trmm_ltcopy_16.c -o dtrmm_iltncopy_SKYLAKEX.o\r\n  >> 7292    make[1]: *** [dasum_k_SKYLAKEX.o] Error 1\r\n     7293    make[1]: *** Waiting for unfinished jobs....\r\n     7294    make[1]: Leaving directory `/tmp/root/spack-stage/spack-stage-openblas-0.3.12-b45rhgos7s5yh5d6yivh43ucoirtcqcb/spack-src/kernel'\r\n  >> 7295    make: *** [libs] Error 1\r\n```\r\n\r\n@siko1056 @t-karatsu @sethrj @mdorier @scottwittenburg @jabl \r\n\r\n",
    "performed_via_github_app": null
}