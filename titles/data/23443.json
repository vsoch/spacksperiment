{
    "url": "https://api.github.com/repos/spack/spack/issues/23443",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23443/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23443/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23443/events",
    "html_url": "https://github.com/spack/spack/issues/23443",
    "id": 876294690,
    "node_id": "MDU6SXNzdWU4NzYyOTQ2OTA=",
    "number": 23443,
    "title": "CCE doesn't support CXX standard flags beyond 11",
    "user": {
        "login": "jjellio",
        "id": 21248657,
        "node_id": "MDQ6VXNlcjIxMjQ4NjU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/21248657?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jjellio",
        "html_url": "https://github.com/jjellio",
        "followers_url": "https://api.github.com/users/jjellio/followers",
        "following_url": "https://api.github.com/users/jjellio/following{/other_user}",
        "gists_url": "https://api.github.com/users/jjellio/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jjellio/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jjellio/subscriptions",
        "organizations_url": "https://api.github.com/users/jjellio/orgs",
        "repos_url": "https://api.github.com/users/jjellio/repos",
        "events_url": "https://api.github.com/users/jjellio/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jjellio/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-05T10:15:13Z",
    "updated_at": "2021-05-05T10:47:25Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Error Message\r\n```\r\n==> [2021-05-05-04:48:15.627507] [TOOLCHAIN] MATCH Cce\r\n==> [2021-05-05-04:48:15.641747] Error: UnsupportedCompilerFlag: cce (12.0) does not support the C++14 standard (as compiler.cxx14_flag).\r\n    If you think it should, please edit the compiler.cce subclass to implement the cxx14_flag property and submit a pull request or issue.\r\n\r\n/home/users/coe0201/src/spack/var/spack/repos/builtin/packages/icu4c/package.py:55, in flag_handler:\r\n         52        if name == 'cxxflags':\r\n         53            # Control of the C++ Standard is via adding the required \"-std\"\r\n         54            # flag to CXXFLAGS in env\r\n  >>     55            flags.append(getattr(self.compiler,\r\n         56                         'cxx{0}_flag'.format(\r\n         57                             self.spec.variants['cxxstd'].value)))\r\n         58        return (None, flags, None)\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/users/coe0201/src/spack/lib/spack/spack/build_environment.py\", line 912, in _setup_pkg_and_run\r\n    setup_package(pkg, dirty=kwargs.get('dirty', False),\r\n  File \"/home/users/coe0201/src/spack/lib/spack/spack/build_environment.py\", line 793, in setup_package\r\n    set_compiler_environment_variables(pkg, env)\r\n  File \"/home/users/coe0201/src/spack/lib/spack/spack/build_environment.py\", line 283, in set_compiler_environment_variables\r\n    injf, envf, bsf = handler(pkg, flag, spec.compiler_flags[flag])\r\n  File \"/home/users/coe0201/src/spack/var/spack/repos/builtin/packages/icu4c/package.py\", line 56, in flag_handler\r\n    'cxx{0}_flag'.format(\r\n  File \"/home/users/coe0201/src/spack/lib/spack/spack/compiler.py\", line 457, in cxx14_flag\r\n    raise UnsupportedCompilerFlag(self,\r\nspack.compiler.UnsupportedCompilerFlag: cce (12.0) does not support the C++14 standard (as compiler.cxx14_flag).\r\n    If you think it should, please edit the compiler.cce subclass to implement the cxx14_flag property and submit a pull request or issue.\r\n==> [2021-05-05-04:48:15.642110] Flagging icu4c-67.1-u4rpmlv5bmrkgmccepnlpejhyh36i4mi as failed: UnsupportedCompilerFlag: cce (12.0) does not support the C++14 standard (as compiler.cxx14_flag).\r\n    If you think it should, please edit the compiler.cce subclass to implement the cxx14_flag property and submit a pull request or issue.\r\n```\r\n\r\nGlancing at `compilers/cce.py`, it only annotates C++11 - curiously, I never bumped into this, because Trilinos sets its own CXX flags via kokkos.\r\n\r\n### compilers/cce.py\r\n```yaml\r\n    @property\r\n    def cxx11_flag(self):\r\n        if self.is_clang_based:\r\n            return '-std=c++11'\r\n        return \"-h std=c++11\"\r\n\r\n    # no more c++ standards!\r\n    # a very sad day  indeed\r\n```\r\nI'll be submitting a PR that adds flags (and referencing this)\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [ ] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n",
    "performed_via_github_app": null
}