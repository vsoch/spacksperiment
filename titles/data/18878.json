{
    "url": "https://api.github.com/repos/spack/spack/issues/18878",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/18878/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/18878/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/18878/events",
    "html_url": "https://github.com/spack/spack/issues/18878",
    "id": 706769937,
    "node_id": "MDU6SXNzdWU3MDY3Njk5Mzc=",
    "number": 18878,
    "title": "Installation issue: openbabel",
    "user": {
        "login": "omsai",
        "id": 166624,
        "node_id": "MDQ6VXNlcjE2NjYyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/166624?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/omsai",
        "html_url": "https://github.com/omsai",
        "followers_url": "https://api.github.com/users/omsai/followers",
        "following_url": "https://api.github.com/users/omsai/following{/other_user}",
        "gists_url": "https://api.github.com/users/omsai/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/omsai/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/omsai/subscriptions",
        "organizations_url": "https://api.github.com/users/omsai/orgs",
        "repos_url": "https://api.github.com/users/omsai/repos",
        "events_url": "https://api.github.com/users/omsai/events{/privacy}",
        "received_events_url": "https://api.github.com/users/omsai/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-09-23T00:16:45Z",
    "updated_at": "2020-09-23T00:16:45Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\n\r\nOpen Babel 3.0.0 and the latest 3.1.1 automagically detects the system wxwidgets and link to GTK2 libraries on RedHat 6, which causes the fun failures below.  This can be disabled in upstream's CMake via BUILD_GUI=OFF.  Good practice in packaging is not letting these options up to chance and having the wrapper - spack's variants - control them.  But I can't think why someone would want the openbabel GUI on HPC, so it might make sense to simply hard code disable the GUI.\r\n\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install openbabel\r\n...\r\n==> Installing openbabel                                                                                                 \r\n==> No binary for openbabel found: installing from source                                                                  \r\nFetching tags only, you probably meant:                                                                                   \r\n  git fetch --tags                                                                                                            \r\n==> openbabel: Executing phase: 'cmake'                                        \r\n==> openbabel: Executing phase: 'build'                                                        \r\n==> Error: ProcessError: Command exited with status 2:                                                                                                            \r\n    'make' '-j12'                                                                              \r\n                                                                                               \r\n10 errors found in build log:                                                  \r\n...\r\n  >> 2658    /usr/lib64/libgdk-x11-2.0.so.0: undefined reference to `cairo_xlib_surface_create_for_bitmap'                                                       \r\n  >> 2659    /usr/lib64/libgdk-x11-2.0.so.0: undefined reference to `cairo_xlib_surface_create'                                                  \r\n  >> 2660    /usr/lib64/libgtk-x11-2.0.so.0: undefined reference to `cairo_pdf_surface_set_size'                                                 \r\n  >> 2661    /usr/lib64/libgtk-x11-2.0.so.0: undefined reference to `cairo_pdf_surface_create_for_stream'                                                                                    \r\n  >> 2662    /usr/lib64/libgtk-x11-2.0.so.0: undefined reference to `cairo_pdf_surface_create'                                                   \r\n  >> 2663    /usr/lib64/libgdk-x11-2.0.so.0: undefined reference to `cairo_xlib_surface_set_size'                                                        \r\n  >> 2664    collect2: error: ld returned 1 exit status                        \r\n  >> 2665    make[2]: *** [bin/obgui] Error 1                                  \r\n     2666    make[2]: Leaving directory `/tmp/pan14001admin/spack-stage/spack-stage-openbabel-3.0.0-mcjgl4w4ermkcy5xj3ras2ovwvooj7gh/spack-build=mcjgl4w'\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.15.4-1045-678e9f5\r\n* **Python:** 3.4.5\r\n* **Platform:** linux-rhel6-westmere\r\n```\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n```yaml\r\n# This is a Spack Environment file.\r\n#\r\n# It describes a set of packages to be installed, along with\r\n# configuration settings.\r\nspack:\r\n  # add package specs to the `specs` list\r\n  specs:\r\n  - librsvg@2.50.0 ^cairo +pdf\r\n  - openbabel@3.1.1\r\n  packages:\r\n    autoconf:\r\n      buildable: false\r\n      externals:\r\n      - spec: autoconf@2.69\r\n        prefix: /apps2/autoconf/2.69\r\n      target: []\r\n      compiler: []\r\n      version: []\r\n      providers: {}\r\n    automake:\r\n      buildable: false\r\n      externals:\r\n      - spec: automake@1.16\r\n        prefix: /apps2/automake/1.16\r\n      target: []\r\n      compiler: []\r\n      version: []\r\n      providers: {}\r\n    bison:\r\n      buildable: false\r\n      externals:\r\n      - spec: bison@2.4.1\r\n        prefix: /usr\r\n      target: []\r\n      providers: {}\r\n      version: []\r\n      compiler: []\r\n    cmake:\r\n      buildable: false\r\n      externals:\r\n      - spec: cmake@3.10.2\r\n        prefix: /apps2/cmake/3.10.2\r\n      target: []\r\n      compiler: []\r\n      version: []\r\n      providers: {}\r\n    findutils:\r\n      buildable: false\r\n      externals:\r\n      - spec: findutils@4.4.2\r\n        prefix: /usr\r\n      target: []\r\n      providers: {}\r\n      version: []\r\n      compiler: []\r\n    freetype:\r\n      buildable: false\r\n      externals:\r\n      - spec: freetype@2.9.1\r\n        prefix: /apps2/freetype/2.9.1\r\n      version: []\r\n      providers: {}\r\n      compiler: []\r\n      target: []\r\n    gmake:\r\n      buildable: false\r\n      externals:\r\n      - spec: gmake@3.81\r\n        prefix: /usr\r\n      target: []\r\n      compiler: []\r\n      version: []\r\n      providers: {}\r\n    libxslt:\r\n      buildable: false\r\n      externals:\r\n      - spec: libxslt@1.1.29\r\n        prefix: /apps2/libxslt/1.1.29\r\n      target: []\r\n      providers: {}\r\n      compiler: []\r\n      version: []\r\n    intltool:\r\n      buildable: false\r\n      externals:\r\n      - spec: intltool@0.51.0\r\n        prefix: /apps2/intltool/0.51.0\r\n      target: []\r\n      providers: {}\r\n      compiler: []\r\n      version: []\r\n    perl:\r\n      buildable: false\r\n      externals:\r\n      - spec: perl@5.24.1\r\n        prefix: /apps2/perl/5.24.1\r\n      providers: {}\r\n      version: []\r\n      compiler: []\r\n      target: []\r\n    rust:\r\n      buildable: false\r\n      externals:\r\n      - spec: rust@1.46.0\r\n        prefix: /home/pan14001admin/.rustup/toolchains/stable-x86_64-unknown-linux-gnu\r\n      target: []\r\n      providers: {}\r\n      compiler: []\r\n      version: []\r\n    zlib:\r\n      buildable: false\r\n      externals:\r\n      - spec: zlib@1.2.8\r\n        prefix: /apps2/zlib/1.2.8\r\n      compiler: []\r\n      providers: {}\r\n      target: []\r\n      version: []\r\n  view: false\r\n```\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/5264674/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/5264675/spack-build-env.txt)\r\n\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}