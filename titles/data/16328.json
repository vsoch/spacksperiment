{
    "url": "https://api.github.com/repos/spack/spack/issues/16328",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16328/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16328/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16328/events",
    "html_url": "https://github.com/spack/spack/issues/16328",
    "id": 607733809,
    "node_id": "MDU6SXNzdWU2MDc3MzM4MDk=",
    "number": 16328,
    "title": "Installation issue: boost@1.72.0%intel@19.0.4",
    "user": {
        "login": "nicholas-sly",
        "id": 17838741,
        "node_id": "MDQ6VXNlcjE3ODM4NzQx",
        "avatar_url": "https://avatars.githubusercontent.com/u/17838741?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nicholas-sly",
        "html_url": "https://github.com/nicholas-sly",
        "followers_url": "https://api.github.com/users/nicholas-sly/followers",
        "following_url": "https://api.github.com/users/nicholas-sly/following{/other_user}",
        "gists_url": "https://api.github.com/users/nicholas-sly/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/nicholas-sly/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nicholas-sly/subscriptions",
        "organizations_url": "https://api.github.com/users/nicholas-sly/orgs",
        "repos_url": "https://api.github.com/users/nicholas-sly/repos",
        "events_url": "https://api.github.com/users/nicholas-sly/events{/privacy}",
        "received_events_url": "https://api.github.com/users/nicholas-sly/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-04-27T17:47:52Z",
    "updated_at": "2020-11-20T06:46:14Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install valgrind@3.15.0%intel@19.0.4\r\n==> [2020-04-27-10:32:18.149842, 35856] './bootstrap.sh' '--prefix=/path/to/spack-installs/linux-rhel7-broadwell/intel-19.0.4/boost-1.72.0-paj7msoyrsorrsjt3imba7uc2kvrnun3' '--with-toolset=intel-linux' '--with-libraries=thread,wave,date_time,iostreams,serialization,test,locale,math,graph,atomic,log,random,system,chrono,timer,filesystem,exception,regex,program_options'\r\nBuilding Boost.Build engine with toolset intel-linux...\r\nFailed to build Boost.Build build engine\r\nConsult 'bootstrap.log' for more details\r\n$ cat /path/to/stage/bootstrap.log\r\nFound /path/to/spack/lib/spack/env/intel/icpc in environment\r\n###\r\n###\r\n### Using 'intel-linux' toolset.\r\n###\r\n###\r\n/path/to/spack/lib/spack/env/intel/icpc --version\r\nicpc (ICC) 19.0.4.243 20190416\r\nCopyright (C) 1985-2019 Intel Corporation.  All rights reserved.\r\n\r\n###\r\n###\r\n/path/to/spack/lib/spack/env/intel/icpc -xc++ -O3 -s -DNDEBUG builtins.cpp class.cpp command.cpp compile.cpp constants.cpp cwd.cpp debug.cpp debugger.cpp execcmd.cpp filesys.cpp frames.cpp function.cpp glob.cpp hash.cpp hcache.cpp hdrmacro.cpp headers.cpp jam.cpp jambase.cpp jamgram.cpp lists.cpp make.cpp make1.cpp md5.cpp mem.cpp modules.cpp native.cpp object.cpp option.cpp output.cpp parse.cpp pathsys.cpp regexp.cpp rules.cpp scan.cpp search.cpp strings.cpp subst.cpp sysinfo.cpp timestamp.cpp variable.cpp w32_getreg.cpp modules/order.cpp modules/path.cpp modules/property-set.cpp modules/regex.cpp modules/sequence.cpp modules/set.cpp execunix.cpp fileunix.cpp pathunix.cpp -o b2\r\nIn file included from jam.cpp(137):\r\nsysinfo.h(41): warning #3500: field initializers are a C++11 feature\r\n          unsigned int cpu_core_count_ = 0;\r\n                                       ^\r\n\r\nIn file included from sysinfo.cpp(6):\r\nsysinfo.h(41): warning #3500: field initializers are a C++11 feature\r\n          unsigned int cpu_core_count_ = 0;\r\n                                       ^\r\n\r\nIn file included from usr/bin/../include/c++/4.8.5/thread(35),\r\n                 from sysinfo.cpp(10):\r\n/usr/bin/../include/c++/4.8.5/bits/c++0x_warning.h(32): error: #error directive: This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n  #error This file requires compiler and library support for the \\\r\n   ^\r\n\r\nsysinfo.cpp(93): error: name followed by \"::\" must be a class or namespace name\r\n          return std::thread::hardware_concurrency();\r\n                      ^\r\n\r\ncompilation aborted for sysinfo.cpp (code 2)\r\n...\r\n```\r\n\r\n### Information on your system\r\n\r\n```console\r\n-bash-4.2$ spack debug report\r\n* **Spack:** 0.14.2-700-395e91d\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel7-broadwell\r\n```\r\n\r\nThe concretized spec that led to this problem is:\r\n```console\r\n==> Concretized valgrind@3.15.0%intel@19.0.4~ubsan ^intel-parallel-studio@cluster.2019.4+ilp64+mpi+newdtags ^libpciaccess@0.13.5%gcc\r\n -   djquck5  valgrind@3.15.0%intel@19.0.4+boost+lto+mpi+only64bit~ubsan arch=linux-rhel7-broadwell\r\n -   paj7mso      ^boost@1.72.0%intel@19.0.4+atomic+chrono~clanglibcpp~container~context~coroutine cxxstd=98 +date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout visibility=hidden +wave arch=linux-rhel7-broadwell\r\n -   dd5gr5m          ^bzip2@1.0.8%intel@19.0.4+shared arch=linux-rhel7-broadwell\r\n -   2qydus5              ^diffutils@3.7%intel@19.0.4 arch=linux-rhel7-broadwell\r\n -   veuie37                  ^libiconv@1.16%intel@19.0.4 arch=linux-rhel7-broadwell\r\n -   q4ku3nw          ^zlib@1.2.11%intel@19.0.4+optimize+pic+shared arch=linux-rhel7-broadwell\r\n -   bebpfbn      ^intel-parallel-studio@cluster.2019.4%intel@19.0.4~advisor auto_dispatch=none ~clck+daal~gdb+ilp64~inspector+ipp~itac+mkl+mpi+newdtags+rpath+shared+tbb threads=none ~vtune arch=linux-rhel7-broadwell\r\n```\r\n\r\n### Additional information\r\n@hainest \r\n\r\nThe crux of the issue seems to be that the intel installation is using the system GCC's standard c++ library (gcc@4.8.5) and the boost installation is trying to use C++11 features despite the `cxxstd` variant being on the default value of `98`.  The calls to the intel compiler are also wrapped in a couple layers of scripts in the boost source (`bootstrap.sh` and `tools/build/src/engine/build.sh`) that make pointing the intel compiler at a different c++ standard library (say, the gcc@7.4.0 that the Intel compiler with which Intel was 'installed').  So, there are really two issues:\r\n\r\n- Boost tries to use C++11 features despite being told to build only using C++98 features\r\n- Boost provides no avenue for specifying the C++ standard library to use when building with Intel\r\n\r\nSolving either one will allow me to proceed with my installations, but solving both should probably be done.\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}