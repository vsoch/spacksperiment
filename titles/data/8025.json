{
    "url": "https://api.github.com/repos/spack/spack/issues/8025",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8025/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8025/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8025/events",
    "html_url": "https://github.com/spack/spack/issues/8025",
    "id": 320345458,
    "node_id": "MDU6SXNzdWUzMjAzNDU0NTg=",
    "number": 8025,
    "title": "tophat: build error",
    "user": {
        "login": "peetsv",
        "id": 32349688,
        "node_id": "MDQ6VXNlcjMyMzQ5Njg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32349688?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peetsv",
        "html_url": "https://github.com/peetsv",
        "followers_url": "https://api.github.com/users/peetsv/followers",
        "following_url": "https://api.github.com/users/peetsv/following{/other_user}",
        "gists_url": "https://api.github.com/users/peetsv/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/peetsv/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/peetsv/subscriptions",
        "organizations_url": "https://api.github.com/users/peetsv/orgs",
        "repos_url": "https://api.github.com/users/peetsv/repos",
        "events_url": "https://api.github.com/users/peetsv/events{/privacy}",
        "received_events_url": "https://api.github.com/users/peetsv/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-05-04T16:45:28Z",
    "updated_at": "2018-05-25T01:04:04Z",
    "closed_at": "2018-05-25T01:04:04Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Summary: I am getting an error message when building tophat v2.1.1 that seems a bit strange to me.\r\n\r\n### Expected Result\r\n\r\nclean build\r\n```\r\n==> libsigsegv is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/libsigsegv-2.11-ej4dtzvxydoockkjzgltuwbncl3qxcfx\r\n==> m4 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/m4-1.4.18-hnrf4xgkkkxxlojbhjmk7ktfh4ubxoiu\r\n==> pkgconf is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/pkgconf-1.4.0-5orwkhqi6i42pmyxjubzqecgauyt5m53\r\n==> ncurses is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/ncurses-6.0-tymhqxlvcy5eduud5ijnohpkuinoi7n4\r\n==> readline is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/readline-7.0-6a33hh42gihqevhhwm7ddsklhu7xwkgk\r\n==> gdbm is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/gdbm-1.14.1-nu73hb3bwwumnr5pe7n2ovwpvn3lj32c\r\n==> perl is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/perl-5.24.1-hyqxea7h2rxfs2ttqf3irt2ebd2v7trx\r\n==> autoconf is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/autoconf-2.69-qeckaewd7y2r32gevcgri3nkihu5jwjl\r\n==> automake is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/automake-1.15.1-vmtyzl2ksbqod7v5hh3hrf24lcn7u7cm\r\n==> bzip2 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/bzip2-1.0.6-egkg2fbrcljkai2d23pgrq7wzeg2k5p5\r\n==> zlib is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/zlib-1.2.11-euf4keckd7zopxedqa5pp37smh4v2aa4\r\n==> boost is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/boost-1.63.0-qn7eohmlu7in7mxuvnlexd5jd5nsnwiw\r\n==> intel-tbb is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/intel-tbb-2018.2-5m5j2t2tjmtvctu735trdii4p6zgladf\r\n==> openssl is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/openssl-1.0.2n-b2pwlezjpb63d4lvpnb6hppps7qw4cap\r\n==> sqlite is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/sqlite-3.18.0-ss65uo3pidaok5xk6ggbrastms2ludx4\r\n==> python is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/python-2.7.13-7c6oeana5b37cz62oxrsfzvnrmaxejjm\r\n==> bowtie2 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/bowtie2-2.3.0-n7meksodlwwsisku3kgyrsp6i2muud2w\r\n==> libtool is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/libtool-2.4.6-vwgxyfslc5ia6zlesisvn2e3mwvpduaz\r\n==> Installing tophat\r\n==> Fetching MIRROR_DIR/mirror/tophat/tophat-2.1.1.tar.gz\r\n==> Staging archive: WORKING_DIR/var/spack/stage/tophat-2.1.1-hfre5ftljlya2rcpykr6rksjltlibut7/v2.1.1.tar.gz\r\n==> Created stage in WORKING_DIR/var/spack/stage/tophat-2.1.1-hfre5ftljlya2rcpykr6rksjltlibut7\r\n==> No patches needed for tophat\r\n==> Building tophat [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Executing phase: 'install'\r\n==> Successfully installed tophat\r\n  Fetch: 0.04s.  Build: 1m 41.22s.  Total: 1m 41.26s.\r\n[+] WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/tophat-2.1.1-hfre5ftljlya2rcpykr6rksjltlibut7\r\n```\r\n\r\n### Actual Result\r\n```\r\n==> libsigsegv is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/libsigsegv-2.11-ej4dtzvxydoockkjzgltuwbncl3qxcfx\r\n==> m4 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/m4-1.4.18-hnrf4xgkkkxxlojbhjmk7ktfh4ubxoiu\r\n==> pkgconf is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/pkgconf-1.4.0-5orwkhqi6i42pmyxjubzqecgauyt5m53\r\n==> ncurses is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/ncurses-6.0-tymhqxlvcy5eduud5ijnohpkuinoi7n4\r\n==> readline is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/readline-7.0-6a33hh42gihqevhhwm7ddsklhu7xwkgk\r\n==> gdbm is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/gdbm-1.14.1-nu73hb3bwwumnr5pe7n2ovwpvn3lj32c\r\n==> perl is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/perl-5.24.1-hyqxea7h2rxfs2ttqf3irt2ebd2v7trx\r\n==> autoconf is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/autoconf-2.69-qeckaewd7y2r32gevcgri3nkihu5jwjl\r\n==> automake is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/automake-1.16.1-2vuoeb2m3uan3kw2sodpnuuqfe2og6dg\r\n==> bzip2 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/bzip2-1.0.6-egkg2fbrcljkai2d23pgrq7wzeg2k5p5\r\n==> zlib is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/zlib-1.2.11-euf4keckd7zopxedqa5pp37smh4v2aa4\r\n==> boost is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/boost-1.63.0-qn7eohmlu7in7mxuvnlexd5jd5nsnwiw\r\n==> intel-tbb is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/intel-tbb-2018.2-5m5j2t2tjmtvctu735trdii4p6zgladf\r\n==> openssl is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/openssl-1.0.2n-b2pwlezjpb63d4lvpnb6hppps7qw4cap\r\n==> sqlite is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/sqlite-3.18.0-ss65uo3pidaok5xk6ggbrastms2ludx4\r\n==> python is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/python-2.7.13-52dgd34kwi53hcwhmkggokoplqxzzmfp\r\n==> bowtie2 is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/bowtie2-2.3.0-5de2lkd5d2hlgs5w6hpaqcfyh2ryfbc6\r\n==> libtool is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/libtool-2.4.6-vwgxyfslc5ia6zlesisvn2e3mwvpduaz\r\n==> xz is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/xz-5.2.3-ehlxwhosxgdfbduwx3nk5zzxmo4qhmaq\r\n==> htslib is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/htslib-1.6-awaj7rgiodnj7bqnqv3reut4wp765ryk\r\n==> samtools is already installed in WORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/samtools-1.6-tif7gm6nzido4g5pgwbbdu45dm7lyiij\r\n==> Installing tophat\r\n==> Fetching file://MIRROR_DIR/mirror/tophat/tophat-2.1.1.tar.gz\r\n==> Staging archive: WORKING_DIR/var/spack/stage/tophat-2.1.1-dw5nauo4swl52tqp44hc4oxqufbscm3s/v2.1.1.tar.gz\r\n==> Created stage in WORKING_DIR/var/spack/stage/tophat-2.1.1-dw5nauo4swl52tqp44hc4oxqufbscm3s\r\n==> No patches needed for tophat\r\n==> Building tophat [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make'\r\n\r\n11 errors found in build log:\r\n     31     autoreconf: running: WORKING_DIR/opt/spack/linux-centos7-x8\r\n            6_64/gcc-5.4.0/autoconf-2.69-qeckaewd7y2r32gevcgri3nkihu5jwjl/bin/a\r\n            utoconf --include=WORKING_DIR/opt/spack/linux-centos7-x86_6\r\n            4/gcc-5.4.0/pkgconf-1.4.0-5orwkhqi6i42pmyxjubzqecgauyt5m53/share/ac\r\n            local --force\r\n     32     fatal: Not a git repository (or any of the parent directories): .gi\r\n            t\r\n     33     autoreconf: running: WORKING_DIR/opt/spack/linux-centos7-x8\r\n            6_64/gcc-5.4.0/autoconf-2.69-qeckaewd7y2r32gevcgri3nkihu5jwjl/bin/a\r\n            utoheader --include=WORKING_DIR/opt/spack/linux-centos7-x86\r\n            _64/gcc-5.4.0/pkgconf-1.4.0-5orwkhqi6i42pmyxjubzqecgauyt5m53/share/\r\n            aclocal --force\r\n     34     fatal: Not a git repository (or any of the parent directories): .gi\r\n            t\r\n     35     autoreconf: running: automake --add-missing --copy --force-missing\r\n     36     fatal: Not a git repository (or any of the parent directories): .gi\r\n            t\r\n  >> 37     configure.ac:20: installing './ar-lib'\r\n  >> 38     configure.ac:20: installing './compile'\r\n  >> 39     configure.ac:74: installing './config.guess'\r\n  >> 40     configure.ac:74: installing './config.sub'\r\n  >> 41     configure.ac:8: installing './install-sh'\r\n  >> 42     configure.ac:8: installing './missing'\r\n     43     src/Makefile.am: installing './depcomp'\r\n     44     autoreconf: Leaving directory `.'\r\n     45     ==> Executing phase: 'configure'\r\n     46     ==> 'WORKING_DIR/var/spack/stage/tophat-2.1.1-dw5nauo4swl52\r\n            tqp44hc4oxqufbscm3s/tophat-2.1.1/configure' '--prefix=WORKING_DIR\r\n            ck/wip/opt/spack/linux-centos7-x86_64/gcc-5.4.0/tophat-2.1.1-dw5nau\r\n            o4swl52tqp44hc4oxqufbscm3s' '--with-boost=WORKING_DIR/opt/s\r\n            pack/linux-centos7-x86_64/gcc-5.4.0/boost-1.63.0-qn7eohmlu7in7mxuvn\r\n            lexd5jd5nsnwiw'\r\n     47     checking for a BSD-compatible install... /usr/bin/install -c\r\n     48     checking whether build environment is sane... yes\r\n\r\n     ...\r\n\r\n     252    gcc -c -g -Wall -O2  -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -\r\n            D_USE_KNETFILE -D_CURSES_LIB=0 -I. phase.c -o phase.o\r\n     253    gcc -c -g -Wall -O2  -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -\r\n            D_USE_KNETFILE -D_CURSES_LIB=0 -I. bam2depth.c -o bam2depth.o\r\n     254    gcc -g -Wall -O2  -o samtools_0.1.18 bam_tview.o bam_plcmd.o sam_vi\r\n            ew.o bam_rmdup.o bam_rmdupse.o bam_mate.o bam_stat.o bam_color.o ba\r\n            mtk.o kaln.o bam2bcf.o bam2bcf_indel.o errmod.o sample.o cut_target\r\n            .o phase.o bam2depth.o -Lbcftools  libbam.a -lbcf -lm -lz #-lcurses\r\n     255    make[3]: Leaving directory `/tmp/peetsv/spack-stage/spack-stage-f1X\r\n            t85/tophat-2.1.1/src/samtools-0.1.18'\r\n     256    WORKING_DIR/lib/spack/env/gcc/gcc  -Wall -Wno-strict-aliasi\r\n            ng -g -gdwarf-2 -Wuninitialized  -O3  -DNDEBUG  -L./samtools-0.1.18\r\n             -LWORKING_DIR/opt/spack/linux-centos7-x86_64/gcc-5.4.0/boo\r\n            st-1.63.0-qn7eohmlu7in7mxuvnlexd5jd5nsnwiw/lib  -o samtools_0.1.18\r\n              -lz\r\n     257    /lib/../lib64/crt1.o: In function `_start':\r\n  >> 258    (.text+0x20): undefined reference to `main'\r\n  >> 259    collect2: error: ld returned 1 exit status\r\n  >> 260    make[2]: *** [samtools_0.1.18] Error 1\r\n     261    make[2]: Leaving directory `/tmp/peetsv/spack-stage/spack-stage-f1X\r\n            t85/tophat-2.1.1/src'\r\n  >> 262    make[1]: *** [all-recursive] Error 1\r\n     263    make[1]: Leaving directory `/tmp/peetsv/spack-stage/spack-stage-f1X\r\n            t85/tophat-2.1.1'\r\n  >> 264    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  WORKING_DIR/var/spack/stage/tophat-2.1.1-dw5nauo4swl52tqp44hc4oxqufbscm3s/tophat-2.1.1/spack-build.out\r\n```\r\nThis suggests a dependency issue with samtools, though when I added the dependency to the tophat package.py and rebuilding, the same error was recreated.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install tophat\r\n```\r\n\r\n### Information on your system\r\nlinux-centos7-x86_64/gcc-5.4.0",
    "performed_via_github_app": null
}