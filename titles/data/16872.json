{
    "url": "https://api.github.com/repos/spack/spack/issues/16872",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16872/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16872/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16872/events",
    "html_url": "https://github.com/spack/spack/issues/16872",
    "id": 627631742,
    "node_id": "MDU6SXNzdWU2Mjc2MzE3NDI=",
    "number": 16872,
    "title": "Installation issue: openmpi",
    "user": {
        "login": "anderbubble",
        "id": 350294,
        "node_id": "MDQ6VXNlcjM1MDI5NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/350294?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/anderbubble",
        "html_url": "https://github.com/anderbubble",
        "followers_url": "https://api.github.com/users/anderbubble/followers",
        "following_url": "https://api.github.com/users/anderbubble/following{/other_user}",
        "gists_url": "https://api.github.com/users/anderbubble/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/anderbubble/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/anderbubble/subscriptions",
        "organizations_url": "https://api.github.com/users/anderbubble/orgs",
        "repos_url": "https://api.github.com/users/anderbubble/repos",
        "events_url": "https://api.github.com/users/anderbubble/events{/privacy}",
        "received_events_url": "https://api.github.com/users/anderbubble/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-05-30T02:20:11Z",
    "updated_at": "2020-06-01T22:33:25Z",
    "closed_at": "2020-06-01T22:33:25Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install openmpi@3.1.5 %gcc@8.4.0\r\n[...]\r\n==> Error: KeyError: 'No spec with name psm2 in openmpi@3.1.5%gcc@8.4.0+atomics~cuda+cxx+cxx_exceptions~gpfs~java+legacylaunchers~memchecker+pmi+runpath~sqlite3+static+thread_multiple+vt fabrics=libfabric,psm2,ucx,verbs scheduler\r\ns=slurm arch=linux-rhel7-haswell ^autoconf@2.69%gcc@8.4.0 arch=linux-rhel7-haswell ^autoconf-archive@2019.01.06%gcc@8.4.0 arch=linux-rhel7-haswell ^automake@1.16.2%gcc@8.4.0 arch=linux-rhel7-haswell ^bison@3.4.2%gcc@8.4.0 patches\r\n=89aa362716d898edd0b5c6ae4208dc1b6992887774848a09e8021afd676f7d61 arch=linux-rhel7-haswell ^bzip2@1.0.8%gcc@8.4.0+shared arch=linux-rhel7-haswell ^cmake@3.16.5%gcc@8.4.0+doc+ncurses+openssl+ownlibs~qt patches=1c540040c7e203dd8e27\r\naa20345ecb07fe06570d56410a24a266ae570b1c4c39 arch=linux-rhel7-haswell ^curl@7.68.0%gcc@8.4.0~darwinssl~gssapi~libssh~libssh2~nghttp2 arch=linux-rhel7-haswell ^diffutils@3.7%gcc@8.4.0 arch=linux-rhel7-haswell ^expat@2.2.9%gcc@8.4.\r\n0+libbsd arch=linux-rhel7-haswell ^findutils@4.6.0%gcc@8.4.0 patches=84b916c0bf8c51b7e7b28417692f0ad3e7030d1f3c248ba77c42ede5c1c5d11e,bd9e4e5cc280f9753ae14956c4e4aa17fe7a210f55dd6c84aa60b12d106d47a2 arch=linux-rhel7-haswell ^flex\r\n@2.6.4%gcc@8.4.0+lex patches=09c22e5c6fef327d3e48eb23f0d610dcd3a35ab9207f12e0f875701c677978d3 arch=linux-rhel7-haswell ^gawk@5.0.1%gcc@8.4.0 arch=linux-rhel7-haswell ^gdbm@1.18.1%gcc@8.4.0 arch=linux-rhel7-haswell ^gettext@0.20.2\r\n%gcc@8.4.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-rhel7-haswell ^glib@2.64.3%gcc@8.4.0~libmount patches=63e5a3efbdaf67cfb9707a20fd6e21e8826d1c785b20c6ec326f6d2b116950fc tracing=none arch=linux-rhel7-haswell ^gmp@\r\n6.1.2%gcc@8.4.0 arch=linux-rhel7-haswell ^help2man@1.47.11%gcc@8.4.0 arch=linux-rhel7-haswell ^hwloc@1.11.11%gcc@8.4.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci+shared arch=linux-rhel7-haswell ^json-c@0.13.1%gcc@8.4.0 arch=li\r\nnux-rhel7-haswell ^libbsd@0.10.0%gcc@8.4.0 arch=linux-rhel7-haswell ^libevent@2.1.8%gcc@8.4.0+openssl arch=linux-rhel7-haswell ^libfabric@1.9.1%gcc@8.4.0~kdreg fabrics=sockets,tcp,udp arch=linux-rhel7-haswell ^libffi@3.3%gcc@8.4.\r\n0 arch=linux-rhel7-haswell ^libgcrypt@1.8.5%gcc@8.4.0 arch=linux-rhel7-haswell ^libgpg-error@1.37%gcc@8.4.0 arch=linux-rhel7-haswell ^libiconv@1.16%gcc@8.4.0 arch=linux-rhel7-haswell ^libnl@3.3.0%gcc@8.4.0 arch=linux-rhel7-haswel\r\nl ^libpciaccess@0.13.5%gcc@8.4.0 arch=linux-rhel7-haswell ^libsigsegv@2.12%gcc@8.4.0 arch=linux-rhel7-haswell ^libtool@2.4.6%gcc@8.4.0 arch=linux-rhel7-haswell ^libxml2@2.9.10%gcc@8.4.0~python arch=linux-rhel7-haswell ^lz4@1.9.2%\r\ngcc@8.4.0 arch=linux-rhel7-haswell ^m4@1.4.18%gcc@8.4.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-rhel7-haswell ^m\r\neson@0.54.2%gcc@8.4.0 patches=45c35fce59361a994c49f8d3f5fd2595fc1b181ba4b5e219b7563752dd879a3b arch=linux-rhel7-haswell ^mpfr@4.0.2%gcc@8.4.0 patches=8f15fd27ab65341a60d724d594897d32f4597ddf642d0dc121995e2150181b0c arch=linux-rhe\r\nl7-haswell ^munge@0.5.14%gcc@8.4.0 localstatedir=PREFIX/var arch=linux-rhel7-haswell ^ncurses@6.2%gcc@8.4.0~symlinks+termlib arch=linux-rhel7-haswell ^ninja@1.10.0%gcc@8.4.0 arch=linux-rhel7-haswell ^numactl@2.0.12%gcc@8.4.0 arch\r\n=linux-rhel7-haswell ^openssl@1.1.1g%gcc@8.4.0+systemcerts arch=linux-rhel7-haswell ^pcre@8.44%gcc@8.4.0~jit+multibyte+utf arch=linux-rhel7-haswell ^perl@5.30.1%gcc@8.4.0+cpanm+shared+threads arch=linux-rhel7-haswell ^pkgconf@1.6\r\n.3%gcc@8.4.0 arch=linux-rhel7-haswell ^pmix@3.1.3%gcc@8.4.0+pmi_backwards_compatibility arch=linux-rhel7-haswell ^py-alabaster@0.7.12%gcc@8.4.0 arch=linux-rhel7-haswell ^py-babel@2.7.0%gcc@8.4.0 arch=linux-rhel7-haswell ^py-certi\r\nfi@2019.9.11%gcc@8.4.0 arch=linux-rhel7-haswell ^py-chardet@3.0.4%gcc@8.4.0 arch=linux-rhel7-haswell ^py-docutils@0.15.2%gcc@8.4.0 arch=linux-rhel7-haswell ^py-idna@2.8%gcc@8.4.0 arch=linux-rhel7-haswell ^py-imagesize@1.1.0%gcc@8\r\n.4.0 arch=linux-rhel7-haswell ^py-jinja2@2.10.3%gcc@8.4.0 arch=linux-rhel7-haswell ^py-markupsafe@1.1.1%gcc@8.4.0 arch=linux-rhel7-haswell ^py-packaging@19.2%gcc@8.4.0 arch=linux-rhel7-haswell ^py-pygments@2.6.1%gcc@8.4.0 arch=li\r\nnux-rhel7-haswell ^py-pyparsing@2.4.2%gcc@8.4.0 arch=linux-rhel7-haswell ^py-pytest-runner@5.1%gcc@8.4.0 arch=linux-rhel7-haswell ^py-pytz@2019.3%gcc@8.4.0 arch=linux-rhel7-haswell ^py-requests@2.22.0%gcc@8.4.0 arch=linux-rhel7-h\r\naswell ^py-setuptools@46.1.3%gcc@8.4.0 arch=linux-rhel7-haswell ^py-setuptools-scm@3.3.3%gcc@8.4.0 arch=linux-rhel7-haswell ^py-six@1.14.0%gcc@8.4.0 arch=linux-rhel7-haswell ^py-snowballstemmer@2.0.0%gcc@8.4.0 arch=linux-rhel7-ha\r\nswell ^py-sphinx@3.0.0%gcc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-applehelp@1.0.1%gcc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-devhelp@1.0.1%gcc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-htmlhelp@1.0.2%gc\r\nc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-jsmath@1.0.1%gcc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-qthelp@1.0.2%gcc@8.4.0 arch=linux-rhel7-haswell ^py-sphinxcontrib-serializinghtml@1.1.3%gcc@8.4.0 arch=linux-rhe\r\nl7-haswell ^py-urllib3@1.25.6%gcc@8.4.0~secure~socks arch=linux-rhel7-haswell ^python@3.7.7%gcc@8.4.0+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zli\r\nb arch=linux-rhel7-haswell ^rdma-core@20%gcc@8.4.0 build_type=RelWithDebInfo arch=linux-rhel7-haswell ^readline@8.0%gcc@8.4.0 arch=linux-rhel7-haswell ^slurm@19-05-5-1%gcc@8.4.0~gtk~hdf5~hwloc~mariadb+pmix+readline sysconfdir=PRE\r\nFIX/etc arch=linux-rhel7-haswell ^sqlite@3.31.1%gcc@8.4.0+column_metadata+fts~functions~rtree arch=linux-rhel7-haswell ^tar@1.32%gcc@8.4.0 arch=linux-rhel7-haswell ^texinfo@6.5%gcc@8.4.0 patches=12f6edb0c6b270b8c8dba2ce17998c580d\r\nb01182d871ee32b7b6e4129bd1d23a,1732115f651cff98989cb0215d8f64da5e0f7911ebf0c13b064920f088f2ffe1 arch=linux-rhel7-haswell ^ucx@1.8.0%gcc@8.4.0~assertions~cuda~debug~gdrcopy~java~logging~optimizations~parameter_checking+pic+thread_\r\nmultiple cuda_arch=none arch=linux-rhel7-haswell ^util-macros@1.19.1%gcc@8.4.0 arch=linux-rhel7-haswell ^xz@5.2.5%gcc@8.4.0 arch=linux-rhel7-haswell ^zlib@1.2.11%gcc@8.4.0+optimize+pic+shared arch=linux-rhel7-haswell'\r\n\r\n/curc/admin/spack/lib/spack/spack/build_systems/autotools.py:440, in _activate_or_not:\r\n        437                            )\r\n        438                        return line\r\n        439                    return '--{0}-{1}'.format(deactivation_word, option_value)\r\n  >>    440                line_generator = _default_generator\r\n        441            args.append(line_generator(activated))\r\n        442        return args\r\n\r\nSee build log for details:\r\n  /scratch/local/rcops/spack-stage-openmpi-3.1.5-jxgglenos2s636rrvb4e5xwztwo5iisv/spack-build-out.txt\r\n```\r\n\r\n### Information on your system\r\n\r\nThis package is being installed as part of a spack envornment. That environment can be found at\r\n\r\nhttps://github.com/ResearchComputing/core-software/tree/sprint-ending-2020-05-11/spack/environments/spring2020\r\n\r\nNotably, there is a `packages.yaml` file here:\r\n\r\nhttps://github.com/ResearchComputing/core-software/blob/sprint-ending-2020-05-11/spack/environments/spring2020/packages.yaml\r\n\r\nWhen I am attempting to build I am using\r\n\r\n```\r\npackages:\r\n  openmpi:\r\n    variants: fabrics=psm2 schedulers=slurm +pmi +cxx +cxx_exceptions +atomics +thread_multiple +legacylaunchers ~gpfs\r\n```\r\n\r\n[spack-install-openmpi.log](https://github.com/spack/spack/files/4704951/spack-install-openmpi.log)\r\n\r\n```\r\n[spring2020] [rcops@shas0137 spring2020]$ spack debug report\r\n* **Spack:** 0.14.2-1265-9d1f71e\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel7-haswell\r\n```\r\n\r\n### Additional information\r\n\r\n- [spack-build-out.txt](https://github.com/spack/spack/files/4704954/spack-build-out.txt)\r\n- [spack-build-env.txt](https://github.com/spack/spack/files/4704955/spack-build-env.txt)\r\n\r\n@hppritcha \r\n\r\n### General information\r\n\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}