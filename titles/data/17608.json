{
    "url": "https://api.github.com/repos/spack/spack/issues/17608",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17608/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17608/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17608/events",
    "html_url": "https://github.com/spack/spack/pull/17608",
    "id": 662395315,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDUzOTU2NjA1",
    "number": 17608,
    "title": "environment-views: fix bug where missing recipe/repo breaks env commands",
    "user": {
        "login": "robo-wylder",
        "id": 67443774,
        "node_id": "MDQ6VXNlcjY3NDQzNzc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/67443774?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/robo-wylder",
        "html_url": "https://github.com/robo-wylder",
        "followers_url": "https://api.github.com/users/robo-wylder/followers",
        "following_url": "https://api.github.com/users/robo-wylder/following{/other_user}",
        "gists_url": "https://api.github.com/users/robo-wylder/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/robo-wylder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robo-wylder/subscriptions",
        "organizations_url": "https://api.github.com/users/robo-wylder/orgs",
        "repos_url": "https://api.github.com/users/robo-wylder/repos",
        "events_url": "https://api.github.com/users/robo-wylder/events{/privacy}",
        "received_events_url": "https://api.github.com/users/robo-wylder/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-07-21T00:02:43Z",
    "updated_at": "2020-07-23T23:15:11Z",
    "closed_at": "2020-07-23T18:00:59Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/17608",
        "html_url": "https://github.com/spack/spack/pull/17608",
        "diff_url": "https://github.com/spack/spack/pull/17608.diff",
        "patch_url": "https://github.com/spack/spack/pull/17608.patch"
    },
    "body": "Issue:\r\nWhen a recipe or a repo has been removed from Spack and an environment\r\nis active, it causes the view activation to crash Spack before any\r\ncommands can be executed. Further, the resulting error message is not clear\r\nin explaining the issue or a workaround.\r\n\r\nSolution:\r\nCatch the error for both unknown packages and repos and emit a clear error\r\nmessage with options of what to do.\r\n\r\nAdded a `--no-env-view` flag to the main entry point to skip view activation\r\nfor cases like this. Additionally, this forces view regeneration to always start\r\nfrom scratch to ensure old links are cleaned up properly.",
    "performed_via_github_app": null
}