{
    "url": "https://api.github.com/repos/spack/spack/issues/22813",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22813/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22813/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22813/events",
    "html_url": "https://github.com/spack/spack/issues/22813",
    "id": 851665546,
    "node_id": "MDU6SXNzdWU4NTE2NjU1NDY=",
    "number": 22813,
    "title": "Installation issue: intel-oneapi-compilers",
    "user": {
        "login": "hvds",
        "id": 603041,
        "node_id": "MDQ6VXNlcjYwMzA0MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/603041?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hvds",
        "html_url": "https://github.com/hvds",
        "followers_url": "https://api.github.com/users/hvds/followers",
        "following_url": "https://api.github.com/users/hvds/following{/other_user}",
        "gists_url": "https://api.github.com/users/hvds/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hvds/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hvds/subscriptions",
        "organizations_url": "https://api.github.com/users/hvds/orgs",
        "repos_url": "https://api.github.com/users/hvds/repos",
        "events_url": "https://api.github.com/users/hvds/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hvds/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 16,
    "created_at": "2021-04-06T17:52:36Z",
    "updated_at": "2021-04-10T01:10:01Z",
    "closed_at": "2021-04-10T01:10:01Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "This is essentially my first use of spack, I've only installed patchelf before this.\r\n\r\n```console\r\n% ./spack install intel-oneapi-compilers %gcc@7.5.0\r\n[+] /src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/patchelf-0.10-4vf542wykmvpfolrytplar3gbytbwzo7\r\n==> Installing intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn\r\n==> No binary for intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn found: installing from source\r\n==> Fetching https://registrationcenter-download.intel.com/akdlm/irc_nas/17513/l_dpcpp-cpp-compiler_p_2021.1.2.63_offline.sh\r\n######################################################################### 100.0%\r\n==> Fetching https://registrationcenter-download.intel.com/akdlm/irc_nas/17508/l_fortran-compiler_p_2021.1.2.62_offline.sh\r\n######################################################################### 100.0%\r\n==> Moving resource stage\r\n        source : /tmp/hv/spack-stage/resource-fortran-installer-37thdsexf7e5iy7sgwkmmwl6nf7sokwn/spack-src/\r\n        destination : /tmp/hv/spack-stage/spack-stage-intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn/spack-src/fortran-installer\r\n==> No patches needed for intel-oneapi-compilers\r\n==> intel-oneapi-compilers: Executing phase: 'install'\r\n==> Error: Exception occurred in writer daemon!\r\nTraceback (most recent call last):\r\n  File \"/src/util/spack/lib/spack/llnl/util/tty/log.py\", line 768, in _writer_daemon\r\n    line = _retry(in_pipe.readline)()\r\n  File \"/src/util/spack/lib/spack/llnl/util/tty/log.py\", line 830, in wrapped\r\n    return function(*args, **kwargs)\r\n  File \"/usr/lib/python3.6/encodings/ascii.py\", line 26, in decode\r\n    return codecs.ascii_decode(input, self.errors)[0]\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 5: ordinal not in range(128)\r\n==> Error: BrokenPipeError: [Errno 32] Broken pipe\r\n\r\n/src/util/spack/lib/spack/spack/build_environment.py:902, in _setup_pkg_and_run:\r\n        899        tb_string = traceback.format_exc()\r\n        900\r\n        901        # build up some context from the offending package so we can\r\n  >>    902        # show that, too.\r\n        903        package_context = get_package_context(tb)\r\n        904\r\n        905        logfile = None\r\n\r\nSee build log for details:\r\n  /tmp/hv/spack-stage/spack-stage-intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn/spack-build-out.txt\r\n% \r\n```\r\n(.. but the build log appears to be truncated,  see below.)\r\n\r\n```\r\n% ./spack debug report\r\n* **Spack:** 0.16.1-2078-a4c3bc9893\r\n* **Python:** 3.6.9\r\n* **Platform:** linux-ubuntu18.04-skylake\r\n* **Concretizer:** original\r\n% \r\n```\r\n\r\n```\r\n% cat spack-build-out.txt\r\n==> intel-oneapi-compilers: Executing phase: 'install'\r\n==> [2021-04-06-17:23:11.008612] 'bash' 'l_dpcpp-cpp-compiler_p_2021.1.2.63_offline.sh' '-s' '-a' '-s' '--action' 'install' '--eula' 'accept' '--install-dir' '/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn'\r\nChecking system requirements...\r\nDone.\r\nWait while the installer is preparing...\r\nDone.\r\nLaunching the installer...\r\n% \r\n```\r\n\r\n```\r\n% cat spack-build-env.txt\r\nBASH_ENV=/home/hv/.bashrc; export BASH_ENV\r\nCC=/src/util/spack/lib/spack/env/gcc/gcc; export CC\r\nCMAKE_PREFIX_PATH=/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/patchelf-0.10-4vf542wykmvpfolrytplar3gbytbwzo7; export CMAKE_PREFIX_PATH\r\nCVS_RSH=ssh; export CVS_RSH\r\nCXX=/src/util/spack/lib/spack/env/gcc/g++; export CXX\r\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus; export DBUS_SESSION_BUS_ADDRESS\r\nDEFAULTS_PATH=/usr/share/gconf/fvwm.default.path; export DEFAULTS_PATH\r\nDESKTOP_SESSION=fvwm; export DESKTOP_SESSION\r\nDISPLAY=:1; export DISPLAY\r\nEDITOR=vi; export EDITOR\r\nFVWM_DATADIR=/usr/share/fvwm; export FVWM_DATADIR\r\nFVWM_MODULEDIR=/usr/lib/fvwm/2.6.7; export FVWM_MODULEDIR\r\nFVWM_USERDIR=/home/hv/.fvwm; export FVWM_USERDIR\r\nGDMSESSION=fvwm; export GDMSESSION\r\nGPG_AGENT_INFO=/run/user/1000/gnupg/S.gpg-agent:0:1; export GPG_AGENT_INFO\r\nGTK_MODULES=gail:atk-bridge; export GTK_MODULES\r\nHOME=/home/hv; export HOME\r\nHOSTDISPLAY=zen2:1; export HOSTDISPLAY\r\nLANG=C; export LANG\r\nLANGUAGE=en_GB:en; export LANGUAGE\r\nLC_ALL=C; export LC_ALL\r\nLESSCLOSE='/usr/bin/lesspipe %s %s'; export LESSCLOSE\r\nLESSOPEN='| /usr/bin/lesspipe %s'; export LESSOPEN\r\nLOGNAME=hv; export LOGNAME\r\nMANDATORY_PATH=/usr/share/gconf/fvwm.mandatory.path; export MANDATORY_PATH\r\n#OLDPWD=/src/util/spack; export OLDPWD\r\nPATH=/src/util/spack/lib/spack/env/gcc:/src/util/spack/lib/spack/env/case-insensitive:/src/util/spack/lib/spack/env:/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/patchelf-0.10-4vf542wykmvpfolrytplar3gbytbwzo7/bin:/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/patchelf-0.10-4vf542wykmvpfolrytplar3gbytbwzo7/bin:/home/hv/bin:/home/hv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin; export PATH\r\n#PWD=/src/util/spack/bin; export PWD\r\nQT_ACCESSIBILITY=1; export QT_ACCESSIBILITY\r\nRSYNC_RSH=ssh; export RSYNC_RSH\r\nSHELL=/bin/bash; export SHELL\r\nSHLVL=2; export SHLVL\r\nSPACK_CC=/usr/bin/gcc; export SPACK_CC\r\nSPACK_CC_RPATH_ARG=-Wl,-rpath,; export SPACK_CC_RPATH_ARG\r\nSPACK_COMPILER_SPEC=gcc@7.5.0; export SPACK_COMPILER_SPEC\r\nSPACK_CXX=/usr/bin/g++; export SPACK_CXX\r\nSPACK_CXX_RPATH_ARG=-Wl,-rpath,; export SPACK_CXX_RPATH_ARG\r\nSPACK_DEBUG_LOG_DIR=/src/util/spack/bin; export SPACK_DEBUG_LOG_DIR\r\nSPACK_DEBUG_LOG_ID=intel-oneapi-compilers-37thdse; export SPACK_DEBUG_LOG_ID\r\nSPACK_DTAGS_TO_ADD=--disable-new-dtags; export SPACK_DTAGS_TO_ADD\r\nSPACK_DTAGS_TO_STRIP=--enable-new-dtags; export SPACK_DTAGS_TO_STRIP\r\nSPACK_ENV_PATH=/src/util/spack/lib/spack/env:/src/util/spack/lib/spack/env/case-insensitive:/src/util/spack/lib/spack/env/gcc; export SPACK_ENV_PATH\r\nSPACK_F77_RPATH_ARG=-Wl,-rpath,; export SPACK_F77_RPATH_ARG\r\nSPACK_FC_RPATH_ARG=-Wl,-rpath,; export SPACK_FC_RPATH_ARG\r\nSPACK_INCLUDE_DIRS=''; export SPACK_INCLUDE_DIRS\r\nSPACK_LD_LIBRARY_PATH=''; export SPACK_LD_LIBRARY_PATH\r\nSPACK_LINKER_ARG=-Wl,; export SPACK_LINKER_ARG\r\nSPACK_LINK_DIRS=''; export SPACK_LINK_DIRS\r\nSPACK_NEW_LD_LIBRARY_PATH=''; export SPACK_NEW_LD_LIBRARY_PATH\r\nSPACK_PYTHON=/usr/bin/python3; export SPACK_PYTHON\r\nSPACK_RPATH_DIRS=/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn/lib:/src/util/spack/opt/spack/linux-ubuntu18.04-skylake/gcc-7.5.0/intel-oneapi-compilers-2021.1.2-37thdsexf7e5iy7sgwkmmwl6nf7sokwn/lib64; export SPACK_RPATH_DIRS\r\nSPACK_SHORT_SPEC='intel-oneapi-compilers@2021.1.2%gcc@7.5.0 arch=linux-ubuntu18.04-skylake/37thdse'; export SPACK_SHORT_SPEC\r\nSPACK_SYSTEM_DIRS=/bin:/usr/bin:/usr/local/bin:/bin64:/usr/bin64:/usr/local/bin64:/include:/usr/include:/usr/local/include:/lib:/usr/lib:/usr/local/lib:/lib64:/usr/lib64:/usr/local/lib64:/:/usr:/usr/local; export SPACK_SYSTEM_DIRS\r\nSPACK_TARGET_ARGS='-march=skylake -mtune=skylake'; export SPACK_TARGET_ARGS\r\nSSH_AGENT_PID=2200; export SSH_AGENT_PID\r\nSSH_AUTH_SOCK=/tmp/ssh-SGEV1R3oUMTR/agent.2133; export SSH_AUTH_SOCK\r\nTERM=xterm; export TERM\r\nUSER=hv; export USER\r\nWINDOWID=31457295; export WINDOWID\r\nWINDOWPATH=2; export WINDOWPATH\r\nXAUTHORITY=/run/user/1000/gdm/Xauthority; export XAUTHORITY\r\nXDG_CONFIG_DIRS=/etc/xdg/xdg-fvwm:/etc/xdg; export XDG_CONFIG_DIRS\r\nXDG_DATA_DIRS=/usr/share/fvwm:/home/hv/.local/share/flatpak/exports/share/:/var/lib/flatpak/exports/share/:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop; export XDG_DATA_DIRS\r\nXDG_RUNTIME_DIR=/run/user/1000; export XDG_RUNTIME_DIR\r\nXDG_SEAT=seat0; export XDG_SEAT\r\nXDG_SESSION_DESKTOP=fvwm; export XDG_SESSION_DESKTOP\r\nXDG_SESSION_ID=2; export XDG_SESSION_ID\r\nXDG_SESSION_TYPE=x11; export XDG_SESSION_TYPE\r\nXDG_VTNR=2; export XDG_VTNR\r\nXTERM_LOCALE=en_GB.UTF-8; export XTERM_LOCALE\r\nXTERM_SHELL=/bin/bash; export XTERM_SHELL\r\nXTERM_VERSION='XTerm(330)'; export XTERM_VERSION\r\n_=/usr/bin/python3; export _\r\n% \r\n```\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}