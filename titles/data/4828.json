{
    "url": "https://api.github.com/repos/spack/spack/issues/4828",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4828/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4828/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4828/events",
    "html_url": "https://github.com/spack/spack/issues/4828",
    "id": 244405214,
    "node_id": "MDU6SXNzdWUyNDQ0MDUyMTQ=",
    "number": 4828,
    "title": "Question/Help with building on the Cray platform",
    "user": {
        "login": "jgalarowicz",
        "id": 630197,
        "node_id": "MDQ6VXNlcjYzMDE5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/630197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jgalarowicz",
        "html_url": "https://github.com/jgalarowicz",
        "followers_url": "https://api.github.com/users/jgalarowicz/followers",
        "following_url": "https://api.github.com/users/jgalarowicz/following{/other_user}",
        "gists_url": "https://api.github.com/users/jgalarowicz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jgalarowicz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jgalarowicz/subscriptions",
        "organizations_url": "https://api.github.com/users/jgalarowicz/orgs",
        "repos_url": "https://api.github.com/users/jgalarowicz/repos",
        "events_url": "https://api.github.com/users/jgalarowicz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jgalarowicz/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446614485,
            "node_id": "MDU6TGFiZWw0NDY2MTQ0ODU=",
            "url": "https://api.github.com/repos/spack/spack/labels/cray",
            "name": "cray",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2017-07-20T15:31:24Z",
    "updated_at": "2020-08-23T23:03:04Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I'm hoping someone can point out what I'm doing wrong w.r.t. building on the Cray platform.\r\n\r\nI'm trying to port the spack builds of the Krell products to the Cray.  I'm doing that work at NERSC on Cori.   But, when I try to build for the Front end using gcc and the sles12-x86_64, spack says it can't find the compiler.\r\n\r\n```\r\njgalaro@cori10:~/spack> spack install cbtf-krell%gcc@6.3.0 os=sles12\r\n==> Error: No compilers found for operating system sles12 and target haswell.\r\nIf previous installations have succeeded, the operating system may have been updated.\r\nCompilers are defined for the following operating systems and targets:\r\n\tCNL-any\r\n\tsles12-x86_64\r\nRun 'spack compiler find' to add compilers.\r\n\r\njgalaro@cori10:~/spack> spack install cbtf-krell%gcc@6.3.0 os=sles12-x86_64\r\n==> Error: No compilers found for operating system sles12-x86_64 and target haswell.\r\nIf previous installations have succeeded, the operating system may have been updated.\r\nCompilers are defined for the following operating systems and targets:\r\n\tCNL-any\r\n\tsles12-x86_64\r\nRun 'spack compiler find' to add compilers.\r\n\r\njgalaro@cori10:~/spack> spack compiler find\r\n==> Added 1 new compiler to /global/homes/j/jgalaro/.spack/cray/compilers.yaml\r\n    gcc@6.3.0\r\n==> Compilers are defined in the following files:\r\n    /global/homes/j/jgalaro/.spack/cray/compilers.yaml\r\n\r\njgalaro@cori10:~/spack> spack install cbtf%gcc@6.3.0 os=sles12-x86_64\r\n==> Error: No compilers found for operating system sles12-x86_64 and target haswell.\r\nIf previous installations have succeeded, the operating system may have been updated.\r\nCompilers are defined for the following operating systems and targets:\r\n\tCNL-any\r\n\tsles12-x86_64\r\nRun 'spack compiler find' to add compilers.\r\n\r\njgalaro@cori10:~/spack> spack install cbtf%gcc@6.3.0 os=sles12\r\n==> Error: No compilers found for operating system sles12 and target haswell.\r\nIf previous installations have succeeded, the operating system may have been updated.\r\nCompilers are defined for the following operating systems and targets:\r\n\tCNL-any\r\n\tsles12-x86_64\r\nRun 'spack compiler find' to add compilers.\r\njgalaro@cori10:~/spack> \r\n```\r\n\r\n```\r\njgalaro@cori10:~/spack> module list\r\nCurrently Loaded Modulefiles:\r\n  1) modules/3.2.10.5                             12) pmi/5.0.10-1.0000.11050.0.0.ari\r\n  2) nsg/1.2.0                                    13) dmapp/7.1.1-39.37\r\n  3) gcc/6.3.0                                    14) gni-headers/5.0.11-2.2\r\n  4) craype-haswell                               15) xpmem/2.1.1_gf9c9084-2.38\r\n  5) craype-network-aries                         16) job/2.1.1_gc1ad964-2.175\r\n  6) craype/2.5.7                                 17) dvs/2.7_2.1.68_g779d71a-1.0000.779d71a.2.34\r\n  7) cray-mpich/7.4.4                             18) alps/6.3.4-2.21\r\n  8) cray-shmem/7.4.4                             19) rca/2.1.6_g2c60fbf-2.265\r\n  9) cray-libsci/16.09.1                          20) atp/2.0.3\r\n 10) udreg/2.3.2-7.54                             21) PrgEnv-gnu/6.0.3\r\n 11) ugni/6.0.15-2.2\r\n```\r\n```yaml\r\njgalaro@cori10:~/spack> cat ~/.spack/cray/compilers.yaml\r\ncompilers:\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.4.2'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.4.2\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.5.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.5.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.5.4'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.5.4\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.5.8'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.5.8\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.4.4'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.4.4\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.5.1'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.5.1\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-cray\r\n    - !!python/unicode 'cce/8.5.7'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: cce@8.5.7\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/4.9.3'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@4.9.3\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/5.3.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@5.3.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/6.2.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@6.2.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/5.2.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@5.2.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/6.1.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@6.1.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - !!python/unicode 'gcc/6.3.0'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: gcc@6.3.0\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/16.0.3.210'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@16.0.3.210\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/17.0.1.132'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@17.0.1.132\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/17.0.2.174'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@17.0.2.174\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/17.0.0.098'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@17.0.0.098\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/2018'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@2018\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules:\r\n    - PrgEnv-intel\r\n    - !!python/unicode 'intel/17.0.3.191'\r\n    operating_system: CNL\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    spec: intel@17.0.3.191\r\n    target: any\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sles12\r\n    paths:\r\n      cc: /opt/cray/pe/craype/2.5.7/bin/cc\r\n      cxx: /opt/cray/pe/craype/2.5.7/bin/CC\r\n      f77: /opt/cray/pe/craype/2.5.7/bin/ftn\r\n      fc: /opt/cray/pe/craype/2.5.7/bin/ftn\r\n    spec: cce@2.174\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sles12\r\n    paths:\r\n      cc: /usr/bin/gcc-4.8\r\n      cxx: /usr/bin/g++-4.8\r\n      f77: null\r\n      fc: null\r\n    spec: gcc@4.8\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sles12\r\n    paths:\r\n      cc: /opt/intel/compilers_and_libraries_2017.2.174/linux/bin/intel64/icc\r\n      cxx: /opt/intel/compilers_and_libraries_2017.2.174/linux/bin/intel64/icpc\r\n      f77: /opt/intel/compilers_and_libraries_2017.2.174/linux/bin/intel64/ifort\r\n      fc: /opt/intel/compilers_and_libraries_2017.2.174/linux/bin/intel64/ifort\r\n    spec: intel@17.0.2\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: sles12\r\n    paths:\r\n      cc: /opt/gcc/6.3.0/bin/gcc\r\n      cxx: /opt/gcc/6.3.0/bin/g++\r\n      f77: /opt/gcc/6.3.0/bin/gfortran\r\n      fc: /opt/gcc/6.3.0/bin/gfortran\r\n    spec: gcc@6.3.0\r\n    target: x86_64\r\n```",
    "performed_via_github_app": null
}