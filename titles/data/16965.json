{
    "url": "https://api.github.com/repos/spack/spack/issues/16965",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16965/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16965/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16965/events",
    "html_url": "https://github.com/spack/spack/issues/16965",
    "id": 631473431,
    "node_id": "MDU6SXNzdWU2MzE0NzM0MzE=",
    "number": 16965,
    "title": "Installation issue: visit",
    "user": {
        "login": "andymwood",
        "id": 7825213,
        "node_id": "MDQ6VXNlcjc4MjUyMTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7825213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andymwood",
        "html_url": "https://github.com/andymwood",
        "followers_url": "https://api.github.com/users/andymwood/followers",
        "following_url": "https://api.github.com/users/andymwood/following{/other_user}",
        "gists_url": "https://api.github.com/users/andymwood/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/andymwood/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/andymwood/subscriptions",
        "organizations_url": "https://api.github.com/users/andymwood/orgs",
        "repos_url": "https://api.github.com/users/andymwood/repos",
        "events_url": "https://api.github.com/users/andymwood/events{/privacy}",
        "received_events_url": "https://api.github.com/users/andymwood/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-06-05T10:07:02Z",
    "updated_at": "2020-06-10T16:31:04Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I'm trying to install visit on Centos 7 using gcc 7.3.1 provided by devtoolset-7.\r\n\r\n### Steps to reproduce the issue\r\n\r\nIf spack is checked out on branch develop, I get an unsatisfiable version constraint:\r\n```console\r\n$ cd spack\r\n$ git checkout develop\r\n$ spack speck visit\r\n...\r\n==> Error: An unsatisfiable version constraint has been detected for spec:\r\n...\r\nwhile trying to concretize the partial spec:\r\n\r\n    py-setuptools@46.1.3%gcc@8.4.0 arch=linux-opensuse_leap15-haswell\r\n\r\n\r\npy-setuptools requires python version 3.5:, but spec asked for 2.7.18\r\n$ spack speck visit ^python@3.5\r\n...\r\n==> Error: An unsatisfiable version constraint has been detected for spec:\r\n...\r\nvisit requires python version 2.6:2.8, but spec asked for 3.5\r\n```\r\n\r\nWhen checked out on v0.14.2, it fails when it tries to install the dependency qt\r\n```console\r\n$ cd spack\r\n$ git checkout v0.14.2\r\n$ spack install visit\r\n...\r\n==> 12765: Installing qt\r\n==> Fetching http://download.qt.io/archive/qt/5.14/5.14.1/single/qt-everywhere-src-5.14.1.tar.xz\r\n==> Staging archive: /tmp/andrew/spack-stage/spack-stage-qt-5.14.1-lc52pytmpgeruszc2whhgs4jfxcseevt/qt-everywhere-src-5.14.1.tar.xz\r\n==> Created stage in /tmp/andrew/spack-stage/spack-stage-qt-5.14.1-lc52pytmpgeruszc2whhgs4jfxcseevt\r\n==> Applied patch /home/andrew/spack/var/spack/repos/builtin/packages/qt/qt5-pcre.patch\r\n==> Ran patch() for qt\r\n==> 12765: qt: Building qt [Package]\r\n==> 12765: qt: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 3:\r\n    './configure' '-prefix' '/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/qt-5.14.1-lc52pytmpgeruszc2whhgs4jfxcseevt' '-v' '-opensource' '-opengl' '-release' '-confirm-license' '-optimized-qmake' '-no-pch' '-system-freetype' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/freetype-2.10.1-44b3zl3w2d4fbnpfwitib665znithd5k/include/freetype2' '-fontconfig' '-openssl-linked' '' '-I/usr/include' '-system-sqlite' '-R' '/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/sqlite-3.30.1-yfpks6qgtdcduoq7rzq7fjqr2yvzofxd/lib' '-shared' '-system-harfbuzz' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/harfbuzz-2.3.1-rf7hniptamhaymfxf4khqn6bynyd4lbq/lib' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/harfbuzz-2.3.1-rf7hniptamhaymfxf4khqn6bynyd4lbq/include' '-system-pcre' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/pcre2-10.31-zqzdm2xexd4nqxrdv6qoqf4khhofiexy/lib' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/pcre2-10.31-zqzdm2xexd4nqxrdv6qoqf4khhofiexy/include' '-system-doubleconversion' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/double-conversion-2.0.1-2gwru5lqxslyadevmnymq6bt2csubxdj/lib' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/double-conversion-2.0.1-2gwru5lqxslyadevmnymq6bt2csubxdj/include' '-system-libpng' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/libpng-1.6.37-5yln2v5yqxg6yqsmkuj56qrloigwyvqi/lib' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/libpng-1.6.37-5yln2v5yqxg6yqsmkuj56qrloigwyvqi/include' '-system-libjpeg' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/libjpeg-turbo-2.0.3-tkg3isbtkrl4yr34hbevaggmsni2udfq/lib64' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/libjpeg-turbo-2.0.3-tkg3isbtkrl4yr34hbevaggmsni2udfq/include' '-system-zlib' '-L/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/zlib-1.2.11-ng6232cbhcm5k24ua3w7wnemyskyo4wr/lib' '-I/home/andrew/spack/opt/spack/linux-centos7-broadwell/gcc-7.3.1/zlib-1.2.11-ng6232cbhcm5k24ua3w7wnemyskyo4wr/include' '-nomake' 'examples' '-no-dbus' '-platform' 'linux-g++' '-no-eglfs' '-no-directfb' '-no-gtk' '-system-xcb' '-skip' 'webengine' '-skip' 'wayland'\r\n\r\n66 errors found in build log:\r\n     280     >                  from /opt/rh/devtoolset-7/root/usr/include/c++/7/stdexcept:39,\r\n     281     >                  from /opt/rh/devtoolset-7/root/usr/include/c++/7/optional:38,\r\n     282     >                  from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39,\r\n     283     >                  from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\r\n     284     >                  from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\r\n     285     >                  from main.cpp:7:\r\n  >> 286     > /opt/rh/devtoolset-7/root/usr/include/c++/7/cstdlib:75:15: fatal error: stdlib.h: No such file or directory\r\n     287     >  #include_next <stdlib.h>\r\n     288     >                ^~~~~~~~~~\r\n     289     > compilation terminated.\r\n  >> 290     > gmake: *** [main.o] Error 1\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n`spack debug report` fails when spack is checked out on v0.14.2.\r\n\r\nOn develop:\r\n* **Spack:** 0.14.2-1335-94e7733\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-broadwell\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\npackages.yaml:\r\n```yaml\r\npackages:\r\n  cmake:\r\n    version: [3.15.5]\r\n  boost:\r\n    version: [1.69.0]\r\n    variants: +mpi\r\n  eigen:\r\n    version: [3.3.4]\r\n  jsoncpp:\r\n    version: [1.8.3]\r\n  vtk:\r\n    version: [8.1.0]\r\n    variants: -opengl2\r\n  llvm:\r\n    variants: -lldb\r\n  mesa:\r\n    variants: -llvm +glx\r\n  opengl:\r\n    paths:\r\n      opengl@4.5 arch=linux: /usr\r\n    version: [system]\r\n    buildable: False\r\n  openglu:\r\n    paths:\r\n      openglu@1.3 arch=linux: /usr\r\n    version: [system]\r\n    buildable: False\r\n  openssl:\r\n    paths:\r\n      openssl: /usr\r\n    version: [system]\r\n    buildable: False\r\n  \r\n  all:\r\n    compiler: [gcc]\r\n    providers:\r\n      mpi: [mpich@3.3.2]\r\n      lapack: [netlib-lapack]\r\n      blas: [netlib-lapack]\r\n      gl: [opengl]\r\n      glu: [openglu]\r\n```\r\n\r\nIn compilers.yaml\r\n```yaml\r\n- compiler:\r\n    spec: gcc@7.3.1\r\n    paths:\r\n      cc: /opt/rh/devtoolset-7/root/usr/bin/gcc\r\n      cxx: /opt/rh/devtoolset-7/root/usr/bin/g++\r\n      f77: /opt/rh/devtoolset-7/root/usr/bin/gfortran\r\n      fc: /opt/rh/devtoolset-7/root/usr/bin/gfortran\r\n    flags: {}\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/4735308/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/4735310/spack-build-env.txt)\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\nMaintainers:\r\n* visit: @cyrush \r\n* qt: @sethrj \r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}