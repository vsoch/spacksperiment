{
    "url": "https://api.github.com/repos/spack/spack/issues/13484",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13484/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13484/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13484/events",
    "html_url": "https://github.com/spack/spack/issues/13484",
    "id": 513979019,
    "node_id": "MDU6SXNzdWU1MTM5NzkwMTk=",
    "number": 13484,
    "title": "lmod/diffutils fails to build on OSX, clang-11",
    "user": {
        "login": "renderdude",
        "id": 8058439,
        "node_id": "MDQ6VXNlcjgwNTg0Mzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8058439?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/renderdude",
        "html_url": "https://github.com/renderdude",
        "followers_url": "https://api.github.com/users/renderdude/followers",
        "following_url": "https://api.github.com/users/renderdude/following{/other_user}",
        "gists_url": "https://api.github.com/users/renderdude/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/renderdude/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/renderdude/subscriptions",
        "organizations_url": "https://api.github.com/users/renderdude/orgs",
        "repos_url": "https://api.github.com/users/renderdude/repos",
        "events_url": "https://api.github.com/users/renderdude/events{/privacy}",
        "received_events_url": "https://api.github.com/users/renderdude/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2019-10-29T14:52:54Z",
    "updated_at": "2021-06-11T14:39:20Z",
    "closed_at": "2021-06-11T14:39:20Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Upgraded to the 0.13, and latest develop. When trying to build lmod, diffutils fails to build. This does not appear to be an issue with diffutils, but how the compiler wrapper is interacting with clang-11 as I can build diffutils just fine outside fo spack.\r\n\r\n### Steps to reproduce the issue\r\n\r\n$ spack install diffutils\r\n\r\n### Error Message\r\n\r\n==> libiconv is already installed in /Users/mbolsta/spack/opt/spack/darwin-mojave-x86_64/clang-11.0.0-apple/libiconv-1.16-jg6ekuhbklculym7pyjpx6l5jetym7wp\r\n==> Installing diffutils\r\n==> Searching for binary cache of diffutils\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for diffutils found: installing from source\r\n==> Using cached archive: /Users/mbolsta/spack/var/spack/cache/_source-cache/archive/b3/b3a7a6221c3dc916085f0d205abf6b8e1ba443d4dd965118da364a1dc1cb3a26.tar.xz\r\n==> Staging archive: /var/folders/34/c56014h11_j6qr9nnwz9tphw0038d0/T/mbolsta/spack-stage/spack-stage-diffutils-3.7-yn2yzi35s3ls5cw4zjso5rswe6rivsob/diffutils-3.7.tar.xz\r\n==> Created stage in /var/folders/34/c56014h11_j6qr9nnwz9tphw0038d0/T/mbolsta/spack-stage/spack-stage-diffutils-3.7-yn2yzi35s3ls5cw4zjso5rswe6rivsob\r\n==> No patches needed for diffutils\r\n==> Building diffutils [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/var/folders/34/c56014h11_j6qr9nnwz9tphw0038d0/T/mbolsta/spack-stage/spack-stage-diffutils-3.7-yn2yzi35s3ls5cw4zjso5rswe6rivsob/spack-src/configure' '--prefix=/Users/mbolsta/spack/opt/spack/darwin-mojave-x86_64/clang-11.0.0-apple/diffutils-3.7-yn2yzi35s3ls5cw4zjso5rswe6rivsob'\r\n\r\n2 errors found in build log:\r\n     136    checking for ld used by /Users/mbolsta/spack/lib/spack/env/clang/cl\r\n            ang... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeD\r\n            efault.xctoolchain/usr/bin/ld\r\n     137    checking if the linker (/Applications/Xcode.app/Contents/Developer/\r\n            Toolchains/XcodeDefault.xctoolchain/usr/bin/ld) is GNU ld... no\r\n     138    checking for shared library run path origin... done\r\n     139    checking 32-bit host C ABI... no\r\n     140    checking for the common suffixes of directories in the library sear\r\n            ch path... lib,lib\r\n     141    checking for libsigsegv... no, consider installing GNU libsigsegv\r\n  >> 142    checking how /Users/mbolsta/spack/lib/spack/env/clang/clang reports\r\n             undeclared, standard C functions... configure: error: in `/private\r\n            /var/folders/34/c56014h11_j6qr9nnwz9tphw0038d0/T/mbolsta/spack-stag\r\n            e/spack-stage-diffutils-3.7-yn2yzi35s3ls5cw4zjso5rswe6rivsob/spack-\r\n            src/spack-build':\r\n  >> 143    configure: error: cannot detect from compiler exit status or warnin\r\n            gs\r\n     144    See `config.log' for more details\r\n\r\n\r\n### Information on your system\r\n\r\nOSX 10.14.6\r\n\r\n`--> cc --version\r\nApple clang version 11.0.0 (clang-1100.0.33.8)\r\nTarget: x86_64-apple-darwin18.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n-----\r\n\r\n",
    "performed_via_github_app": null
}