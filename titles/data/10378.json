{
    "url": "https://api.github.com/repos/spack/spack/issues/10378",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/10378/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/10378/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/10378/events",
    "html_url": "https://github.com/spack/spack/issues/10378",
    "id": 400374121,
    "node_id": "MDU6SXNzdWU0MDAzNzQxMjE=",
    "number": 10378,
    "title": "R install.packages and biocManager compilation errors",
    "user": {
        "login": "mforde84",
        "id": 20908622,
        "node_id": "MDQ6VXNlcjIwOTA4NjIy",
        "avatar_url": "https://avatars.githubusercontent.com/u/20908622?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mforde84",
        "html_url": "https://github.com/mforde84",
        "followers_url": "https://api.github.com/users/mforde84/followers",
        "following_url": "https://api.github.com/users/mforde84/following{/other_user}",
        "gists_url": "https://api.github.com/users/mforde84/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mforde84/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mforde84/subscriptions",
        "organizations_url": "https://api.github.com/users/mforde84/orgs",
        "repos_url": "https://api.github.com/users/mforde84/repos",
        "events_url": "https://api.github.com/users/mforde84/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mforde84/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-01-17T17:04:22Z",
    "updated_at": "2019-01-17T21:23:11Z",
    "closed_at": "2019-01-17T21:23:11Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I'm receiving numerous library errors when attempting to install packages into R using install.packages and biocLite:\r\n\r\nFor example:\r\n\r\n```\r\nmodule load gcc r\r\nR\r\n> install.packages(\"RCurl\")\r\n...\r\n/bin/ld: cannot find -liconv\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [RCurl.so] Error 1\r\nERROR: compilation failed for package \u2018RCurl\u2019\r\n* removing \u2018/mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/r-3.5.2-dlkhpdhiua4dkrt7aqojpgjogb76fci5/rlib/R/library/RCurl\u2019\r\n\r\nThe downloaded source packages are in\r\n        \u2018/tmp/RtmpsTAN9K/downloaded_packages\u2019\r\nUpdating HTML index of packages in '.Library'\r\nMaking 'packages.html' ... done\r\nWarning message:\r\nIn install.packages(\"RCurl\") :\r\n  installation of package \u2018RCurl\u2019 had non-zero exit status\r\n```\r\n\r\nHere's the concretized build, and we see that it was built with libiconv\r\n```\r\n--------------------------------\r\nr@3.5.2%gcc@7.4.0~X~external-lapack~memory_profiling arch=linux-centos7-x86_64\r\n    ^bzip2@1.0.6%gcc@7.4.0+shared arch=linux-centos7-x86_64\r\n        ^diffutils@3.6%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^cairo@1.16.0%gcc@7.4.0~X~pdf arch=linux-centos7-x86_64\r\n        ^fontconfig@2.12.3%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^font-util@1.3.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^pkgconf@1.5.4%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^util-macros@1.19.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^freetype@2.9.1%gcc@7.4.0 patches=08466355e8649235ff01f13b3e56bbd551c7cfb2ca97903cc11575c163ea32a3 arch=linux-centos7-x86_64\r\n                ^libpng@1.6.34%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                    ^zlib@1.2.11%gcc@7.4.0+optimize+pic+shared arch=linux-centos7-x86_64\r\n            ^gperf@3.0.4%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^libxml2@2.9.8%gcc@7.4.0~python arch=linux-centos7-x86_64\r\n                ^libiconv@1.15%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^xz@5.2.4%gcc@7.4.0 arch=linux-centos7-x86_64\r\n        ^glib@2.56.3%gcc@7.4.0~libmount patches=c325997b72a205ad1638bb3e3ba0e5b73e3d32ce63b2d0d3282f3e3a2ff4663c tracing=none arch=linux-centos7-x86_64\r\n            ^gettext@0.19.8.1%gcc@7.4.0+bzip2+curses+git~libunistring+libxml2 patches=9acdb4e73f67c241b5ef32505c9ddf7cf6884ca8ea661692f21dca28483b04b8 +tar+xz arch=linux-centos7-x86_64\r\n                ^ncurses@6.1%gcc@7.4.0~symlinks~termlib arch=linux-centos7-x86_64\r\n                ^tar@1.30%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^libffi@3.2.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^pcre@8.42%gcc@7.4.0~jit+utf arch=linux-centos7-x86_64\r\n            ^perl@5.26.2%gcc@7.4.0+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=linux-centos7-x86_64\r\n                ^gdbm@1.18.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                    ^readline@7.0%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^python@2.7.15%gcc@7.4.0+dbm~optimizations patches=123082ab3483ded78e86d7c809e98a804b3465b4683c96bd79a2fd799f572244 +pic+pythoncmd+shared~tk~ucs4 arch=linux-centos7-x86_64\r\n                ^openssl@1.1.1%gcc@7.4.0+systemcerts arch=linux-centos7-x86_64\r\n                ^sqlite@3.26.0%gcc@7.4.0~functions arch=linux-centos7-x86_64\r\n        ^pixman@0.34.0%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^curl@7.60.0%gcc@7.4.0~darwinssl~libssh~libssh2~nghttp2 arch=linux-centos7-x86_64\r\n    ^icu4c@60.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^jdk@11.0.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^libjpeg-turbo@1.5.90%gcc@7.4.0 arch=linux-centos7-x86_64\r\n        ^cmake@3.13.2%gcc@7.4.0~doc+ncurses+openssl+ownlibs~qt arch=linux-centos7-x86_64\r\n        ^nasm@2.13.03%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^libtiff@4.0.9%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^pango@1.41.0%gcc@7.4.0~X arch=linux-centos7-x86_64\r\n        ^gobject-introspection@1.49.2%gcc@7.4.0 patches=6f90bb267efa043ed70b900b4b8e2faf9e8133afae311893b01060356ea81bba arch=linux-centos7-x86_64\r\n            ^bison@3.0.5%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^help2man@1.47.4%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^m4@1.4.18%gcc@7.4.0 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,c0a408fbffb7255fcc75e26bd8edab116fc81d216bfd18b473668b7739a4158e,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-centos7-x86_64\r\n                    ^libsigsegv@2.11%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^flex@2.6.3%gcc@7.4.0+lex arch=linux-centos7-x86_64\r\n        ^harfbuzz@2.1.3%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^tcl@8.6.8%gcc@7.4.0 arch=linux-centos7-x86_64\r\n    ^tk@8.6.8%gcc@7.4.0 arch=linux-centos7-x86_64\r\n        ^libx11@1.6.5%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^inputproto@2.3.2%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^kbproto@1.0.7%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^libxcb@1.13%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^libpthread-stubs@0.4%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^libxau@1.0.8%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                    ^xproto@7.0.31%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^libxdmcp@1.1.2%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                    ^libbsd@0.9.1%gcc@7.4.0 arch=linux-centos7-x86_64\r\n                ^xcb-proto@1.13%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^xextproto@7.3.0%gcc@7.4.0 arch=linux-centos7-x86_64\r\n            ^xtrans@1.3.5%gcc@7.4.0 arch=linux-centos7-x86_64\r\n```\r\n\r\nAnd when I try to install the spack r-curl package, it ends up trying to install another version of gobject-introspection which is going to generate a name clash with my currently installed version. \r\n\r\n\r\n```\r\n11:02:15-root@gosset:~$ spack install r-curl ^r@3.5.2%gcc@7.4.0~X~external-lapack~memory_profiling ^gobject-introspection@1.49.2%gcc@7.4.0\r\n==> pkgconf is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/pkgconf-1.5.4-mymnbzkcwenqqpcfmbc7odrgdicfd26n\r\n==> ncurses is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/ncurses-6.1-svwt4yh6tdtt7qtfuefht5d2bpll3f2p\r\n==> readline is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/readline-7.0-i7lun5u3bo6g2lzux5u4acj44git37a4\r\n==> gdbm is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/gdbm-1.18.1-uuaf3p4z4exk2ihi2wz54cugd34zhnmc\r\n==> perl is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/perl-5.26.2-gow44tlzjhqpmobrshauhnu4wmyy2sr6\r\n==> zlib is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/zlib-1.2.11-25pskdmfdd52x3ewomarucg3eu6mswte\r\n==> openssl is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/openssl-1.1.1-us225ro5fah6sm2gkrlah5e6ttovtcti\r\n==> curl is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/curl-7.60.0-kyyxe2aqhgrmmc6bq22otlkpqkx2zh5o\r\n==> diffutils is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/diffutils-3.6-cubtjgqigpvfqeyf6r7cvbxhnedjog74\r\n==> bzip2 is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/bzip2-1.0.6-y4qayy3nlojfq3ctw6wbfeorrq7xdk26\r\n==> util-macros is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/util-macros-1.19.1-uosaw77iw42jvn4bzgt2q6y3usoykqng\r\n==> font-util is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/font-util-1.3.1-qbek7oplmabhp7cedolu6x4i5z6d4tmu\r\n==> libpng is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libpng-1.6.34-milcr4breerhkz5bo3iskwxb2xank4sz\r\n==> freetype is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/freetype-2.9.1-7soikjagk6fvtpbrm376546qh6l57hu7\r\n==> gperf is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/gperf-3.0.4-z35bsyptkvm5pjmgsemkucvquirh752q\r\n==> libiconv is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libiconv-1.15-zcopnqqheh3vbmlybsrltd4wj246vt64\r\n==> xz is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/xz-5.2.4-vewnijktsjco3mbf2ycv6irlvlur46uq\r\n==> libxml2 is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libxml2-2.9.8-dadf3bads4xa7kdapindieuupil5zibo\r\n==> fontconfig is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/fontconfig-2.12.3-boogbvydjxcm3ccsxxo45z23pofz3chg\r\n==> tar is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/tar-1.30-qv6ix2o3odjmqtn55y5wfld4zagwiiah\r\n==> gettext is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/gettext-0.19.8.1-3goeyvm6kz7cquv62hkaousuxd2ycscg\r\n==> libffi is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libffi-3.2.1-imfzbzcglr6k4rst2l7zk55ozwumehmd\r\n==> pcre is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/pcre-8.42-ffgsdmajcn5rnb2ze3vri7oscthqff7i\r\n==> sqlite is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/sqlite-3.26.0-nt662a6sxwuunvbzmd5n7nacro4x4ndj\r\n==> python is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/python-2.7.15-a3274pv3tzlrhxwu4lgr2mc63lpm23d5\r\n==> glib is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/glib-2.56.3-pc2szr3l66p3pdycewmzvtc5rckyysgs\r\n==> pixman is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/pixman-0.34.0-kqlw77dtylim5wgo7exwwknzgqag32cu\r\n==> cairo is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/cairo-1.16.0-jeocqqxc7fn7m5oo5ugepyu4tcyowmmo\r\n==> icu4c is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/icu4c-60.1-hlreextetfpa3vxqm6xlwsztxokgr7rw\r\n==> jdk is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/jdk-11.0.1-v57givjq5p62nvb4ew5w2o6pqvljguod\r\n==> cmake is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/cmake-3.13.2-p7bf4eyqdadc3qw2iuoycrkadew4obhg\r\n==> nasm is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/nasm-2.13.03-4xuslf6rcxhf2jidy7lz5l2gyke27y7w\r\n==> libjpeg-turbo is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libjpeg-turbo-1.5.90-2cvkgii4m37z74j5gc7hgvcvhh4y5flo\r\n==> libtiff is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libtiff-4.0.9-s2tjndlimobg5pnqqrujnz4gfiktqu2p\r\n==> help2man is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/help2man-1.47.4-rv4cd3gnllkaakig5eimeszlgt4p6uxl\r\n==> libsigsegv is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/libsigsegv-2.11-scki7tqtdzs4psgcght3ffxcrs6g2kjh\r\n==> m4 is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/m4-1.4.18-ldduaanivtjvwbvppd7o4oeme7mvg5dz\r\n==> bison is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/bison-3.0.5-jud6zsxsws54m35fqqqm2rghvsqv5bsp\r\n==> flex is already installed in /mnt/beegfs/spackroot/opt/spack/linux-centos7-x86_64/gcc-7.4.0/flex-2.6.3-drouyc6s2tvohtk2lsdpigwptyffz2xm\r\n==> Installing gobject-introspection\r\n==> Searching for binary cache of gobject-introspection\r\n==> Finding buildcaches in /mnt/beegfs/build/mirror/build_cache\r\n==> No binary for gobject-introspection found: installing from source\r\n\r\n\r\n```",
    "performed_via_github_app": null
}