{
    "url": "https://api.github.com/repos/spack/spack/issues/14431",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14431/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14431/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14431/events",
    "html_url": "https://github.com/spack/spack/issues/14431",
    "id": 547087679,
    "node_id": "MDU6SXNzdWU1NDcwODc2Nzk=",
    "number": 14431,
    "title": "harfbuzz-2.3 does not build with the Intel compiler",
    "user": {
        "login": "glennpj",
        "id": 16138574,
        "node_id": "MDQ6VXNlcjE2MTM4NTc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/16138574?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glennpj",
        "html_url": "https://github.com/glennpj",
        "followers_url": "https://api.github.com/users/glennpj/followers",
        "following_url": "https://api.github.com/users/glennpj/following{/other_user}",
        "gists_url": "https://api.github.com/users/glennpj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/glennpj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glennpj/subscriptions",
        "organizations_url": "https://api.github.com/users/glennpj/orgs",
        "repos_url": "https://api.github.com/users/glennpj/repos",
        "events_url": "https://api.github.com/users/glennpj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/glennpj/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-01-08T20:34:01Z",
    "updated_at": "2020-02-05T21:31:44Z",
    "closed_at": "2020-02-05T21:31:44Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Versions of harfbuzz >= 2.3.0 do not build with the Intel compiler. Note that PR #14386 sets conflicts until this is fixed.\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install harfbuzz@2.3.1 %intel ^freetype@2.7.1 ^icu4c@58.2\r\n...\r\n32 errors found in build log:\r\n     665                      from hb-ot-layout.cc(37):\r\n     666     hb-array.hh(80): warning #597: \"hb_array_t<Type>::operator hb_array_t<const OT::OffsetTo<OT::Coverage, OT:\r\n             :HBUINT16, true>>() [with Type=const OT::OffsetTo<OT::Coverage, OT::HBUINT16, true>]\" will not be called f\r\n             or implicit or explicit conversions\r\n     667         operator hb_array_t<const Type> () { return hb_array_t<const Type> (arrayZ, length); }\r\n     668         ^\r\n     669               detected during instantiation of class \"hb_array_t<Type> [with Type=const OT::OffsetTo<OT::Cover\r\n             age, OT::HBUINT16, true>]\" at line 1678 of \"hb-ot-layout-gsubgpos.hh\"\r\n     670     \r\n  >> 671     hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::CmapSubtableLongGroup, OT::CmapSubtableLongGroup, _hb_bool_type<true>>\"\r\n     672                 \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     673                 \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     674       { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     675                                                 ^\r\n     676               detected during:\r\n     677                 instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     678                 instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n     679                 instantiation of \"bool OT::CmapSubtableLongSegmented<T>::serialize(hb_serialize_context_t *, c\r\n             onst hb_vector_t<OT::CmapSubtableLongGroup> &) [with T=OT::CmapSubtableFormat12]\" at line 530 of \"hb-ot-cm\r\n             ap-table.hh\"\r\n     680     \r\n  >> 681     hb-null.hh(89): error: class \"OT::CmapSubtableLongGroup\" has no member \"set\"\r\n     682       { static inline void value (T &o, const V v) { o.set (v); } };\r\n     683                                                        ^\r\n     684               detected during:\r\n     685                 instantiation of \"void _hb_assign<T, V, _hb_bool_type<<expression>>>::value(T &, V) [with T=OT\r\n             ::CmapSubtableLongGroup, V=OT::CmapSubtableLongGroup]\" at line 96\r\n     686                 instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     687                 instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n\r\n     1170              detected during:\r\n     1171                instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     1172                instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n     1173                instantiation of \"bool OT::CmapSubtableLongSegmented<T>::serialize(hb_serialize_context_t *, c\r\n             onst hb_vector_t<OT::CmapSubtableLongGroup> &) [with T=OT::CmapSubtableFormat12]\" at line 530 of \"hb-ot-cm\r\n             ap-table.hh\"\r\n     1174    \r\n  >> 1175    hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>, OT::OffsetTo<OT::FeatureParams, OT::HBUINT1\r\n             6, true>, _hb_bool_type<true>>\"\r\n     1176                \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     1177                \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     1178      { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     1179                                                ^\r\n     1180              detected during:\r\n     1181                instantiation of \"void hb_assign(T &, V) [with T=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16,\r\n              true>, V=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>]\" at line 406 of \"hb-machinery.hh\"\r\n     1182                instantiation of \"bool hb_sanitize_context_t::try_set(const Type *, const ValueType &) [with T\r\n             ype=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>, ValueType=OT::OffsetTo<OT::FeatureParams, OT::HBU\r\n             INT16, true>]\" at line 605 of \"hb-ot-layout-common.hh\"\r\n     1183    \r\n  >> 1184    hb-null.hh(89): error: class \"OT::CmapSubtableLongGroup\" has no member \"set\"\r\n     1185      { static inline void value (T &o, const V v) { o.set (v); } };\r\n     1186                                                       ^\r\n     1187              detected during:\r\n     1188                instantiation of \"void _hb_assign<T, V, _hb_bool_type<<expression>>>::value(T &, V) [with T=OT\r\n             ::CmapSubtableLongGroup, V=OT::CmapSubtableLongGroup]\" at line 96\r\n     1189                instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     1190                instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n\r\n     ...\r\n\r\n     1208                     from hb-ot-math.cc(30):\r\n     1209    hb-array.hh(80): warning #597: \"hb_array_t<Type>::operator hb_array_t<const OT::Index>() [with Type=const \r\n             OT::Index]\" will not be called for implicit or explicit conversions\r\n     1210        operator hb_array_t<const Type> () { return hb_array_t<const Type> (arrayZ, length); }\r\n     1211        ^\r\n     1212              detected during instantiation of class \"hb_array_t<Type> [with Type=const OT::Index]\" at line 19\r\n             2 of \"hb-ot-layout-common.hh\"\r\n     1213    \r\n  >> 1214    hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::CmapSubtableLongGroup, OT::CmapSubtableLongGroup, _hb_bool_type<true>>\"\r\n     1215                \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     1216                \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     1217      { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     1218                                                ^\r\n     1219              detected during:\r\n     1220                instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     1221                instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n     1222                instantiation of \"bool OT::CmapSubtableLongSegmented<T>::serialize(hb_serialize_context_t *, c\r\n             onst hb_vector_t<OT::CmapSubtableLongGroup> &) [with T=OT::CmapSubtableFormat12]\" at line 530 of \"hb-ot-cm\r\n             ap-table.hh\"\r\n     1223    \r\n  >> 1224    hb-null.hh(89): error: class \"OT::CmapSubtableLongGroup\" has no member \"set\"\r\n     1225      { static inline void value (T &o, const V v) { o.set (v); } };\r\n     1226                                                       ^\r\n     1227              detected during:\r\n     1228                instantiation of \"void _hb_assign<T, V, _hb_bool_type<<expression>>>::value(T &, V) [with T=OT\r\n             ::CmapSubtableLongGroup, V=OT::CmapSubtableLongGroup]\" at line 96\r\n     1229                instantiation of \"void hb_assign(T &, V) [with T=OT::CmapSubtableLongGroup, V=OT::CmapSubtable\r\n             LongGroup]\" at line 565 of \"hb-open-type.hh\"\r\n     1230                instantiation of \"bool OT::ArrayOf<Type, LenType>::serialize(hb_serialize_context_t *, hb_arra\r\n             y_t<const T>) [with Type=OT::CmapSubtableLongGroup, LenType=OT::HBUINT32, T=OT::CmapSubtableLongGroup]\" at\r\n              line 498 of \"hb-ot-cmap-table.hh\"\r\n     1231                instantiation of \"bool OT::CmapSubtableLongSegmented<T>::serialize(hb_serialize_context_t *, c\r\n             onst hb_vector_t<OT::CmapSubtableLongGroup> &) [with T=OT::CmapSubtableFormat12]\" at line 530 of \"hb-ot-cm\r\n             ap-table.hh\"\r\n     1232    \r\n  >> 1233    hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::GlyphID, OT::GlyphID, _hb_bool_type<true>>\"\r\n     1234                \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     1235                \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     1236      { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     1237                                                ^\r\n     1238              detected during:\r\n     1239                instantiation of \"void hb_assign(T &, V) [with T=OT::GlyphID, V=OT::GlyphID]\" at line 565 of \"\r\n             hb-open-type.hh\"\r\n\r\n     ...\r\n\r\n     1348        ^\r\n     1349              detected during:\r\n     1350                instantiation of class \"hb_array_t<Type> [with Type=const OT::Record<OT::LangSys>]\" at line 81\r\n             0 of \"hb-open-type.hh\"\r\n     1351                instantiation of \"hb_array_t<const Type> OT::SortedArrayOf<Type, LenType>::sub_array(unsigned \r\n             int, unsigned int *) const [with Type=OT::Record<OT::LangSys>, LenType=OT::HBUINT16]\" at line 120 of \"hb-o\r\n             t-layout-common.hh\"\r\n     1352                instantiation of \"unsigned int OT::RecordArrayOf<Type>::get_tags(unsigned int, unsigned int *,\r\n              hb_tag_t={uint32_t={unsigned int}} *) const [with Type=OT::LangSys]\" at line 266 of \"hb-ot-layout-common.\r\n             hh\"\r\n     1353    \r\n  >> 1354    hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>, OT::OffsetTo<OT::FeatureParams, OT::HBUINT1\r\n             6, true>, _hb_bool_type<true>>\"\r\n     1355                \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     1356                \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     1357      { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     1358                                                ^\r\n     1359              detected during:\r\n     1360                instantiation of \"void hb_assign(T &, V) [with T=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16,\r\n              true>, V=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>]\" at line 406 of \"hb-machinery.hh\"\r\n     1361                instantiation of \"bool hb_sanitize_context_t::try_set(const Type *, const ValueType &) [with T\r\n             ype=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>, ValueType=OT::OffsetTo<OT::FeatureParams, OT::HBU\r\n             INT16, true>]\" at line 605 of \"hb-ot-layout-common.hh\"\r\n     1362    \r\n  >> 1363    hb-null.hh(96): error: more than one partial specialization matches the template argument list of class \"_\r\n             hb_assign<OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>, OT::OffsetTo<OT::FeatureParams, OT::HBUINT1\r\n             6, true>, _hb_bool_type<true>>\"\r\n     1364                \"_hb_assign<T, V, _hb_bool_type<<expression>>>\"\r\n     1365                \"_hb_assign<T, T, _hb_bool_type<<expression>>>\"\r\n     1366      { _hb_assign<T, V, _hb_bool_type<true> >::value (o, v); }\r\n     1367                                                ^\r\n     1368              detected during:\r\n     1369                instantiation of \"void hb_assign(T &, V) [with T=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16,\r\n              true>, V=OT::OffsetTo<OT::FeatureParams, OT::HBUINT16, true>]\" at line 406 of \"hb-machinery.hh\"\r\n     1370                instantiation of \"bool hb_sanitize_context_t::try_set(const Type *, const ValueType &) [with T\r\n     1730    \r\n     1731    compilation aborted for hb-ot-layout.cc (code 2)\r\n  >> 1732    make[4]: *** [libharfbuzz_la-hb-ot-layout.lo] Error 1\r\n     1733    hb-array.hh(80): warning #597: \"hb_array_t<Type>::operator hb_array_t<const OT::SVGDocumentIndexEntry>() [\r\n             with Type=const OT::SVGDocumentIndexEntry]\" will not be called for implicit or explicit conversions\r\n     1734        operator hb_array_t<const Type> () { return hb_array_t<const Type> (arrayZ, length); }\r\n     1735        ^\r\n     1736              detected during:\r\n     1737                instantiation of class \"hb_array_t<Type> [with Type=const OT::SVGDocumentIndexEntry]\" at line \r\n             197\r\n     1738                instantiation of class \"hb_sorted_array_t<Type> [with Type=const OT::SVGDocumentIndexEntry]\" a\r\n             t line 803 of \"hb-open-type.hh\"\r\n     1739                instantiation of \"hb_sorted_array_t<const Type> OT::SortedArrayOf<Type, LenType>::as_array() c\r\n             onst [with Type=OT::SVGDocumentIndexEntry, LenType=OT::HBUINT16]\" at line 821 of \"hb-open-type.hh\"\r\n     1740                instantiation of \"const Type &OT::SortedArrayOf<Type, LenType>::bsearch(const T &, const Type \r\n             &) const [with Type=OT::SVGDocumentIndexEntry, LenType=OT::HBUINT16, T=hb_codepoint_t={uint32_t={unsigned \r\n             int}}]\" at line 99 of \"hb-ot-color-svg-table.hh\"\r\n     1741    \r\n     1742    compilation aborted for hb-ot-font.cc (code 2)\r\n  >> 1743    make[4]: *** [libharfbuzz_la-hb-ot-font.lo] Error 1\r\n     1744    compilation aborted for hb-ot-face.cc (code 2)\r\n  >> 1745    make[4]: *** [libharfbuzz_la-hb-ot-face.lo] Error 1\r\n     1746    make[4]: Leaving directory `/dev/shm/gpjohnsn/spack-stage-harfbuzz-2.3.1-4f3ewm4pfq6g2dsuqgbow4lquei2gpok/\r\n             spack-src/src'\r\n  >> 1747    make[3]: *** [all-recursive] Error 1\r\n     1748    make[3]: Leaving directory `/dev/shm/gpjohnsn/spack-stage-harfbuzz-2.3.1-4f3ewm4pfq6g2dsuqgbow4lquei2gpok/\r\n             spack-src/src'\r\n  >> 1749    make[2]: *** [all] Error 2\r\n     1750    make[2]: Leaving directory `/dev/shm/gpjohnsn/spack-stage-harfbuzz-2.3.1-4f3ewm4pfq6g2dsuqgbow4lquei2gpok/\r\n             spack-src/src'\r\n  >> 1751    make[1]: *** [all-recursive] Error 1\r\n     1752    make[1]: Leaving directory `/dev/shm/gpjohnsn/spack-stage-harfbuzz-2.3.1-4f3ewm4pfq6g2dsuqgbow4lquei2gpok/\r\n             spack-src'\r\n  >> 1753    make: *** [all] Error 2\r\n\r\n```\r\nI filed an issue on the harbuzz github site, https://github.com/harfbuzz/harfbuzz/issues/2088",
    "performed_via_github_app": null
}