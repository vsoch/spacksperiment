{
    "url": "https://api.github.com/repos/spack/spack/issues/2098",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/2098/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/2098/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/2098/events",
    "html_url": "https://github.com/spack/spack/issues/2098",
    "id": 184700675,
    "node_id": "MDU6SXNzdWUxODQ3MDA2NzU=",
    "number": 2098,
    "title": "`libxcb` breaks Python3 environments (improper handling of build deps)",
    "user": {
        "login": "citibeth",
        "id": 1924215,
        "node_id": "MDQ6VXNlcjE5MjQyMTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1924215?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/citibeth",
        "html_url": "https://github.com/citibeth",
        "followers_url": "https://api.github.com/users/citibeth/followers",
        "following_url": "https://api.github.com/users/citibeth/following{/other_user}",
        "gists_url": "https://api.github.com/users/citibeth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/citibeth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/citibeth/subscriptions",
        "organizations_url": "https://api.github.com/users/citibeth/orgs",
        "repos_url": "https://api.github.com/users/citibeth/repos",
        "events_url": "https://api.github.com/users/citibeth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/citibeth/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 470680435,
            "node_id": "MDU6TGFiZWw0NzA2ODA0MzU=",
            "url": "https://api.github.com/repos/spack/spack/labels/X11",
            "name": "X11",
            "color": "c5def5",
            "default": false,
            "description": null
        },
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 446619526,
            "node_id": "MDU6TGFiZWw0NDY2MTk1MjY=",
            "url": "https://api.github.com/repos/spack/spack/labels/new-package",
            "name": "new-package",
            "color": "444444",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2016-10-23T16:49:19Z",
    "updated_at": "2017-01-05T20:50:44Z",
    "closed_at": "2017-01-05T20:50:44Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "@adamjstewart \n\nThe `libxcb` package breaks Python3-based builds.  It SHOULD be possible to do this build because `libxcb` has a build dependency on Python2, but the rest of the stuff has a \"full\" dependency on Python3.  However, the Spack concretizer is not smart enough to deal with that situation.\n\nA quick grep through Spack shows there are very few other packages with the same problem (i.e. a build dependency on Python2, where it would make sense trying to build that package as part of a Python3 stack):\n\n```\nllvm/package.py:    depends_on('python@2.7:2.8')  # Seems not to support python 3.X.Y\nparaview/package.py:    depends_on('python@2:2.7', when='+python')\nlibxcb/package.py:    depends_on('python@2:2.8', type='build')\n```\n\nTo repeat the test, use https://github.com/LLNL/spack/pull/2097.  Then:\n\n```\n$ cd share/spack/qa/integration/efischer/gibbs-centos7\n$ ./run-test     # spack install env-modele\nInput spec\n------------------------------\n  env-modele\n\nNormalized\n------------------------------\n==> Error: Invalid spec: 'python@3.2:^bzip2^ncurses^openssl^readline^sqlite^zlib@1.2.5:'. Package python requires version 2:2.8, but spec asked for 3.2:\n```\n\n@tgamblin \nThis bug should be fixed, IMHO, for the release.  Either fix the underlying problem in concretization, or temporarily remove `libxcb`.\n",
    "performed_via_github_app": null
}