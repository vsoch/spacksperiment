{
    "url": "https://api.github.com/repos/spack/spack/issues/13342",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/13342/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/13342/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/13342/events",
    "html_url": "https://github.com/spack/spack/issues/13342",
    "id": 509604353,
    "node_id": "MDU6SXNzdWU1MDk2MDQzNTM=",
    "number": 13342,
    "title": "Spack can't build git-lfs on RHEL6",
    "user": {
        "login": "bartlettroscoe",
        "id": 1959736,
        "node_id": "MDQ6VXNlcjE5NTk3MzY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1959736?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bartlettroscoe",
        "html_url": "https://github.com/bartlettroscoe",
        "followers_url": "https://api.github.com/users/bartlettroscoe/followers",
        "following_url": "https://api.github.com/users/bartlettroscoe/following{/other_user}",
        "gists_url": "https://api.github.com/users/bartlettroscoe/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bartlettroscoe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bartlettroscoe/subscriptions",
        "organizations_url": "https://api.github.com/users/bartlettroscoe/orgs",
        "repos_url": "https://api.github.com/users/bartlettroscoe/repos",
        "events_url": "https://api.github.com/users/bartlettroscoe/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bartlettroscoe/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1651822417,
            "node_id": "MDU6TGFiZWwxNjUxODIyNDE3",
            "url": "https://api.github.com/repos/spack/spack/labels/snl-atdm",
            "name": "snl-atdm",
            "color": "e20ddb",
            "default": false,
            "description": "Issues for SNL ATDM usage of spack"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-10-20T14:44:19Z",
    "updated_at": "2019-11-01T14:12:36Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "snl-atdm-issue\r\n\r\nWith spack version:\r\n\r\n```\r\ncf9de05 \"multimethods: avoid calling caller_locals() in Python 3 (#13238)\"\r\nAuthor: Todd Gamblin <tgamblin@llnl.gov>\r\nDate:   Thu Oct 17 06:40:23 2019 -0700 (3 days ago)\r\n\r\nM       lib/spack/spack/multimethod.py\r\nM       lib/spack/spack/package.py\r\n```\r\n\r\nthe install of git-lfs with `spack install git-lfs arch=` (see ??? for why `arch` is needed) produced:\r\n\r\n```\r\n...\r\n -   64ezyro      ^git-lfs@2.8.0%gcc@7.2.0 arch=linux-rhel6-x86_64\r\n -   774mkka          ^go@1.13.1%gcc@7.2.0 arch=linux-rhel6-x86_64\r\n -   7rsdion              ^go-bootstrap@1.4-bootstrap-20171003%gcc@7.2.0 arch=linux-rhel6-x86_64\r\n...\r\n==> Installing go-bootstrap\r\n==> Searching for binary cache of go-bootstrap\r\n==> Finding buildcaches in /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/build_cache\r\n==> No binary for go-bootstrap found: installing from source\r\n==> Fetching file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go-bootstrap/go-bootstrap-1.4-bootstrap-20171003.tar.gz\r\ncurl: (37) Couldn't open file /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go-bootstrap/go-bootstrap-1.4-bootstrap-20171003.tar.gz\r\n==> Fetching from file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go-bootstrap/go-bootstrap-1.4-bootstrap-20171003.tar.gz failed.\r\n==> Fetching https://dl.google.com/go/go1.4-bootstrap-20171003.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /tmp/rabartl/spack-stage/spack-stage-go-bootstrap-1.4-bootstrap-20171003-7rsdionsqnggefs5khscfs6hjsmtkrnu/go1.4-bootstrap-20171003.tar.gz\r\n==> Created stage in /tmp/rabartl/spack-stage/spack-stage-go-bootstrap-1.4-bootstrap-20171003-7rsdionsqnggefs5khscfs6hjsmtkrnu\r\n==> Ran patch() for go-bootstrap\r\n==> Building go-bootstrap [Package]\r\n==> Executing phase: 'install'\r\n==> Successfully installed go-bootstrap\r\n  Fetch: 1.29s.  Build: 28.98s.  Total: 30.27s.\r\n[+] /home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_64/gcc-7.2.0/go-bootstrap-1.4-bootstrap-20171003-7rsdionsqnggefs5khscfs6hjsmtkrnu\r\n==> Installing go\r\n==> Searching for binary cache of go\r\n==> Finding buildcaches in /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/build_cache\r\n==> No binary for go found: installing from source\r\n==> Fetching file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go/go-1.13.1.tar.gz\r\ncurl: (37) Couldn't open file /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go/go-1.13.1.tar.gz\r\n==> Fetching from file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/go/go-1.13.1.tar.gz failed.\r\n==> Fetching https://dl.google.com/go/go1.13.1.src.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /tmp/rabartl/spack-stage/spack-stage-go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt/go1.13.1.src.tar.gz\r\n==> Created stage in /tmp/rabartl/spack-stage/spack-stage-go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt\r\n==> No patches needed for go\r\n==> Building go [Package]\r\n==> Executing phase: 'install'\r\n==> Successfully installed go\r\n  Fetch: 1.91s.  Build: 1m 50.72s.  Total: 1m 52.64s.\r\n[+] /home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_64/gcc-7.2.0/go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt\r\n==> Installing git-lfs\r\n==> Searching for binary cache of git-lfs\r\n==> Finding buildcaches in /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/build_cache\r\n==> No binary for git-lfs found: installing from source\r\n==> Fetching file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/git-lfs/git-lfs-2.8.0.tar.gz\r\ncurl: (37) Couldn't open file /ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/git-lfs/git-lfs-2.8.0.tar.gz\r\n==> Fetching from file:///ascldap/users/rabartl/Spack.base3/atdm-spack/atdm-spack-tarball-mirror/git-lfs/git-lfs-2.8.0.tar.gz failed.\r\n==> Fetching https://github.com/git-lfs/git-lfs/archive/v2.8.0.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /tmp/rabartl/spack-stage/spack-stage-git-lfs-2.8.0-64ezyrolflld37wwty6lzsh4bg6w54l5/v2.8.0.tar.gz\r\n==> Created stage in /tmp/rabartl/spack-stage/spack-stage-git-lfs-2.8.0-64ezyrolflld37wwty6lzsh4bg6w54l5\r\n==> No patches needed for git-lfs\r\n==> Building git-lfs [MakefilePackage]\r\n==> Executing phase: 'edit'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make'\r\n\r\n1 error found in build log:\r\n     21    which: no goimports in (/home/rabartl/Spack.base3/atdm-spack/spack/l\r\n           ib/spack/env/gcc:/home/rabartl/Spack.base3/atdm-spack/spack/lib/spac\r\n           k/env/case-insensitive:/home/rabartl/Spack.base3/atdm-spack/spack/li\r\n           b/spack/env:/home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/lin\r\n           ux-rhel6-x86_64/gcc-7.2.0/git-2.20.1-ezbbcixcsiueatd6mlnde3bnz6lefhm\r\n           p/bin:/home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhe\r\n           l6-x86_64/gcc-7.2.0/go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt/bin:/\r\n           home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_\r\n           64/gcc-7.2.0/go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt/bin:/ascldap\r\n           /users/rabartl/Spack.base3/atdm-spack/spack/bin:/usr/lib64/qt-3.3/bi\r\n           n:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/ascl\r\n           dap/users/rabartl/bin)\r\n     22    go: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: i\r\n           nvalid pseudo-version: does not match version-control timestamp (201\r\n           9-04-01T17:57:52Z)\r\n     23    go: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: i\r\n           nvalid pseudo-version: does not match version-control timestamp (201\r\n           9-04-01T17:57:52Z)\r\n     24    git-lfs: skipping fmt, no goimports found at `goimports` ...\r\n     25    go generate github.com/git-lfs/git-lfs/commands\r\n     26    go: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: i\r\n           nvalid pseudo-version: does not match version-control timestamp (201\r\n           9-04-01T17:57:52Z)\r\n  >> 27    make: *** [commands/mancontent_gen.go] Error 1\r\n```\r\n\r\nThe file:\r\n\r\n* `/tmp/rabartl/spack-stage/spack-stage-git-lfs-2.8.0-64ezyrolflld37wwty6lzsh4bg6w54l5/spack-build-out.txt`\r\n\r\nshows:\r\n\r\n```\r\n==> Executing phase: 'edit'\r\n==> [2019-10-20-08:27:15.021382] Using default implementation: skipping edit phase.\r\n==> Executing phase: 'build'\r\n==> [2019-10-20-08:27:15.022023] 'make'\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\nwhich: no goimports in (/home/rabartl/Spack.base3/atdm-spack/spack/lib/spack/env/gcc:/home/rabartl/Spack.base3/atdm-spack/spack/lib/spack/env/case-insensitive:/home/rabartl/Spack.base3/atdm-spack/spack/lib/spack/env:/home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_64/gcc-7.2.0/git-2.20.1-ezbbcixcsiueatd6mlnde3bnz6lefhmp/bin:/home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_64/gcc-7.2.0/go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt/bin:/home/rabartl/Spack.base3/atdm-spack/spack/opt/spack/linux-rhel6-x86_64/gcc-7.2.0/go-1.13.1-774mkkac7j25xw63itaqmqnm3i2w5vnt/bin:/ascldap/users/rabartl/Spack.base3/atdm-spack/spack/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/ascldap/users/rabartl/bin)\r\ngo: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: invalid pseudo-version: does not match version-control timestamp (2019-04-01T17:57:52Z)\r\ngo: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: invalid pseudo-version: does not match version-control timestamp (2019-04-01T17:57:52Z)\r\ngit-lfs: skipping fmt, no goimports found at `goimports` ...\r\ngo generate github.com/git-lfs/git-lfs/commands\r\ngo: github.com/git-lfs/go-ntlm@v0.0.0-20190307203151-c5056e7fa066: invalid pseudo-version: does not match version-control timestamp (2019-04-01T17:57:52Z)\r\nmake: *** [commands/mancontent_gen.go] Error 1\r\n```\r\n\r\nBummer.\r\n\r\n\r\n\r\n",
    "performed_via_github_app": null
}