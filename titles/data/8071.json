{
    "url": "https://api.github.com/repos/spack/spack/issues/8071",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8071/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8071/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8071/events",
    "html_url": "https://github.com/spack/spack/issues/8071",
    "id": 321418733,
    "node_id": "MDU6SXNzdWUzMjE0MTg3MzM=",
    "number": 8071,
    "title": "valgrind % gcc@8.1.0 is broken",
    "user": {
        "login": "KineticTheory",
        "id": 17579601,
        "node_id": "MDQ6VXNlcjE3NTc5NjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/17579601?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/KineticTheory",
        "html_url": "https://github.com/KineticTheory",
        "followers_url": "https://api.github.com/users/KineticTheory/followers",
        "following_url": "https://api.github.com/users/KineticTheory/following{/other_user}",
        "gists_url": "https://api.github.com/users/KineticTheory/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/KineticTheory/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/KineticTheory/subscriptions",
        "organizations_url": "https://api.github.com/users/KineticTheory/orgs",
        "repos_url": "https://api.github.com/users/KineticTheory/repos",
        "events_url": "https://api.github.com/users/KineticTheory/events{/privacy}",
        "received_events_url": "https://api.github.com/users/KineticTheory/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 616911200,
            "node_id": "MDU6TGFiZWw2MTY5MTEyMDA=",
            "url": "https://api.github.com/repos/spack/spack/labels/gcc",
            "name": "gcc",
            "color": "0052cc",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-05-09T03:33:13Z",
    "updated_at": "2019-05-25T22:05:05Z",
    "closed_at": "2019-05-25T22:05:05Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Summary\r\n\r\nI am trying out the recently released `gcc@8.1.0`, but I can't build `valgrind@3.13.0` with it.  I'm looking for help or hints about how to debug this build issue. I'm not familiar with `usban` features in gcc.\r\n\r\n### Actual Result\r\n\r\nValgrind fails to build due to errors of the form (extracted from spack-build.out):\r\n\r\n```\r\nmv -f .deps/memcheck_amd64_linux-mc_main.Tpo .deps/memcheck_amd64_linux-mc_main.Po\r\n../coregrind/link_tool_exe_linux 0x580000\r\n\r\n00 /scratch/vendors/spack.20180425/lib/spack/env/gcc/gcc     -o memcheck-amd64-linux -m64 -O2 -g -std=gnu99 -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wcast-align -Wcast-qual -Wwrite-strings -Wempty-body -Wformat -Wformat-security -Wignored-qualifiers -Wmissing-parameter-type -Wold-style-declaration -fno-stack-protector -fsanitize=undefined -fno-sanitize=alignment -fno-strict-aliasing -fno-builtin  -fomit-frame-pointer -O2 -static -nodefaultlibs -nostartfiles -u _start  -m64 memcheck_amd64_linux-mc_leakcheck.o memcheck_amd64_linux-mc_malloc_wrappers.o memcheck_amd64_linux-mc_main.o memcheck_amd64_linux-mc_translate.o memcheck_amd64_linux-mc_machine.o memcheck_amd64_linux-mc_errors.o ../coregrind/libcoregrind-amd64-linux.a ../VEX/libvex-amd64-linux.a -lgcc \r\nmemcheck_amd64_linux-mc_leakcheck.o: In function `compare_MC_Chunks':\r\n/tmp/kellyt/spack-stage/spack-stage-qiFafU/valgrind-3.13.0/memcheck/mc_leakcheck.c:254: undefined reference to `__ubsan_handle_type_mismatch_v1'\r\n/tmp/kellyt/spack-stage/spack-stage-qiFafU/valgrind-3.13.0/memcheck/mc_leakcheck.c:256: undefined reference to `__ubsan_handle_pointer_overflow'\r\n```\r\n\r\nI've not encountered this error before and I haven't had much success finding relevant information about ubsan and so I am looking for any hints that other spack users can provide.  Is this related to the `sanitize` build options?\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install -v valgrind % gcc@8.1.0\r\n```\r\n\r\n### Information on your system\r\n\r\n* Red Hat Enterprise Linux Workstation release 7.5 (Maipo)\r\n* [spack-build.out.txt](https://github.com/spack/spack/files/1986292/spack-build.out.txt)\r\n* [spack-build.env.txt](https://github.com/spack/spack/files/1986293/spack-build.env.txt)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "performed_via_github_app": null
}