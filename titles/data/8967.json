{
    "url": "https://api.github.com/repos/spack/spack/issues/8967",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8967/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8967/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8967/events",
    "html_url": "https://github.com/spack/spack/pull/8967",
    "id": 350044931,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjA3OTg5Mzc3",
    "number": 8967,
    "title": "Fix spack versions behavior when no URL",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 471995122,
            "node_id": "MDU6TGFiZWw0NzE5OTUxMjI=",
            "url": "https://api.github.com/repos/spack/spack/labels/commands",
            "name": "commands",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 509628729,
            "node_id": "MDU6TGFiZWw1MDk2Mjg3Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/error-messages",
            "name": "error-messages",
            "color": "f9d0c4",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2018-08-13T14:06:29Z",
    "updated_at": "2018-08-16T15:51:06Z",
    "closed_at": "2018-08-16T15:42:24Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/8967",
        "html_url": "https://github.com/spack/spack/pull/8967",
        "diff_url": "https://github.com/spack/spack/pull/8967.diff",
        "patch_url": "https://github.com/spack/spack/pull/8967.patch"
    },
    "body": "This fixes a bug introduced by #3161 and generally improves the behavior of `spack versions` when URLs or versions are not present in a package.\r\n\r\n### Before #3161 \r\n\r\nPackage with URL but no versions:\r\n```console\r\n$ spack versions zlib\r\n==> Safe versions (already checksummed):\r\n==> Remote versions (not yet checksummed):\r\n  1.2.11  1.2.7.3  1.2.6.1  1.2.5.1  1.2.4.3  1.2.3.9  1.2.3.5  1.2.3.1  1.2.2.2  1.2.1.1  1.2.0.6  1.2.0.2  1.1.3  1.0.9  1.0.5  1.0-pre  0.93  0.71\r\n  1.2.10  1.2.7.2  1.2.6    1.2.5    1.2.4.2  1.2.3.8  1.2.3.4  1.2.3    1.2.2.1  1.2.1    1.2.0.5  1.2.0.1  1.1.2  1.0.8  1.0.4  0.99     0.92  0.9\r\n  1.2.9   1.2.7.1  1.2.5.3  1.2.4.5  1.2.4.1  1.2.3.7  1.2.3.3  1.2.2.4  1.2.2    1.2.0.8  1.2.0.4  1.2.0    1.1.1  1.0.7  1.0.2  0.95     0.91  0.8\r\n  1.2.8   1.2.7    1.2.5.2  1.2.4.4  1.2.4    1.2.3.6  1.2.3.2  1.2.2.3  1.2.1.2  1.2.0.7  1.2.0.3  1.1.4    1.1.0  1.0.6  1.0.1  0.94     0.79\r\n```\r\nPackage with versions but no URL:\r\n```console\r\n$ spack versions intel\r\n==> Safe versions (already checksummed):\r\n  18.0.1  18.0.0  17.0.4  17.0.3  17.0.2  17.0.1  17.0.0  16.0.4  16.0.3  16.0.2\r\n==> Remote versions (not yet checksummed):\r\n  Found no versions for intel\r\n```\r\nPackage with no versions or URL:\r\n```console\r\n$ spack versions opengl\r\n==> Error: <class 'spack.pkg.builtin.opengl.Opengl'>\r\n```\r\n### After #3161 \r\n\r\nPackage with URL but no versions:\r\n```console\r\n$ spack versions zlib\r\n==> Safe versions (already checksummed):\r\n==> Remote versions (not yet checksummed):\r\n  1.2.11  1.2.7.3  1.2.6.1  1.2.5.1  1.2.4.3  1.2.3.9  1.2.3.5  1.2.3.1  1.2.2.2  1.2.1.1  1.2.0.6  1.2.0.2  1.1.3  1.0.9  1.0.5  1.0-pre  0.93  0.71\r\n  1.2.10  1.2.7.2  1.2.6    1.2.5    1.2.4.2  1.2.3.8  1.2.3.4  1.2.3    1.2.2.1  1.2.1    1.2.0.5  1.2.0.1  1.1.2  1.0.8  1.0.4  0.99     0.92  0.9\r\n  1.2.9   1.2.7.1  1.2.5.3  1.2.4.5  1.2.4.1  1.2.3.7  1.2.3.3  1.2.2.4  1.2.2    1.2.0.8  1.2.0.4  1.2.0    1.1.1  1.0.7  1.0.2  0.95     0.91  0.8\r\n  1.2.8   1.2.7    1.2.5.2  1.2.4.4  1.2.4    1.2.3.6  1.2.3.2  1.2.2.3  1.2.1.2  1.2.0.7  1.2.0.3  1.1.4    1.1.0  1.0.6  1.0.1  0.94     0.79\r\n```\r\nPackage with versions but no URL:\r\n```console\r\n$ spack versions intel\r\n==> Error: 'Intel' object has no attribute 'url'\r\n```\r\nPackage with no versions or URL:\r\n```console\r\n$ spack versions opengl\r\n==> Error: 'Opengl' object has no attribute 'url'\r\n```\r\n\r\n### With this PR\r\n\r\nPackage with URL but no versions:\r\n```console\r\n$ spack versions zlib\r\n==> Safe versions (already checksummed):\r\n  Found no versions for zlib\r\n==> Remote versions (not yet checksummed):\r\n  1.2.11  1.2.7.3  1.2.6.1  1.2.5.1  1.2.4.3  1.2.3.9  1.2.3.5  1.2.3.1  1.2.2.2  1.2.1.1  1.2.0.6  1.2.0.2  1.1.3  1.0.9  1.0.5  1.0-pre  0.93  0.71\r\n  1.2.10  1.2.7.2  1.2.6    1.2.5    1.2.4.2  1.2.3.8  1.2.3.4  1.2.3    1.2.2.1  1.2.1    1.2.0.5  1.2.0.1  1.1.2  1.0.8  1.0.4  0.99     0.92  0.9\r\n  1.2.9   1.2.7.1  1.2.5.3  1.2.4.5  1.2.4.1  1.2.3.7  1.2.3.3  1.2.2.4  1.2.2    1.2.0.8  1.2.0.4  1.2.0    1.1.1  1.0.7  1.0.2  0.95     0.91  0.8\r\n  1.2.8   1.2.7    1.2.5.2  1.2.4.4  1.2.4    1.2.3.6  1.2.3.2  1.2.2.3  1.2.1.2  1.2.0.7  1.2.0.3  1.1.4    1.1.0  1.0.6  1.0.1  0.94     0.79\r\n```\r\nPackage with versions but no URL:\r\n```console\r\n$ spack versions intel\r\n==> Safe versions (already checksummed):\r\n  18.0.1  18.0.0  17.0.4  17.0.3  17.0.2  17.0.1  17.0.0  16.0.4  16.0.3  16.0.2\r\n==> Remote versions (not yet checksummed):\r\n  Found no versions for intel\r\n```\r\nPackage with no versions or URL:\r\n```console\r\n$ spack versions opengl\r\n==> Safe versions (already checksummed):\r\n  Found no versions for opengl\r\n==> Remote versions (not yet checksummed):\r\n  Found no versions for opengl\r\n```\r\n\r\nPreviously, Spack would spend several seconds spidering the web searching for new versions before anything was printed. Now, Spack immediately prints a list of safe versions and lets the user know that it is now searching for remote versions.\r\n\r\nFeedback on error messages is welcome.\r\n\r\nFirst reported by @ssergien ",
    "performed_via_github_app": null
}