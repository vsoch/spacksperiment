{
    "url": "https://api.github.com/repos/spack/spack/issues/614",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/614/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/614/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/614/events",
    "html_url": "https://github.com/spack/spack/issues/614",
    "id": 142906188,
    "node_id": "MDU6SXNzdWUxNDI5MDYxODg=",
    "number": 614,
    "title": "Parmetis does not compile with newer version of gcc (on UNIX systems)",
    "user": {
        "login": "nrichart",
        "id": 5098572,
        "node_id": "MDQ6VXNlcjUwOTg1NzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5098572?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nrichart",
        "html_url": "https://github.com/nrichart",
        "followers_url": "https://api.github.com/users/nrichart/followers",
        "following_url": "https://api.github.com/users/nrichart/following{/other_user}",
        "gists_url": "https://api.github.com/users/nrichart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/nrichart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nrichart/subscriptions",
        "organizations_url": "https://api.github.com/users/nrichart/orgs",
        "repos_url": "https://api.github.com/users/nrichart/repos",
        "events_url": "https://api.github.com/users/nrichart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/nrichart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2016-03-23T09:18:50Z",
    "updated_at": "2016-03-25T20:23:37Z",
    "closed_at": "2016-03-25T20:23:37Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "The split of the `parmetis` package introduced a bug that appears with new version of gcc, we tested 4.8 and 5.3. With 4.4 it compiles.\n\nThe problem is with a missing link with libm, before the change this link is pulled by metis that was a cmake subdirectory. The target `metis` is explicitely linked with `m` in case of unix system. The `parmetis` target is then linked by transitivity.\n\nNo that `parmetis` is linked with an external `metis` library this transitivity does not exists anymore.\n\nI see 3 solutions:\n- patch the `metis` cmake to export the target and use a find_package in `parmetis` to link correctly with `metis`\n- do a quick and dirty patch in `parmetis` to make it link with the same condition as `metis` on `libm`\n- fallback to the version of the package where `metis` is in `parmetis`\n\nThe last one is the less invasive and needs no patch on compilation system of the packages,\nThe first one would be the cleanest if we stay with split packages, but also the most invasive and thus the hardest to maintain.\nThe second one is as already mentioned a quick and dirty fix.\n\nThis raise another problem, depending on the compiler we need or not link with `libm` explicitly. I guess we should hope the build system of packages should handle it correclty. But for `metis` for example the condition is `if(UNIX)` this will most probably already fail with intel compilers so perhaps with others too.\n",
    "performed_via_github_app": null
}