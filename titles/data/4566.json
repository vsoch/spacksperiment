{
    "url": "https://api.github.com/repos/spack/spack/issues/4566",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4566/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4566/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4566/events",
    "html_url": "https://github.com/spack/spack/issues/4566",
    "id": 237518358,
    "node_id": "MDU6SXNzdWUyMzc1MTgzNTg=",
    "number": 4566,
    "title": "Sample packages.yaml in Cray documentation is broken",
    "user": {
        "login": "EmreAtes",
        "id": 15252235,
        "node_id": "MDQ6VXNlcjE1MjUyMjM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15252235?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/EmreAtes",
        "html_url": "https://github.com/EmreAtes",
        "followers_url": "https://api.github.com/users/EmreAtes/followers",
        "following_url": "https://api.github.com/users/EmreAtes/following{/other_user}",
        "gists_url": "https://api.github.com/users/EmreAtes/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/EmreAtes/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/EmreAtes/subscriptions",
        "organizations_url": "https://api.github.com/users/EmreAtes/orgs",
        "repos_url": "https://api.github.com/users/EmreAtes/repos",
        "events_url": "https://api.github.com/users/EmreAtes/events{/privacy}",
        "received_events_url": "https://api.github.com/users/EmreAtes/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446615135,
            "node_id": "MDU6TGFiZWw0NDY2MTUxMzU=",
            "url": "https://api.github.com/repos/spack/spack/labels/configuration",
            "name": "configuration",
            "color": "bfd4f2",
            "default": false,
            "description": null
        },
        {
            "id": 446614485,
            "node_id": "MDU6TGFiZWw0NDY2MTQ0ODU=",
            "url": "https://api.github.com/repos/spack/spack/labels/cray",
            "name": "cray",
            "color": "b60205",
            "default": false,
            "description": null
        },
        {
            "id": 446625544,
            "node_id": "MDU6TGFiZWw0NDY2MjU1NDQ=",
            "url": "https://api.github.com/repos/spack/spack/labels/documentation",
            "name": "documentation",
            "color": "0d5977",
            "default": true,
            "description": ""
        },
        {
            "id": 455855856,
            "node_id": "MDU6TGFiZWw0NTU4NTU4NTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/external-packages",
            "name": "external-packages",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-06-21T12:34:36Z",
    "updated_at": "2017-06-21T16:20:20Z",
    "closed_at": "2017-06-21T16:20:20Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I've created a `packages.yaml` based on the example in the [documentation](https://spack.readthedocs.io/en/latest/getting_started.html#setting-defaults-and-using-cray-modules):\r\n```YAML\r\npackages:\r\n    mpi:\r\n        modules: \r\n            cray-mpich@7.5.1 arch=cray-CNL-ivybridge: cray-mpich/7.5.1\r\n        buildable: False\r\n```\r\nHowever, when I try to use spack with this file, I get the error\r\n```\r\n==> Error: packages.yaml entries cannot be virtual packages:\r\n  in \"/home/eates/.spack/packages.yaml\", line 2, column 5: mpi\r\n```\r\nThe correct `packages.yaml` file that the latest version of spack accepts is this:\r\n```YAML\r\npackages:\r\n    mpich:\r\n        modules: \r\n            cray-mpich@7.5.1 arch=cray-CNL-ivybridge: cray-mpich/7.5.1\r\n        buildable: False\r\n    all:\r\n        providers:\r\n            mpi: [mpich]\r\n```\r\nHowever, I might have constructed the final file incorrectly, since when I try to install kripke that only depends on mpi, it tries to compile other packages (e.g. libpciaccess which is problematic) which it shouldn't compile according to the graph:\r\n```\r\no  kripke\r\no  openmpi\r\no  hwloc\r\n|\\\r\n| |\\\r\n| o |  libxml2\r\n|/| | \r\n| |\\ \\\r\n| o | |  zlib\r\n|  / /\r\n| o |  xz\r\n|  /\r\n| o  libpciaccess\r\n|/| \r\n| |\\\r\n| o |  util-macros\r\n|  /\r\no |  pkg-config\r\n /\r\no  libtool\r\no  m4\r\no  libsigsegv\r\n```",
    "performed_via_github_app": null
}