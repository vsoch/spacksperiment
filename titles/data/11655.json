{
    "url": "https://api.github.com/repos/spack/spack/issues/11655",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/11655/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/11655/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/11655/events",
    "html_url": "https://github.com/spack/spack/issues/11655",
    "id": 453422564,
    "node_id": "MDU6SXNzdWU0NTM0MjI1NjQ=",
    "number": 11655,
    "title": "Flags do not propagate correctly [Clang8+Polly]",
    "user": {
        "login": "termi-official",
        "id": 9196588,
        "node_id": "MDQ6VXNlcjkxOTY1ODg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9196588?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/termi-official",
        "html_url": "https://github.com/termi-official",
        "followers_url": "https://api.github.com/users/termi-official/followers",
        "following_url": "https://api.github.com/users/termi-official/following{/other_user}",
        "gists_url": "https://api.github.com/users/termi-official/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/termi-official/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/termi-official/subscriptions",
        "organizations_url": "https://api.github.com/users/termi-official/orgs",
        "repos_url": "https://api.github.com/users/termi-official/repos",
        "events_url": "https://api.github.com/users/termi-official/events{/privacy}",
        "received_events_url": "https://api.github.com/users/termi-official/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 512483297,
            "node_id": "MDU6TGFiZWw1MTI0ODMyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-low",
            "name": "impact-low",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 480333036,
            "node_id": "MDU6TGFiZWw0ODAzMzMwMzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/workaround",
            "name": "workaround",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tldahlgren",
            "id": 35777542,
            "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tldahlgren",
            "html_url": "https://github.com/tldahlgren",
            "followers_url": "https://api.github.com/users/tldahlgren/followers",
            "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
            "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
            "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
            "repos_url": "https://api.github.com/users/tldahlgren/repos",
            "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-06-07T09:33:17Z",
    "updated_at": "2019-08-22T17:57:02Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I tried to setup some optimized builds with spack by using LLVM's polyhedral optimizer (polly). Specific optimizations are enabled by passing command line flags (e.g. -O3 -mllvm -polly -mllvm -polly-vectorizer=stripmine) to the toolchain. As a side note, I use LLVM8.0.0 from the spack repository for reproducibility. I tried to pass these flags down via cflags (and cxxflags) and ran into two problems (the full compiler.yaml can be found below):\r\n\r\n1. The second \"-mllvm\" just disappears at some point, leaving \"-mllvm -polly -polly-vectorizer=stripmine\". This basically results in the build breaking instantaneously. I \"resolved\" this by removing the second pair of arguments, i.e. \"-mllvm -polly-vectorizer=stripmine\".\r\n2. Now this hotfix allowed me to build some packages, but I got stuck at building cmake. Thebuild of this dependency failed due to a strange warning, which I could not reproduce when compiling the corresponding files manually via command line.\r\n```console\r\nclang-8: warning: argument unused during compilation: '-mllvm -polly' [-Wunused-command-line-argument]\r\n```\r\n\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install llvm@8.0.0\r\n$ spack module load llvm@8.0.0\r\n$ spack compiler find\r\n```\r\n\r\nAt this point I manually adjusted the compiler.yaml (see below).\r\n\r\nFor 1.\r\n```console\r\n$ spack install petsc@3.11.1 %clang@8.0.0 cflags=\"-O3 -mllvm -polly -mllvm -polly-vectorizer=stripmine -mtune=native -march=native\" cxxflags=\"-O3 -mllvm -polly -mllvm -polly-vectorizer=stripmine -mtune=native -march=native\" +fftw +mumps \r\n```\r\nThis one fails immediately.\r\nNote: \"-mtune=native -march=native\" should be optional. \r\n\r\nFor 2.\r\n```console\r\n$ spack install petsc@3.11.1 %clang@8.0.0 cflags=\"-O3 -mllvm -polly -mtune=native -march=native\" cxxflags=\"-O3 -mllvm -polly -mtune=native -march=native\" +fftw +mumps \r\n```\r\nIt also looks like this one is already reproducible simply by building cmake directly, i.e.\r\n```console\r\n$ spack install cmake %clang@8.0.0 cflags=\"-O3 -mllvm -polly -mtune=native -march=native\" cxxflags=\"-O3 -mllvm -polly -mtune=native -march=native\"\r\n``` \r\n\r\nNote: Building petsc withouth cflags and cxxflags as above works fine with\r\n```console\r\nspack install petsc@3.11.1 %clang@8.0.0\r\n```\r\nalthough I had to patch vtk, tcl, metis and parmetis according to previously reported suggestions issues. These patches seem to not have any effect on the hereby reported issue.\r\n\r\n### Error Message\r\n\r\n```console\r\n$ spack -d --stacktrace install cmake %clang@8.0.0 cflags=\"-O3 -mllvm -polly -mtune=native -march=native\" cxxflags=\"-O3 -mllvm -polly -mtune=native -march=native\"\r\n```\r\nwith the following output\r\n```console\r\nlib/spack/spack/package.py:1449 ==> [2019-06-07-11:09:23.983996] Installing cmake\r\nlib/spack/spack/package.py:1313 ==> [2019-06-07-11:09:23.984114] Searching for binary cache of cmake\r\nlib/spack/spack/binary_distribution.py:598 ==> [2019-06-07-11:09:23.984523] Warning: No Spack mirrors are currently configured\r\nlib/spack/spack/package.py:1460 ==> [2019-06-07-11:09:23.990612] No binary for cmake found: installing from source\r\nlib/spack/spack/build_environment.py:285 ==> [2019-06-07-11:09:24.106631] No libraries found for tar\r\nlib/spack/spack/build_environment.py:299 ==> [2019-06-07-11:09:24.106998] No headers found for tar\r\nlib/spack/spack/build_environment.py:285 ==> [2019-06-07-11:09:24.183962] No libraries found for gettext\r\nlib/spack/spack/build_environment.py:689 ==> [2019-06-07-11:09:24.358744] A dependency has updated CPATH, this may lead pkg-config to assume that the package is part of the system includes and omit it when invoked with '--cflags'.\r\nlib/spack/spack/fetch_strategy.py:442 ==> [2019-06-07-11:09:24.378504] Using cached archive: /home/termi/Repos/spack/var/spack/cache/cmake/cmake-3.14.4.tar.gz\r\nlib/spack/spack/fetch_strategy.py:319 ==> [2019-06-07-11:09:24.387141] Staging archive: /home/termi/Repos/spack/var/spack/stage/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq/cmake-3.14.4.tar.gz\r\nlib/spack/spack/util/executable.py:159 ==> [2019-06-07-11:09:24.388106] '/usr/bin/tar' '-xf' '/home/termi/Repos/spack/var/spack/stage/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq/cmake-3.14.4.tar.gz'\r\nlib/spack/spack/stage.py:447 ==> [2019-06-07-11:09:24.762819] Created stage in /home/termi/Repos/spack/var/spack/stage/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq\r\nlib/spack/spack/package.py:1001 ==> [2019-06-07-11:09:24.763456] No patches needed for cmake\r\nlib/spack/spack/package.py:1484 ==> [2019-06-07-11:09:24.763628] Building cmake [Package]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:24.763961] WRITE LOCK: /home/termi/Repos/spack/var/spack/stage/.lock[8970318281414705665:1] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:24.764312] WRITE LOCK: /home/termi/Repos/spack/var/spack/stage/.lock[8970318281414705665:1] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:24.764825] WRITE LOCK: /home/termi/Repos/spack/opt/spack/.spack-db/prefix_lock[6222332497253061840:1] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:24.765097] WRITE LOCK: /home/termi/Repos/spack/opt/spack/.spack-db/prefix_lock[6222332497253061840:1] [Acquired]\r\nlib/spack/spack/package.py:1525 ==> [2019-06-07-11:09:24.770445] Executing phase: 'bootstrap'\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:54.787307] WRITE LOCK: /home/termi/Repos/spack/opt/spack/.spack-db/prefix_lock[6222332497253061840:1] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-06-07-11:09:54.788130] WRITE LOCK: /home/termi/Repos/spack/var/spack/stage/.lock[8970318281414705665:1] [Released]\r\nlib/spack/spack/error.py:55 ==> [2019-06-07-11:09:54.794473] Error: ProcessError: Command exited with status 11:\r\n    './bootstrap' '--prefix=/home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/clang-8.0.0/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq' '--parallel=32' '--no-system-libs' '--no-qt-gui' '--' '-DCMAKE_USE_OPENSSL=ON'\r\n\r\n2 errors found in build log:\r\n     242    -- Checking if compiler supports needed C++17 constructs\r\n     243    -- Checking if compiler supports needed C++17 constructs - yes\r\n     244    -- Checking if compiler supports C++ make_unique\r\n     245    -- Checking if compiler supports C++ make_unique - no\r\n     246    -- Checking if compiler supports C++ unique_ptr\r\n     247    -- Checking if compiler supports C++ unique_ptr - no\r\n  >> 248    CMake Error at CMakeLists.txt:92 (message):\r\n     249      The C++ compiler does not support C++11 (e.g.  std::unique_ptr).\r\n     250    \r\n     251    \r\n     252    -- Configuring incomplete, errors occurred!\r\n     253    See also \"/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeOutput.log\".\r\n     254    See also \"/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeError.log\".\r\n     255    ---------------------------------------------\r\n  >> 256    Error when bootstrapping CMake:\r\n     257    Problem while running initial CMake\r\n     258    ---------------------------------------------\r\n\r\nSee build log for details:\r\n  /home/termi/Repos/spack/var/spack/stage/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq/spack-build.out\r\nTraceback (most recent call last):\r\n  File \"/home/termi/Repos/spack/lib/spack/spack/build_environment.py\", line 765, in child_process\r\n    return_value = function()\r\n  File \"/home/termi/Repos/spack/lib/spack/spack/package.py\", line 1530, in build_process\r\n    phase(self.spec, self.prefix)\r\n  File \"/home/termi/Repos/spack/lib/spack/spack/package.py\", line 102, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/home/termi/Repos/spack/var/spack/repos/builtin/packages/cmake/package.py\", line 144, in bootstrap\r\n  File \"/home/termi/Repos/spack/lib/spack/spack/util/executable.py\", line 189, in __call__\r\n    proc.returncode, long_msg)\r\nProcessError: Command exited with status 11:\r\n    './bootstrap' '--prefix=/home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/clang-8.0.0/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq' '--parallel=32' '--no-system-libs' '--no-qt-gui' '--' '-DCMAKE_USE_OPENSSL=ON'\r\n```\r\n\r\nFile content of /home/termi/Repos/spack/var/spack/stage/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq/spack-build.out\r\n```console\r\nlib/spack/spack/package.py:1525 ==> [2019-06-07-11:09:24.770445] Executing phase: 'bootstrap'\r\nlib/spack/spack/util/executable.py:159 ==> [2019-06-07-11:09:24.778282] './bootstrap' '--prefix=/home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/clang-8.0.0/cmake-3.14.4-vs2fjyf2i2u2czdzwbzhjb4jzlkd7zbq' '--parallel=32' '--no-system-libs' '--no-qt-gui' '--' '-DCMAKE_USE_OPENSSL=ON'\r\n---------------------------------------------\r\nCMake 3.14.4, Copyright 2000-2019 Kitware, Inc. and Contributors\r\nC compiler on this system is: /home/termi/Repos/spack/lib/spack/env/clang/clang       \r\nC++ compiler on this system is: /home/termi/Repos/spack/lib/spack/env/clang/clang++          \r\nMakefile processor on this system is: gmake\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++ has setenv\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++ has unsetenv\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++ does not have environ in stdlib.h\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++ has stl wstring\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++ does not have <ext/stdio_filebuf.h>\r\n---------------------------------------------\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++              -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/LexerParser   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Utilities  -c /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/cmAddCustomCommandCommand.cxx -o cmAddCustomCommandCommand.o\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++              -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/LexerParser   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Utilities  -c /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/cmAddCustomTargetCommand.cxx -o cmAddCustomTargetCommand.o\r\n...excluded some noise...\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++               -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/LexerParser   -I/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Utilities  cmAddCustomCommandCommand.o cmAddCustomTargetCommand.o cmAddDefinitionsCommand.o cmAddDependenciesCommand.o cmAddExecutableCommand.o cmAddLibraryCommand.o cmAddSubDirectoryCommand.o cmAddTestCommand.o cmBreakCommand.o cmBuildCommand.o cmCMakeMinimumRequired.o cmCMakePolicyCommand.o cmCPackPropertiesGenerator.o cmCacheManager.o cmCommand.o cmCommandArgumentParserHelper.o cmCommandArgumentsHelper.o cmCommands.o cmCommonTargetGenerator.o cmComputeComponentGraph.o cmComputeLinkDepends.o cmComputeLinkInformation.o cmComputeTargetDepends.o cmConditionEvaluator.o cmConfigureFileCommand.o cmContinueCommand.o cmCoreTryCompile.o cmCreateTestSourceList.o cmCustomCommand.o cmCustomCommandGenerator.o cmDefinePropertyCommand.o cmDefinitions.o cmDepends.o cmDependsC.o cmDisallowedCommand.o cmDocumentationFormatter.o cmEnableLanguageCommand.o cmEnableTestingCommand.o cmExecProgramCommand.o cmExecuteProcessCommand.o cmExpandedCommandArgument.o cmExportBuildFileGenerator.o cmExportFileGenerator.o cmExportInstallFileGenerator.o cmExportSet.o cmExportSetMap.o cmExportTryCompileFileGenerator.o cmExprParserHelper.o cmExternalMakefileProjectGenerator.o cmFileCommand.o cmFileTimeComparison.o cmFindBase.o cmFindCommon.o cmFindFileCommand.o cmFindLibraryCommand.o cmFindPackageCommand.o cmFindPathCommand.o cmFindProgramCommand.o cmForEachCommand.o cmFunctionCommand.o cmFSPermissions.o cmGeneratedFileStream.o cmGeneratorExpression.o cmGeneratorExpressionContext.o cmGeneratorExpressionDAGChecker.o cmGeneratorExpressionEvaluationFile.o cmGeneratorExpressionEvaluator.o cmGeneratorExpressionLexer.o cmGeneratorExpressionNode.o cmGeneratorExpressionParser.o cmGeneratorTarget.o cmGetCMakePropertyCommand.o cmGetDirectoryPropertyCommand.o cmGetFilenameComponentCommand.o cmGetPropertyCommand.o cmGetSourceFilePropertyCommand.o cmGetTargetPropertyCommand.o cmGetTestPropertyCommand.o cmGlobalCommonGenerator.o cmGlobalGenerator.o cmGlobalUnixMakefileGenerator3.o cmGlobVerificationManager.o cmHexFileConverter.o cmIfCommand.o cmIncludeCommand.o cmIncludeGuardCommand.o cmIncludeDirectoryCommand.o cmIncludeRegularExpressionCommand.o cmInstallCommand.o cmInstallCommandArguments.o cmInstallDirectoryGenerator.o cmInstallExportGenerator.o cmInstallFilesCommand.o cmInstallFilesGenerator.o cmInstallGenerator.o cmInstallScriptGenerator.o cmInstallSubdirectoryGenerator.o cmInstallTargetGenerator.o cmInstallTargetsCommand.o cmInstalledFile.o cmLinkDirectoriesCommand.o cmLinkItem.o cmLinkLineComputer.o cmListCommand.o cmListFileCache.o cmLocalCommonGenerator.o cmLocalGenerator.o cmLocalUnixMakefileGenerator3.o cmMSVC60LinkLineComputer.o cmMacroCommand.o cmMakeDirectoryCommand.o cmMakefile.o cmMakefileExecutableTargetGenerator.o cmMakefileLibraryTargetGenerator.o cmMakefileTargetGenerator.o cmMakefileUtilityTargetGenerator.o cmMarkAsAdvancedCommand.o cmMathCommand.o cmMessageCommand.o cmMessenger.o cmNewLineStyle.o cmOSXBundleGenerator.o cmOptionCommand.o cmOrderDirectories.o cmOutputConverter.o cmParseArgumentsCommand.o cmPathLabel.o cmPolicies.o cmProcessOutput.o cmProjectCommand.o cmProperty.o cmPropertyDefinition.o cmPropertyDefinitionMap.o cmPropertyMap.o cmReturnCommand.o cmRulePlaceholderExpander.o cmScriptGenerator.o cmSearchPath.o cmSeparateArgumentsCommand.o cmSetCommand.o cmSetDirectoryPropertiesCommand.o cmSetPropertyCommand.o cmSetSourceFilesPropertiesCommand.o cmSetTargetPropertiesCommand.o cmSetTestsPropertiesCommand.o cmSiteNameCommand.o cmSourceFile.o cmSourceFileLocation.o cmState.o cmStateDirectory.o cmStateSnapshot.o cmStringReplaceHelper.o cmStringCommand.o cmSubdirCommand.o cmSystemTools.o cmTarget.o cmTargetCompileDefinitionsCommand.o cmTargetCompileFeaturesCommand.o cmTargetCompileOptionsCommand.o cmTargetIncludeDirectoriesCommand.o cmTargetLinkLibrariesCommand.o cmTargetPropCommandBase.o cmTargetPropertyComputer.o cmTargetSourcesCommand.o cmTest.o cmTestGenerator.o cmTimestamp.o cmTryCompileCommand.o cmTryRunCommand.o cmUnexpectedCommand.o cmUnsetCommand.o cmUVHandlePtr.o cmVersion.o cmWhileCommand.o cmWorkingDirectory.o cmake.o cmakemain.o cmcmd.o cm_string_view.o cmCommandArgumentLexer.o cmCommandArgumentParser.o cmExprLexer.o cmExprParser.o cmListFileLexer.o Directory.o EncodingCXX.o FStream.o Glob.o RegularExpression.o SystemTools.o EncodingC.o ProcessUNIX.o String.o System.o Terminal.o uv-src-strscpy.c.o uv-src-timer.c.o uv-src-uv-common.c.o uv-src-unix-cmake-bootstrap.c.o uv-src-unix-core.c.o uv-src-unix-fs.c.o uv-src-unix-loop.c.o uv-src-unix-loop-watcher.c.o uv-src-unix-no-fsevents.c.o uv-src-unix-pipe.c.o uv-src-unix-poll.c.o uv-src-unix-posix-hrtime.c.o uv-src-unix-posix-poll.c.o uv-src-unix-process.c.o uv-src-unix-signal.c.o uv-src-unix-stream.c.o  -ldl -lrt -o cmake\r\nclang-8: warning: argument unused during compilation: '-mllvm -polly' [-Wunused-command-line-argument]\r\nloading initial cache file /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk/InitialCacheFlags.cmake\r\n-- The C compiler identification is Clang 8.0.0\r\n-- The CXX compiler identification is Clang 8.0.0\r\n-- Check for working C compiler: /home/termi/Repos/spack/lib/spack/env/clang/clang\r\n-- Check for working C compiler: /home/termi/Repos/spack/lib/spack/env/clang/clang -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: /home/termi/Repos/spack/lib/spack/env/clang/clang++\r\n-- Check for working CXX compiler: /home/termi/Repos/spack/lib/spack/env/clang/clang++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Checking if compiler supports needed C++17 constructs\r\n-- Checking if compiler supports needed C++17 constructs - yes\r\n-- Checking if compiler supports C++ make_unique\r\n-- Checking if compiler supports C++ make_unique - no\r\n-- Checking if compiler supports C++ unique_ptr\r\n-- Checking if compiler supports C++ unique_ptr - no\r\nCMake Error at CMakeLists.txt:92 (message):\r\n  The C++ compiler does not support C++11 (e.g.  std::unique_ptr).\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeError.log\".\r\n---------------------------------------------\r\nError when bootstrapping CMake:\r\nProblem while running initial CMake\r\n---------------------------------------------\r\n```\r\n\r\nFile content of /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeError.log\r\n```console\r\nDetermining if compiler supports C++ make_unique failed with the following output:\r\nChange Dir: /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_484f2/fast \r\ngmake -f CMakeFiles/cmTC_484f2.dir/build.make CMakeFiles/cmTC_484f2.dir/build\r\ngmake[1]: Entering directory '/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp'\r\nBuilding CXX object CMakeFiles/cmTC_484f2.dir/cm_cxx_make_unique.cxx.o\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++    -std=gnu++17 -o CMakeFiles/cmTC_484f2.dir/cm_cxx_make_unique.cxx.o -c /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/Checks/cm_cxx_make_unique.cxx\r\nLinking CXX executable cmTC_484f2\r\n/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk/cmake -E cmake_link_script CMakeFiles/cmTC_484f2.dir/link.txt --verbose=1\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++       CMakeFiles/cmTC_484f2.dir/cm_cxx_make_unique.cxx.o  -o cmTC_484f2 \r\nclang-8: warning: argument unused during compilation: '-mllvm -polly' [-Wunused-command-line-argument]\r\ngmake[1]: Leaving directory '/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp'\r\n\r\n\r\nDetermining if compiler supports C++ unique_ptr failed with the following output:\r\nChange Dir: /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_9d046/fast \r\ngmake -f CMakeFiles/cmTC_9d046.dir/build.make CMakeFiles/cmTC_9d046.dir/build\r\ngmake[1]: Entering directory '/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp'\r\nBuilding CXX object CMakeFiles/cmTC_9d046.dir/cm_cxx_unique_ptr.cxx.o\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++    -std=gnu++17 -o CMakeFiles/cmTC_9d046.dir/cm_cxx_unique_ptr.cxx.o -c /tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Source/Checks/cm_cxx_unique_ptr.cxx\r\nLinking CXX executable cmTC_9d046\r\n/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/Bootstrap.cmk/cmake -E cmake_link_script CMakeFiles/cmTC_9d046.dir/link.txt --verbose=1\r\n/home/termi/Repos/spack/lib/spack/env/clang/clang++       CMakeFiles/cmTC_9d046.dir/cm_cxx_unique_ptr.cxx.o  -o cmTC_9d046 \r\nclang-8: warning: argument unused during compilation: '-mllvm -polly' [-Wunused-command-line-argument]\r\ngmake[1]: Leaving directory '/tmp/termi/spack-stage/spack-stage-y1Wc_A/cmake-3.14.4/CMakeFiles/CMakeTmp'\r\n```\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n 1. openSUSE Leap 15.1\r\n 2. customized compiler.yaml to include gfortran and llvm's rpath\r\n```yaml\r\ncompilers:\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: [/home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-8.2.1/llvm-8.0.0-43synebubx4ya37p7it63xmsmlfoqu6c/lib]\r\n    modules: []\r\n    operating_system: opensuse_leap15\r\n    paths:\r\n      cc: /home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-8.2.1/llvm-8.0.0-43synebubx4ya37p7it63xmsmlfoqu6c/bin/clang\r\n      cxx: /home/termi/Repos/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-8.2.1/llvm-8.0.0-43synebubx4ya37p7it63xmsmlfoqu6c/bin/clang++\r\n      f77: /usr/bin/gfortran\r\n      fc: /usr/bin/gfortran\r\n    spec: clang@8.0.0\r\n    target: x86_64\r\n```",
    "performed_via_github_app": null
}