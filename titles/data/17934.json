{
    "url": "https://api.github.com/repos/spack/spack/issues/17934",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17934/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17934/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17934/events",
    "html_url": "https://github.com/spack/spack/issues/17934",
    "id": 675174917,
    "node_id": "MDU6SXNzdWU2NzUxNzQ5MTc=",
    "number": 17934,
    "title": "Installation issue: mpich",
    "user": {
        "login": "LDAmorim",
        "id": 15057096,
        "node_id": "MDQ6VXNlcjE1MDU3MDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/15057096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LDAmorim",
        "html_url": "https://github.com/LDAmorim",
        "followers_url": "https://api.github.com/users/LDAmorim/followers",
        "following_url": "https://api.github.com/users/LDAmorim/following{/other_user}",
        "gists_url": "https://api.github.com/users/LDAmorim/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/LDAmorim/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LDAmorim/subscriptions",
        "organizations_url": "https://api.github.com/users/LDAmorim/orgs",
        "repos_url": "https://api.github.com/users/LDAmorim/repos",
        "events_url": "https://api.github.com/users/LDAmorim/events{/privacy}",
        "received_events_url": "https://api.github.com/users/LDAmorim/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 10,
    "created_at": "2020-08-07T17:51:14Z",
    "updated_at": "2020-10-21T17:34:46Z",
    "closed_at": "2020-10-21T17:34:46Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\n\r\nThis issue is related to https://github.com/spack/spack/issues/16913, but for macOS (clang).\r\nAnd can be fixed by extending/duplicating the fix for compiler `gcc@10:` to `apple-clang@11:`.\r\n\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install mpich\r\n==> Warning: apple-clang@11.0.3 cannot build optimized binaries for \"skylake\". Using best target possible: \"x86_64\"\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/libsigsegv-2.12-cd2u6jt6oagbnhsgqal54myovfkwpri6\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/berkeley-db-18.1.40-3f4556kvgg2ihsahtuy4ta27i65hnikf\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/pkgconf-1.7.3-52kfpvjixcntquvt67sltjuajdhq73od\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/libiconv-1.16-2owd6xnxysuqdfuuu4mgemxmdhgto4px\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/xz-5.2.5-nfsvq5xchnmyvqc333p644ouuwnk7awe\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/zlib-1.2.11-7erteezzqncanvj4cr4lesgcawuztojo\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/m4-1.4.18-anoponiwofd7dqkxmcqy6iq6ildhe5s2\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/ncurses-6.2-wr2lahob7rnaawch75w2p5rce4qk3qul\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/libxml2-2.9.10-cvsddxrqg4jwdgk2xopykzztgwwypl3f\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/libtool-2.4.6-yrvttuduwubr6aebtif4ezrllojrfi7i\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/readline-8.0-mtiikfoyt34p7bvxqz3talk7xv5azul4\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/hwloc-2.2.0-ox7oz3tzcswqhmvo2urhb76oeum7ntpo\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gdbm-1.18.1-aaqin73b6t3wbxht7pdtw3ozteqmecd2\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/perl-5.30.3-7aafes7kqahuojjmxcqtwdezuqh74ya4\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/texinfo-6.5-bpmdlwfjdbg3dynlm5hjtnhtohpcaqyy\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/autoconf-2.69-caqezswjz5nwgqaxltqjnk25qjsuszfo\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/automake-1.16.2-2ug6frtywzpnmtbh2uji4pllbcgbbeoy\r\n[+] /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/findutils-4.6.0-2swrp2onomc2norjkbmshw5xajlxrerw\r\n==> Installing mpich\r\n==> No binary for mpich found: installing from source\r\n==> Warning: microarchitecture specific optimizations are not supported yet on mixed compiler toolchains [check apple-clang@11.0.3 for further details]\r\n==> mpich: Executing phase: 'autoreconf'\r\n==> mpich: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/var/folders/5p/x7ftfty12yndrs3p6ntlk1jc0000gp/T/LDianaAmorim/spack-stage/spack-stage-mpich-3.3.2-fntycc6dcg327z5dy3sboxudvldscpxe/spack-src/configure' '--prefix=/Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/mpich-3.3.2-fntycc6dcg327z5dy3sboxudvldscpxe' '--disable-silent-rules' '--enable-shared' '--with-hwloc-prefix=/Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/hwloc-2.2.0-ox7oz3tzcswqhmvo2urhb76oeum7ntpo' '--with-pm=hydra' '--enable-romio' '--without-ibverbs' '--enable-wrapper-rpath=yes' '--with-slurm=no' '--with-pmi=simple' '--with-device=ch3:nemesis:tcp' '--enable-libxml2'\r\n\r\n1 error found in build log:\r\n     963    checking for shared library (esp. rpath) characteristics of F77... done (results in src/env/f77_shlib.conf)\r\n     964    checking whether Fortran 77 accepts ! for comments... yes\r\n     965    checking for include directory flag for Fortran... -I\r\n     966    checking for Fortran 77 flag for library directories... -L\r\n     967    checking whether Fortran 77 compiler processes .F files with C preprocessor... yes\r\n     968    checking whether /Users/LDianaAmorim/Documents/opt/spack/lib/spack/env/clang/gfortran allows mismatched arguments... no\r\n  >> 969    configure: error: The Fortran compiler /Users/LDianaAmorim/Documents/opt/spack/lib/spack/env/clang/gfortran will not compile files that call\r\n     970    the same routine with arguments of different types.\r\n\r\nSee build log for details:\r\n  /var/folders/5p/x7ftfty12yndrs3p6ntlk1jc0000gp/T/LDianaAmorim/spack-stage/spack-stage-mpich-3.3.2-fntycc6dcg327z5dy3sboxudvldscpxe/spack-build-out.txt\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.15.3-421-c83236d3a\r\n* **Python:** 3.7.3\r\n* **Platform:** darwin-catalina-skylake\r\n```\r\n\r\n* clang version: 11.0.3\r\n* gcc (gfortran) version: 10.2.0\r\n* cmake version: 3.18.1\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n```console\r\n$ cat ~/.spack/darwin/packages.yaml\r\npackages:\r\n  cmake:\r\n    buildable: False\r\n    paths:\r\n      cmake@3.18.1: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/cmake-3.18.1-u4guucbahyuq5pswf55b2ebqslsjub7m\r\n```\r\n\r\n```console\r\n$ % cat ~/.spack/darwin/compilers.yaml \r\ncompilers:\r\n- compiler:\r\n    spec: apple-clang@11.0.3\r\n    paths:\r\n      cc: /usr/bin/clang\r\n      cxx: /usr/bin/clang++\r\n      f77: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/gfortran\r\n      fc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/gfortran\r\n    flags: {}\r\n    operating_system: catalina\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n- compiler:\r\n    spec: gcc@10.2.0\r\n    paths:\r\n      cc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/gcc\r\n      cxx: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/g++\r\n      f77: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/gfortran\r\n      fc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/apple-clang-11.0.3/gcc-10.2.0-phyqkhktab6nxd2noi3kklzjxsnku5le/bin/gfortran\r\n    flags: {}\r\n    operating_system: catalina\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/5042787/spack-build-env.txt)\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/5042788/spack-build-out.txt)\r\n* [spack-configure-args.txt](https://github.com/spack/spack/files/5042789/spack-configure-args.txt)\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}