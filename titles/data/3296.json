{
    "url": "https://api.github.com/repos/spack/spack/issues/3296",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/3296/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/3296/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/3296/events",
    "html_url": "https://github.com/spack/spack/issues/3296",
    "id": 211246060,
    "node_id": "MDU6SXNzdWUyMTEyNDYwNjA=",
    "number": 3296,
    "title": "spack install paraview fails with cmake",
    "user": {
        "login": "certik",
        "id": 20568,
        "node_id": "MDQ6VXNlcjIwNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/certik",
        "html_url": "https://github.com/certik",
        "followers_url": "https://api.github.com/users/certik/followers",
        "following_url": "https://api.github.com/users/certik/following{/other_user}",
        "gists_url": "https://api.github.com/users/certik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/certik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/certik/subscriptions",
        "organizations_url": "https://api.github.com/users/certik/orgs",
        "repos_url": "https://api.github.com/users/certik/repos",
        "events_url": "https://api.github.com/users/certik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/certik/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 13,
    "created_at": "2017-03-01T23:50:00Z",
    "updated_at": "2019-12-04T17:57:57Z",
    "closed_at": "2019-12-04T17:57:35Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "```\r\n$ spack install paraview\r\n==> Installing paraview\r\n==> Installing bzip2\r\n==> Fetching http://www.bzip.org/1.0.6/bzip2-1.0.6.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/bzip2-1.0.6-4eysx5\r\n2qz5t36t3d4fr2rvdfmptumq4n/bzip2-1.0.6.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/bzip2-1.0.6-4eysx5\r\n2qz5t36t3d4fr2rvdfmptumq4n\r\n==> Ran patch() for bzip2\r\n==> Building bzip2 [Package]\r\n==> Executing phase : 'install'\r\n==> Successfully installed bzip2\r\n  Fetch: 1.97s.  Build: 3.18s.  Total: 5.16s.\r\n[+] /home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/bzip2-1.0\r\n.6-4eysx52qz5t36t3d4fr2rvdfmptumq4n\r\n==> Installing zlib\r\n==> Fetching http://zlib.net/fossils/zlib-1.2.11.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/zlib-1.2.11-cssk2k\r\nioj3w6z3and7is45gz7d2l6mui/zlib-1.2.11.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/zlib-1.2.11-cssk2k\r\nioj3w6z3and7is45gz7d2l6mui\r\n==> Ran patch() for zlib\r\n==> Building zlib [AutotoolsPackage]\r\n==> Executing phase : 'autoreconf'\r\n==> Executing phase : 'configure'\r\n==> Executing phase : 'build'\r\n==> Executing phase : 'install'\r\n==> Successfully installed zlib\r\n  Fetch: 0.75s.  Build: 4.24s.  Total: 4.99s.\r\n[+] /home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/zlib-1.2.\r\n11-cssk2kioj3w6z3and7is45gz7d2l6mui\r\n==> Installing cmake\r\n==> Installing ncurses\r\n==> Fetching http://ftp.gnu.org/pub/gnu/ncurses/ncurses-6.0.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/ncurses-6.0-oatrzx\r\nh3bllizmnqlnzlcpgztwyhlidd/ncurses-6.0.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/ncurses-6.0-oatrzx\r\nh3bllizmnqlnzlcpgztwyhlidd\r\n==> Applied patch sed_pgi.patch\r\n==> Applied patch patch_gcc_5.txt\r\n==> Ran patch() for ncurses\r\n==> Building ncurses [AutotoolsPackage]\r\n==> Executing phase : 'autoreconf'\r\n==> Executing phase : 'configure'\r\n==> Executing phase : 'build'\r\n==> Executing phase : 'install'\r\n==> Successfully installed ncurses\r\n  Fetch: 1.80s.  Build: 25.13s.  Total: 26.94s.\r\n[+] /home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/ncurses-6\r\n.0-oatrzxh3bllizmnqlnzlcpgztwyhlidd\r\n==> Installing openssl\r\n==> zlib is already installed in /home/certik/repos/spack/opt/spack/linux-ubuntu\r\n16-x86_64/gcc-6.1.1/zlib-1.2.11-cssk2kioj3w6z3and7is45gz7d2l6mui\r\n==> Installing perl\r\n==> Fetching http://www.cpan.org/src/5.0/perl-5.24.1.tar.gz\r\n######################################################################## 100.0%\r\n==> Fetching http://search.cpan.org/CPAN/authors/id/M/MI/MIYAGAWA/App-cpanminus-\r\n1.7042.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/perl-5.24.1-66uin3\r\nsg4xeeqm7gsou2ojkjupkzruxl/perl-5.24.1.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/perl-5.24.1-66uin3\r\nsg4xeeqm7gsou2ojkjupkzruxl\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/resource-cpanm-66u\r\nin3sg4xeeqm7gsou2ojkjupkzruxl/App-cpanminus-1.7042.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/resource-cpanm-66u\r\nin3sg4xeeqm7gsou2ojkjupkzruxl\r\n==> Moving resource stage\r\n        source : /home/certik/repos/spack/var/spack/stage/resource-cpanm-66uin3s\r\ng4xeeqm7gsou2ojkjupkzruxl/App-cpanminus-1.7042/\r\n        destination : /home/certik/repos/spack/var/spack/stage/perl-5.24.1-66uin\r\n3sg4xeeqm7gsou2ojkjupkzruxl/perl-5.24.1/cpanm/cpanm\r\n==> No patches needed for perl\r\n==> Building perl [Package]\r\n==> Executing phase : 'install'\r\n==> Successfully installed perl\r\n  Fetch: 2.12s.  Build: 1m 33.04s.  Total: 1m 35.16s.\r\n[+] /home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/perl-5.24\r\n.1-66uin3sg4xeeqm7gsou2ojkjupkzruxl\r\n==> Fetching http://www.openssl.org/source/openssl-1.0.2k.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/openssl-1.0.2k-4fa\r\nlmidfhcv4kz3rtxqpdlaqnim6r5ml/openssl-1.0.2k.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/openssl-1.0.2k-4fa\r\nlmidfhcv4kz3rtxqpdlaqnim6r5ml\r\n==> No patches needed for openssl\r\n==> Building openssl [Package]\r\n==> Executing phase : 'install'\r\n==> Successfully installed openssl\r\n  Fetch: 2.35s.  Build: 2m 59.00s.  Total: 3m 1.34s.\r\n[+] /home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/openssl-1\r\n.0.2k-4falmidfhcv4kz3rtxqpdlaqnim6r5ml\r\n==> Fetching https://cmake.org/files/v3.7/cmake-3.7.2.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/certik/repos/spack/var/spack/stage/cmake-3.7.2-nm4n7t\r\noyldmcrniaqdxcs6h7jt4blz5d/cmake-3.7.2.tar.gz\r\n==> Created stage in /home/certik/repos/spack/var/spack/stage/cmake-3.7.2-nm4n7t\r\noyldmcrniaqdxcs6h7jt4blz5d\r\n==> Building cmake [Package]\r\n==> Executing phase : 'install'\r\n==> Error: ProcessError: Command exited with status 7:\r\n    './bootstrap' '--prefix=/home/certik/repos/spack/opt/spack/linux-ubuntu16-x8\r\n6_64/gcc-6.1.1/cmake-3.7.2-nm4n7toyldmcrniaqdxcs6h7jt4blz5d' '--parallel=32' '--\r\nno-system-jsoncpp' '--no-system-libs' '--no-qt-gui' '--' '-DCMAKE_USE_OPENSSL=ON\r\n'\r\n/home/certik/repos/spack/var/spack/repos/builtin/packages/cmake/package.py:126, \r\nin install:\r\n     91       def install(self, spec, prefix):\r\n     92           # Consistency check\r\n     93           self.validate(spec)\r\n     94   \r\n     95           options = [\r\n     96               '--prefix={0}'.format(prefix),\r\n     97               '--parallel={0}'.format(make_jobs)]\r\n     98           if spec.satisfies(\"@3.2:\"):\r\n     99               options.append(\r\n     100                  # jsoncpp requires CMake to build\r\n     101                  # use CMake-provided library to avoid circular depende\r\nncy\r\n     102                  '--no-system-jsoncpp'\r\n     103              )\r\n     104  \r\n     105          if '+ownlibs' in spec:\r\n     106              # Build and link to the CMake-provided third-party librari\r\nes\r\n     107              options.append('--no-system-libs')\r\n     108          else:\r\n     109              # Build and link to the Spack-installed third-party librar\r\nies\r\n     110              options.append('--system-libs')\r\n     111  \r\n     112          if '+qt' in spec:\r\n     113              options.append('--qt-gui')\r\n     114          else:\r\n     115              options.append('--no-qt-gui')\r\n     116  \r\n     117          if '+doc' in spec:\r\n     118              options.append('--sphinx-html')\r\n     119              options.append('--sphinx-man')\r\n     120  \r\n     121          if '+openssl' in spec:\r\n     122              options.append('--')\r\n     123              options.append('-DCMAKE_USE_OPENSSL=ON')\r\n     124  \r\n     125          bootstrap = Executable('./bootstrap')\r\n  >> 126          bootstrap(*options)\r\n     127  \r\n     128          make()\r\n     129          if self.run_tests:\r\n     130              make('test')  # some tests fail, takes forever\r\n     131          make('install')\r\n\r\nSee build log for details:\r\n  /tmp/certik/spack-stage/spack-stage-Dgr6ow/cmake-3.7.2/spack-build.out\r\n```\r\nand the `spack-build.out` file contains:\r\n```\r\n==> './bootstrap' '--prefix=/home/certik/repos/spack/opt/spack/linux-ubuntu16-x86_64/gcc-6.1.1/cmake-3.7.2-nm4n7toyldmcrniaqdxcs6h7jt4blz5d' '--parallel=32' '--no-system-jsoncpp' '--no-system-libs' '--no-qt-gui' '--' '-DCMAKE_USE_OPENSSL=ON'\r\n---------------------------------------------\r\nCMake 3.7.2, Copyright 2000-2016 Kitware, Inc. and Contributors\r\nC compiler on this system is: /home/certik/repos/spack/lib/spack/env/gcc/gcc \r\n---------------------------------------------\r\nError when bootstrapping CMake:\r\nCannot find appropriate C++ compiler on this system.\r\nPlease specify one using environment variable CXX.\r\nSee cmake_bootstrap.log for compilers attempted.\r\n---------------------------------------------\r\nLog of errors: /tmp/certik/spack-stage/spack-stage-Dgr6ow/cmake-3.7.2/Bootstrap.cmk/cmake_bootstrap.log\r\n---------------------------------------------\r\n```\r\nBut I have C and C++ compilers installed, e.g.:\r\n```\r\n$ spack compilers\r\n==> Available compilers\r\n-- gcc ----------------------------------------------------------\r\ngcc@6.1.1  gcc@5.4.0\r\n\r\n-- intel --------------------------------------------------------\r\nintel@16.0.2\r\n$ gcc --version\r\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n$ g++ --version\r\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\nThe `cmake_bootstrap.log` file is available at: https://gist.github.com/certik/9084b0cb3282420cab745d0dcaf8183c\r\n",
    "performed_via_github_app": null
}