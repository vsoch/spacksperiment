{
    "url": "https://api.github.com/repos/spack/spack/issues/5112",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5112/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5112/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5112/events",
    "html_url": "https://github.com/spack/spack/issues/5112",
    "id": 250429370,
    "node_id": "MDU6SXNzdWUyNTA0MjkzNzA=",
    "number": 5112,
    "title": "Python package issue in cross compiling environment  [Illegal instruction]",
    "user": {
        "login": "pramodskumbhar",
        "id": 27898197,
        "node_id": "MDQ6VXNlcjI3ODk4MTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/27898197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pramodskumbhar",
        "html_url": "https://github.com/pramodskumbhar",
        "followers_url": "https://api.github.com/users/pramodskumbhar/followers",
        "following_url": "https://api.github.com/users/pramodskumbhar/following{/other_user}",
        "gists_url": "https://api.github.com/users/pramodskumbhar/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pramodskumbhar/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pramodskumbhar/subscriptions",
        "organizations_url": "https://api.github.com/users/pramodskumbhar/orgs",
        "repos_url": "https://api.github.com/users/pramodskumbhar/repos",
        "events_url": "https://api.github.com/users/pramodskumbhar/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pramodskumbhar/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446619758,
            "node_id": "MDU6TGFiZWw0NDY2MTk3NTg=",
            "url": "https://api.github.com/repos/spack/spack/labels/python",
            "name": "python",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 11,
    "created_at": "2017-08-15T20:32:15Z",
    "updated_at": "2017-08-21T22:37:40Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hello,\r\n\r\nSuppose I have package which specifies python dependency as `depends_on('python@2.6:', when='+python', type='link')`.\r\n\r\nI am building this on cross compiling environment where python is built for compute node:\r\n```\r\n    python:\r\n        paths:\r\n            python@2.7.13 arch=bgq-cnk-ppc64: /mypath/interpreters/python/2.7.13/powerpc64-bgq-linux/\r\n```\r\n\r\nThe `build` phase finished fine but then I see:\r\n\r\n```\r\n==> Error: ProcessError: Command exited with status -4:\r\n    '/mypath/interpreters/python/2.7.13/powerpc64-bgq-linux/bin/python2.7' '-c' 'from distutils.sysconfig import get_config_var; print get_config_var('\"'\"'prefix'\"'\"')'\r\n/gpfs/home/kumbhar/spack/var/spack/repos/builtin/packages/python/package.py:410, in get_config_var:\r\n     403      def get_config_var(self, key):\r\n     404          \"\"\"Returns the value of a single variable. Wrapper around\r\n     405          ``distutils.sysconfig.get_config_var()``.\"\"\"\r\n     406\r\n     407          cmd = 'from distutils.sysconfig import get_config_var; '\r\n     408          cmd += self.print_string(\"get_config_var('{0}')\".format(key))\r\n     409\r\n  >> 410          return self.command('-c', cmd, output=str).strip()\r\n```\r\n\r\nAs shown in the stack trace above, `package.py` try to execute python built for compute node resulting in error:\r\n\r\n```\r\n '/mypath/interpreters/python/2.7.13/powerpc64-bgq-linux/bin/python2.7' '-c' 'from distutils.sysconfig import get_config_var; print get_config_var('\"'\"'prefix'\"'\"')'\r\nIllegal instruction (core dumped)\r\n```\r\nOops..can't execute compute node's python here!",
    "performed_via_github_app": null
}