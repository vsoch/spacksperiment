{
    "url": "https://api.github.com/repos/spack/spack/issues/11163",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/11163/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/11163/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/11163/events",
    "html_url": "https://github.com/spack/spack/issues/11163",
    "id": 431684246,
    "node_id": "MDU6SXNzdWU0MzE2ODQyNDY=",
    "number": 11163,
    "title": "per-user settings require security hole when staging builds ",
    "user": {
        "login": "frankwillmore",
        "id": 508437,
        "node_id": "MDQ6VXNlcjUwODQzNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/508437?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankwillmore",
        "html_url": "https://github.com/frankwillmore",
        "followers_url": "https://api.github.com/users/frankwillmore/followers",
        "following_url": "https://api.github.com/users/frankwillmore/following{/other_user}",
        "gists_url": "https://api.github.com/users/frankwillmore/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/frankwillmore/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/frankwillmore/subscriptions",
        "organizations_url": "https://api.github.com/users/frankwillmore/orgs",
        "repos_url": "https://api.github.com/users/frankwillmore/repos",
        "events_url": "https://api.github.com/users/frankwillmore/events{/privacy}",
        "received_events_url": "https://api.github.com/users/frankwillmore/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 512483406,
            "node_id": "MDU6TGFiZWw1MTI0ODM0MDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-high",
            "name": "impact-high",
            "color": "fef2c0",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tldahlgren",
            "id": 35777542,
            "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tldahlgren",
            "html_url": "https://github.com/tldahlgren",
            "followers_url": "https://api.github.com/users/tldahlgren/followers",
            "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
            "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
            "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
            "repos_url": "https://api.github.com/users/tldahlgren/repos",
            "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 9,
    "created_at": "2019-04-10T19:55:17Z",
    "updated_at": "2019-08-19T17:31:25Z",
    "closed_at": "2019-08-19T17:31:25Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "\r\nI\u2019m trying to override a setting (build-stage) for a regular user outside of a system spack installation (installed as a service user \u2018spack\u2019) with the intent of the user having builds staged to ~/.spack/var/spack/stage. \r\n\r\nMy ~/.spack/config.yaml seting looks like this:  \r\n```\r\nbuild_stage:\r\n     - ~/.spack/var/spack/stage\r\n```\r\n\r\nAnd the system install: $spack/etc/spack/defaults/config.yaml looks like this:\r\n ```\r\nbuild_stage:\r\n   - $tempdir\r\n   - $spack/var/spack/stage\r\n```\r\n\r\nThe intent is to allow per-user overriding of the build stage via ~/.spack/config.yaml settings, thus enabling individual users to leverage the system spack to build and deploy packages in their own storage space.\r\n\r\nHowever, instead of simply staging as requested, spack attempts to generate a symbolic link from the user's staging area into the system-wide staging area at ```$spack/var/spack/stage.```\r\n\r\nIndividual users do not and should not have access to write to  ```$spack/var/spack/stage``` and thus, when a user attempts to build, spack attempts to generate a sym link here and fails.\r\n\r\n### Information on your system\r\n\r\nCray XC-40 / ALCF theta\r\n\r\n",
    "performed_via_github_app": null
}