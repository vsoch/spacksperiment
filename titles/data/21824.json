{
    "url": "https://api.github.com/repos/spack/spack/issues/21824",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21824/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21824/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21824/events",
    "html_url": "https://github.com/spack/spack/issues/21824",
    "id": 812664920,
    "node_id": "MDU6SXNzdWU4MTI2NjQ5MjA=",
    "number": 21824,
    "title": "buildcache list: '<' not supported between instances of 'tuple' and 'str'",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 759411369,
            "node_id": "MDU6TGFiZWw3NTk0MTEzNjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/buildcache",
            "name": "buildcache",
            "color": "bf354c",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-02-20T17:15:43Z",
    "updated_at": "2021-03-24T20:08:11Z",
    "closed_at": "2021-03-24T20:08:11Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Using `spack@develop` (4bd8cd1916f1c9961bc069d922989318683961a3 from `Sat Feb 20 01:52:34 2021 -0700`)\r\n\r\nI finally got around to regenerating the index for our E4S build cache. It finished OK after ~6.5 hours.\r\n\r\nHowever:\r\n```\r\n$> spack mirror add e4s https://cache.e4s.io\r\n\r\n$> spack mirror list\r\ne4s             https://cache.e4s.io\r\nspack-public    https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/\r\n\r\n$> spack buildcache list\r\n==> Error: '<' not supported between instances of 'tuple' and 'str'\r\n\r\n$> time spack -d buildcache list\r\n==> [2021-02-20-09:13:09.554279] Imported buildcache from built-in commands\r\n==> [2021-02-20-09:13:09.563540] Imported buildcache from built-in commands\r\n==> [2021-02-20-09:13:09.565552] Reading config file /opt/spack/etc/spack/defaults/config.yaml\r\n==> [2021-02-20-09:13:09.598465] Reading config file /opt/spack/etc/spack/defaults/mirrors.yaml\r\n==> [2021-02-20-09:13:09.600657] Reading config file /root/.spack/mirrors.yaml\r\n==> [2021-02-20-09:13:09.716182] Cached index for https://cache.e4s.io already up to date\r\n==> [2021-02-20-09:13:09.770970] Unable to read index hash https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/build_cache/index.json.hash\r\n  Download failed: HTTP Error 404: Not Found\r\n  1\r\n==> [2021-02-20-09:13:09.771410] Fetching index from https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/build_cache/index.json\r\n==> [2021-02-20-09:13:09.832981] Unable to read index https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/build_cache/index.json\r\n  Download failed: HTTP Error 404: Not Found\r\n  1\r\n==> [2021-02-20-09:13:09.838269] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-02-20-09:13:09.838426] PACKAGE LOCK TIMEOUT: No timeout\r\nTraceback (most recent call last):\r\n  File \"/opt/spack/bin/spack\", line 71, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/opt/spack/lib/spack/spack/main.py\", line 762, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/opt/spack/lib/spack/spack/main.py\", line 490, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/opt/spack/lib/spack/spack/cmd/buildcache.py\", line 798, in buildcache\r\n    args.func(args)\r\n  File \"/opt/spack/lib/spack/spack/cmd/buildcache.py\", line 512, in listspecs\r\n    specs = bindist.update_cache_and_get_specs()\r\n  File \"/opt/spack/lib/spack/spack/binary_distribution.py\", line 1436, in update_cache_and_get_specs\r\n    binary_index.update()\r\n  File \"/opt/spack/lib/spack/spack/binary_distribution.py\", line 341, in update\r\n    self.regenerate_spec_cache(clear_existing=spec_cache_clear_needed)\r\n  File \"/opt/spack/lib/spack/spack/binary_distribution.py\", line 145, in regenerate_spec_cache\r\n    self._associate_built_specs_with_mirror(cached_index_path,\r\n  File \"/opt/spack/lib/spack/spack/binary_distribution.py\", line 162, in _associate_built_specs_with_mirror\r\n    spec_list = db.query_local(installed=False)\r\n  File \"/opt/spack/lib/spack/spack/database.py\", line 1477, in query_local\r\n    return sorted(self._query(*args, **kwargs))\r\n  File \"/opt/spack/lib/spack/llnl/util/lang.py\", line 254, in <lambda>\r\n    lambda s, o: o is not None and s._cmp_key() < o._cmp_key())\r\n  File \"/opt/spack/lib/spack/llnl/util/lang.py\", line 254, in <lambda>\r\n    lambda s, o: o is not None and s._cmp_key() < o._cmp_key())\r\n  File \"/opt/spack/lib/spack/llnl/util/lang.py\", line 254, in <lambda>\r\n    lambda s, o: o is not None and s._cmp_key() < o._cmp_key())\r\nTypeError: '<' not supported between instances of 'tuple' and 'str'\r\n\r\nreal\t0m7.197s\r\nuser\t0m6.586s\r\nsys\t0m0.409s\r\n```\r\n\r\n@becker33 \r\n",
    "performed_via_github_app": null
}