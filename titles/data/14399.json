{
    "url": "https://api.github.com/repos/spack/spack/issues/14399",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14399/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14399/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14399/events",
    "html_url": "https://github.com/spack/spack/issues/14399",
    "id": 545791569,
    "node_id": "MDU6SXNzdWU1NDU3OTE1Njk=",
    "number": 14399,
    "title": "Recent versions of icu4c do not compile with intel-19",
    "user": {
        "login": "glennpj",
        "id": 16138574,
        "node_id": "MDQ6VXNlcjE2MTM4NTc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/16138574?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glennpj",
        "html_url": "https://github.com/glennpj",
        "followers_url": "https://api.github.com/users/glennpj/followers",
        "following_url": "https://api.github.com/users/glennpj/following{/other_user}",
        "gists_url": "https://api.github.com/users/glennpj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/glennpj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glennpj/subscriptions",
        "organizations_url": "https://api.github.com/users/glennpj/orgs",
        "repos_url": "https://api.github.com/users/glennpj/repos",
        "events_url": "https://api.github.com/users/glennpj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/glennpj/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-01-06T15:39:48Z",
    "updated_at": "2020-01-15T04:05:56Z",
    "closed_at": "2020-01-15T04:05:56Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Recent versions, namely 60.1 and 64.1, of the icu4c package fail to build with the intel-19 compiler. The intel-17 and intel-18 compilers work fine. The 57.1 and 58.2 versions compile fine with intel-19. This is likely a problem with the icu4c code, or the intel-19 compiler, but I wanted to create a spack issue first.\r\n\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install icu4c@64.1%intel\r\n16 errors found in build log:\r\n     473       icpc      ...  messagepattern.cpp\r\n     474       icpc      ...  ucat.cpp\r\n     475       icpc      ...  locmap.cpp\r\n     476       icpc      ...  uloc.cpp\r\n     477       icpc      ...  locid.cpp\r\n     478    In file included from ucurr.cpp(26):\r\n  >> 479    static_unicode_sets.h(130): error #913: invalid multibyte character sequence\r\n     480          {POUND_SIGN, u'\u00a3'},\r\n     481                         ^\r\n     482    \r\n     483    In file included from ucurr.cpp(26):\r\n  >> 484    static_unicode_sets.h(130): error #913: invalid multibyte character sequence\r\n     485          {POUND_SIGN, u'\u00a3'},\r\n     486                          ^\r\n     487    \r\n     488    In file included from ucurr.cpp(26):\r\n  >> 489    static_unicode_sets.h(130): error: too many characters in character constant\r\n     490          {POUND_SIGN, u'\u00a3'},\r\n     491                       ^\r\n     492    \r\n     493    In file included from ucurr.cpp(26):\r\n  >> 494    static_unicode_sets.h(131): error #913: invalid multibyte character sequence\r\n     495          {RUPEE_SIGN, u'\u20b9'},\r\n     496                         ^\r\n     497    \r\n     498    In file included from ucurr.cpp(26):\r\n  >> 499    static_unicode_sets.h(131): error #913: invalid multibyte character sequence\r\n     500          {RUPEE_SIGN, u'\u20b9'},\r\n     501                          ^\r\n     502    \r\n     503    In file included from ucurr.cpp(26):\r\n  >> 504    static_unicode_sets.h(131): error #913: invalid multibyte character sequence\r\n     505          {RUPEE_SIGN, u'\u20b9'},\r\n     506                           ^\r\n     507    \r\n     532    \r\n     533    In file included from ucurr.cpp(26):\r\n  >> 534    static_unicode_sets.h(133): error #913: invalid multibyte character sequence\r\n     535          {WON_SIGN, u'\u20a9'},\r\n     536                        ^\r\n     537    \r\n     538    In file included from ucurr.cpp(26):\r\n  >> 539    static_unicode_sets.h(133): error #913: invalid multibyte character sequence\r\n     540          {WON_SIGN, u'\u20a9'},\r\n     541                         ^\r\n     542    \r\n     543    In file included from ucurr.cpp(26):\r\n  >> 544    static_unicode_sets.h(133): error: too many characters in character constant\r\n     545          {WON_SIGN, u'\u20a9'},\r\n     546                     ^\r\n     547    \r\n     548       icpc      ...  locutil.cpp\r\n     549       icpc      ...  locavailable.cpp\r\n     550       icpc      ...  locdispnames.cpp\r\n     551       icpc      ...  locdspnm.cpp\r\n     552       icpc      ...  loclikely.cpp\r\n     553    compilation aborted for ucurr.cpp (code 2)\r\n     554    *** Failed compilation command follows: ----------------------------------------------------------\r\n     555    /opt/packages/gpjohnsn/spack/lib/spack/env/intel/icpc -D_REENTRANT -DU_HAVE_ELF_H=1 -DU_HAVE_STRTOD_L=1 -DU\r\n            _HAVE_XLOCALE_H=1 -I. -DDEFAULT_ICU_PLUGINS=\"/opt/packages/gpjohnsn/apps/linux-centos7-broadwell/intel-19.0\r\n            .5.281/icu4c-64.1-62eg7vkvvkgf4ktwpthgk266x6ouqpzq/lib/icu\"  -DU_ATTRIBUTE_DEPRECATED= -DU_COMMON_IMPLEMENT\r\n            ATION -std=c++11 -W -Wall -pedantic -Wpointer-arith -Wwrite-strings -Wno-long-long -c -DPIC -fPIC -o ucurr.\r\n            o ucurr.cpp\r\n     556    --- ( rebuild with \"make VERBOSE=1 all\" to show all parameters ) --------\r\n  >> 557    make[1]: *** [ucurr.o] Error 1\r\n     558    make[1]: *** Waiting for unfinished jobs....\r\n     559    make[1]: Leaving directory `/dev/shm/gpjohnsn/spack-stage-icu4c-64.1-62eg7vkvvkgf4ktwpthgk266x6ouqpzq/spack\r\n            -src/source/common'\r\n  >> 560    make: *** [all-recursive] Error 2\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux argon-build.hpc 3.10.0-862.14.4.el7.x86_64 #1 SMP Wed Sep 26 15:12:11 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:    CentOS Linux release 7.5.1804 (Core) \r\n``` \r\n\r\n### Additional information\r\n\r\n\r\n```console\r\n$ spack spec --install-status icu4c%intel                                                   \r\nInput spec\r\n--------------------------------\r\n -   icu4c%intel\r\n\r\nConcretized\r\n--------------------------------\r\n -   icu4c@64.1%intel@19.0.5.281 cxxstd=11 arch=linux-centos7-broadwell\r\n[+]      ^python@3.7.4%intel@19.0.5.281+bz2+ctypes+dbm+lzma~nis~optimizations patches=ad05cbbb01a6a2a2496274098deea981d205f7c936acf56d976cdb540b87b843 +pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zlib arch=linux-centos7-broadwell\r\n[+]          ^bzip2@1.0.8%intel@19.0.5.281+shared arch=linux-centos7-broadwell\r\n[+]              ^diffutils@3.7%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]                  ^libiconv@1.16%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]          ^expat@2.2.9%intel@19.0.5.281+libbsd arch=linux-centos7-broadwell\r\n[+]              ^libbsd@0.10.0%intel@19.0.5.281 patches=71b49f52a01420ab632f23373135853a2565f88725fb77e625a7fbf7ea812eef arch=linux-centos7-broadwell\r\n[+]          ^gdbm@1.18.1%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]              ^readline@8.0%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]                  ^ncurses@6.1%intel@19.0.5.281~symlinks~termlib arch=linux-centos7-broadwell\r\n[+]                      ^pkgconf@1.6.3%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]          ^gettext@0.20.1%intel@19.0.5.281+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-broadwell\r\n[+]              ^libxml2@2.9.9%intel@19.0.5.281~python arch=linux-centos7-broadwell\r\n[+]                  ^xz@5.2.4%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]                  ^zlib@1.2.11%intel@19.0.5.281+optimize+pic+shared arch=linux-centos7-broadwell\r\n[+]              ^tar@1.32%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]          ^libffi@3.2.1%intel@19.0.5.281 arch=linux-centos7-broadwell\r\n[+]          ^openssl@1.1.1d%intel@19.0.5.281+systemcerts arch=linux-centos7-broadwell\r\n[+]              ^perl@5.30.0%intel@19.0.5.281+cpanm+shared+threads arch=linux-centos7-broadwell\r\n[+]          ^sqlite@3.30.1%intel@19.0.5.281~column_metadata+fts~functions~rtree arch=linux-centos7-broadwell\r\n```\r\n",
    "performed_via_github_app": null
}