{
    "url": "https://api.github.com/repos/spack/spack/issues/17198",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17198/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17198/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17198/events",
    "html_url": "https://github.com/spack/spack/issues/17198",
    "id": 643182680,
    "node_id": "MDU6SXNzdWU2NDMxODI2ODA=",
    "number": 17198,
    "title": "Installation issue: libxc with Intel 2020 compiler",
    "user": {
        "login": "roguephysicist",
        "id": 2207402,
        "node_id": "MDQ6VXNlcjIyMDc0MDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2207402?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roguephysicist",
        "html_url": "https://github.com/roguephysicist",
        "followers_url": "https://api.github.com/users/roguephysicist/followers",
        "following_url": "https://api.github.com/users/roguephysicist/following{/other_user}",
        "gists_url": "https://api.github.com/users/roguephysicist/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/roguephysicist/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/roguephysicist/subscriptions",
        "organizations_url": "https://api.github.com/users/roguephysicist/orgs",
        "repos_url": "https://api.github.com/users/roguephysicist/repos",
        "events_url": "https://api.github.com/users/roguephysicist/events{/privacy}",
        "received_events_url": "https://api.github.com/users/roguephysicist/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-06-22T15:49:11Z",
    "updated_at": "2020-06-24T12:47:56Z",
    "closed_at": "2020-06-24T12:47:45Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "The following error is produced when compiling libxc with the Intel 2020 compilers:\r\n\r\n```console\r\n  >> 1270    \": internal error: 010101_3096\r\n     1271    \r\n  >> 1272    icc: error #10014: problem during multi-file optimization compilation (code 4)\r\n  >> 1273    make[4]: *** [libxc.la] Error 4\r\n     1274    make[4]: Leaving directory `/tmp/user/spack-stage/spack-stage-libxc-4.3.2-ewkkgzjlqybyjkqwz3gguft33yoxijah/spack-src/src'\r\n  >> 1275    make[3]: *** [all-recursive] Error 1\r\n     1276    make[3]: Leaving directory `/tmp/user/spack-stage/spack-stage-libxc-4.3.2-ewkkgzjlqybyjkqwz3gguft33yoxijah/spack-src/src'\r\n  >> 1277    make[2]: *** [all] Error 2\r\n     1278    make[2]: Leaving directory `/tmp/user/spack-stage/spack-stage-libxc-4.3.2-ewkkgzjlqybyjkqwz3gguft33yoxijah/spack-src/src'\r\n  >> 1279    make[1]: *** [all-recursive] Error 1\r\n     1280    make[1]: Leaving directory `/tmp/user/spack-stage/spack-stage-libxc-4.3.2-ewkkgzjlqybyjkqwz3gguft33yoxijah/spack-src'\r\n  >> 1281    make: *** [all] Error 2\r\n```\r\nThis stems from line 91 of `$SPACK/var/spack/repos/builtin/packages/libxc/package.py`:\r\n\r\n```console\r\noptflags += ' -xSSE4.2 -axAVX,CORE-AVX2 -ipo'\r\n```\r\n\r\nIf the first two flags are removed, libxc compiles correctly. It works perfectly fine with the flags when using the Intel 2018 compiler, so there must be some new behavior in the more recent version.\r\n\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install libxc %intel@19.1.0.166\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.14.2-1500-4e9a989\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel7-haswell\r\n\r\nRelevant part of `compilers.yaml`:\r\n\r\n```yaml\r\n- compiler:\r\n    modules: [compilers/gcc/6.5.0, compilers/intel/2018]\r\n    spec: intel@18.0.5\r\n    paths:\r\n      cc: /opt/intel/parallel_studio_xe_2018_update4_cluster_edition/compilers_and_libraries_2018.5.274/linux/bin/intel64/icc\r\n      cxx: /opt/intel/parallel_studio_xe_2018_update4_cluster_edition/compilers_and_libraries_2018.5.274/linux/bin/intel64/icpc\r\n      f77: /opt/intel/parallel_studio_xe_2018_update4_cluster_edition/compilers_and_libraries_2018.5.274/linux/bin/intel64/ifort\r\n      fc: /opt/intel/parallel_studio_xe_2018_update4_cluster_edition/compilers_and_libraries_2018.5.274/linux/bin/intel64/ifort\r\n    flags: {}\r\n    operating_system: rhel7\r\n    target: x86_64\r\n    environment: {}\r\n    extra_rpaths: [/opt/gcc/6.5.0/lib64, /opt/intel/parallel_studio_xe_2018_update4_cluster_edition/compilers_and_libraries_2018.5.274/linux/compiler/lib/intel64_lin]\r\n- compiler:\r\n    modules: [compilers/gcc/9.3.0, compilers/intel/2020]\r\n    spec: intel@19.1.0.166\r\n    paths:\r\n      cc: /opt/intel/parallel_studio_xe_2020_cluster_edition/compilers_and_libraries_2020.0.166/linux/bin/intel64/icc\r\n      cxx: /opt/intel/parallel_studio_xe_2020_cluster_edition/compilers_and_libraries_2020.0.166/linux/bin/intel64/icpc\r\n      f77: /opt/intel/parallel_studio_xe_2020_cluster_edition/compilers_and_libraries_2020.0.166/linux/bin/intel64/ifort\r\n      fc: /opt/intel/parallel_studio_xe_2020_cluster_edition/compilers_and_libraries_2020.0.166/linux/bin/intel64/ifort\r\n    flags: {}\r\n    operating_system: rhel7\r\n    target: x86_64\r\n    environment: {}\r\n    extra_rpaths: [/opt/gcc/9.3.0/lib64, /opt/intel/parallel_studio_xe_2020_cluster_edition/compilers_and_libraries_2020.0.166/linux/compiler/lib/intel64_lin]\r\n```\r\n\r\n### Additional information\r\n\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/4814219/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/4814220/spack-build-env.txt)\r\n\r\n\r\n### General information\r\n\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}