{
    "url": "https://api.github.com/repos/spack/spack/issues/24526",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/24526/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/24526/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/24526/events",
    "html_url": "https://github.com/spack/spack/issues/24526",
    "id": 930324694,
    "node_id": "MDU6SXNzdWU5MzAzMjQ2OTQ=",
    "number": 24526,
    "title": "Installation issue: py-cython \"error: option --single-version-externally-managed not recognized\"",
    "user": {
        "login": "christoph-conrads",
        "id": 22275833,
        "node_id": "MDQ6VXNlcjIyMjc1ODMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/22275833?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/christoph-conrads",
        "html_url": "https://github.com/christoph-conrads",
        "followers_url": "https://api.github.com/users/christoph-conrads/followers",
        "following_url": "https://api.github.com/users/christoph-conrads/following{/other_user}",
        "gists_url": "https://api.github.com/users/christoph-conrads/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/christoph-conrads/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/christoph-conrads/subscriptions",
        "organizations_url": "https://api.github.com/users/christoph-conrads/orgs",
        "repos_url": "https://api.github.com/users/christoph-conrads/repos",
        "events_url": "https://api.github.com/users/christoph-conrads/events{/privacy}",
        "received_events_url": "https://api.github.com/users/christoph-conrads/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "adamjstewart",
            "id": 12021217,
            "node_id": "MDQ6VXNlcjEyMDIxMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adamjstewart",
            "html_url": "https://github.com/adamjstewart",
            "followers_url": "https://api.github.com/users/adamjstewart/followers",
            "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
            "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
            "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
            "repos_url": "https://api.github.com/users/adamjstewart/repos",
            "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-06-25T16:25:13Z",
    "updated_at": "2021-06-25T16:39:16Z",
    "closed_at": "2021-06-25T16:39:16Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "The package `py-cython` cannot be installed on Debian 9 / Devuan Ascii with Python 3.5.3\r\n\r\n```\r\n$ cat spack-build-out.txt\r\n[...]\r\n==> py-cython: Executing phase: 'install'\r\n==> [2021-06-25-15:56:11.210480] '/usr/bin/python3.5' '-c' 'import distutils.sysconfig;print(distutils.sysconfig.get_python_lib(plat_specific=False, prefix=\"\"));print(distutils.sysconfig.get_python_lib(plat_specific=True, prefix=\"\"));print(distutils.sysconfig.get_python_inc(plat_specific=True, prefix=\"\"))'\r\n==> [2021-06-25-15:56:11.236681] '/usr/bin/python3.5' '-s' 'setup.py' '--no-user-cfg' 'install' '--prefix=/home/john/spack/opt/spack/linux-debian9-haswell/gcc-6.3.0/py-cython-0.29.22-e5clkxlqznff62nmazupvlfef5oqvg5j' '--single-version-externally-managed' '--root=/home/john/spack/opt/spack/linux-debian9-haswell/gcc-6.3.0/py-cython-0.29.22-e5clkxlqznff62nmazupvlfef5oqvg5j' '--install-purelib=lib/python3/dist-packages' '--install-platlib=lib/python3/dist-packages' '--install-scripts=bin' '--install-data=' '--install-headers=/usr/include/python3.5m'\r\nUnable to find pgen, not compiling formal grammar.\r\nusage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]\r\n   or: setup.py --help [cmd1 cmd2 ...]\r\n   or: setup.py --help-commands\r\n   or: setup.py cmd --help\r\n\r\nerror: option --single-version-externally-managed not recognized\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\nThe issue can be reproduced in a Linux container. The first step shows how to set up the container, the second step contains the Spack commands.\r\n\r\nLXD commands for creating a new Debian 9 LXD container with a user called `john`:\r\n```\r\n#!/bin/bash\r\n\r\nset -e\r\nset -u\r\n\r\nlxc launch images:debian/9 d9\r\nlxc exec d9 -- apt-get update\r\nlxc exec d9 -- apt-get install -y \\\r\n    build-essential \\\r\n    bzip2 \\\r\n    curl \\\r\n    git \\\r\n    gzip \\\r\n    patch \\\r\n    python3 \\\r\n    python3-dev \\\r\n    tar \\\r\n    unzip \\\r\n    xz-utils \\\r\n    zstd \\\r\n    cmake \\\r\n    libssl-dev \\\r\n    pkg-config \\\r\n    sudo\r\nlxc exec d9 -- adduser --disabled-password --gecos '' john\r\n```\r\n\r\nLogin and execute these Spack commands:\r\n```sh\r\ngit clone --depth=1 -- 'https://github.com/spack/spack.git'\r\n. ~/spack/share/spack/setup-env.sh\r\nspack external find\r\nspack install py-cython\r\n```\r\n\r\nThe problem does not occur with other Python interpreters built by Spack (e.g. Python 3.5.10, 3.8.10). For example, the following build succeeds:\r\n```sh\r\nspack install py-cython ^python@3.5.4:\r\n```\r\n\r\nI do not know if Python 3.5.3 is to blame or the Linux distribution.\r\n\r\n### Information on your system\r\n\r\n* `git rev-parse HEAD`: `2bc0c0ea59eeb81601bb6a1cc416100f0a8989ea`\r\n* **Spack:** 0.16.1 <- strange, this is a Spack clone with latest commit date June 25\r\n* **Python:** 3.5.3\r\n* **Platform:** linux-debian9-haswell\r\n* **Concretizer:** original\r\n\r\n\r\n### Additional information\r\n\r\n* [spack-build-01-build-out.txt](https://github.com/spack/spack/files/6717559/spack-build-01-build-out.txt)\r\n* [spack-build-02-install-out.txt](https://github.com/spack/spack/files/6717561/spack-build-02-install-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/6717562/spack-build-env.txt)\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/6717563/spack-build-out.txt)\r\n\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers @adamjstewart \r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}