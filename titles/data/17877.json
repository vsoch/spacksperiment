{
    "url": "https://api.github.com/repos/spack/spack/issues/17877",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17877/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17877/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17877/events",
    "html_url": "https://github.com/spack/spack/issues/17877",
    "id": 672957834,
    "node_id": "MDU6SXNzdWU2NzI5NTc4MzQ=",
    "number": 17877,
    "title": "Installation issue: m4 on NERSC Cori using Intel Compiler",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446614485,
            "node_id": "MDU6TGFiZWw0NDY2MTQ0ODU=",
            "url": "https://api.github.com/repos/spack/spack/labels/cray",
            "name": "cray",
            "color": "b60205",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        },
        {
            "id": 477156668,
            "node_id": "MDU6TGFiZWw0NzcxNTY2Njg=",
            "url": "https://api.github.com/repos/spack/spack/labels/intel",
            "name": "intel",
            "color": "127cc1",
            "default": false,
            "description": null
        },
        {
            "id": 2426365638,
            "node_id": "MDU6TGFiZWwyNDI2MzY1NjM4",
            "url": "https://api.github.com/repos/spack/spack/labels/nersc",
            "name": "nersc",
            "color": "bfd4f2",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2020-08-04T17:30:12Z",
    "updated_at": "2021-03-03T16:22:06Z",
    "closed_at": "2021-03-03T16:22:06Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Using `spack@develop` (3-Aug, 4c97a0ea1cbcb42fff4cb2183552b6b6c441d791) on NERSC Cori (`cray-cnl7-haswell`) with `%intel@19.1.2.254`:\r\n\r\nThe full build logs, and the exact concretized spec of `m4` used here, are attached below.\r\n\r\nFull build log: [m4-build-out.txt](https://github.com/spack/spack/files/5023549/m4-build-out.txt)\r\nSpec: [m4.spec.yaml.txt](https://github.com/spack/spack/files/5023556/m4.spec.yaml.txt)\r\n\r\n```\r\n$> spack install -f ./m4.spec.yaml\r\n...\r\n==> Installing m4\r\n==> m4: Executing phase: 'autoreconf'\r\n==> m4: Executing phase: 'configure'\r\n==> m4: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n20 errors found in build log:\r\n     610                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strcasecmp.c(22):\r\n     611    /usr/include/features.h(378): warning #1224: #warning directive: _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     612      #  warning _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     613         ^\r\n     614\r\n     615    icc: command line warning #10121: overriding '-xCORE-AVX2' with '-march=haswell'\r\n  >> 616    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strcasecmp.c(49): error: identifier \"__SCHAR_MAX__\" is undefined\r\n     617        if (UCHAR_MAX <= INT_MAX)\r\n     618            ^\r\n     619\r\n  >> 620    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strcasecmp.c(49): error: identifier \"__INT_MAX__\" is undefined\r\n     621        if (UCHAR_MAX <= INT_MAX)\r\n     622                         ^\r\n     623\r\n     624    compilation aborted for /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strcasecmp.c (code 2)\r\n     625    make[3]: *** [Makefile:1910: c-strcasecmp.o] Error 2\r\n     626    make[3]: *** Waiting for unfinished jobs....\r\n\r\n     ...\r\n\r\n     708                     from ./stdlib.h(36),\r\n     709                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/dirname.c(23):\r\n     710    /usr/include/features.h(378): warning #1224: #warning directive: _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     711      #  warning _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     712         ^\r\n     713\r\n  >> 714    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strncasecmp.c(49): error: identifier \"__SCHAR_MAX__\" is undefined\r\n     715        if (UCHAR_MAX <= INT_MAX)\r\n     716            ^\r\n     717\r\n  >> 718    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strncasecmp.c(49): error: identifier \"__INT_MAX__\" is undefined\r\n     719        if (UCHAR_MAX <= INT_MAX)\r\n     720                         ^\r\n     721\r\n     722    compilation aborted for /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/c-strncasecmp.c (code 2)\r\n     723    make[3]: *** [Makefile:1910: c-strncasecmp.o] Error 2\r\n     724    In file included from /usr/include/errno.h(25),\r\n\r\n     ...\r\n\r\n     733                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/basename.c(23):\r\n     734    /usr/include/features.h(378): warning #1224: #warning directive: _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     735      #  warning _FORTIFY_SOURCE requires GCC 4.1 or later\r\n     736         ^\r\n     737\r\n     738    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/dirname.c(25):\r\n  >> 739    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(107): error: argument is incompatible with formal parameter\r\n     740        if (xalloc_oversized (n, s))\r\n     741            ^\r\n     742\r\n     743    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/dirname.c(25):\r\n  >> 744    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(120): error: argument is incompatible with formal parameter\r\n     745        if (xalloc_oversized (n, s))\r\n     746            ^\r\n     747\r\n     748    compilation aborted for /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/dirname.c (code 2)\r\n     749    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(42):\r\n  >> 750    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(107): error: argument is incompatible with formal parameter\r\n     751        if (xalloc_oversized (n, s))\r\n     752            ^\r\n     753\r\n     754    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(42):\r\n  >> 755    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(120): error: argument is incompatible with formal parameter\r\n     756        if (xalloc_oversized (n, s))\r\n     757            ^\r\n     758\r\n     759    make[3]: *** [Makefile:1910: dirname.o] Error 2\r\n     760    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     761                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 762    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(111): error: function call is not allowed in a constant express\r\n            ion\r\n     763        sa_alignment_long = sa_alignof (long),\r\n     764                            ^\r\n     765\r\n     766    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     767                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 768    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(111): error: expected an expression\r\n     769        sa_alignment_long = sa_alignof (long),\r\n     770                            ^\r\n     771\r\n     772    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     773                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 774    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(111): error: identifier \"__slot2\" is undefined\r\n     775        sa_alignment_long = sa_alignof (long),\r\n     776                            ^\r\n     777\r\n     778    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     779                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 780    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(112): error: function call is not allowed in a constant express\r\n            ion\r\n     781        sa_alignment_double = sa_alignof (double),\r\n     782                              ^\r\n     783\r\n     784    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     785                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 786    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(112): error: expected an expression\r\n     787        sa_alignment_double = sa_alignof (double),\r\n     788                              ^\r\n     789\r\n     790    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     791                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 792    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(114): error: function call is not allowed in a constant express\r\n            ion\r\n     793        sa_alignment_longlong = sa_alignof (long long),\r\n     794                                ^\r\n     795\r\n     796    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     797                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 798    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(114): error: expected an expression\r\n     799        sa_alignment_longlong = sa_alignof (long long),\r\n     800                                ^\r\n     801\r\n     802    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     803                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 804    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(116): error: function call is not allowed in a constant express\r\n            ion\r\n     805        sa_alignment_longdouble = sa_alignof (long double),\r\n     806                                  ^\r\n     807\r\n     808    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xmalloca.h(21),\r\n     809                     from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(43):\r\n  >> 810    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/malloca.h(116): error: expected an expression\r\n     811        sa_alignment_longdouble = sa_alignof (long double),\r\n     812                                  ^\r\n     813\r\n  >> 814    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c(176): error: identifier \"__CHAR_BIT__\" is undefined\r\n     815          h = *s + ((h << 9) | (h >> (SIZE_BITS - 9)));\r\n     816                                      ^\r\n     817\r\n     818    compilation aborted for /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/clean-temp.c (code 2)\r\n     819    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/basename.c(24):\r\n  >> 820    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(107): error: argument is incompatible with formal parameter\r\n     821        if (xalloc_oversized (n, s))\r\n     822            ^\r\n     823\r\n     824    In file included from /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/basename.c(24):\r\n  >> 825    /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/xalloc.h(120): error: argument is incompatible with formal parameter\r\n     826        if (xalloc_oversized (n, s))\r\n     827            ^\r\n     828\r\n     829    make[3]: *** [Makefile:1910: clean-temp.o] Error 2\r\n     830    compilation aborted for /tmp/eugeneswalker/spack-stage/spack-stage-m4-1.4.18-bbichdfmtakuzmxzpf5uzjpb452cap7u/spack-src/lib/basename.c (code 2)\r\n     831    make[3]: *** [Makefile:1910: basename.o] Error 2\r\n\r\n```\r\n\r\n@certik @scottwittenburg @shahzebsiddiqui @frankwillmore @mpbelhorn \r\n",
    "performed_via_github_app": null
}