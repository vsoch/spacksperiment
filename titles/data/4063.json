{
    "url": "https://api.github.com/repos/spack/spack/issues/4063",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4063/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4063/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4063/events",
    "html_url": "https://github.com/spack/spack/issues/4063",
    "id": 225452013,
    "node_id": "MDU6SXNzdWUyMjU0NTIwMTM=",
    "number": 4063,
    "title": "Should packages have build dependencies on Python?",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446634397,
            "node_id": "MDU6TGFiZWw0NDY2MzQzOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/discussion",
            "name": "discussion",
            "color": "a87f5a",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2017-05-01T15:13:14Z",
    "updated_at": "2019-08-03T18:21:14Z",
    "closed_at": "2019-08-03T18:21:14Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Continuing the discussion from #3975.\r\n\r\nMany packages in Spack require Python as a build dependency. For these packages, we've explicitly add:\r\n```python\r\ndepends_on('python', type='build')\r\n```\r\nto denote this fact, and Spack will install Python before installing the package. For most build dependencies this makes sense, as we can't guarantee whether or not the OS has this package installed, or whether or not it is a new enough version. We can, however, guarantee that Python is installed and is relatively new. Otherwise, the user wouldn't be able to run Spack! So should we really tell Spack to reinstall Python?\r\n\r\n### Pros of the build dependency\r\n\r\nThere are some pros to explicitly declaring a Python dependency. First of all, it offers more freedom. If you want Spack to build a new version of Python and use it, it will. If you want Spack to use your system Python instead, just add it as an external package to your `packages.yaml`. If you are a developer and want to make sure your project can be built with several versions of Python, it makes it easy to test with Spack.\r\n\r\nFor packages that only build with Python 2, we don't really have a choice. Now that Spack works with Python 3, we can't ensure that the first python in `PATH` is Python 2. But for packages that build with both Python 2 and 3, we could theoretically use whatever Python the user is running Spack with.\r\n\r\n### Cons of the build dependency\r\n\r\nMore installations. Need I say more? \ud83d\ude09 \r\n\r\nThe biggest benefit of removing Python build dependencies that I can see is the ability to get around some nasty concretization problems in Spack. For example, it currently isn't possible to install `python+tk` because of the following dependency chain:\r\n```\r\npython+tk -> tk -> libx11 -> libxcb -> python\r\n```\r\nRight now, the concretizer won't allow you to install 2 variants of the same package in a single spec, so `python+tk` essentially depends on `python+tk`, creating a dependency loop. Once #2548 is merged, this won't be a problem anymore. But until then, it's a show stopper for many users (@svenevs).\r\n\r\n@citibeth @tgamblin ",
    "performed_via_github_app": null
}