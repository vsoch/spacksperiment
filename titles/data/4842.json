{
    "url": "https://api.github.com/repos/spack/spack/issues/4842",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4842/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4842/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4842/events",
    "html_url": "https://github.com/spack/spack/issues/4842",
    "id": 244666369,
    "node_id": "MDU6SXNzdWUyNDQ2NjYzNjk=",
    "number": 4842,
    "title": "Packages hypre not compiling, C compiler cannot create executables",
    "user": {
        "login": "wrk21",
        "id": 28896316,
        "node_id": "MDQ6VXNlcjI4ODk2MzE2",
        "avatar_url": "https://avatars.githubusercontent.com/u/28896316?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wrk21",
        "html_url": "https://github.com/wrk21",
        "followers_url": "https://api.github.com/users/wrk21/followers",
        "following_url": "https://api.github.com/users/wrk21/following{/other_user}",
        "gists_url": "https://api.github.com/users/wrk21/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wrk21/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wrk21/subscriptions",
        "organizations_url": "https://api.github.com/users/wrk21/orgs",
        "repos_url": "https://api.github.com/users/wrk21/repos",
        "events_url": "https://api.github.com/users/wrk21/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wrk21/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2017-07-21T13:18:55Z",
    "updated_at": "2017-07-24T12:00:29Z",
    "closed_at": "2017-07-24T12:00:29Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "We have a new system with Intel Skylake x86, Intel KNL and NVIDIA Tesla P100. Several packages were recently installed using spack. \r\nCurrently, I have troubles to install the trilinos package.\r\n```\r\n$ spack spec -I trilinos%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"\r\nInput spec\r\n--------------------------------\r\n     trilinos%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" \r\n\r\nNormalized\r\n--------------------------------\r\n     trilinos%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" \r\n         ^blas\r\n         ^cmake\r\n         ^glm\r\n         ^lapack\r\n         ^matio\r\n         ^mpi\r\n         ^netcdf+mpi\r\n             ^hdf5\r\n                 ^zlib@1.2.5:\r\n             ^m4\r\n\r\nConcretized\r\n--------------------------------\r\n     trilinos@12.10.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~alloptpkgs+amesos+amesos2+aztec+belos+boost~debug~dtk+epetra+epetraext+exodus+fortran+gtest+hdf5+hypre+ifpack+ifpack2+instantiate~instantiate_cmplx+metis+ml+muelu+mumps~pnetcdf~python+sacado+shared~stk+suite-sparse~superlu+superlu-dist+teuchos+tpetra~x11~xsdkflags~zlib+zoltan+zoltan2 arch=linux-rhel7-x86_64 \r\n         ^boost@1.63.0%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +atomic+chrono+date_time~debug+filesystem~graph~icu+iostreams+locale+log+math~mpi+multithreaded+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer+wave arch=linux-rhel7-x86_64 \r\n             ^bzip2@1.0.6%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +shared arch=linux-rhel7-x86_64 \r\n             ^zlib@1.2.11%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +pic+shared arch=linux-rhel7-x86_64 \r\n         ^cmake@3.8.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~doc+ncurses+openssl+ownlibs~qt arch=linux-rhel7-x86_64 \r\n             ^ncurses@6.0%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~symlinks arch=linux-rhel7-x86_64 \r\n                 ^pkg-config@0.29.2%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +internal_glib arch=linux-rhel7-x86_64 \r\n             ^openssl@1.0.1e-fips%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"  arch=linux-rhel7-x86_64 \r\n         ^glm@0.9.7.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"  arch=linux-rhel7-x86_64 \r\n         ^hdf5@1.10.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +cxx~debug+fortran+mpi+pic+shared~szip~threadsafe arch=linux-rhel7-x86_64 \r\n[+]          ^intel-mpi@2017.4%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"  arch=linux-rhel7-x86_64 \r\n         ^hypre@2.11.2%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~int64~internal-superlu+shared arch=linux-rhel7-x86_64 \r\n[+]          ^intel-mkl@2017.4%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~ilp64~openmp+shared arch=linux-rhel7-x86_64 \r\n         ^matio@1.5.9%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +hdf5+shared+zlib arch=linux-rhel7-x86_64 \r\n         ^metis@5.1.0%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~debug~gdb~int64~real64+shared arch=linux-rhel7-x86_64 \r\n         ^mumps@5.1.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +complex+double+float~int64~metis+mpi~parmetis~ptscotch~scotch+shared arch=linux-rhel7-x86_64 \r\n         ^netcdf@4.4.1.1%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~cdmremote~dap~hdf4 maxdims=1024 maxvars=8192 +mpi~parallel-netcdf+shared arch=linux-rhel7-x86_64 \r\n             ^m4@1.4.18%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" +sigsegv arch=linux-rhel7-x86_64 \r\n                 ^libsigsegv@2.11%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"  arch=linux-rhel7-x86_64 \r\n         ^parmetis@4.0.3%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~debug~gdb+shared arch=linux-rhel7-x86_64 \r\n         ^suite-sparse@4.5.5%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~cuda~openmp+pic~tbb arch=linux-rhel7-x86_64 \r\n         ^superlu-dist@5.1.3%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\" ~int64 arch=linux-rhel7-x86_64 \r\n\r\nspack install trilinos%intel@17.0.4 cflags=\"-xMIC-AVX512\" cxxflags=\"-xMIC-AVX512\"\r\n==> intel-mkl@2017.4 : has external module in intel/mkl/2017.4\r\n==> intel-mkl@2017.4 : is actually installed in /usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mkl\r\n==> intel-mkl@2017.4 : already registered in DB\r\n==> intel-mpi@2017.4 : has external module in intel/impi/2017.4/intel\r\n==> intel-mpi@2017.4 : is actually installed in /usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mpi/mic\r\n==> intel-mpi@2017.4 : already registered in DB\r\n==> Installing hypre\r\n==> Using cached archive: /usr/local/software/spack/develop-290617/spack/var/spack/cache/hypre/hypre-2.11.2.tar.gz\r\n==> Already staged hypre-2.11.2-6tdwlsz2pw72xhyo3ef7q4sxw62abqfr in /usr/local/software/spack/develop-290617/spack/var/spack/stage/hypre-2.11.2-6tdwlsz2pw72xhyo3ef7q4sxw62abqfr\r\n==> Already patched hypre\r\n==> Building hypre [Package]\r\n==> Executing phase : 'install'\r\n==> Error: ProcessError: Command exited with status 77:\r\n    './configure' '--prefix=/usr/local/software/spack/develop-290617/spack/opt/spack/linux-rhel7-x86_64/intel-17.0.4/hypre-2.11.2-6tdwlsz2pw72xhyo3ef7q4sxw62abqfr' '--with-lapack-libs=mkl_intel_lp64 mkl_core mkl_sequential pthread m dl' '--with-lapack-lib-dirs=/usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64 /lib64' '--with-blas-libs=mkl_intel_lp64 mkl_core mkl_sequential pthread m dl' '--with-blas-lib-dirs=/usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64 /lib64' '--enable-shared' '--without-superlu' '--without-mli' '--without-fei'\r\n/usr/local/software/spack/develop-290617/spack/var/spack/repos/builtin/packages/hypre/package.py:104, in install:\r\n     61       def install(self, spec, prefix):\r\n     62           os.environ['CC'] = spec['mpi'].mpicc\r\n     63           os.environ['CXX'] = spec['mpi'].mpicxx\r\n     64           os.environ['F77'] = spec['mpi'].mpif77\r\n     65\r\n     66           # Note: --with-(lapack|blas)_libs= needs space separated list of names\r\n     67           lapack = spec['lapack'].libs\r\n     68           blas = spec['blas'].libs\r\n     69\r\n     70           configure_args = [\r\n     71               '--prefix=%s' % prefix,\r\n     72               '--with-lapack-libs=%s' % ' '.join(lapack.names),\r\n     73               '--with-lapack-lib-dirs=%s' % ' '.join(lapack.directories),\r\n     74               '--with-blas-libs=%s' % ' '.join(blas.names),\r\n     75               '--with-blas-lib-dirs=%s' % ' '.join(blas.directories)\r\n     76           ]\r\n     77\r\n     78           if '+int64' in self.spec:\r\n     79               configure_args.append('--enable-bigint')\r\n     80\r\n     81           if '+shared' in self.spec:\r\n     82               configure_args.append(\"--enable-shared\")\r\n     83\r\n     84           if '~internal-superlu' in self.spec:\r\n     85               configure_args.append(\"--without-superlu\")\r\n     86               # MLI and FEI do not build without superlu on Linux\r\n     87               configure_args.append(\"--without-mli\")\r\n     88               configure_args.append(\"--without-fei\")\r\n     89\r\n     90           # Hypre's source is staged under ./src so we'll have to manually\r\n     91           # cd into it.\r\n     92           with working_dir(\"src\"):\r\n     93               configure(*configure_args)\r\n     94\r\n     95               make()\r\n     96               if self.run_tests:\r\n     97                   make(\"check\")\r\n     98                   make(\"test\")\r\n     99                   Executable(join_path('test', 'ij'))()\r\n     100                  sstruct = Executable(join_path('test', 'struct'))\r\n     101                  sstruct()\r\n     102                  sstruct('-in', 'test/sstruct.in.default', '-solver', '40',\r\n     103                          '-rhsone')\r\n  >> 104              make(\"install\")\r\n\r\nSee build log for details:\r\nless /tmp/wrk21/spack-stage/spack-stage-fFzNmM/hypre-2.11.2/spack-build.out\r\n==> './configure' '--prefix=/usr/local/software/spack/develop-290617/spack/opt/spack/linux-rhel7-x86_64/intel-17.0.4/hypre-2.11.2-6tdwlsz2pw72xhyo3ef7q4sxw62abqfr' '--with-lapack-libs=mkl_intel_lp64 mkl_core mkl_sequential pthread m dl' '--with-lapack-lib-dirs=/usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64 /lib64' '--with-blas-libs=mkl_intel_lp64 mkl_core mkl_sequential pthread m dl' '--with-blas-lib-dirs=/usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64 /lib64' '--enable-shared' '--without-superlu' '--without-mli' '--without-fei'\r\nchecking build system type... x86_64-pc-linux-gnu\r\nchecking host system type... x86_64-pc-linux-gnu\r\nchecking whether make sets $(MAKE)... yes\r\nchecking for ranlib... ranlib\r\nchecking for gcc... /usr/local/Cluster-Apps/intel/2017.4/compilers_and_libraries_2017.4.196/linux/mpi/mic/bin/mpicc\r\nchecking whether the C compiler works... no\r\nconfigure: error: in `/tmp/wrk21/spack-stage/spack-stage-fFzNmM/hypre-2.11.2/src':\r\nconfigure: error: C compiler cannot create executables\r\n```\r\nAny advice on how to proceed?",
    "performed_via_github_app": null
}