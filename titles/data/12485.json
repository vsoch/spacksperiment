{
    "url": "https://api.github.com/repos/spack/spack/issues/12485",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12485/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12485/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12485/events",
    "html_url": "https://github.com/spack/spack/issues/12485",
    "id": 482932783,
    "node_id": "MDU6SXNzdWU0ODI5MzI3ODM=",
    "number": 12485,
    "title": "Multiple users of spack on a system broken (permissions errors)",
    "user": {
        "login": "steffen-AEI",
        "id": 30238236,
        "node_id": "MDQ6VXNlcjMwMjM4MjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/30238236?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/steffen-AEI",
        "html_url": "https://github.com/steffen-AEI",
        "followers_url": "https://api.github.com/users/steffen-AEI/followers",
        "following_url": "https://api.github.com/users/steffen-AEI/following{/other_user}",
        "gists_url": "https://api.github.com/users/steffen-AEI/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/steffen-AEI/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/steffen-AEI/subscriptions",
        "organizations_url": "https://api.github.com/users/steffen-AEI/orgs",
        "repos_url": "https://api.github.com/users/steffen-AEI/repos",
        "events_url": "https://api.github.com/users/steffen-AEI/events{/privacy}",
        "received_events_url": "https://api.github.com/users/steffen-AEI/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 512483406,
            "node_id": "MDU6TGFiZWw1MTI0ODM0MDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-high",
            "name": "impact-high",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 480333036,
            "node_id": "MDU6TGFiZWw0ODAzMzMwMzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/workaround",
            "name": "workaround",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tldahlgren",
            "id": 35777542,
            "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tldahlgren",
            "html_url": "https://github.com/tldahlgren",
            "followers_url": "https://api.github.com/users/tldahlgren/followers",
            "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
            "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
            "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
            "repos_url": "https://api.github.com/users/tldahlgren/repos",
            "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 13,
    "created_at": "2019-08-20T15:30:16Z",
    "updated_at": "2019-09-03T23:31:28Z",
    "closed_at": "2019-09-03T23:31:28Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Today, I cloned spack (default branch \"develop\") into ~/SPACK, and went through the usual steps.\r\n\r\nI failed very early, with neither \"spack bootstrap\" nor \"spack install $package\" working.\r\n\r\n\r\n*Explain, in a clear and concise way, the command you ran and the result you were trying to achieve.\r\nExample: \"I ran Spack find to list all the installed packages and...\"*\r\n\r\n\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n[myname@ac922 ~]$ . ~/SPACK/share/spack/setup-env.sh\r\n[myname@ac922 ~]$ spack bootstrap\r\n==> Installing environment-modules@4.3.0%gcc@4.8.5~X arch=linux-rhel7-ppc64le ^tcl@8.6.8%gcc@4.8.5 arch=linux-rhel7-ppc64le ^zlib@1.2.11%gcc@4.8.5+optimize+pic+shared arch=linux-rhel7-ppc64le to satisfy requirement for environment-modules\r\n==> Installing zlib\r\n==> Searching for binary cache of zlib\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for zlib found: installing from source\r\n==> Error: StageError: No accessible stage paths in:\r\n    ['$tempdir/spack-stage']\r\n\r\n/home/myname/SPACK/lib/spack/spack/package.py:753, in _make_root_stage:\r\n        750            dynamic_fetcher = fs.from_list_url(self)\r\n        751            return [dynamic_fetcher] if dynamic_fetcher else []\r\n        752\r\n  >>    753        stage = Stage(fetcher, mirror_path=mp, name=stage_name, path=self.path,\r\n        754                      search_fn=download_search)\r\n        755        return stage\r\n\r\n\r\n==> Error: No accessible stage paths in:\r\nTraceback (most recent call last):\r\n  File \"/home/myname/SPACK/bin/spack\", line 48, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/home/myname/SPACK/lib/spack/spack/main.py\", line 701, in main\r\n    e.die()  # gracefully die on any SpackErrors\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 74, in die\r\n    self.print_context()\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 57, in print_context\r\n    sys.stderr.write(self.long_message)\r\nTypeError: expected a character buffer object\r\n[myname@ac922 ~]$ spack install screen\r\n==> Error: No accessible stage paths in:\r\nTraceback (most recent call last):\r\n  File \"/home/myname/SPACK/bin/spack\", line 48, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/home/myname/SPACK/lib/spack/spack/main.py\", line 701, in main\r\n    e.die()  # gracefully die on any SpackErrors\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 74, in die\r\n    self.print_context()\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 57, in print_context\r\n    sys.stderr.write(self.long_message)\r\nTypeError: expected a character buffer object\r\n```\r\n\r\n### Error Message\r\n\r\n(included above)\r\n\r\n```console\r\n$ spack -d --stacktrace install screen\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.194732] Reading config file /home/myname/SPACK/etc/spack/defaults/modules.yaml\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.210065] Reading config file /home/myname/SPACK/etc/spack/defaults/linux/modules.yaml\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.215119] Reading config file /home/myname/SPACK/etc/spack/defaults/config.yaml\r\nlib/spack/spack/cmd/__init__.py:98 ==> [2019-08-20-17:25:04.242894] Imported install from built-in commands\r\nlib/spack/spack/cmd/__init__.py:98 ==> [2019-08-20-17:25:04.244661] Imported install from built-in commands\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.256966] Reading config file /home/myname/SPACK/etc/spack/defaults/repos.yaml\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.329868] Reading config file /home/myname/SPACK/etc/spack/defaults/packages.yaml\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.358382] READ LOCK: /home/myname/.spack/cache/tags/.builtin-index.json.lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.358814] READ LOCK: /home/myname/.spack/cache/tags/.builtin-index.json.lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.360267] READ LOCK: /home/myname/.spack/cache/tags/.builtin-index.json.lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.363832] READ LOCK: /home/myname/.spack/cache/patches/.builtin-index.json.lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.364240] READ LOCK: /home/myname/.spack/cache/patches/.builtin-index.json.lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.388318] READ LOCK: /home/myname/.spack/cache/patches/.builtin-index.json.lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.392465] READ LOCK: /home/myname/.spack/cache/providers/.builtin-index.json.lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.392874] READ LOCK: /home/myname/.spack/cache/providers/.builtin-index.json.lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.433396] READ LOCK: /home/myname/.spack/cache/providers/.builtin-index.json.lock[0:0] [Released]\r\nlib/spack/spack/config.py:684 ==> [2019-08-20-17:25:04.455639] Reading config file /home/myname/.spack/linux/compilers.yaml\r\nlib/spack/spack/database.py:214 ==> [2019-08-20-17:25:04.497466] DATABASE LOCK TIMEOUT: 120s\r\nlib/spack/spack/database.py:218 ==> [2019-08-20-17:25:04.497742] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.498639] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.498978] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.499402] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.499798] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.500166] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.500611] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.501073] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.501445] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.501897] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.503410] WRITE LOCK: /home/myname/SPACK/opt/spack/.spack-db/prefix_lock[8654365307056604415:1] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.503748] WRITE LOCK: /home/myname/SPACK/opt/spack/.spack-db/prefix_lock[8654365307056604415:1] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.504055] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.504405] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.504846] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.505166] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.505530] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.505986] READ LOCK: /home/myname/SPACK/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2019-08-20-17:25:04.510727] WRITE LOCK: /home/myname/SPACK/opt/spack/.spack-db/prefix_lock[8654365307056604415:1] [Released]\r\nlib/spack/spack/main.py:700 ==> [2019-08-20-17:25:04.529440] StageError: No accessible stage paths in:\r\n    ['$tempdir/spack-stage']\r\nlib/spack/spack/error.py:55 ==> [2019-08-20-17:25:04.530285] Error: No accessible stage paths in:\r\nTraceback (most recent call last):\r\n  File \"/home/myname/SPACK/bin/spack\", line 48, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/home/myname/SPACK/lib/spack/spack/main.py\", line 701, in main\r\n    e.die()  # gracefully die on any SpackErrors\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 74, in die\r\n    self.print_context()\r\n  File \"/home/myname/SPACK/lib/spack/spack/error.py\", line 57, in print_context\r\n    sys.stderr.write(self.long_message)\r\nTypeError: expected a character buffer object\r\n```\r\n\r\n\r\n### Information on your system\r\n\r\nPOWER9 (ppc64le), first SPACK setup\r\n\r\nAny advice is welcome!",
    "performed_via_github_app": null
}