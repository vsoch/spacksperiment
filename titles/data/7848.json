{
    "url": "https://api.github.com/repos/spack/spack/issues/7848",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7848/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7848/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7848/events",
    "html_url": "https://github.com/spack/spack/issues/7848",
    "id": 316314064,
    "node_id": "MDU6SXNzdWUzMTYzMTQwNjQ=",
    "number": 7848,
    "title": "spack install lua-luafilesystem -> Failed cloning git repository.",
    "user": {
        "login": "bengisuelis",
        "id": 33023295,
        "node_id": "MDQ6VXNlcjMzMDIzMjk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/33023295?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bengisuelis",
        "html_url": "https://github.com/bengisuelis",
        "followers_url": "https://api.github.com/users/bengisuelis/followers",
        "following_url": "https://api.github.com/users/bengisuelis/following{/other_user}",
        "gists_url": "https://api.github.com/users/bengisuelis/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bengisuelis/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bengisuelis/subscriptions",
        "organizations_url": "https://api.github.com/users/bengisuelis/orgs",
        "repos_url": "https://api.github.com/users/bengisuelis/repos",
        "events_url": "https://api.github.com/users/bengisuelis/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bengisuelis/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446643530,
            "node_id": "MDU6TGFiZWw0NDY2NDM1MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/fetching",
            "name": "fetching",
            "color": "fbca04",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2018-04-20T15:32:29Z",
    "updated_at": "2019-09-08T02:06:53Z",
    "closed_at": "2019-09-08T02:06:53Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I am trying to install lua-luafilesystem by spack and apparently there is something wrong with the repo.\r\n\r\n### Actual Result\r\n\r\n```\r\n==> libsigsegv is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libsigsegv-2.11-fypapcprssrj3nstp6njprskeyynsgaz\r\n==> m4 is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/m4-1.4.18-r5envx3kqctwwflhd4qax4ahqtt6x43a\r\n==> pkgconf is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/pkgconf-1.4.0-c5lf2hilcinnqpf3nojkif3eauay2gko\r\n==> ncurses is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/ncurses-6.0-nxkp7kslgelgkl5orm7la6fir7b7r547\r\n==> readline is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/readline-7.0-gys53zdfur4qv5y3e5q5s734sbziuv5q\r\n==> gdbm is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/gdbm-1.14.1-jbpld4yy6hucm7vryhrygbl7nlxei33f\r\n==> perl is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/perl-5.24.1-ojuball5xfke3t6hfg4gaf6t3cgk7cjg\r\n==> autoconf is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/autoconf-2.69-cpyyi6iwy7f34o4s2rardmexnmhgzujo\r\n==> automake is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/automake-1.15.1-35ma3dfdd5ycgimfvvozubbix7frcyo4\r\n==> zlib is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/zlib-1.2.11-5nus6knzumx4ik2yl44jxtgtsl7d54xb\r\n==> openssl is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/openssl-1.0.2n-w44ec2otpz6giuwrgmzjupluxibx3kuy\r\n==> cmake is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/cmake-3.11.0-dbtdkycs2lywrbbepgg3cns4ybaiqvju\r\n==> xz is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/xz-5.2.3-htnq7wqdrqtof6uxqicdj3f7oe3xz6pw\r\n==> libssh2 is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libssh2-1.8.0-zq2xqfvhovj2w2dztrvjizfyckddpmhh\r\n==> curl is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/curl-7.56.0-5awsurahb7yrlzbaugtnjzhzrz3k3aoc\r\n==> libbsd is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libbsd-0.8.6-f4qkkwmagbwroaoljw3irrpswb3uteqy\r\n==> expat is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/expat-2.2.2-ayzd2ohzkowikiiynq7ti6vfehhidxcx\r\n==> bzip2 is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/bzip2-1.0.6-ufczdvsqt6edesm36xiucyry7myhj7e7\r\n==> libxml2 is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libxml2-2.9.4-sxk64lvcxhqjflzesnf3ye4wakovwi45\r\n==> tar is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/tar-1.29-22xotf4z4ufezcxcsq3v5ptqrf4uf2iu\r\n==> gettext is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/gettext-0.19.8.1-6oy6fuc3no4tc6nmwwahrgacmci7tcms\r\n==> libiconv is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libiconv-1.15-u2x3umvoehr7zpwwwggevpownvki6ak2\r\n==> libtool is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/libtool-2.4.6-o2pfwjf44353ajgr42xqtvzyvqsazkgu\r\n==> pcre is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/pcre-8.41-7zjt36gj3psovsvxhq5s76tq7pb7arkh\r\n==> git is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/git-2.15.1-uycn44empprxx244qekmlw432652supe\r\n==> lua is already installed in /u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/lua-5.3.4-6ayqzzib727k3oocmd63ztuikmis5ny2\r\n==> Installing lua-luafilesystem\r\n==> Using cached archive: /u/home/bengisu/spack/var/spack/cache/lua-luafilesystem/lua-luafilesystem-1_6_3.tar.gz\r\n==> Staging archive: /u/home/bengisu/spack/var/spack/stage/lua-luafilesystem-1_6_3-zzhsmvvwdjiozxshcti6l64lpr4iimh4/v1_6_3.tar.gz\r\n==> Created stage in /u/home/bengisu/spack/var/spack/stage/lua-luafilesystem-1_6_3-zzhsmvvwdjiozxshcti6l64lpr4iimh4\r\n==> No patches needed for lua-luafilesystem\r\n==> Building lua-luafilesystem [Package]\r\n==> Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/lua-5.3.4-6ayqzzib727k3oocmd63ztuikmis5ny2/bin/luarocks' '--tree=/u/home/bengisu/spack/opt/spack/linux-ubuntu16.04-x86_64/gcc-5.4.0/lua-luafilesystem-1_6_3-zzhsmvvwdjiozxshcti6l64lpr4iimh4' 'install' '/u/home/bengisu/spack/var/spack/stage/lua-luafilesystem-1_6_3-zzhsmvvwdjiozxshcti6l64lpr4iimh4/luafilesystem-1_6_3/rockspecs/luafilesystem-1.6.3-1.rockspec'\r\n\r\n1 error found in build log:\r\n     4     Cloning into 'luafilesystem'...\r\n     5     fatal: unable to connect to github.com:\r\n     6     github.com[0: 192.30.253.113]: errno=Connection timed out\r\n     7     github.com[1: 192.30.253.112]: errno=Connection timed out\r\n     8     \r\n     9     \r\n  >> 10    Error: Failed cloning git repository.\r\n\r\nSee build log for details:\r\n  /u/home/bengisu/spack/var/spack/stage/lua-luafilesystem-1_6_3-zzhsmvvwdjiozxshcti6l64lpr4iimh4/luafilesystem-1_6_3/spack-build.out\r\n\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install lua-luafilesystem\r\n...\r\n```\r\n\r\n### Information on your system\r\n\r\n1. Linux i10se4 4.4.0-119-generic #143-Ubuntu SMP Mon Apr 2 16:08:24 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=16.04\r\nDISTRIB_CODENAME=xenial\r\nDISTRIB_DESCRIPTION=\"Ubuntu 16.04.4 LTS\"\r\n\r\n 2. var/spack/repos/builtin/packages/lua-luafilesystem/package.py:\r\n \r\n```\r\nfrom spack import *\r\n\r\n\r\nclass LuaLuafilesystem(Package):\r\n    \"\"\"LuaFileSystem is a Lua library developed to complement the set of\r\n    functions related to file systems offered by the standard Lua distribution.\r\n\r\n    LuaFileSystem offers a portable way to access the underlying directory\r\n    structure and file attributes.\r\n\r\n    LuaFileSystem is free software and uses the same license as Lua 5.1\r\n    \"\"\"\r\n\r\n    homepage = 'http://keplerproject.github.io/luafilesystem'\r\n    url = 'https://github.com/keplerproject/luafilesystem/archive/v1_6_3.tar.gz'\r\n    version('1_6_3', 'bed11874cfded8b4beed7dd054127b24')    \r\n\r\n    # The version constraint here comes from this post:\r\n    #\r\n    # https://www.perforce.com/blog/git-beyond-basics-using-shallow-clones\r\n    #\r\n    # where it is claimed that full shallow clone support was added @1.9\r\n    depends_on('git@1.9.0:', type='build')\r\n    extends('lua')\r\n\r\n    def install(self, spec, prefix):\r\n        rockspec_fmt = join_path(self.stage.path,\r\n                                 'luafilesystem-{version.underscored}',\r\n                                 'rockspecs',\r\n                                 'luafilesystem-{version.dotted}-1.rockspec')\r\n        luarocks('--tree=' + prefix, 'install',\r\n                 rockspec_fmt.format(version=self.spec.version))\r\n```\r\n\r\nAfter reading #2682 I also tried changing url to  \r\n`url = 'https://github.com/keplerproject/luafilesystem/archive/v_1_6_3.tar.gz'` but the result was the same error. \r\n\r\nI also tried cloning both repos myself through terminal by:\r\n`git clone  https://github.com/keplerproject/luafilesystem/archive/v1_6_3.tar.gz `\r\n which also gave me : \r\n```\r\nCloning into 'v1_6_3.tar.gz'...\r\nremote: Not Found\r\nfatal: repository 'https://github.com/keplerproject/luafilesystem/archive/v1_6_3.tar.gz/' not found\r\n```",
    "performed_via_github_app": null
}