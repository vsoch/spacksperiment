{
    "url": "https://api.github.com/repos/spack/spack/issues/19835",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19835/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19835/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19835/events",
    "html_url": "https://github.com/spack/spack/issues/19835",
    "id": 739518873,
    "node_id": "MDU6SXNzdWU3Mzk1MTg4NzM=",
    "number": 19835,
    "title": "Where/when does`spack load` write to the file system ",
    "user": {
        "login": "CreRecombinase",
        "id": 3493159,
        "node_id": "MDQ6VXNlcjM0OTMxNTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3493159?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CreRecombinase",
        "html_url": "https://github.com/CreRecombinase",
        "followers_url": "https://api.github.com/users/CreRecombinase/followers",
        "following_url": "https://api.github.com/users/CreRecombinase/following{/other_user}",
        "gists_url": "https://api.github.com/users/CreRecombinase/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/CreRecombinase/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/CreRecombinase/subscriptions",
        "organizations_url": "https://api.github.com/users/CreRecombinase/orgs",
        "repos_url": "https://api.github.com/users/CreRecombinase/repos",
        "events_url": "https://api.github.com/users/CreRecombinase/events{/privacy}",
        "received_events_url": "https://api.github.com/users/CreRecombinase/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 512483297,
            "node_id": "MDU6TGFiZWw1MTI0ODMyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-low",
            "name": "impact-low",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 2504875446,
            "node_id": "MDU6TGFiZWwyNTA0ODc1NDQ2",
            "url": "https://api.github.com/repos/spack/spack/labels/python%202.6",
            "name": "python 2.6",
            "color": "fc8ae7",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-11-10T02:35:31Z",
    "updated_at": "2020-11-14T08:55:55Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I ran `spack --stacktrace load r@4.0.2` (but it happens with everything) and I got:\r\n\r\n```lib/spack/spack/main.py:772 ==> Error: [Errno 122] Disk quota exceeded```\r\n\r\nIf I run in debug mode I get: \r\n```\r\nt.cri.nknoblauch@cri16in001:/scratch/t.cri.nknoblauch/polyg_scratch/workflow:spack --debug --stacktrace load r@4.0.2\r\nlib/spack/spack/cmd/__init__.py:102 ==> [2020-11-09-20:31:00.125122, 101128] Imported load from built-in commands\r\nlib/spack/spack/cmd/__init__.py:102 ==> [2020-11-09-20:31:00.127824, 101128] Imported load from built-in commands\r\nlib/spack/spack/config.py:706 ==> [2020-11-09-20:31:00.177898, 101128] Reading config file /gpfs/data/xhe-lab/software/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/config.py:706 ==> [2020-11-09-20:31:00.200301, 101128] Reading config file /home/t.cri.nknoblauch/.spack/config.yaml\r\nlib/spack/spack/database.py:339 ==> [2020-11-09-20:31:00.215561, 101128] DATABASE LOCK TIMEOUT: 3s\r\nlib/spack/spack/database.py:343 ==> [2020-11-09-20:31:00.216146, 101128] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/llnl/util/lock.py:537 ==> [2020-11-09-20:31:00.219027, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Acquiring] \r\nlib/spack/llnl/util/lock.py:178 ==> [2020-11-09-20:31:00.220241, 101128] read locking [0:0]: timeout 3 sec\r\nlib/spack/llnl/util/lock.py:477 ==> [2020-11-09-20:31:00.221222, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Acquired at 20:31:00.220422] \r\nlib/spack/spack/config.py:706 ==> [2020-11-09-20:31:00.971813, 101128] Reading config file /gpfs/data/xhe-lab/software/spack/etc/spack/defaults/repos.yaml\r\nlib/spack/spack/config.py:706 ==> [2020-11-09-20:31:00.977709, 101128] Reading config file /home/t.cri.nknoblauch/.spack/linux/repos.yaml\r\nlib/spack/llnl/util/lock.py:537 ==> [2020-11-09-20:31:01.096124, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Releasing] \r\nlib/spack/llnl/util/lock.py:477 ==> [2020-11-09-20:31:01.096724, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Released at 20:31:01.096327] \r\nlib/spack/llnl/util/lock.py:537 ==> [2020-11-09-20:31:01.099701, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Acquiring] \r\nlib/spack/llnl/util/lock.py:178 ==> [2020-11-09-20:31:01.100256, 101128] read locking [0:0]: timeout 3 sec\r\nlib/spack/llnl/util/lock.py:477 ==> [2020-11-09-20:31:01.100666, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Acquired at 20:31:01.100355] \r\nlib/spack/llnl/util/lock.py:537 ==> [2020-11-09-20:31:01.886758, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Releasing] \r\nlib/spack/llnl/util/lock.py:477 ==> [2020-11-09-20:31:01.887268, 101128] READ LOCK (database): /gpfs/data/xhe-lab/software/spack/opt/spack/.spack-db/lock[0:0] [Released at 20:31:01.886947] \r\nTraceback (most recent call last):\r\n  File \"/gpfs/data/xhe-lab/software/spack/bin/spack\", line 64, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/main.py\", line 763, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/main.py\", line 488, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/cmd/load.py\", line 76, in load\r\n    env_mod.extend(uenv.environment_modifications_for_spec(spec))\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/user_environment.py\", line 83, in environment_modifications_for_spec\r\n    spec, context='run'\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/build_environment.py\", line 740, in modifications_from_dependencies\r\n    pkg = spec.package\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/spec.py\", line 1155, in package\r\n    self._package = spack.repo.get(self)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 1194, in get\r\n    return path.get(spec)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 94, in converter\r\n    return function(self, spec_like, *args, **kwargs)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 653, in get\r\n    return self.repo_for_pkg(spec).get(spec)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 94, in converter\r\n    return function(self, spec_like, *args, **kwargs)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 892, in get\r\n    package_class = self.get_pkg_class(spec.name)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 1086, in get_pkg_class\r\n    module = self._get_pkg_module(pkg_name)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/repo.py\", line 1060, in _get_pkg_module\r\n    prepend=_package_prepend)\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/util/imp/imp_importer.py\", line 41, in load_source\r\n    with prepend_open(path, text=prepend) as f:\r\n  File \"/usr/lib64/python2.6/contextlib.py\", line 16, in __enter__\r\n    return self.gen.next()\r\n  File \"/gpfs/data/xhe-lab/software/spack/lib/spack/spack/util/imp/imp_importer.py\", line 66, in prepend_open\r\n    tf.seek(0)\r\nIOError: [Errno 122] Disk quota exceeded\r\n\r\n```\r\n\r\nHow do i figure out where this is happening?  I have spack installed on a pretty buggy `gpfs` system, but I can still write files to the system so it isn't an actual disk quota issue as far as I'm aware. \r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```\r\nusage: spack debug [-h] SUBCOMMAND ...\r\nspack debug: error: argument SUBCOMMAND: invalid choice: 'report' choose from:\r\n    create-db-tarball\r\n```\r\nSorry I'm using spack `0.14.0` and don't know how to upgrade.  I'm using Python 2.6.6 (because I can't spack load a better one)\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [?] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n\r\n\r\n",
    "performed_via_github_app": null
}