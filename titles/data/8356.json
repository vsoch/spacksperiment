{
    "url": "https://api.github.com/repos/spack/spack/issues/8356",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/8356/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/8356/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/8356/events",
    "html_url": "https://github.com/spack/spack/issues/8356",
    "id": 328718063,
    "node_id": "MDU6SXNzdWUzMjg3MTgwNjM=",
    "number": 8356,
    "title": "Intel compiler install depends on gcc",
    "user": {
        "login": "s-sajid-ali",
        "id": 30510036,
        "node_id": "MDQ6VXNlcjMwNTEwMDM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/30510036?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/s-sajid-ali",
        "html_url": "https://github.com/s-sajid-ali",
        "followers_url": "https://api.github.com/users/s-sajid-ali/followers",
        "following_url": "https://api.github.com/users/s-sajid-ali/following{/other_user}",
        "gists_url": "https://api.github.com/users/s-sajid-ali/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/s-sajid-ali/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/s-sajid-ali/subscriptions",
        "organizations_url": "https://api.github.com/users/s-sajid-ali/orgs",
        "repos_url": "https://api.github.com/users/s-sajid-ali/repos",
        "events_url": "https://api.github.com/users/s-sajid-ali/events{/privacy}",
        "received_events_url": "https://api.github.com/users/s-sajid-ali/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2018-06-02T06:15:09Z",
    "updated_at": "2018-06-19T12:59:43Z",
    "closed_at": "2018-06-19T12:59:43Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Summary\r\n\r\nThe same package behaves differently for the same intel compiler depending on which gcc is active in the background. What's extremely troubling is that the install process for a given DAG can't be replicated at two different times.\r\n\r\n### Expected Result\r\n\r\nThe build for a package concretized to a given DAG should be reproducible on a given system.\r\n\r\n### Actual Result\r\n\r\nFor example, with ```gcc 8``` loaded, binutils fails to install \r\n```\r\n[sajid@xrmlite ~]$ module list\r\nCurrently Loaded Modulefiles:\r\n  1) neovim-0.2.2-gcc-8.1.0-btvzqf4   2) git-2.17.0-gcc-8.1.0-h4rqqlk     3) gcc-8.1.0-gcc-7.3.0-tiy4ahj\r\n[sajid@xrmlite ~]$ spack install binutils%intel@18.0.3\r\n==> libsigsegv is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/libsigsegv-2.11-nz6nfvhg4hn6ug5zeol7v7q3lqwklco2\r\n==> m4 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/m4-1.4.18-xk3mrigrjldzyddxglir44tvpy5kljlo\r\n==> bison is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/bison-3.0.4-flxorp5nplafiip472kqok4j5hu62nk4\r\n==> bzip2 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/bzip2-1.0.6-akk4pldsqkxe64ez3d2gltixze2zz7k2\r\n==> pkgconf is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/pkgconf-1.4.2-qpzehzoxsht2egj2qaenif3l4tue7koa\r\n==> xz is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/xz-5.2.4-kgbcgubopl3ibfzo4vxftu5k2bkwbshs\r\n==> zlib is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/zlib-1.2.11-vonxam4cye6oarnfuv4tviycduvx53ma\r\n==> libxml2 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/libxml2-2.9.8-e2r3xbodyezdhqc5zpginv3dl5b7uy6z\r\n==> ncurses is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/ncurses-6.1-rpcqo55mnraeqzubbt3smgfyeignm5j7\r\n==> tar is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/tar-1.30-j6ryta2y53itc3mwg4l67popsohf3tdw\r\n==> gettext is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/gettext-0.19.8.1-bqmt2wmoobg7wm7iycivcxuwal6lffje\r\n==> help2man is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/help2man-1.47.4-z63evtnlpjpohk5kfz2fvxw3o4y5p4it\r\n==> flex is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/flex-2.6.3-e5qgyxi3ekepvec3wn77i6lay7w6dwi3\r\n==> Installing binutils\r\n==> Using cached archive: /home/sajid/packages/spack/var/spack/cache/binutils/binutils-2.29.1.tar.bz2\r\n==> Staging archive: /home/sajid/packages/spack/var/spack/stage/binutils-2.29.1-tjhfuvkbloppd3vhxe7khw34p4pwqit7/binutils-2.29.1.tar.bz2\r\n==> Created stage in /home/sajid/packages/spack/var/spack/stage/binutils-2.29.1-tjhfuvkbloppd3vhxe7khw34p4pwqit7\r\n==> Applied patch cr16.patch\r\n==> Building binutils [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n```\r\n[build log](https://drive.google.com/file/d/1Ln21uc2lSWRS4qEJXqZEYtIiU5m9TWb_/view?usp=sharing)\r\n\r\nNow, unload gcc 8 and voila, everything works !\r\n```\r\n[sajid@xrmlite ~]$ spack unload gcc\r\n[sajid@xrmlite ~]$ module list\r\nCurrently Loaded Modulefiles:\r\n  1) neovim-0.2.2-gcc-8.1.0-btvzqf4   2) git-2.17.0-gcc-8.1.0-h4rqqlk\r\n[sajid@xrmlite ~]$ spack install binutils%intel@18.0.3\r\n==> libsigsegv is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/libsigsegv-2.11-nz6nfvhg4hn6ug5zeol7v7q3lqwklco2\r\n==> m4 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/m4-1.4.18-xk3mrigrjldzyddxglir44tvpy5kljlo\r\n==> bison is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/bison-3.0.4-flxorp5nplafiip472kqok4j5hu62nk4\r\n==> bzip2 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/bzip2-1.0.6-akk4pldsqkxe64ez3d2gltixze2zz7k2\r\n==> pkgconf is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/pkgconf-1.4.2-qpzehzoxsht2egj2qaenif3l4tue7koa\r\n==> xz is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/xz-5.2.4-kgbcgubopl3ibfzo4vxftu5k2bkwbshs\r\n==> zlib is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/zlib-1.2.11-vonxam4cye6oarnfuv4tviycduvx53ma\r\n==> libxml2 is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/libxml2-2.9.8-e2r3xbodyezdhqc5zpginv3dl5b7uy6z\r\n==> ncurses is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/ncurses-6.1-rpcqo55mnraeqzubbt3smgfyeignm5j7\r\n==> tar is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/tar-1.30-j6ryta2y53itc3mwg4l67popsohf3tdw\r\n==> gettext is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/gettext-0.19.8.1-bqmt2wmoobg7wm7iycivcxuwal6lffje\r\n==> help2man is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/help2man-1.47.4-z63evtnlpjpohk5kfz2fvxw3o4y5p4it\r\n==> flex is already installed in /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/flex-2.6.3-e5qgyxi3ekepvec3wn77i6lay7w6dwi3\r\n==> Installing binutils\r\n==> Using cached archive: /home/sajid/packages/spack/var/spack/cache/binutils/binutils-2.29.1.tar.bz2\r\n==> Staging archive: /home/sajid/packages/spack/var/spack/stage/binutils-2.29.1-tjhfuvkbloppd3vhxe7khw34p4pwqit7/binutils-2.29.1.tar.bz2\r\n==> Created stage in /home/sajid/packages/spack/var/spack/stage/binutils-2.29.1-tjhfuvkbloppd3vhxe7khw34p4pwqit7\r\n==> Applied patch cr16.patch\r\n==> Building binutils [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Executing phase: 'install'\r\n==> Successfully installed binutils\r\n  Fetch: 0.08s.  Build: 2m 46.76s.  Total: 2m 46.84s.\r\n[+] /home/sajid/packages/spack/opt/spack/linux-centos7-x86_64/intel-18.0.3/binutils-2.29.1-tjhfuvkbloppd3vhxe7khw34p4pwqit7\r\n```\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n 1. linux-centos7-x86_64, intel@18.0.3\r\n 2. Intel compilers were installed externally",
    "performed_via_github_app": null
}