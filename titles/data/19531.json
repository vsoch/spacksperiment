{
    "url": "https://api.github.com/repos/spack/spack/issues/19531",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19531/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19531/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19531/events",
    "html_url": "https://github.com/spack/spack/issues/19531",
    "id": 729920036,
    "node_id": "MDU6SXNzdWU3Mjk5MjAwMzY=",
    "number": 19531,
    "title": "\"cuda\" package runtime libs and headers not mapped in environment view",
    "user": {
        "login": "AndrewGaspar",
        "id": 2292643,
        "node_id": "MDQ6VXNlcjIyOTI2NDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2292643?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AndrewGaspar",
        "html_url": "https://github.com/AndrewGaspar",
        "followers_url": "https://api.github.com/users/AndrewGaspar/followers",
        "following_url": "https://api.github.com/users/AndrewGaspar/following{/other_user}",
        "gists_url": "https://api.github.com/users/AndrewGaspar/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/AndrewGaspar/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/AndrewGaspar/subscriptions",
        "organizations_url": "https://api.github.com/users/AndrewGaspar/orgs",
        "repos_url": "https://api.github.com/users/AndrewGaspar/repos",
        "events_url": "https://api.github.com/users/AndrewGaspar/events{/privacy}",
        "received_events_url": "https://api.github.com/users/AndrewGaspar/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 618601843,
            "node_id": "MDU6TGFiZWw2MTg2MDE4NDM=",
            "url": "https://api.github.com/repos/spack/spack/labels/cuda",
            "name": "cuda",
            "color": "85b737",
            "default": false,
            "description": ""
        },
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2020-10-26T21:26:29Z",
    "updated_at": "2021-03-08T19:27:30Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "The runtime libraries for cuda, located in \"lib64\" of the install prefix, and the header files, located in \"include\" of the install prefix, are not mapped into the target environment view.\r\n\r\nIf I had to hazard a guess, it's probably relevant that the \"lib64\" and \"include\" directories are symbolic links. Regardless, it's undesirable behavior.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack env create cuda-test\r\n$ spack env activate cuda-test\r\n$ spack add cuda\r\n$ spack install\r\n$ ls $SPACK_ENV/.spack-env/view/lib64\r\n# Observe that \"libcudart\" is not present\r\n```\r\n\r\nI disable and re-enabled the view with `-d`, and I didn't get any extra output. More \"d\"s didn't help.\r\n\r\n```console\r\n$ spack -d env view enable\r\n==> Updating view at /home/agaspar/spack/var/spack/environments/cuda-test/.spack-env/view\r\n```\r\n\r\n### Error Message\r\n\r\n```console\r\n$ ls $(spack location -i cuda)/lib64\r\nlibaccinj64.so -> libaccinj64.so.11.1\r\nlibaccinj64.so.11.1 -> libaccinj64.so.11.1.69\r\nlibaccinj64.so.11.1.69\r\nlibcublas.so -> libcublas.so.11\r\nlibcublas.so.11 -> libcublas.so.11.2.1.74\r\nlibcublas.so.11.2.1.74\r\nlibcublas_static.a\r\nlibcublasLt.so -> libcublasLt.so.11\r\nlibcublasLt.so.11 -> libcublasLt.so.11.2.1.74\r\nlibcublasLt.so.11.2.1.74\r\nlibcublasLt_static.a\r\nlibcudadevrt.a\r\nlibcudart.so -> libcudart.so.11.0\r\nlibcudart.so.11.0 -> libcudart.so.11.1.74\r\nlibcudart.so.11.1.74\r\nlibcudart_static.a\r\nlibcufft.so -> libcufft.so.10\r\nlibcufft.so.10 -> libcufft.so.10.3.0.74\r\nlibcufft.so.10.3.0.74\r\nlibcufft_static.a\r\nlibcufft_static_nocallback.a\r\nlibcufftw.so -> libcufftw.so.10\r\nlibcufftw.so.10 -> libcufftw.so.10.3.0.74\r\nlibcufftw.so.10.3.0.74\r\nlibcufftw_static.a\r\nlibcuinj64.so -> libcuinj64.so.11.1\r\nlibcuinj64.so.11.1 -> libcuinj64.so.11.1.69\r\nlibcuinj64.so.11.1.69\r\nlibculibos.a\r\nlibcurand.so -> libcurand.so.10\r\nlibcurand.so.10 -> libcurand.so.10.2.2.74\r\nlibcurand.so.10.2.2.74\r\nlibcurand_static.a\r\nlibcusolver.so -> libcusolver.so.11\r\nlibcusolver.so.11 -> libcusolver.so.11.0.0.74\r\nlibcusolver.so.11.0.0.74\r\nlibcusolver_static.a\r\nlibcusolverMg.so -> libcusolverMg.so.11\r\nlibcusolverMg.so.11 -> libcusolverMg.so.11.0.0.74\r\nlibcusolverMg.so.11.0.0.74\r\nlibcusparse.so -> libcusparse.so.11\r\nlibcusparse.so.11 -> libcusparse.so.11.2.0.275\r\nlibcusparse.so.11.2.0.275\r\nlibcusparse_static.a\r\nliblapack_static.a\r\nlibmetis_static.a\r\nlibnppc.so -> libnppc.so.11\r\nlibnppc.so.11 -> libnppc.so.11.1.1.269\r\nlibnppc.so.11.1.1.269\r\nlibnppc_static.a\r\nlibnppial.so -> libnppial.so.11\r\nlibnppial.so.11 -> libnppial.so.11.1.1.269\r\nlibnppial.so.11.1.1.269\r\nlibnppial_static.a\r\nlibnppicc.so -> libnppicc.so.11\r\nlibnppicc.so.11 -> libnppicc.so.11.1.1.269\r\nlibnppicc.so.11.1.1.269\r\nlibnppicc_static.a\r\nlibnppidei.so -> libnppidei.so.11\r\nlibnppidei.so.11 -> libnppidei.so.11.1.1.269\r\nlibnppidei.so.11.1.1.269\r\nlibnppidei_static.a\r\nlibnppif.so -> libnppif.so.11\r\nlibnppif.so.11 -> libnppif.so.11.1.1.269\r\nlibnppif.so.11.1.1.269\r\nlibnppif_static.a\r\nlibnppig.so -> libnppig.so.11\r\nlibnppig.so.11 -> libnppig.so.11.1.1.269\r\nlibnppig.so.11.1.1.269\r\nlibnppig_static.a\r\nlibnppim.so -> libnppim.so.11\r\nlibnppim.so.11 -> libnppim.so.11.1.1.269\r\nlibnppim.so.11.1.1.269\r\nlibnppim_static.a\r\nlibnppist.so -> libnppist.so.11\r\nlibnppist.so.11 -> libnppist.so.11.1.1.269\r\nlibnppist.so.11.1.1.269\r\nlibnppist_static.a\r\nlibnppisu.so -> libnppisu.so.11\r\nlibnppisu.so.11 -> libnppisu.so.11.1.1.269\r\nlibnppisu.so.11.1.1.269\r\nlibnppisu_static.a\r\nlibnppitc.so -> libnppitc.so.11\r\nlibnppitc.so.11 -> libnppitc.so.11.1.1.269\r\nlibnppitc.so.11.1.1.269\r\nlibnppitc_static.a\r\nlibnpps.so -> libnpps.so.11\r\nlibnpps.so.11 -> libnpps.so.11.1.1.269\r\nlibnpps.so.11.1.1.269\r\nlibnpps_static.a\r\nlibnvblas.so -> libnvblas.so.11\r\nlibnvblas.so.11 -> libnvblas.so.11.2.1.74\r\nlibnvblas.so.11.2.1.74\r\nlibnvjpeg.so -> libnvjpeg.so.11\r\nlibnvjpeg.so.11 -> libnvjpeg.so.11.2.0.74\r\nlibnvjpeg.so.11.2.0.74\r\nlibnvjpeg_static.a\r\nlibnvptxcompiler_static.a\r\nlibnvrtc-builtins.so -> libnvrtc-builtins.so.11.1\r\nlibnvrtc-builtins.so.11.1 -> libnvrtc-builtins.so.11.1.74\r\nlibnvrtc-builtins.so.11.1.74\r\nlibnvrtc.so -> libnvrtc.so.11.1\r\nlibnvrtc.so.11.1 -> libnvrtc.so.11.1.74\r\nlibnvrtc.so.11.1.74\r\nlibnvToolsExt.so -> libnvToolsExt.so.1\r\nlibnvToolsExt.so.1 -> libnvToolsExt.so.1.0.0\r\nlibnvToolsExt.so.1.0.0\r\nlibOpenCL.so -> libOpenCL.so.1\r\nlibOpenCL.so.1 -> libOpenCL.so.1.0\r\nlibOpenCL.so.1.0 -> libOpenCL.so.1.0.0\r\nlibOpenCL.so.1.0.0\r\nstubs\r\n```\r\n\r\n```console\r\n$ ls $SPACK_ENV/.spack-env/view/lib64\r\n```\r\n\r\n### Information on your system\r\n\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.15.4-1499-e61330a50\r\n* **Python:** 3.8.5\r\n* **Platform:** linux-rhel7-power9le\r\n```\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n",
    "performed_via_github_app": null
}