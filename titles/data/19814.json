{
    "url": "https://api.github.com/repos/spack/spack/issues/19814",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19814/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19814/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19814/events",
    "html_url": "https://github.com/spack/spack/issues/19814",
    "id": 738901604,
    "node_id": "MDU6SXNzdWU3Mzg5MDE2MDQ=",
    "number": 19814,
    "title": "Ruby-narray build issue",
    "user": {
        "login": "ajkotobi",
        "id": 10543186,
        "node_id": "MDQ6VXNlcjEwNTQzMTg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/10543186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajkotobi",
        "html_url": "https://github.com/ajkotobi",
        "followers_url": "https://api.github.com/users/ajkotobi/followers",
        "following_url": "https://api.github.com/users/ajkotobi/following{/other_user}",
        "gists_url": "https://api.github.com/users/ajkotobi/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ajkotobi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ajkotobi/subscriptions",
        "organizations_url": "https://api.github.com/users/ajkotobi/orgs",
        "repos_url": "https://api.github.com/users/ajkotobi/repos",
        "events_url": "https://api.github.com/users/ajkotobi/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ajkotobi/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-11-09T10:29:35Z",
    "updated_at": "2020-11-09T19:04:23Z",
    "closed_at": "2020-11-09T19:04:23Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "@adamjstewart , Regarding PR [18199](https://github.com/spack/spack/pull/18199), in commit [443407c](https://github.com/spack/spack/commit/443407cda545e31d33c9d5abac393c8ac8ad33a2) `ruby-narray` modified to new build_systems `RubyPackage`, I tried to build latest and last 4 previous releases and all failed, any ideas on this? thought mention it here before take it to `narray` developers.\r\n<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\n\r\n### Steps to reproduce the issue\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack spec --install-status ruby-narray@0.9.1.8 ^/p33cxs7\r\nInput spec\r\n--------------------------------\r\n -   ruby-narray@0.9.1.8\r\n[+]      ^ruby@2.6.2%gcc@9.1.0+openssl+readline arch=linux-rhel6-haswell\r\n[+]          ^libffi@3.2.1%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]          ^libx11@1.6.7%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]              ^kbproto@1.0.7%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]              ^libxcb@1.13%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^libpthread-stubs@0.4%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^libxau@1.0.8%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                      ^xproto@7.0.31%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^libxdmcp@1.1.2%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                      ^libbsd@0.9.1%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]              ^xextproto@7.3.0%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]          ^openssl@1.1.1d%gcc@9.1.0+systemcerts arch=linux-rhel6-haswell\r\n[+]              ^zlib@1.2.11%gcc@9.1.0+optimize+pic+shared arch=linux-rhel6-haswell\r\n[+]          ^readline@8.0%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]              ^ncurses@6.1%gcc@9.1.0~symlinks~termlib arch=linux-rhel6-haswell\r\n[+]          ^tcl@8.6.8%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]          ^tk@8.6.8%gcc@9.1.0+xft+xss arch=linux-rhel6-haswell\r\n[+]              ^libxft@2.3.2%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^fontconfig@2.12.3%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                      ^font-util@1.3.2%gcc@9.1.0 fonts=encodings,font-adobe-100dpi,font-adobe-75dpi,font-adobe-utopia-100dpi,font-adobe-utopia-75dpi,font-adobe-utopia-type1,font-alias,font-arabic-misc,font-bh-100dpi,font-bh-75dpi,font-bh-lucidatypewriter-100dpi,font-bh-lucidatypewriter-75dpi,font-bh-ttf,font-bh-type1,font-bitstream-100dpi,font-bitstream-75dpi,font-bitstream-speedo,font-bitstream-type1,font-cronyx-cyrillic,font-cursor-misc,font-daewoo-misc,font-dec-misc,font-ibm-type1,font-isas-misc,font-jis-misc,font-micro-misc,font-misc-cyrillic,font-misc-ethiopic,font-misc-meltho,font-misc-misc,font-mutt-misc,font-schumacher-misc,font-screen-cyrillic,font-sun-misc,font-winitzki-cyrillic,font-xfree86-type1 arch=linux-rhel6-haswell\r\n[+]                      ^freetype@2.10.1%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                          ^bzip2@1.0.8%gcc@9.1.0+shared arch=linux-rhel6-haswell\r\n[+]                          ^libpng@1.6.37%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                      ^libxml2@2.9.9%gcc@9.1.0~python arch=linux-rhel6-haswell\r\n[+]                          ^libiconv@1.16%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                          ^xz@5.2.4%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^libxrender@0.9.10%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                      ^renderproto@0.11.1%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]              ^libxscrnsaver@1.2.2%gcc@9.1.0 arch=linux-rhel6-haswell\r\n[+]                  ^libxext@1.3.3%gcc@9.1.0 arch=linux-rhel6-haswell\r\n```\r\n\r\n### Information on your system\r\n\r\n```\r\n$ spack debug report\r\n* **Spack:** 0.15.4\r\n* **Python:** 2.6.6\r\n* **Platform:** linux-rhel6-haswell\r\n```\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n* [spack-build-out.txt]()\r\n\r\n```\r\n==> Installing ruby-narray\r\n==> No binary for ruby-narray found: installing from source\r\n==> Fetching https://github.com/ruby-numo/numo-narray/archive/v0.9.1.8.tar.gz\r\n######################################################################## 100.0%\r\n==> ruby-narray: Executing phase: 'build'\r\n==> [2020-11-09-11:04:22.024157] '/sw/spack-rhel6/ruby-2.6.2-p33cxs/bin/gem' 'build' '--norc' 'numo-narray.gemspec'\r\nfatal: Not a git repository (or any of the parent directories): .git\r\nWARNING:  open-ended dependency on rake (>= 12.3.3, development) is not recommended\r\n  if rake is semantically versioned, use:\r\n    add_development_dependency 'rake', '~> 12.3', '>= 12.3.3'\r\nWARNING:  See http://guides.rubygems.org/specification-reference/ for help\r\n  Successfully built RubyGem\r\n  Name: numo-narray\r\n  Version: 0.9.1.8\r\n  File: numo-narray-0.9.1.8.gem\r\n==> ruby-narray: Executing phase: 'install'\r\n==> [2020-11-09-11:04:22.418063] '/sw/spack-rhel6/ruby-2.6.2-p33cxs/bin/gem' 'install' '--norc' '--ignore-dependencies' 'numo-narray-0.9.1.8.gem'\r\nBuilding native extensions. This could take a while...\r\nERROR:  Error installing numo-narray-0.9.1.8.gem:\r\n\tERROR: Failed to build gem native extension.\r\n\r\n    current directory: /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/gems/numo-narray-0.9.1.8/ext/numo/narray\r\n/mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/bin/ruby -I /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/lib/ruby/2.6.0 -r ./siteconf20201109-37266-1kzysu3.rb extconf.rb\r\nchecking for stdbool.h... yes\r\nchecking for stdint.h... yes\r\nchecking for bool in stdbool.h... yes\r\nchecking for u_int8_t in stdint.h... yes\r\nchecking for u_int16_t in stdint.h... yes\r\nchecking for int32_t in stdint.h... yes\r\nchecking for u_int32_t in stdint.h... yes\r\nchecking for int64_t in stdint.h... yes\r\nchecking for u_int64_t in stdint.h... yes\r\nchecking for exp10()... yes\r\nchecking for rb_arithmetic_sequence_extract()... yes\r\nchecking for rb_cComplex... yes\r\ncreating /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/gems/numo-narray-0.9.1.8/ext/numo/narray/numo/extconf.h\r\n*** extconf.rb failed ***\r\nCould not create Makefile due to some reason, probably lack of necessary\r\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\r\nneed configuration options.\r\n\r\nProvided configuration options:\r\n\t--with-opt-dir\r\n\t--without-opt-dir\r\n\t--with-opt-include\r\n\t--without-opt-include=${opt-dir}/include\r\n\t--with-opt-lib\r\n\t--without-opt-lib=${opt-dir}/lib\r\n\t--with-make-prog\r\n\t--without-make-prog\r\n\t--srcdir=.\r\n\t--curdir\r\n\t--ruby=/mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/bin/$(RUBY_BASE_NAME)\r\n/mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/lib/ruby/2.6.0/mkmf.rb:1716:in `initialize': No such file or directory @ rb_sysopen - /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/gems/numo-narray-0.9.1.8/ext/numo/narray/numo/extconf.h (Errno::ENOENT)\r\n\tfrom /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/lib/ruby/2.6.0/mkmf.rb:1716:in `open'\r\n\tfrom /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/lib/ruby/2.6.0/mkmf.rb:1716:in `create_header'\r\n\tfrom extconf.rb:96:in `<main>'\r\n\r\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\r\n\r\n  /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/extensions/x86_64-linux/2.6.0-static/numo-narray-0.9.1.8/mkmf.log\r\n\r\nextconf failed, exit code 1\r\n\r\nGem files will remain installed in /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/gems/numo-narray-0.9.1.8 for inspection.\r\nResults logged to /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.1.8-ufp3le/extensions/x86_64-linux/2.6.0-static/numo-narray-0.9.1.8/gem_make.out\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/sw/spack-rhel6/ruby-2.6.2-p33cxs/bin/gem' 'install' '--norc' '--ignore-dependencies' 'numo-narray-0.9.1.8.gem'\r\n\r\n1 error found in build log:\r\n     44    \t--without-opt-lib=${opt-dir}/lib\r\n     45    \t--with-make-prog\r\n     46    \t--without-make-prog\r\n     47    \t--srcdir=.\r\n     48    \t--curdir\r\n     49    \t--ruby=/mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/\r\n           bin/$(RUBY_BASE_NAME)\r\n  >> 50    /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/lib/ruby\r\n           /2.6.0/mkmf.rb:1716:in `initialize': No such file or directory @@ rb_\r\n           sysopen - /mnt/lustre01/spack-workplace/spack-rhel6/ruby-narray-0.9.\r\n           1.8-ufp3le/gems/numo-narray-0.9.1.8/ext/numo/narray/numo/extconf.h (\r\n           Errno::ENOENT)\r\n     51    \tfrom /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/li\r\n           b/ruby/2.6.0/mkmf.rb:1716:in `open'\r\n     52    \tfrom /mnt/lustre01/spack-workplace/spack-rhel6/ruby-2.6.2-p33cxs/li\r\n           b/ruby/2.6.0/mkmf.rb:1716:in `create_header'\r\n     53    \tfrom extconf.rb:96:in `<main>'\r\n     54    \r\n     55    To see why this extension failed to compile, please check the mkmf.l\r\n           og which can be found here:\r\n     56    \r\n```\r\n* [spack-build-env.txt]()\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [ ] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}