{
    "url": "https://api.github.com/repos/spack/spack/issues/17846",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17846/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17846/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17846/events",
    "html_url": "https://github.com/spack/spack/issues/17846",
    "id": 671800235,
    "node_id": "MDU6SXNzdWU2NzE4MDAyMzU=",
    "number": 17846,
    "title": "Installation issue: conduit: missing hdf5_hl.h",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "zackgalbreath",
        "id": 224720,
        "node_id": "MDQ6VXNlcjIyNDcyMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/224720?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zackgalbreath",
        "html_url": "https://github.com/zackgalbreath",
        "followers_url": "https://api.github.com/users/zackgalbreath/followers",
        "following_url": "https://api.github.com/users/zackgalbreath/following{/other_user}",
        "gists_url": "https://api.github.com/users/zackgalbreath/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zackgalbreath/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zackgalbreath/subscriptions",
        "organizations_url": "https://api.github.com/users/zackgalbreath/orgs",
        "repos_url": "https://api.github.com/users/zackgalbreath/repos",
        "events_url": "https://api.github.com/users/zackgalbreath/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zackgalbreath/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "zackgalbreath",
            "id": 224720,
            "node_id": "MDQ6VXNlcjIyNDcyMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/224720?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zackgalbreath",
            "html_url": "https://github.com/zackgalbreath",
            "followers_url": "https://api.github.com/users/zackgalbreath/followers",
            "following_url": "https://api.github.com/users/zackgalbreath/following{/other_user}",
            "gists_url": "https://api.github.com/users/zackgalbreath/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zackgalbreath/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zackgalbreath/subscriptions",
            "organizations_url": "https://api.github.com/users/zackgalbreath/orgs",
            "repos_url": "https://api.github.com/users/zackgalbreath/repos",
            "events_url": "https://api.github.com/users/zackgalbreath/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zackgalbreath/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 13,
    "created_at": "2020-08-03T05:16:45Z",
    "updated_at": "2020-08-27T06:48:54Z",
    "closed_at": "2020-08-07T20:50:15Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "`conduit@master` is failing using `spack@develop` (31-July-2020, f3cb3a2eb8991cdfa131abcb429f13903911db1f) on:\r\n* `CentOS 7` on `x86_64` and `ppc64le` using `gcc@8.1.0`\r\n* `Ubuntu 18.04` on `x86_64` and `ppc64le` using `gcc@7.5.0`\r\n\r\nI've attached the exact concretized spec file I'm using to do the install below.\r\n\r\nAll the dependencies are available in public build-cache: https://cache.e4s.io/e4s (gpg key here: [e4s.pub.txt](https://github.com/spack/spack/files/5014018/e4s.pub.txt))\r\n\r\n1. Install dependencies from build-cache\r\n```\r\n$> spack gpg trust e4s.pub\r\n$> spack mirror add e4s https://cache.e4s.io/e4s\r\n$> spack install --cache-only --only dependencies -f conduit-tvtq22.yml\r\nOK\r\n```\r\n\r\n2. Install `conduit` from source\r\n```\r\n$> spack install --no-cache --only package -f conduit-tvtq22.yml\r\n\r\n==> Installing conduit\r\n==> conduit: Executing phase: 'configure'\r\n==> conduit: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n19 errors found in build log:\r\n     117    -- Check size of long double - done\r\n     118    -- Check size of void *\r\n     119    -- Check size of void * - done\r\n     120    -- RapidJSON headers found in: /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/src/thir\r\n            dparty_builtin/rapidjson/include\r\n     121    -- Using RapidJSON Include: /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/src/thirdpa\r\n            rty_builtin/rapidjson/include\r\n     122    -- Looking for HDF5 at: /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj\r\n  >> 123    /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build/CMakeFiles/hdf5/cmake_hdf5_\r\n            test.c:2:10: fatal error: hdf5_hl.h: No such file or directory\r\n     124     #include <hdf5_hl.h>\r\n     125              ^~~~~~~~~~~\r\n     126    compilation terminated.\r\n     127    -- HDF5 C compiler wrapper is unable to compile a minimal HDF5 program.\r\n     128    -- Found HDF5: /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj/lib/libhdf5.a (foun\r\n            d version \"1.8.21\")\r\n     129    -- HDF5_DIR_REAL=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj\r\n\r\n     ...\r\n\r\n     637    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build\r\n            '\r\n     638    [ 20%] Built target blt_gtest_smoke\r\n     639    [ 21%] Linking CXX executable t_libyaml_smoke\r\n     640    cd /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build/tests/thirdparty && /opt\r\n            /spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/cmake-3.18.0-krmbqpzangcr7iw76lydywq2rfyo5huq/bin/cmake -E cmake_link_script CMakeF\r\n            iles/t_libyaml_smoke.dir/link.txt --verbose=1\r\n     641    /opt/view/bin/g++ -O2 -g -DNDEBUG -rdynamic CMakeFiles/t_libyaml_smoke.dir/t_libyaml_smoke.cpp.o ../../thirdparty_builtin/libyaml-6\r\n            90a781/CMakeFiles/conduit_libyaml.dir/src/api.c.o ../../thirdparty_builtin/libyaml-690a781/CMakeFiles/conduit_libyaml.dir/src/dumpe\r\n            r.c.o ../../thirdparty_builtin/libyaml-690a781/CMakeFiles/conduit_libyaml.dir/src/emitter.c.o ../../thirdparty_builtin/libyaml-690a\r\n            781/CMakeFiles/conduit_libyaml.dir/src/loader.c.o ../../thirdparty_builtin/libyaml-690a781/CMakeFiles/conduit_libyaml.dir/src/parse\r\n            r.c.o ../../thirdparty_builtin/libyaml-690a781/CMakeFiles/conduit_libyaml.dir/src/reader.c.o ../../thirdparty_builtin/libyaml-690a7\r\n            81/CMakeFiles/conduit_libyaml.dir/src/scanner.c.o ../../thirdparty_builtin/libyaml-690a781/CMakeFiles/conduit_libyaml.dir/src/write\r\n            r.c.o -o t_libyaml_smoke  ../../lib/libgtest_main.a ../../lib/libgtest.a -lpthread -lpthread\r\n     642    /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj/lib/libhdf5.a(H5PL.o): In function\r\n             `H5PL_term_interface':\r\n  >> 643    H5PL.c:(.text+0x2d5): undefined reference to `dlclose'\r\n     644    /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj/lib/libhdf5.a(H5PL.o): In function\r\n             `H5PL_load':\r\n  >> 645    H5PL.c:(.text+0x7b5): undefined reference to `dlsym'\r\n  >> 646    H5PL.c:(.text+0x9b1): undefined reference to `dlerror'\r\n  >> 647    H5PL.c:(.text+0xaee): undefined reference to `dlopen'\r\n  >> 648    H5PL.c:(.text+0xb09): undefined reference to `dlsym'\r\n  >> 649    H5PL.c:(.text+0xbef): undefined reference to `dlclose'\r\n  >> 650    H5PL.c:(.text+0xbfc): undefined reference to `dlclose'\r\n  >> 651    H5PL.c:(.text+0xd32): undefined reference to `dlclose'\r\n     652    /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj/lib/libhdf5.a(H5Zdeflate.o): In fu\r\n            nction `H5Z_filter_deflate':\r\n  >> 653    H5Zdeflate.c:(.text+0x9c): undefined reference to `inflateInit_'\r\n  >> 654    H5Zdeflate.c:(.text+0xb4): undefined reference to `inflate'\r\n  >> 655    H5Zdeflate.c:(.text+0x209): undefined reference to `inflateEnd'\r\n  >> 656    H5Zdeflate.c:(.text+0x278): undefined reference to `inflateEnd'\r\n  >> 657    H5Zdeflate.c:(.text+0x2e3): undefined reference to `inflateEnd'\r\n  >> 658    H5Zdeflate.c:(.text+0x38e): undefined reference to `compress2'\r\n  >> 659    collect2: error: ld returned 1 exit status\r\n  >> 660    make[2]: *** [tests/thirdparty/t_hdf5_smoke] Error 1\r\n     661    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build\r\n            '\r\n  >> 662    make[1]: *** [tests/thirdparty/CMakeFiles/t_hdf5_smoke.dir/all] Error 2\r\n     663    make[1]: *** Waiting for unfinished jobs....\r\n     664    [ 21%] Linking CXX executable t_libb64_smoke\r\n     665    cd /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build/tests/thirdparty && /opt\r\n            /spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/cmake-3.18.0-krmbqpzangcr7iw76lydywq2rfyo5huq/bin/cmake -E cmake_link_script CMakeF\r\n            iles/t_libb64_smoke.dir/link.txt --verbose=1\r\n     666    /opt/view/bin/g++ -O2 -g -DNDEBUG -rdynamic CMakeFiles/t_libb64_smoke.dir/t_libb64_smoke.cpp.o ../../thirdparty_builtin/libb64-1.2.\r\n            1/CMakeFiles/conduit_b64.dir/src/cdecode.cpp.o ../../thirdparty_builtin/libb64-1.2.1/CMakeFiles/conduit_b64.dir/src/cencode.cpp.o -\r\n            o t_libb64_smoke  ../../lib/libgtest_main.a ../../lib/libgtest.a -lpthread -lpthread\r\n     667    [ 21%] Linking CXX executable t_rapidjson_smoke\r\n     668    cd /tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build/tests/thirdparty && /opt\r\n            /spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/cmake-3.18.0-krmbqpzangcr7iw76lydywq2rfyo5huq/bin/cmake -E cmake_link_script CMakeF\r\n            iles/t_rapidjson_smoke.dir/link.txt --verbose=1\r\n\r\n     ...\r\n\r\n     678    [ 21%] Built target t_libb64_smoke\r\n     679    [ 21%] Built target t_rapidjson_smoke\r\n     680    /usr/bin/ranlib ../../lib/libconduit.a\r\n     681    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build\r\n            '\r\n     682    [ 21%] Built target conduit\r\n     683    make[1]: Leaving directory `/tmp/root/spack-stage/spack-stage-conduit-master-se4yzrhvntfzesfxaeyf7a5ccgygrjtc/spack-src/spack-build\r\n            '\r\n  >> 684    make: *** [all] Error 2\r\n```\r\n\r\nFull concretized spec: [conduit-tvtq22.yml.txt](https://github.com/spack/spack/files/5014016/conduit-tvtq22.yml.txt)\r\nFull build log: [conduit-build-out.txt](https://github.com/spack/spack/files/5014013/conduit-build-out.txt)\r\n\r\nLooks like a missing header file `hdf5_hl.h` ? Not present in the `hdf5` install tree as installed with Spack.\r\n\r\n```\r\n$> spack location -i hdf5\r\n/opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj\r\n\r\n$> find /opt/spack/opt/spack/linux-centos7-x86_64/gcc-8.1.0/hdf5-1.8.21-tmcmgceuk7qoiu3mlenxkeg4ak63gfgj -name hdf5_hl.h\r\n```\r\n\r\n@ax3l @cyrush @bvanessen @scottwittenburg \r\n",
    "performed_via_github_app": null
}