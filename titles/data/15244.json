{
    "url": "https://api.github.com/repos/spack/spack/issues/15244",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15244/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15244/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15244/events",
    "html_url": "https://github.com/spack/spack/issues/15244",
    "id": 571722679,
    "node_id": "MDU6SXNzdWU1NzE3MjI2Nzk=",
    "number": 15244,
    "title": "Installation issue: libfabric (required for adios2)",
    "user": {
        "login": "LDAmorim",
        "id": 15057096,
        "node_id": "MDQ6VXNlcjE1MDU3MDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/15057096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LDAmorim",
        "html_url": "https://github.com/LDAmorim",
        "followers_url": "https://api.github.com/users/LDAmorim/followers",
        "following_url": "https://api.github.com/users/LDAmorim/following{/other_user}",
        "gists_url": "https://api.github.com/users/LDAmorim/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/LDAmorim/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LDAmorim/subscriptions",
        "organizations_url": "https://api.github.com/users/LDAmorim/orgs",
        "repos_url": "https://api.github.com/users/LDAmorim/repos",
        "events_url": "https://api.github.com/users/LDAmorim/events{/privacy}",
        "received_events_url": "https://api.github.com/users/LDAmorim/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2020-02-26T23:24:57Z",
    "updated_at": "2020-02-28T17:26:49Z",
    "closed_at": "2020-02-28T17:26:49Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hi,\r\nI have been trying to install and use adios2.\r\nBut the installation seems to crash due to the libfabric package build error described below.\r\nDo you have any suggestions on how to fix it?\r\nI was wondering if this is something to do with how I installed other packages.\r\nOr if you knew what library/package I am missing.\r\nThank you,\r\nDiana\r\n\r\n### Steps to reproduce the issue\r\n```console\r\n$ spack install libfabric\r\n\r\n...\r\n==> 77664: libfabric: Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j8'\r\n\r\n15 errors found in build log:\r\n     621      CC       functional/rdm.o\r\n     622      CC       functional/rdm_rma_simple.o\r\n     623    In file included from functional/av_xfer.c:In file included from 35functional/rdm.c:\r\n     624    :In file included from ./include/shared.h:55:\r\n     625    ./include/ft_osd.h:3735:\r\n     626    In file included from ./include/shared.h:55:\r\n  >> 627    :./include/ft_osd.h10: fatal error: 'osx/osd.h' file not found\r\n  >> 628    :37:10: fatal error: 'osx/osd.h' file not found\r\n     629    #include <osx/osd.h>\r\n```\r\n\r\nFull output error message is in [libfabric-error.txt](https://github.com/spack/spack/files/4258643/libfabric-error.txt).\r\n\r\n### Platform and user environment\r\n\r\nmacOS Catalina (clang + gcc@9.2.0 installed via spack)\r\n```commandline\r\n$ uname -a \r\nDarwin LDianaAmorim-M30.dhcp.lbl.gov 19.2.0 Darwin Kernel Version 19.2.0: Sat Nov  9 03:47:04 PST 2019; root:xnu-6153.61.1~20/RELEASE_X86_64 x86_64\r\n\r\n$sw_vers -productVersion \r\n10.15.2\r\n``` \r\nMy spack repo is at commit\r\n```vim\r\n676eb56ab2379e4d1b3958aad382d81cb012c560 (HEAD -> develop, origin/develop, origin/HEAD)\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Tue Feb 25 11:01:59 2020 -0600\r\n...\r\n```\r\n\r\n### Additional information\r\n\r\n```console\r\n$ spack spec --install-status libfabric     \r\n                                     \r\nInput spec\r\n--------------------------------\r\n -   libfabric\r\n\r\nConcretized\r\n--------------------------------\r\n==> Warning: clang@11.0.0-apple cannot build optimized binaries for \"skylake\". Using best target possible: \"x86_64\"\r\n -   libfabric@1.9.0%clang@11.0.0-apple fabrics=sockets,tcp,udp ~kdreg patches=71f06e8bf0adeccd425b194ac524e4d596469e9dab9e7a4f8bb209e6b9a454f4 arch=darwin-catalina-x86_64\r\n```\r\n\r\n\r\nRebuilding the package with the following options:\r\n```console\r\n$ spack -d install -j 1 <spec>\r\n...\r\n```\r\n\r\n[spack-cc-libfabric-7yvcejv.in.log](https://github.com/spack/spack/files/4258683/spack-cc-libfabric-7yvcejv.in.log)\r\n[spack-cc-libfabric-7yvcejv.out.log](https://github.com/spack/spack/files/4258684/spack-cc-libfabric-7yvcejv.out.log)\r\n\r\n\r\n\r\n-----\r\n\r\n**compilers.yaml**\r\n```vim\r\ncompilers:\r\n- compiler:\r\n    spec: clang@11.0.0-apple\r\n    paths:\r\n      cc: /usr/bin/clang\r\n      cxx: /usr/bin/clang++\r\n      f77: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/gfortran\r\n      fc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/gfortran\r\n    flags: {}\r\n    operating_system: catalina\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n- compiler:\r\n    spec: gcc@9.2.0\r\n    paths:\r\n      cc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/gcc\r\n      cxx: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/g++\r\n      f77: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/gfortran\r\n      fc: /Users/LDianaAmorim/Documents/opt/spack/opt/spack/darwin-catalina-x86_64/clang-11.0.0-apple/gcc-9.2.0-exw25ccpcwqlkcvuwn266kvwqzxbyelp/bin/gfortran\r\n    flags: {}\r\n    operating_system: catalina\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n-----\r\n\r\n**packages.yaml**\r\n```vim\r\npackages:\r\n  all:\r\n    providers:\r\n      mpi: [mpich, openmpi]\r\n```",
    "performed_via_github_app": null
}