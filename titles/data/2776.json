{
    "url": "https://api.github.com/repos/spack/spack/issues/2776",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/2776/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/2776/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/2776/events",
    "html_url": "https://github.com/spack/spack/issues/2776",
    "id": 199401431,
    "node_id": "MDU6SXNzdWUxOTk0MDE0MzE=",
    "number": 2776,
    "title": "Policy on Hash Changes + Travis Checks",
    "user": {
        "login": "citibeth",
        "id": 1924215,
        "node_id": "MDQ6VXNlcjE5MjQyMTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1924215?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/citibeth",
        "html_url": "https://github.com/citibeth",
        "followers_url": "https://api.github.com/users/citibeth/followers",
        "following_url": "https://api.github.com/users/citibeth/following{/other_user}",
        "gists_url": "https://api.github.com/users/citibeth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/citibeth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/citibeth/subscriptions",
        "organizations_url": "https://api.github.com/users/citibeth/orgs",
        "repos_url": "https://api.github.com/users/citibeth/repos",
        "events_url": "https://api.github.com/users/citibeth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/citibeth/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 459174375,
            "node_id": "MDU6TGFiZWw0NTkxNzQzNzU=",
            "url": "https://api.github.com/repos/spack/spack/labels/revisit",
            "name": "revisit",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-01-08T04:02:29Z",
    "updated_at": "2019-12-09T12:50:13Z",
    "closed_at": "2019-12-09T12:50:13Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Right now, I think that the most vulnerable point is when a new package is added.  If the package being added is compromised, then it is easy to slip in a hash for that compromised download.  HOWEVER... the exploit would only take effect when a Spack user builds the package.  Most of the heavily-used packages are already in Spack, making this an increasingly remote possibility.  But I do think it makes sense to have some sort of review of new packages.  Maybe:\r\n\r\n1. Check that the site the package is coming from is reputable.\r\n2. Preferably, the site uses SSL, and the owner can be verified to be reputable.\r\n3. Cursory check that the hashes match.\r\n\r\nI think the risk is a lot lower when a new version (and new hash) is added to an existing package --- AS LONG AS the new version comes from the same source as the old version.  Especially if SSL is involved.\r\n\r\nI can think of a few reasons that existing hashes would change.  If a change in hash is proposed, I think the policy needs to be that someone trustworthy investigates --- starting with a diff of the old tarball and the new tarball.  Maybe it's something as simple as changing compression format or adding/removing a `configure` file.  But we need to know.\r\n\r\n@tgamblin wrote:\r\n> I think it would be possible to implement this stuff either in a separate travis build (by adding another build to the matrix) or with our own Spack microservice, which would mark github requests.  I think it\u2019s probably easiest to do through travis, since we need to check the repo \u2013 I think we can make an API call from a travis request to mark each PR with the status of any hashes (good, bad, iffy/non-SSL, etc.)",
    "performed_via_github_app": null
}