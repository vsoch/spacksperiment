{
    "url": "https://api.github.com/repos/spack/spack/issues/24453",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/24453/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/24453/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/24453/events",
    "html_url": "https://github.com/spack/spack/issues/24453",
    "id": 926442568,
    "node_id": "MDU6SXNzdWU5MjY0NDI1Njg=",
    "number": 24453,
    "title": "Installation issue: hwloc-2.5.0 does not build in internet-access restricted environment",
    "user": {
        "login": "UweSauter",
        "id": 19325781,
        "node_id": "MDQ6VXNlcjE5MzI1Nzgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/19325781?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UweSauter",
        "html_url": "https://github.com/UweSauter",
        "followers_url": "https://api.github.com/users/UweSauter/followers",
        "following_url": "https://api.github.com/users/UweSauter/following{/other_user}",
        "gists_url": "https://api.github.com/users/UweSauter/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/UweSauter/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/UweSauter/subscriptions",
        "organizations_url": "https://api.github.com/users/UweSauter/orgs",
        "repos_url": "https://api.github.com/users/UweSauter/repos",
        "events_url": "https://api.github.com/users/UweSauter/events{/privacy}",
        "received_events_url": "https://api.github.com/users/UweSauter/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-21T17:30:57Z",
    "updated_at": "2021-06-21T17:47:27Z",
    "closed_at": "2021-06-21T17:47:27Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "@bgoglin \r\n\r\n### Steps to reproduce the issue\r\nWhile trying to install `migraphx` `hwloc` gets pulled in as dependency of `llvm-amdgpu`.\r\n\r\nSpack keeps trying to download `http://www.open-mpi.org/software/hwloc/v2.5/downloads/hwloc-2.5.0.tar.gz`. although I downloaded everything that is needed using `spack fetch -D migraphx`. (At least everything that spack thinks is needed.)\r\n\r\n```console\r\n$ spack spec -I migraphx\r\nInput spec\r\n--------------------------------\r\n -   migraphx\r\n\r\nConcretized\r\n--------------------------------\r\n -   migraphx@4.2.0%gcc@11.1.0~ipo build_type=Release patches=a3c5f23ee36ae5e3e2189a2fbfed502085752e207f37872ec5c377b044a4c28c arch=linux-centos7-zen2\r\n[+]      ^blaze@3.8%gcc@11.1.0~ipo build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n[+]          ^cmake@3.20.3%gcc@11.1.0~doc+ncurses+openssl+ownlibs~qt build_type=Release arch=linux-centos7-zen2\r\n[+]              ^ncurses@6.2%gcc@11.1.0~symlinks+termlib abi=none arch=linux-centos7-zen2\r\n[+]                  ^pkgconf@1.7.4%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^openssl@1.1.1k%gcc@11.1.0~docs+systemcerts arch=linux-centos7-zen2\r\n[+]                  ^perl@5.34.0%gcc@11.1.0+cpanm+shared+threads arch=linux-centos7-zen2\r\n[+]                      ^berkeley-db@18.1.40%gcc@11.1.0+cxx~docs+stl patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-centos7-zen2\r\n[+]                      ^gdbm@1.19%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^readline@8.1%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^zlib@1.2.11%gcc@11.1.0+optimize+pic+shared arch=linux-centos7-zen2\r\n[+]          ^openblas@0.3.15%gcc@11.1.0~bignuma~consistent_fpcsr~ilp64+locking+pic+shared threads=none arch=linux-centos7-zen2\r\n[+]      ^half@1.12.0%gcc@11.1.0 arch=linux-centos7-zen2\r\n -       ^hip@4.2.0%gcc@11.1.0~ipo build_type=RelWithDebInfo patches=2a4190477b7d9206b9cd8d70770ba0bc007273cbe54772efb12f9ca2e37c0392,e276c4acf3d37712b6bea306fea34f539d3c4f743471e9da208b5eb17b16ae67 arch=linux-centos7-zen2\r\n -           ^comgr@4.2.0%gcc@11.1.0~ipo build_type=Release patches=4dda4b3dcd61df74050076881e102c6f4ec637ea8f35a3a4e7079b8a4fa9af4c arch=linux-centos7-zen2\r\n -               ^llvm-amdgpu@4.2.0%gcc@11.1.0~ipo+openmp+rocm-device-libs build_type=Release patches=d999f3b235e655ee07f6dd2590302082feaa06d32c5c6b53aae9c5cf1e45b644 arch=linux-centos7-zen2\r\n -                   ^hwloc@2.5.0%gcc@11.1.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci+shared arch=linux-centos7-zen2\r\n[+]                      ^libpciaccess@0.16%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^libtool@2.4.6%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                              ^m4@1.4.19%gcc@11.1.0+sigsegv arch=linux-centos7-zen2\r\n[+]                                  ^libsigsegv@2.13%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^util-macros@1.19.1%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^libxml2@2.9.10%gcc@11.1.0~python arch=linux-centos7-zen2\r\n[+]                          ^libiconv@1.16%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^xz@5.2.5%gcc@11.1.0~pic libs=shared,static arch=linux-centos7-zen2\r\n[+]                  ^libelf@0.8.13%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^perl-data-dumper@2.173%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^python@3.8.10%gcc@11.1.0+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87 arch=linux-centos7-zen2\r\n[+]                      ^bzip2@1.0.8%gcc@11.1.0~debug~pic+shared arch=linux-centos7-zen2\r\n[+]                          ^diffutils@3.7%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^expat@2.3.0%gcc@11.1.0+libbsd arch=linux-centos7-zen2\r\n[+]                          ^libbsd@0.11.3%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                              ^libmd@1.0.3%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^gettext@0.21%gcc@11.1.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-zen2\r\n[+]                          ^tar@1.34%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^libffi@3.3%gcc@11.1.0 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0 arch=linux-centos7-zen2\r\n[+]                      ^sqlite@3.35.5%gcc@11.1.0+column_metadata+fts~functions~rtree arch=linux-centos7-zen2\r\n[+]                      ^util-linux-uuid@2.36.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^z3@4.8.9%gcc@11.1.0~gmp~ipo+python build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n[+]                      ^py-setuptools@50.3.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^rocm-cmake@4.2.0%gcc@11.1.0~ipo+ldconfig build_type=Release arch=linux-centos7-zen2\r\n -           ^hip-rocclr@4.2.0%gcc@11.1.0~ipo build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n -               ^hsa-rocr-dev@4.2.0%gcc@11.1.0+image~ipo+shared build_type=Release patches=71e6851d9be8113bfb8d71b66a3171e0d0401bae5e6f161c9e7fe32558261a46 arch=linux-centos7-zen2\r\n[+]                  ^hsakmt-roct@4.2.0%gcc@11.1.0~ipo+shared build_type=Release arch=linux-centos7-zen2\r\n[+]                      ^numactl@2.0.14%gcc@11.1.0 patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006 arch=linux-centos7-zen2\r\n[+]                          ^autoconf@2.69%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^automake@1.16.3%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^xxd-standalone@8.2.1201%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^mesa18@18.3.6%gcc@11.1.0+glx~llvm~opengles+osmesa patches=55a5611ca9fcbe8324c4d68a07b338134954ff12c5b122dc78ff376f012a1414,e0a94aa728c233968137ca1314f6541745228a98d66822ad518b102f5a31b487 swr=none arch=linux-centos7-zen2\r\n[+]                  ^binutils@2.36.1%gcc@11.1.0~gas~gold~headers~interwork~ld~libiberty~lto+nls+plugins libs=shared,static arch=linux-centos7-zen2\r\n[+]                  ^bison@3.7.6%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^flex@2.6.3%gcc@11.1.0+lex~nls arch=linux-centos7-zen2\r\n[+]                      ^findutils@4.8.0%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^glproto@1.4.17%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^libx11@1.7.0%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^inputproto@2.3.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^kbproto@1.0.7%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^libxcb@1.14%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^libpthread-stubs@0.4%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^libxau@1.0.8%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                              ^xproto@7.0.31%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^libxdmcp@1.1.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                          ^xcb-proto@1.14.1%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^xextproto@7.3.0%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^xtrans@1.3.5%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^libxext@1.3.3%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                  ^py-mako@1.1.4%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]                      ^py-markupsafe@1.1.1%gcc@11.1.0 arch=linux-centos7-zen2\r\n -           ^rocminfo@4.2.0%gcc@11.1.0~ipo build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n -       ^miopen-hip@4.2.0%gcc@11.1.0~ipo build_type=Release patches=d27dbcc3271b6160ae78535a2d163432a83d8e1e21be3de51e5d76fc514dcc26 arch=linux-centos7-zen2\r\n[+]          ^boost@1.73.0%gcc@11.1.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=98 patches=246508e052c44b6f4e8c2542a71c06cacaa72cd1447ab8d2a542b987bc35ace9,4dd507e1f5a29e3b87b15321a4d8c74afdc8331433edabf7aeab89b3c405d556 visibility=hidden arch=linux-centos7-zen2\r\n -           ^rocblas@4.2.0%gcc@11.1.0~ipo build_type=RelWithDebInfo tensile_architecture=all arch=linux-centos7-zen2\r\n[+]              ^msgpack-c@3.1.1%gcc@11.1.0~ipo build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n[+]              ^perl-file-which@1.22%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^py-msgpack@1.0.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n -               ^py-pip@21.1.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^py-pyyaml@5.3.1%gcc@11.1.0+libyaml arch=linux-centos7-zen2\r\n[+]                  ^libyaml@0.2.5%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^py-virtualenv@16.7.6%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^py-wheel@0.36.2%gcc@11.1.0 arch=linux-centos7-zen2\r\n[+]              ^rocm-smi-lib@4.2.0%gcc@11.1.0~ipo+shared build_type=Release arch=linux-centos7-zen2\r\n -           ^rocm-clang-ocl@4.2.0%gcc@11.1.0~ipo build_type=Release arch=linux-centos7-zen2\r\n[+]      ^nlohmann-json@3.9.1%gcc@11.1.0~ipo+single_header build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n[+]      ^protobuf@3.12.2%gcc@11.1.0+shared build_type=Release arch=linux-centos7-zen2\r\n[+]      ^py-pybind11@2.6.2%gcc@11.1.0~ipo build_type=RelWithDebInfo arch=linux-centos7-zen2\r\n\r\n$ spack install -j100 migraphx %gcc@10.3.0 ^cmake@3.17.5               \r\n[+] /opt/hlrs/spack/2021-06-16/pkgconf/1.7.4-gcc-10.3.0-w6uyokeh                                         \r\n[+] /opt/hlrs/spack/2021-06-16/berkeley-db/18.1.40-gcc-10.3.0-ah73t52z                                   \r\n[+] /opt/hlrs/spack/2021-06-16/zlib/1.2.11-gcc-10.3.0-msipemqj                                           \r\n[+] /opt/hlrs/spack/2021-06-16/half/1.12.0-gcc-10.3.0-kavdk2ls                                           \r\n[+] /opt/hlrs/spack/2021-06-16/libsigsegv/2.13-gcc-10.3.0-j53u2sdq                                                                                                                                                 \r\n[+] /opt/hlrs/spack/2021-06-16/util-macros/1.19.1-gcc-10.3.0-belci7vc\r\n[+] /opt/hlrs/spack/2021-06-16/libiconv/1.16-gcc-10.3.0-cjznarn4      \r\n[+] /opt/hlrs/spack/2021-06-16/xz/5.2.5-gcc-10.3.0-fadnkry5       \r\n[+] /opt/hlrs/spack/2021-06-16/libelf/0.8.13-gcc-10.3.0-camcg7ml\r\n[+] /opt/hlrs/spack/2021-06-16/libmd/1.0.3-gcc-10.3.0-6aijz37w    \r\n[+] /opt/hlrs/spack/2021-06-16/libffi/3.3-gcc-10.3.0-hnwxor45        \r\n[+] /opt/hlrs/spack/2021-06-16/xxd-standalone/8.2.1201-gcc-10.3.0-zlfvuope\r\n[+] /opt/hlrs/spack/2021-06-16/findutils/4.8.0-gcc-10.3.0-dohfaqmz\r\n[+] /opt/hlrs/spack/2021-06-16/libpthread-stubs/0.4-gcc-10.3.0-r6sb24eh\r\n[+] /opt/hlrs/spack/2021-06-16/xcb-proto/1.14.1-gcc-10.3.0-3sq7vbjj\r\n[+] /opt/hlrs/spack/2021-06-16/libyaml/0.2.5-gcc-10.3.0-yfusswlp\r\n[+] /opt/hlrs/spack/2021-06-16/util-linux-uuid/2.36.2-gcc-10.3.0-pecyjbiq\r\n[+] /opt/hlrs/spack/2021-06-16/ncurses/6.2-gcc-10.3.0-yj5q2jdv\r\n[+] /opt/hlrs/spack/2021-06-16/m4/1.4.19-gcc-10.3.0-hmvsex27\r\n[+] /opt/hlrs/spack/2021-06-16/glproto/1.4.17-gcc-10.3.0-c6fvfzyg\r\n[+] /opt/hlrs/spack/2021-06-16/kbproto/1.0.7-gcc-10.3.0-omtrweij\r\n[+] /opt/hlrs/spack/2021-06-16/inputproto/2.3.2-gcc-10.3.0-4f6pkvtk\r\n[+] /opt/hlrs/spack/2021-06-16/xtrans/1.3.5-gcc-10.3.0-4k3a34y7\r\n[+] /opt/hlrs/spack/2021-06-16/xextproto/7.3.0-gcc-10.3.0-4bsxxwuf\r\n[+] /opt/hlrs/spack/2021-06-16/xproto/7.0.31-gcc-10.3.0-midwz2en\r\n[+] /opt/hlrs/spack/2021-06-16/diffutils/3.7-gcc-10.3.0-stc745gd\r\n[+] /opt/hlrs/spack/2021-06-16/tar/1.34-gcc-10.3.0-mamdjjuu\r\n[+] /opt/hlrs/spack/2021-06-16/libxml2/2.9.10-gcc-10.3.0-bm5intkz\r\n[+] /opt/hlrs/spack/2021-06-16/libbsd/0.11.3-gcc-10.3.0-7vciqsoz\r\n[+] /opt/hlrs/spack/2021-06-16/readline/8.1-gcc-10.3.0-nfk77ou7\r\n[+] /opt/hlrs/spack/2021-06-16/libtool/2.4.6-gcc-10.3.0-4d3gj3de\r\n[+] /opt/hlrs/spack/2021-06-16/libxau/1.0.8-gcc-10.3.0-3qzn34up\r\n[+] /opt/hlrs/spack/2021-06-16/bzip2/1.0.8-gcc-10.3.0-hccy3l3u\r\n[+] /opt/hlrs/spack/2021-06-16/libxdmcp/1.1.2-gcc-10.3.0-rzcjdue3\r\n[+] /opt/hlrs/spack/2021-06-16/expat/2.3.0-gcc-10.3.0-4u7fey6h\r\n[+] /opt/hlrs/spack/2021-06-16/sqlite/3.35.5-gcc-10.3.0-5dawktfq\r\n[+] /opt/hlrs/spack/2021-06-16/gdbm/1.19-gcc-10.3.0-4iqdf3p5\r\n[+] /opt/hlrs/spack/2021-06-16/libpciaccess/0.16-gcc-10.3.0-xd3ibn66\r\n[+] /opt/hlrs/spack/2021-06-16/gettext/0.21-gcc-10.3.0-ay7ju6il\r\n[+] /opt/hlrs/spack/2021-06-16/boost/1.73.0-gcc-10.3.0-jiscob7b\r\n[+] /opt/hlrs/spack/2021-06-16/libxcb/1.14-gcc-10.3.0-wy4ee5qn\r\n[+] /opt/hlrs/spack/2021-06-16/perl/5.34.0-gcc-10.3.0-zztsuscd\r\n==> Installing hwloc-2.5.0-43h4gt27ewjxxy7lmqlqudphpammkbsw\r\n^C\r\n==> Error: Keyboard interrupt\r\n```\r\n\r\n### Information on your system\r\n```\r\n$ spack debug report\r\n* **Spack:** 0.16.2-3213-7b6ca59\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-zen2\r\n* **Concretizer:** original\r\n```\r\n\r\nThe system has no access to arbitrary internet servers. Everything needed for compilation must be transferred from another system.\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}