{
    "url": "https://api.github.com/repos/spack/spack/issues/7460",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7460/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7460/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7460/events",
    "html_url": "https://github.com/spack/spack/issues/7460",
    "id": 304212991,
    "node_id": "MDU6SXNzdWUzMDQyMTI5OTE=",
    "number": 7460,
    "title": "Installation of pocl fails",
    "user": {
        "login": "s-sajid-ali",
        "id": 30510036,
        "node_id": "MDQ6VXNlcjMwNTEwMDM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/30510036?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/s-sajid-ali",
        "html_url": "https://github.com/s-sajid-ali",
        "followers_url": "https://api.github.com/users/s-sajid-ali/followers",
        "following_url": "https://api.github.com/users/s-sajid-ali/following{/other_user}",
        "gists_url": "https://api.github.com/users/s-sajid-ali/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/s-sajid-ali/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/s-sajid-ali/subscriptions",
        "organizations_url": "https://api.github.com/users/s-sajid-ali/orgs",
        "repos_url": "https://api.github.com/users/s-sajid-ali/repos",
        "events_url": "https://api.github.com/users/s-sajid-ali/events{/privacy}",
        "received_events_url": "https://api.github.com/users/s-sajid-ali/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 2165627345,
            "node_id": "MDU6TGFiZWwyMTY1NjI3MzQ1",
            "url": "https://api.github.com/repos/spack/spack/labels/opencl",
            "name": "opencl",
            "color": "720cb2",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 18,
    "created_at": "2018-03-12T01:04:49Z",
    "updated_at": "2020-06-27T20:38:42Z",
    "closed_at": "2020-06-12T16:41:38Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Summary\r\nInstallation of the package gearshifft fails due to issue in dependency pocl. \r\n### Issue\r\nI tried installing the package using spack and I get this error : \r\n```\r\n  >> 69    /usr/bin/ld: final link failed: Bad value\r\n  >> 70    collect2: error: ld returned 1 exit status\r\n  >> 71    gmake[1]: *** [cmTC_77038] Error 1\r\n     72    gmake[1]: Leaving directory `/tmp/sajid/spack-stage/spack-stage-adwwsb95/pocl-0.14/spack-build/CMakeFiles/CMakeTmp'\r\n  >> 73    gmake: *** [cmTC_77038/fast] Error 2\r\n     74\r\n  >> 75    CMake Error at cmake/LLVM.cmake:643 (message):\r\n     76      LLVM link test FAILED.  This mostly happens when your LLVM installation\r\n     77      does not have all dependencies installed.\r\n     78    Call Stack (most recent call first):\r\n     79      CMakeLists.txt:225 (include)\r\n     80\r\n     81\r\n```\r\nHere is the relevant file : [spack_build_output.txt](https://github.com/spack/spack/files/1801084/spack_build_output.txt) \r\n\r\nWhen I tried to install pocl as a stand alone package, I got this error : \r\n```\r\n==> Error: An unsatisfiable version constraint has been detected for spec:\r\n\r\n    llvm@5.0.1%gcc@7.3.0+all_targets build_type=Release +clang+compiler-rt+gold+internal_unwind+libcxx~link_dylib+lld+lldb+polly~python~shared_libs arch=linux-centos7-x86_64\r\n\r\n\r\nwhile trying to concretize the partial spec:\r\n\r\n    pocl@0.14%gcc@7.3.0 build_type=RelWithDebInfo ~distro~icd arch=linux-centos7-x86_64\r\n        ^cmake@3.10.2%gcc@7.3.0~doc+ncurses+openssl+ownlibs~qt arch=linux-centos7-x86_64\r\n            ^ncurses@6.0%gcc@7.3.0~symlinks~termlib arch=linux-centos7-x86_64\r\n                ^pkgconf@1.4.0%gcc@7.3.0 arch=linux-centos7-x86_64\r\n            ^openssl@1.0.2n%gcc@7.3.0 arch=linux-centos7-x86_64\r\n                ^zlib@1.2.11%gcc@7.3.0+optimize+pic+shared arch=linux-centos7-x86_64\r\n        ^hwloc@1.11.8%gcc@7.3.0~cuda+libxml2+pci+shared arch=linux-centos7-x86_64\r\n            ^libpciaccess\r\n                ^libtool@2.4.6%gcc@7.3.0 arch=linux-centos7-x86_64\r\n                    ^m4@1.4.18%gcc@7.3.0+sigsegv arch=linux-centos7-x86_64\r\n                        ^libsigsegv\r\n                ^util-macros\r\n            ^libxml2\r\n                ^xz\r\n\r\n\r\npocl requires llvm version 3.7:4.0, but spec asked for 5.0.1\r\n```\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ ./spack install gearshifft (fist issue)\r\n$ ./spack install pocl (second issue)\r\n```\r\n\r\n### Information \r\n\r\n 1. Platform : Linux x86-64,  OS : CentOS 7.4\r\n 2. I've been trying to do this in an isolated conda environment and don't know if that's causing an issue. \r\n\r\nTagging maintainer of the gearshifft package : @ax3l ",
    "performed_via_github_app": null
}