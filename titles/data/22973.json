{
    "url": "https://api.github.com/repos/spack/spack/issues/22973",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22973/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22973/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22973/events",
    "html_url": "https://github.com/spack/spack/pull/22973",
    "id": 857268565,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjE0NzE2OTM1",
    "number": 22973,
    "title": "Version speed boost",
    "user": {
        "login": "trws",
        "id": 660149,
        "node_id": "MDQ6VXNlcjY2MDE0OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/660149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/trws",
        "html_url": "https://github.com/trws",
        "followers_url": "https://api.github.com/users/trws/followers",
        "following_url": "https://api.github.com/users/trws/following{/other_user}",
        "gists_url": "https://api.github.com/users/trws/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/trws/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/trws/subscriptions",
        "organizations_url": "https://api.github.com/users/trws/orgs",
        "repos_url": "https://api.github.com/users/trws/repos",
        "events_url": "https://api.github.com/users/trws/events{/privacy}",
        "received_events_url": "https://api.github.com/users/trws/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 460427403,
            "node_id": "MDU6TGFiZWw0NjA0Mjc0MDM=",
            "url": "https://api.github.com/repos/spack/spack/labels/performance",
            "name": "performance",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 474580738,
            "node_id": "MDU6TGFiZWw0NzQ1ODA3Mzg=",
            "url": "https://api.github.com/repos/spack/spack/labels/versions",
            "name": "versions",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 8,
    "created_at": "2021-04-13T19:44:49Z",
    "updated_at": "2021-06-04T19:29:50Z",
    "closed_at": "2021-06-04T07:23:38Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/22973",
        "html_url": "https://github.com/spack/spack/pull/22973",
        "diff_url": "https://github.com/spack/spack/pull/22973.diff",
        "patch_url": "https://github.com/spack/spack/pull/22973.patch"
    },
    "body": "This makes a few related changes.\r\n\r\n1. Make the SEGMENT_REGEX identify *which* arm it matches by what groups\r\n   are populated, including whether it's a string or int component or a\r\n   separator all at once.\r\n2. Use the updated regex to parse the input once with a findall rather\r\n   than twice, once with findall and once with split, since the version\r\n   components and separators can be distinguished by their group status.\r\n3. Rather than \"convert to int, on exception stay string,\" if the int\r\n   group is set then convert to int, if not then construct an instance\r\n   of the VersionStrComponent class\r\n4. VersionStrComponent now implements all of the special string\r\n   comparison logic as part of its __lt__ and __eq__ methods to deal\r\n   with infinity versions and also overloads comparison with integers.\r\n5. Version now uses direct tuple comparison since it has no per-element\r\n   special logic outside the VersionStrComponent class.\r\n\r\nIt also fixes a bug where the VALID_VERSION regex and match didn't actually check that the input string was a valid version.\r\n\r\nThe net result is a roughly 2x improvement in construction speed from a string, and roughly 2x faster comparisons aggregated over doing many comparisons to do some operations on e4s.",
    "performed_via_github_app": null
}