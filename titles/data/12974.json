{
    "url": "https://api.github.com/repos/spack/spack/issues/12974",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12974/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12974/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12974/events",
    "html_url": "https://github.com/spack/spack/issues/12974",
    "id": 499956130,
    "node_id": "MDU6SXNzdWU0OTk5NTYxMzA=",
    "number": 12974,
    "title": "Installation issue: gdbm",
    "user": {
        "login": "vikramsg",
        "id": 13407380,
        "node_id": "MDQ6VXNlcjEzNDA3Mzgw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13407380?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vikramsg",
        "html_url": "https://github.com/vikramsg",
        "followers_url": "https://api.github.com/users/vikramsg/followers",
        "following_url": "https://api.github.com/users/vikramsg/following{/other_user}",
        "gists_url": "https://api.github.com/users/vikramsg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vikramsg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vikramsg/subscriptions",
        "organizations_url": "https://api.github.com/users/vikramsg/orgs",
        "repos_url": "https://api.github.com/users/vikramsg/repos",
        "events_url": "https://api.github.com/users/vikramsg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vikramsg/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1574436554,
            "node_id": "MDU6TGFiZWwxNTc0NDM2NTU0",
            "url": "https://api.github.com/repos/spack/spack/labels/microarchitectures",
            "name": "microarchitectures",
            "color": "011970",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2019-09-29T19:01:30Z",
    "updated_at": "2019-09-30T11:30:10Z",
    "closed_at": "2019-09-30T11:29:41Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "After the Mac OS update to Mojave there were some issues, so I decided to reinstall Spack. However, I got stuck with building even gcc. It gets stuck at gdbm.\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install gdbm\r\n\r\n==> Installing gdbm\r\n==> Searching for binary cache of gdbm\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for gdbm found: installing from source\r\n==> Using cached archive: /Users/vikram/Downloads/Install/src/spack/var/spack/cache/gdbm/gdbm-1.18.1.tar.gz\r\n==> Staging archive: /var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n/gdbm-1.18.1.tar.gz\r\n==> Created stage in /var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n\r\n==> No patches needed for gdbm\r\n==> Building gdbm [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 77:\r\n    '/var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n/spack-src/configure' '--prefix=/Users/vikram/Downloads/Install/src/spack/opt/spack/darwin-mojave-broadwell/clang-11.0.0-apple/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n' '--enable-libgdbm-compat' 'CPPFLAGS=-D_GNU_SOURCE'\r\n\r\n2 errors found in build log:\r\n     10    checking for awk... awk\r\n     11    checking whether make sets $(MAKE)... yes\r\n     12    checking whether make supports nested variables... yes\r\n     13    checking whether make supports nested variables... (cached) yes\r\n     14    checking for gcc... gcc\r\n     15    checking whether the C compiler works... no\r\n  >> 16    configure: error: in `/var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikramsingh/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n/spack-src':\r\n  >> 17    configure: error: C compiler cannot create executables\r\n     18    See `config.log' for more details\r\n\r\nSee build log for details:\r\n  /var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n/spack-build-out.txt\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nDarwin Vikram.local 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64\r\n``` \r\n\r\nTo try and bypass this issue, I found that the following took me slightly forward but I get stuck again. \r\n### Additional Information\r\n\r\n```console\r\n$ CC=\"/opt/local/bin/gcc -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\" LD=\"/opt/local/bin/ld -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\" LDFLAGS=\"-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -L/usr/lib -lSystem\" spack install cmake\r\n\r\n==> Installing gdbm\r\n==> Searching for binary cache of gdbm\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for gdbm found: installing from source\r\n==> Using cached archive: /Users/vikram/Downloads/Install/src/spack/var/spack/cache/gdbm/gdbm-1.18.1.tar.gz\r\n==> Staging archive: /var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n/gdbm-1.18.1.tar.gz\r\n==> Created stage in /var/folders/p5/zmhxh9795rzd9nn3115zbjb40000gn/T/vikram/spack-stage/gdbm-1.18.1-2h4wj2k4y4vzptp474wc4vj3gcriqq4n\r\n==> No patches needed for gdbm\r\n==> Building gdbm [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n6 errors found in build log:\r\n     898     #define SIZE_T_MAX      ULONG_MAX       /* max value for a size_t */\r\n     899    \r\n     900      CCLD     libgdbm.la\r\n     901      CCLD     gdbmtool\r\n     902      CCLD     gdbm_load\r\n     903      CCLD     gdbm_dump\r\n  >> 904    Undefined symbols for architecture x86_64:\r\n     905      \"_history_list\", referenced from:\r\n     906          _input_history_handler in input-rl.o\r\n     907    ld: symbol(s) not found for architecture x86_64\r\n  >> 908    collect2: error: ld returned 1 exit status\r\n  >> 909    make[3]: *** [gdbmtool] Error 1\r\n     910    make[3]: *** Waiting for unfinished jobs....\r\n  >> 911    make[2]: *** [all] Error 2\r\n  >> 912    make[1]: *** [all-recursive] Error 1\r\n  >> 913    make: *** [all] Error 2\r\n\r\n```\r\n",
    "performed_via_github_app": null
}