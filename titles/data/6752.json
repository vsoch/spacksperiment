{
    "url": "https://api.github.com/repos/spack/spack/issues/6752",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6752/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6752/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6752/events",
    "html_url": "https://github.com/spack/spack/issues/6752",
    "id": 283983878,
    "node_id": "MDU6SXNzdWUyODM5ODM4Nzg=",
    "number": 6752,
    "title": "boost 1.65.1 fails to configure on Fedora Linux 27",
    "user": {
        "login": "leek2",
        "id": 20445135,
        "node_id": "MDQ6VXNlcjIwNDQ1MTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/20445135?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/leek2",
        "html_url": "https://github.com/leek2",
        "followers_url": "https://api.github.com/users/leek2/followers",
        "following_url": "https://api.github.com/users/leek2/following{/other_user}",
        "gists_url": "https://api.github.com/users/leek2/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/leek2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/leek2/subscriptions",
        "organizations_url": "https://api.github.com/users/leek2/orgs",
        "repos_url": "https://api.github.com/users/leek2/repos",
        "events_url": "https://api.github.com/users/leek2/events{/privacy}",
        "received_events_url": "https://api.github.com/users/leek2/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2017-12-21T19:40:12Z",
    "updated_at": "2017-12-22T01:54:10Z",
    "closed_at": "2017-12-22T01:54:10Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Summary\r\n\r\n### Expected Result\r\n\r\nboost 1.65.1 to build and install\r\n\r\n### Actual Result\r\n\r\n[leek2@jetjaguar spack]$ spack install boost@1.65.1\r\n==> bzip2 is already installed in /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/bzip2-1.0.6-payuef3oghfwc6xmay2cwisxw5b4agwg\r\n==> zlib is already installed in /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/zlib-1.2.11-5kriwfigiyx6c2pfgzgbclwthzmdou7q\r\n==> Installing boost\r\n==> Using cached archive: /home/leek2/spack/var/spack/cache/boost/boost-1.65.1.tar.bz2\r\n==> Staging archive: /home/leek2/spack/var/spack/stage/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/boost_1_65_1.tar.bz2\r\n==> Created stage in /home/leek2/spack/var/spack/stage/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6\r\n==> Applied patch python_jam.patch\r\n==> Building boost [Package]\r\n==> Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    './b2' 'install' 'threading=multi' '-j' '4' 'variant=release' '-s' 'BZIP2_INCLUDE=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/bzip2-1.0.6-payuef3oghfwc6xmay2cwisxw5b4agwg/include' '-s' 'BZIP2_LIBPATH=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/bzip2-1.0.6-payuef3oghfwc6xmay2cwisxw5b4agwg/lib' '-s' 'ZLIB_INCLUDE=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/zlib-1.2.11-5kriwfigiyx6c2pfgzgbclwthzmdou7q/include' '-s' 'ZLIB_LIBPATH=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/zlib-1.2.11-5kriwfigiyx6c2pfgzgbclwthzmdou7q/lib' 'link=static,shared' '--layout=system' 'toolset=gcc'\r\nSee build log for details:\r\n  /home/leek2/spack/var/spack/stage/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/boost_1_65_1/spack-build.out\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\nI'm using Fedora Linux 27, Gcc, g++, and gfortran versions 7.2.1.\r\nI cloned the git repo and just ran \"spack install boost@1.65.1\"  All the packages built until boost.\r\n\r\n-----\r\nThe problem appears to be with the cc wrapper scripts.  I was able to build and install boost using the same inputs spack gave, as long as I removed /home/leek2/spack/lib/spack/env/gcc from the PATH.  Below is the output from the spack-build.out log.  You can see the configuration is completely screwed up, and it claims gcc does not support C++ programs.\r\n\r\n### spack-build.out\r\n\r\n==> Executing phase: 'install'\r\n==> './bootstrap.sh' '--prefix=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6' '--with-toolset=gcc' '--with-libraries=locale,random,wave,atomic,serialization,iostreams,regex,date_time,exception,log,thread,chrono,system,timer,signals,program_options,filesystem,test,math'\r\nBuilding Boost.Build engine with toolset gcc... tools/build/src/engine/bin.linuxx86_64/b2\r\nUnicode/ICU support for Boost.Regex?... not found.\r\nGenerating Boost.Build configuration in project-config.jam...\r\n\r\nBootstrapping is done. To build, run:\r\n\r\n    ./b2\r\n    \r\nTo adjust configuration, edit 'project-config.jam'.\r\nFurther information:\r\n\r\n   - Command line help:\r\n     ./b2 --help\r\n     \r\n   - Getting started guide: \r\n     http://www.boost.org/more/getting_started/unix-variants.html\r\n     \r\n   - Boost.Build documentation:\r\n     http://www.boost.org/build/doc/html/index.html\r\n\r\n==> './b2' '--clean'\r\n  File \"<string>\", line 1\r\n    from sys import abiflags; print(abiflags, end='')\r\n                                                 ^\r\nSyntaxError: invalid syntax\r\nPerforming configuration checks\r\n\r\n    - 32-bit                   : no\r\n    - 64-bit                   : no\r\n    - arm                      : no\r\n    - mips1                    : no\r\n    - power                    : no\r\n    - sparc                    : no\r\n    - x86                      : no\r\n    - combined                 : no\r\n\r\nBuilding the Boost C++ Libraries.\r\n\r\n\r\n    - symlinks supported       : yes\r\n    - zlib                     : no\r\n    - bzip2                    : no\r\n    - lzma                     : no\r\n    - iconv (libc)             : no\r\n    - iconv (separate)         : no\r\n    - icu                      : no\r\n    - icu (lib64)              : no\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n    - native-atomic-int32-supported : no\r\n    - native-syslog-supported  : no\r\n    - pthread-supports-robust-mutexes : no\r\n    - compiler-supports-visibility : no\r\n    - has_icu builds           : no\r\n    - lockfree boost::atomic_flag : no\r\n    - gcc visibility           : no\r\n    - long double support      : no\r\n    - zlib                     : no\r\n    - bzip2                    : no\r\n    - lzma                     : no\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n...found 1 target...\r\n...updating 1 target...\r\n...updated 1 target...\r\n==> './b2' 'install' 'threading=multi' '-j' '4' 'variant=release' '-s' 'BZIP2_INCLUDE=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/bzip2-1.0.6-payuef3oghfwc6xmay2cwisxw5b4agwg/include' '-s' 'BZIP2_LIBPATH=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/bzip2-1.0.6-payuef3oghfwc6xmay2cwisxw5b4agwg/lib' '-s' 'ZLIB_INCLUDE=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/zlib-1.2.11-5kriwfigiyx6c2pfgzgbclwthzmdou7q/include' '-s' 'ZLIB_LIBPATH=/home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/zlib-1.2.11-5kriwfigiyx6c2pfgzgbclwthzmdou7q/lib' 'link=static,shared' '--layout=system' 'toolset=gcc'\r\n  File \"<string>\", line 1\r\n    from sys import abiflags; print(abiflags, end='')\r\n                                                 ^\r\nSyntaxError: invalid syntax\r\nPerforming configuration checks\r\n\r\n    - 32-bit                   : no  (cached)\r\n    - 64-bit                   : no  (cached)\r\n    - arm                      : no  (cached)\r\n    - mips1                    : no  (cached)\r\n    - power                    : no  (cached)\r\n    - sparc                    : no  (cached)\r\n    - x86                      : no  (cached)\r\n    - combined                 : no  (cached)\r\n    - symlinks supported       : yes\r\n    - zlib                     : no  (cached)\r\n    - bzip2                    : no  (cached)\r\n    - lzma                     : no  (cached)\r\n    - iconv (libc)             : no  (cached)\r\n    - iconv (separate)         : no  (cached)\r\n    - icu                      : no  (cached)\r\n    - icu (lib64)              : no  (cached)\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n    - native-atomic-int32-supported : no  (cached)\r\n    - native-syslog-supported  : no  (cached)\r\n    - pthread-supports-robust-mutexes : no  (cached)\r\n    - compiler-supports-visibility : no  (cached)\r\n    - has_icu builds           : no  (cached)\r\n    - lockfree boost::atomic_flag : no  (cached)\r\n    - gcc visibility           : no  (cached)\r\n    - long double support      : no  (cached)\r\n    - zlib                     : no  (cached)\r\n    - bzip2                    : no  (cached)\r\n    - lzma                     : no  (cached)\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n- Boost.Locale needs either iconv or ICU library to be built.\r\n\r\nComponent configuration:\r\n\r\n    - atomic                   : building\r\n    - chrono                   : building\r\n    - container                : not building\r\n    - context                  : not building\r\n    - coroutine                : not building\r\n    - date_time                : building\r\n    - exception                : building\r\n    - fiber                    : not building\r\n    - filesystem               : building\r\n    - graph                    : not building\r\n    - graph_parallel           : not building\r\n    - iostreams                : building\r\n    - locale                   : building\r\n    - log                      : building\r\n    - math                     : building\r\n    - metaparse                : not building\r\n    - mpi                      : not building\r\n    - program_options          : building\r\n    - python                   : not building\r\n    - random                   : building\r\n    - regex                    : building\r\n    - serialization            : building\r\n    - signals                  : building\r\n    - stacktrace               : not building\r\n    - system                   : building\r\n    - test                     : building\r\n    - thread                   : building\r\n    - timer                    : building\r\n    - type_erasure             : not building\r\n    - wave                     : building\r\n\r\n...patience...\r\n...patience...\r\n...patience...\r\n...patience...\r\n...patience...\r\n...found 34226 targets...\r\n...updating 14353 targets...\r\ncommon.mkdir /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include\r\ncommon.mkdir /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/lib\r\ncommon.mkdir bin.v2/libs/atomic\r\ncommon.mkdir bin.v2/libs/system/build/gcc/release\r\ncommon.mkdir /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost\r\ncommon.mkdir bin.v2/libs/chrono\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/weak_ptr.hpp\r\ncommon.mkdir bin.v2/libs/system/build/gcc/release/link-static\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/visit_each.hpp\r\ncommon.mkdir bin.v2/libs/atomic/build\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/wave.hpp\r\ncommon.mkdir bin.v2/libs/system/build/gcc/release/link-static/threading-multi\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/version.hpp\r\ncommon.mkdir bin.v2/libs/atomic/build/gcc\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/variant.hpp\r\ncommon.copy /home/leek2/spack/opt/spack/linux-fedora27-x86_64/gcc-7.2.1/boost-1.65.1-guqlwv6du3gzozhddo23k47hkyyfd7q6/include/boost/utility.hpp\r\ngcc.compile.c++ bin.v2/libs/system/build/gcc/release/link-static/threading-multi/error_code.o\r\nERROR: Compiler 'gcc@7.2.1' does not support compiling C++ programs.\r\n\r\n    \"/home/leek2/spack/lib/spack/env/gcc/g++\"   -O3 -finline-functions -Wno-inline -Wall -pedantic -pthread  -DBOOST_ALL_NO_LIB=1 -DBOOST_SYSTEM_STATIC_LINK=1 -DNDEBUG  -I\".\" -c -o \"bin.v2/libs/system/build/gcc/release/link-static/threading-multi/error_code.o\" \"libs/system/src/error_code.cpp\"\r\n\r\n...failed gcc.compile.c++ bin.v2/libs/system/build/gcc/release/link-static/threading-multi/error_code.o...\r\n\r\n\r\n",
    "performed_via_github_app": null
}