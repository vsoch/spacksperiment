{
    "url": "https://api.github.com/repos/spack/spack/issues/23616",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23616/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23616/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23616/events",
    "html_url": "https://github.com/spack/spack/issues/23616",
    "id": 891019801,
    "node_id": "MDU6SXNzdWU4OTEwMTk4MDE=",
    "number": 23616,
    "title": "Document vendored dependencies in packages",
    "user": {
        "login": "sethrj",
        "id": 741229,
        "node_id": "MDQ6VXNlcjc0MTIyOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/741229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sethrj",
        "html_url": "https://github.com/sethrj",
        "followers_url": "https://api.github.com/users/sethrj/followers",
        "following_url": "https://api.github.com/users/sethrj/following{/other_user}",
        "gists_url": "https://api.github.com/users/sethrj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sethrj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sethrj/subscriptions",
        "organizations_url": "https://api.github.com/users/sethrj/orgs",
        "repos_url": "https://api.github.com/users/sethrj/repos",
        "events_url": "https://api.github.com/users/sethrj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sethrj/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        },
        {
            "id": 1029761810,
            "node_id": "MDU6TGFiZWwxMDI5NzYxODEw",
            "url": "https://api.github.com/repos/spack/spack/labels/vendored-dependencies",
            "name": "vendored-dependencies",
            "color": "b1fc49",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-13T13:01:13Z",
    "updated_at": "2021-05-14T13:59:09Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Consider adding a `vendored('blas@1.234', when='+builtin_blas')` directive to document that a package has a vendored dependency (one that's included as part of the source tree or downloaded on-the-fly, and built into the resulting code), possibly printing a warning if it concretizes in the same spec as the non-vendored version or a vendored version from another package.\r\n\r\n### Rationale\r\n\r\nIn multiphysics codes and other situations, disparate codes (each of which may have originally thought of itself as an \"app\" rather than a component) can include multiple vendored dependencies, often out of expedience rather than a need to fork the dependencies. This has caused errors in my experience ranging from header conflicts (e.g. `tcb_span` being included twice with different macros) to doubly defined symbols.\r\n\r\nAn additional concern for vendored dependencies is that some rely on external downloads (e.g. using CMake's FetchContent) which prevent Spack's use offline.\r\n\r\n### Description\r\n\r\nA `vendored` directive can help users be aware of potential buiild/link issues at concretization time, and help document packages that need improvement.\r\n\r\nPackages with built-in dependencies:\r\n- ROOT (custom llvm)\r\n- Rust (custom llvm)\r\n- gmsh (several packages)\r\n- NekRS (occa, hypre, nek5000, blas, lapack, gslib)\r\n- GSL (blas when `external-cblas`)\r\n\r\n### General information\r\n\r\n```console\r\n$ spack --version\r\n0.16.1-2565-a5422f8015\r\n```",
    "performed_via_github_app": null
}