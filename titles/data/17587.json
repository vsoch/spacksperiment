{
    "url": "https://api.github.com/repos/spack/spack/issues/17587",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17587/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17587/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17587/events",
    "html_url": "https://github.com/spack/spack/pull/17587",
    "id": 660553924,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDUyMzAxODk4",
    "number": 17587,
    "title": "PythonPackage: add pypi attribute to infer homepage/url/list_url",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        },
        {
            "id": 446643530,
            "node_id": "MDU6TGFiZWw0NDY2NDM1MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/fetching",
            "name": "fetching",
            "color": "fbca04",
            "default": false,
            "description": null
        },
        {
            "id": 446619758,
            "node_id": "MDU6TGFiZWw0NDY2MTk3NTg=",
            "url": "https://api.github.com/repos/spack/spack/labels/python",
            "name": "python",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-07-19T03:26:38Z",
    "updated_at": "2020-12-29T18:48:00Z",
    "closed_at": "2020-12-29T08:03:10Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/17587",
        "html_url": "https://github.com/spack/spack/pull/17587",
        "diff_url": "https://github.com/spack/spack/pull/17587.diff",
        "patch_url": "https://github.com/spack/spack/pull/17587.patch"
    },
    "body": "I just discovered https://pypi.org/simple/ and [PEP 503](https://www.python.org/dev/peps/pep-0503/). This finally allows us to use `spack versions` and `spack checksum` on PyPI packages properly! For example:\r\n\r\n### Before\r\n\r\n```console\r\n$ spack versions py-numpy\r\n==> Safe versions (already checksummed):\r\n  master  1.18.4  1.18.1  1.17.4  1.17.1  1.16.5  1.16.2  1.15.4  1.15.1  1.14.5  1.14.2  1.13.3  1.12.1  1.11.2  1.10.4  1.9.1\r\n  1.19.0  1.18.3  1.18.0  1.17.3  1.17.0  1.16.4  1.16.1  1.15.3  1.15.0  1.14.4  1.14.1  1.13.1  1.12.0  1.11.1  1.9.3\r\n  1.18.5  1.18.2  1.17.5  1.17.2  1.16.6  1.16.3  1.16.0  1.15.2  1.14.6  1.14.3  1.14.0  1.13.0  1.11.3  1.11.0  1.9.2\r\n==> Remote versions (not yet checksummed):\r\n==> Warning: Found no unchecksummed versions for py-numpy\r\n```\r\n\r\n### After\r\n```console\r\n$ spack versions py-numpy\r\n==> Safe versions (already checksummed):\r\n  master  1.18.4  1.18.1  1.17.4  1.17.1  1.16.5  1.16.2  1.15.4  1.15.1  1.14.5  1.14.2  1.13.3  1.12.1  1.11.2  1.10.4  1.9.1\r\n  1.19.0  1.18.3  1.18.0  1.17.3  1.17.0  1.16.4  1.16.1  1.15.3  1.15.0  1.14.4  1.14.1  1.13.1  1.12.0  1.11.1  1.9.3\r\n  1.18.5  1.18.2  1.17.5  1.17.2  1.16.6  1.16.3  1.16.0  1.15.2  1.14.6  1.14.3  1.14.0  1.13.0  1.11.3  1.11.0  1.9.2\r\n==> Remote versions (not yet checksummed):\r\n  1.19.0rc2  1.17.0rc2  1.16.0rc1  1.14.0rc1  1.12.1rc1  1.12.0b1   1.11.0rc2  1.10.2        1.9.0  1.8.0  1.7.0  1.6.0\r\n  1.19.0rc1  1.17.0rc1  1.15.0rc2  1.13.0rc2  1.12.0rc2  1.11.2rc1  1.11.0rc1  1.10.1        1.8.2  1.7.2  1.6.2\r\n  1.18.0rc1  1.16.0rc2  1.15.0rc1  1.13.0rc1  1.12.0rc1  1.11.1rc1  1.11.0b3   1.10.0.post2  1.8.1  1.7.1  1.6.1\r\n```\r\nThis PR modifies `PythonPackage` to accept a `pypi` variable that defines the `homepage`, `url`, and `list_url` for every Python package like @alalazo and others have done for GNU/SourceForge/etc. Progress so far:\r\n\r\n- [x] Add `pypi` variable to `PythonPackage` base class\r\n- [x] Auto-populate `homepage`, `url`, and `list_url` if `pypi` is set\r\n- [x] Update `spack create` to set `pypi` instead of `url`\r\n- [x] Add `spack versions/checksum/create` support for PyPI URLs\r\n- [x] Update `PythonPackage` documentation\r\n\r\nIf this works well, we can do the same for `cran`, `cpan`, and other similar language-specific software repositories.\r\n\r\nCloses #2281\r\nCloses #2335\r\nAlternative to #2718",
    "performed_via_github_app": null
}