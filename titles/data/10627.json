{
    "url": "https://api.github.com/repos/spack/spack/issues/10627",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/10627/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/10627/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/10627/events",
    "html_url": "https://github.com/spack/spack/issues/10627",
    "id": 410984943,
    "node_id": "MDU6SXNzdWU0MTA5ODQ5NDM=",
    "number": 10627,
    "title": "py-scipy: Ran out of Threads",
    "user": {
        "login": "citibeth",
        "id": 1924215,
        "node_id": "MDQ6VXNlcjE5MjQyMTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1924215?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/citibeth",
        "html_url": "https://github.com/citibeth",
        "followers_url": "https://api.github.com/users/citibeth/followers",
        "following_url": "https://api.github.com/users/citibeth/following{/other_user}",
        "gists_url": "https://api.github.com/users/citibeth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/citibeth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/citibeth/subscriptions",
        "organizations_url": "https://api.github.com/users/citibeth/orgs",
        "repos_url": "https://api.github.com/users/citibeth/repos",
        "events_url": "https://api.github.com/users/citibeth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/citibeth/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2019-02-15T23:14:24Z",
    "updated_at": "2019-03-04T15:10:59Z",
    "closed_at": "2019-03-04T15:10:59Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I'm building `py-scipy` (gcc-5.3.0 environment) on a shared supercomputer login node.  To speed things up, SciPy builds in parallel using `make_jobs` jobs (not sure where the `make_jobs` symbol comes from):\r\n```\r\n        # Build in parallel\r\n        # Known problems with Python 3.5+\r\n        # https://github.com/spack/spack/issues/7927\r\n        # https://github.com/scipy/scipy/issues/7112\r\n        if not spec.satisfies('^python@3.5:'):\r\n            args.extend(['-j', str(make_jobs)])\r\n```\r\n\r\nThis is failing for me because I'm running of threads.  Most likely, the supercomputer admin set a limit on number of threads that's less than the number of processors, to prevent people from hogging the machine.  I couldn't find any thread limit in `ulimit -a`, but I'm willing to be its somewhere on this system.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install py-scipy ^python@3.5.2\r\n```\r\n\r\n### Error Message\r\n\r\n```\r\nRuntimeError: can't start new thread\r\n```\r\n\r\n### Information on your system\r\n\r\nSuSE11.  Shared supercomputer, probably has resource limits set by the administrator.\r\n\r\n### Proposed Solution (please comment)\r\n\r\nWe don't want to add a variant to change the degree of parallelism of the build, because that has nothing to do with the final result.  Can we find a way for the user to set `make_jobs` when launching Spack?  Or does such a way already exist?\r\n\r\n[py-scipy.txt](https://github.com/spack/spack/files/2871255/py-scipy.txt)\r\n",
    "performed_via_github_app": null
}