{
    "url": "https://api.github.com/repos/spack/spack/issues/18401",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/18401/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/18401/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/18401/events",
    "html_url": "https://github.com/spack/spack/issues/18401",
    "id": 688869819,
    "node_id": "MDU6SXNzdWU2ODg4Njk4MTk=",
    "number": 18401,
    "title": "dev-build ignores environment settings",
    "user": {
        "login": "DraTeots",
        "id": 4732545,
        "node_id": "MDQ6VXNlcjQ3MzI1NDU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4732545?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DraTeots",
        "html_url": "https://github.com/DraTeots",
        "followers_url": "https://api.github.com/users/DraTeots/followers",
        "following_url": "https://api.github.com/users/DraTeots/following{/other_user}",
        "gists_url": "https://api.github.com/users/DraTeots/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/DraTeots/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/DraTeots/subscriptions",
        "organizations_url": "https://api.github.com/users/DraTeots/orgs",
        "repos_url": "https://api.github.com/users/DraTeots/repos",
        "events_url": "https://api.github.com/users/DraTeots/events{/privacy}",
        "received_events_url": "https://api.github.com/users/DraTeots/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 471995122,
            "node_id": "MDU6TGFiZWw0NzE5OTUxMjI=",
            "url": "https://api.github.com/repos/spack/spack/labels/commands",
            "name": "commands",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-08-31T03:26:51Z",
    "updated_at": "2020-10-16T00:23:17Z",
    "closed_at": "2020-10-16T00:23:17Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "In order to create a build environment for a package with exact packet versions (especially things like CERN ROOT) I create an environment with \r\n\r\n```\r\nspack:    \r\n    specs:\r\n        - \"root@6.20.04+vmc+pythia6+pythia8+root7 cxxstd=17\"\r\n        - \"jana2@2.0.3 +root cxxstd=17\"\r\n        - \"eic-smear@1.1.1\"        \r\n        - \"ejana@master\"\r\n    concretization: together\r\n```\r\n\r\nHere 'ejana' depends on others and others depend on root and each other and having them all of one version is important. So ```concretization: together``` works well and does the job of getting consistent versions of packages during install. \r\n\r\nIf sitting in this environment I do\r\n\r\n```\r\n$ spack dev-build ejana@master\r\n```\r\n\r\nInstead of using the installed versions it tries to install default versions of root (6.18 not 6.20) and other packages and nothing works as expected (by me). \r\n\r\nIt is highly inconvenient as the only way to get a set of versions to be particular for dev-build is using its ```spec``` command line variable. If I add a bit more packages than in the above example such command becomes unbearable. \r\n\r\n```spack setup``` kind of respected ```concretization: together``` flag.\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n```\r\n* **Spack:** 0.15.3\r\n* **Python:** 3.7.7\r\n* **Platform:** linux-ubuntu18.04-zen\r\n```\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n(I run in debug mode, but there is nothing to report)",
    "performed_via_github_app": null
}