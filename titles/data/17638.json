{
    "url": "https://api.github.com/repos/spack/spack/issues/17638",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17638/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17638/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17638/events",
    "html_url": "https://github.com/spack/spack/issues/17638",
    "id": 663224396,
    "node_id": "MDU6SXNzdWU2NjMyMjQzOTY=",
    "number": 17638,
    "title": "Installation issue: kahip (python2 vs python3 issue in SConstruct scripts)",
    "user": {
        "login": "payerle",
        "id": 19287807,
        "node_id": "MDQ6VXNlcjE5Mjg3ODA3",
        "avatar_url": "https://avatars.githubusercontent.com/u/19287807?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/payerle",
        "html_url": "https://github.com/payerle",
        "followers_url": "https://api.github.com/users/payerle/followers",
        "following_url": "https://api.github.com/users/payerle/following{/other_user}",
        "gists_url": "https://api.github.com/users/payerle/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/payerle/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/payerle/subscriptions",
        "organizations_url": "https://api.github.com/users/payerle/orgs",
        "repos_url": "https://api.github.com/users/payerle/repos",
        "events_url": "https://api.github.com/users/payerle/events{/privacy}",
        "received_events_url": "https://api.github.com/users/payerle/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-07-21T18:34:40Z",
    "updated_at": "2020-07-31T03:22:41Z",
    "closed_at": "2020-07-31T03:22:41Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I am running into an issue when trying to build kahip using scons based on python3\r\n\r\n### Steps to reproduce the issue\r\nspack install kahip@2.00 \r\nwhen using a scons built with python@3\r\n\r\ngives error\r\n=========\r\n==> 20722: Installing kahip\r\n==> Fetching http://algo2.iti.kit.edu/schulz/software_releases/KaHIP_2.00.tar.gz\r\n==> Staging archive: /tmp/spackswinst/spack-stage/spack-stage-kahip-2.00-w6pzs3m7ke2ks526f36j6gbfi3kkuz5u/KaHIP_2.00.tar.gz\r\n==> Created stage in /tmp/spackswinst/spack-stage/spack-stage-kahip-2.00-w6pzs3m7ke2ks526f36j6gbfi3kkuz5u\r\n==> Ran patch() for kahip\r\n==> 20722: kahip: Building kahip [SConsPackage]\r\n==> 20722: kahip: Executing phase: 'build'\r\n==> 20722: kahip: Executing phase: 'install'\r\n==> Error: FileNotFoundError: [Errno 2] No such file or directory: 'deploy'\r\n\r\n/software/spack/git.2020.05.14/var/spack/repos/builtin/packages/kahip/package.py:62, in install:\r\n         59        mkdirp(prefix.include)\r\n         60        mkdirp(prefix.lib)\r\n         61\r\n  >>     62        with working_dir('deploy'):\r\n         63            for f in os.listdir('.'):\r\n         64                if re.match(r'.*\\.(a|so|dylib)$', f):\r\n         65                    install(f, prefix.lib)\r\n===============\r\n\r\nwhich seems to be do to python2/3 mismatch as spack-build-out.txt contains\r\n===============\r\n==> 20722: kahip: Executing phase: 'build'\r\n==> [2020-07-21-11:20:21.940770, 24067] './compile.sh'\r\nscons: Reading SConscript files ...\r\n  File \"/tmp/spackswinst/spack-stage/spack-stage-kahip-2.00-w6pzs3m7ke2ks526f36j6gbfi3kkuz5u/spack-src/SConstruct\", line 58\r\n\r\n    print 'Illegal value for variant: %s' % env['variant']\r\n\r\n                                        ^\r\n\r\nSyntaxError: Missing parentheses in call to 'print'. Did you mean print('Illegal value for variant: %s' % env['variant'])?\r\n\r\ncompile error in node_separator. exiting.\r\n==> 20722: kahip: Executing phase: 'install'\r\n===================\r\n\r\n### Information on your system\r\nMy system:\r\nspack debug report\r\n* **Spack:** 0.14.2\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel8-x86_64\r\n\r\nIt appears that the SConstruct scripts provided as part of kahip package contain some python2-isms that do not work in python3.  From what I can see so far, it is basically some print statements that need to be converted to print function calls (i.e. wrap arguments in parentheses).  The python used seems to come through the scons dependency.\r\n\r\nThe last kahip issue I was able to find was  #13466 (@olesenm); as that ticket was inquiring about strategies to update kahip I thought they might be interested.  That ticket claims kahip>2.11 switched to CMake from SCons; I confess to not being very familiar with SCons, and I noticed that the SConscript/SConstruct files are missing in the root directory in master, but are present in some subdirectories, and have been made python3 friendly since 2.11, so I am confused by the claim that SCons is no longer used.\r\n\r\n\r\n \r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [ ] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [ ] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [ ] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}