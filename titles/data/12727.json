{
    "url": "https://api.github.com/repos/spack/spack/issues/12727",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12727/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12727/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12727/events",
    "html_url": "https://github.com/spack/spack/issues/12727",
    "id": 490058499,
    "node_id": "MDU6SXNzdWU0OTAwNTg0OTk=",
    "number": 12727,
    "title": "Error building zlib while building scorep with clang on IBM linux cluster",
    "user": {
        "login": "raon62",
        "id": 54964848,
        "node_id": "MDQ6VXNlcjU0OTY0ODQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/54964848?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/raon62",
        "html_url": "https://github.com/raon62",
        "followers_url": "https://api.github.com/users/raon62/followers",
        "following_url": "https://api.github.com/users/raon62/following{/other_user}",
        "gists_url": "https://api.github.com/users/raon62/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/raon62/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/raon62/subscriptions",
        "organizations_url": "https://api.github.com/users/raon62/orgs",
        "repos_url": "https://api.github.com/users/raon62/repos",
        "events_url": "https://api.github.com/users/raon62/events{/privacy}",
        "received_events_url": "https://api.github.com/users/raon62/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2019-09-05T23:28:32Z",
    "updated_at": "2019-09-05T23:28:32Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I have loaded modules:\r\n1) cuda/9.2.148\u00a0\u00a0 2) StdEnv\u2019\u00a0 3) clang/upstream-2019.03.26\u00a0\u00a0 4) spectrum-mpi/rolling-release\r\n\u00a0\r\n\u00a0\r\nIn ~/.spack/packages.yaml, I have added:\r\npackages:\r\n\u00a0 mvapich2:\r\n\u00a0\u00a0\u00a0 paths:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mvapich2@2.3%intel@19.0.4 arch=rhel7-x86-64: /usr/tce/packages/mvapich2/mvapich2-2.3-intel-19.0.4\r\n\u00a0\r\n\u00a0 spectrum-mpi:\r\n\u00a0\u00a0\u00a0 paths:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 spectrum-mpi@rolling-release%clang@9.0.0 arch=linux-rhel7-ppc64le: /usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-clang-upstream-2019.03.26\r\n\u00a0\r\n\u00a0\r\nIn ~/.spack/linux/compiler.yaml, after \u201cspack compiler find\u201d I have:\r\n- compiler:\r\n\u00a0\u00a0\u00a0 environment: {}\r\n\u00a0\u00a0\u00a0 extra_rpaths: []\r\n\u00a0\u00a0\u00a0 flags: {}\r\n\u00a0\u00a0\u00a0 implicit_rpaths:\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/cuda/cuda-9.2.148/lib64\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/cuda/cuda-9.2.148/nvvm/libdevice\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/clang/clang-upstream-2019.03.26/ibm/omprtl/lib\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/gcc/gcc-4.9.3/lib64/gcc/powerpc64le-unknown-linux-gnu/4.9.3\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/gcc/gcc-4.9.3/lib64\r\n\u00a0\u00a0\u00a0 - /usr/tce/packages/clang/clang-upstream-2019.03.26/ibm/lib\r\n\u00a0\u00a0\u00a0 modules: []\r\n\u00a0\u00a0\u00a0 operating_system: rhel7\r\n\u00a0\u00a0\u00a0 paths:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 cc: /usr/tcetmp/bin/clang-gpu\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cxx: /usr/tcetmp/bin/clang++-gpu\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f77: null\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 fc: null\r\n\u00a0\u00a0\u00a0 spec:\u00a0clang@9.0.0\r\n\u00a0\u00a0\u00a0 target: ppc64le\r\n\u00a0\r\nAnd env |grep rolling gives:\r\nenv | grep rolling\r\nPATH=/usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-clang-upstream-2019.03.26/bin:/usr/tce/packages/clang/clang-upstream-2019.03.26/bin:/usr/global/tools/totalview/r/toolworks/totalview.2019X.2.2/bin:/usr/global/tools/tau/training/tau-2.28.2/ibm64linux/bin:/g/g17/chbld/bin:/collab/usr/global/tools/mpi/install/bin:/usr/workspace/wsrzd/chbld/builds/spack/bin:/usr/global/tools/totalview/r/toolworks/totalview.2019X.2.2/bin:/usr/global/tools/tau/training/tau-2.28.2/ibm64linux/bin:/g/g17/chbld/bin:/collab/usr/global/tools/mpi/install/bin:/usr/tce/packages/cuda/cuda-9.2.148/bin:/usr/tcetmp/bin:/usr/lib64/qt-3.3/bin:/opt/ibm/spectrumcomputing/lsf/10.1/linux3.10-glibc2.17-ppc64le-csm/etc:/opt/ibm/spectrumcomputing/lsf/10.1/linux3.10-glibc2.17-ppc64le-csm/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibm/spectrum_mpi/jsm_pmix/bin:/opt/ibm/bb/bin:/opt/ibm/flightlog/bin:/opt/ibutils/bin:/usr/local/apps/pactnew/bin:.:/usr/local/apps/pactnew/bin\r\nMODULEPATH=/usr/tce/modulefiles/MPI/clang/upstream-2019.03.26/spectrum-mpi/rolling-release:/usr/tce/modulefiles/Compiler/clang/upstream-2019.03.26:/usr/tcetmp/modulefiles/Core:/usr/apps/modulefiles:/usr/share/modulefiles/Linux:/usr/share/modulefiles/Core:/usr/share/lmod/lmod/modulefiles/Core:/collab/usr/global/tools/modulefiles/blueos_3_ppc64le_ib_p9/Core\r\nMANPATH=/usr/tce/packages/spectrum-mpi/ibm/spectrum-mpi-rolling-release/share/man:/usr/tce/packages/clang/clang-upstream-2019.03.26/ibm/share/man:/opt/ibm/spectrumcomputing/lsf/10.1/man:/usr/man:/usr/share/man:/usr/local/man:/usr/X11R6/man:/usr/lib64/mvapich/default/man:/opt/ibm/spectrum_mpi/jsm_pmix/share/man\r\nLOADEDMODULES=cuda/9.2.148:StdEnv:clang/upstream-2019.03.26:spectrum-mpi/rolling-release\r\nMPI_ROOT=/usr/tce/packages/spectrum-mpi/ibm/spectrum-mpi-rolling-release\r\nOPAL_PREFIX=/usr/tce/packages/spectrum-mpi/ibm/spectrum-mpi-rolling-release\r\n_LMFILES_=/usr/tcetmp/modulefiles/Core/cuda/9.2.148.lua:/usr/tcetmp/modulefiles/Core/StdEnv.lua:/usr/tcetmp/modulefiles/Core/clang/upstream-2019.03.26.lua:/usr/tce/modulefiles/Compiler/clang/upstream-2019.03.26/spectrum-mpi/rolling-release.lua\r\n\u00a0\u00a0\r\nWith\u00a0spack install scorep\u00a0%clang@9.0.0\u00a0^spectrum-mpi@rolling-release, error:\r\n==>\u00a0pkgconf is already installed in /usr/WS2/chbld/builds/spack/opt/spack/linux-rhel7-ppc64le/clang-9.0.0/pkgconf-1.6.1-xy7hkzksdzyt4jpgwrqc2tq46dvslhx2\r\n==>\u00a0Installing\u00a0zlib\r\n==>\u00a0Searching for binary cache of zlib\r\n==>\u00a0Warning: No Spack mirrors are currently configured\r\n==>\u00a0No binary for zlib found: installing from source\r\n==>\u00a0Using cached archive: /usr/WS2/chbld/builds/spack/var/spack/cache/zlib/zlib-1.2.11.tar.gz\r\n==>\u00a0Staging archive: /var/tmp/spack-stage/chbld/zlib-1.2.11-xtcvohk66qhjwz77cxqaghqb7ga65rpy/zlib-1.2.11.tar.gz\r\n==>\u00a0Created stage in /var/tmp/spack-stage/chbld/zlib-1.2.11-xtcvohk66qhjwz77cxqaghqb7ga65rpy\r\n==>\u00a0No patches needed for zlib\r\n==>\u00a0Building zlib [Package]\r\n==>\u00a0Executing phase: 'install'\r\n==>\u00a0Error: ProcessError: Command exited with status 2:\r\n\u00a0 \u00a0 'make' '-j16'\r\n\u00a0\r\n1 error found in build log:\r\n\u00a0\u00a0 \u00a0 85\u00a0 \u00a0 /usr/WS2/chbld/builds/spack/lib/spack/env/clang/clang -fPIC -O2 -D_LARGEFILE64_SOURCE=1 -o example example.o -L. libz.a\r\n\u00a0\u00a0 \u00a0 86\u00a0 \u00a0 /usr/WS2/chbld/builds/spack/lib/spack/env/clang/clang -fPIC -O2 -D_LARGEFILE64_SOURCE=1 -o minigzip minigzip.o -L. libz.a\r\n\u00a0\u00a0 \u00a0 87\u00a0 \u00a0 /usr/WS2/chbld/builds/spack/lib/spack/env/clang/clang -fPIC -O2 -D_LARGEFILE64_SOURCE=1 -o example64 example64.o -L. libz.a\r\n\u00a0\u00a0 \u00a0 88\u00a0 \u00a0 /usr/WS2/chbld/builds/spack/lib/spack/env/clang/clang -fPIC -O2 -D_LARGEFILE64_SOURCE=1 -o minigzip64 minigzip64.o -L. libz.a\r\n\u00a0\u00a0 \u00a0 89\u00a0 \u00a0 /usr/WS2/chbld/builds/spack/lib/spack/env/clang/clang -shared -Wl,-soname,libz.so.1,--version-script,zlib.map -fPIC -O2 -fPIC -D_LARGEFILE64_SOURCE=1 -o libz.so.1.2.11\u00a0\r\n\u00a0\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 adler32.lo crc32.lo deflate.lo infback.lo inffast.lo inflate.lo inftrees.lo trees.lo zutil.lo compress.lo uncompr.lo gzclose.lo gzlib.lo gzread.lo gzwrite.lo\u00a0 -lc\r\n\u00a0\u00a0 \u00a0 90\u00a0 \u00a0 nvlink fatal \u00a0 : Could not open input file 'adler32.cubin'\r\n\u00a0\u00a0>> 91\u00a0 \u00a0 clang-9: error: nvlink command failed with exit code 1 (use -v to see invocation)\r\n\u00a0\u00a0 \u00a0 92\u00a0 \u00a0 make: *** [Makefile:282: libz.so.1.2.11] Error 1\r\n\u00a0\r\nSee build log for details:\r\n\u00a0 /var/tmp/spack-stage/chbld/zlib-1.2.11-xtcvohk66qhjwz77cxqaghqb7ga65rpy/spack-build-out.txt\r\n\u00a0\r\nHow do I fix this ?\r\n\r\n",
    "performed_via_github_app": null
}