{
    "url": "https://api.github.com/repos/spack/spack/issues/16157",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16157/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16157/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16157/events",
    "html_url": "https://github.com/spack/spack/pull/16157",
    "id": 602810042,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDA1NzI3MTkx",
    "number": 16157,
    "title": "tests: each mock package has its own class",
    "user": {
        "login": "tgamblin",
        "id": 299842,
        "node_id": "MDQ6VXNlcjI5OTg0Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgamblin",
        "html_url": "https://github.com/tgamblin",
        "followers_url": "https://api.github.com/users/tgamblin/followers",
        "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
        "organizations_url": "https://api.github.com/users/tgamblin/orgs",
        "repos_url": "https://api.github.com/users/tgamblin/repos",
        "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgamblin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 456341797,
            "node_id": "MDU6TGFiZWw0NTYzNDE3OTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/tests",
            "name": "tests",
            "color": "b60205",
            "default": false,
            "description": "General test capability(ies)"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-04-19T20:16:51Z",
    "updated_at": "2020-07-06T18:39:53Z",
    "closed_at": "2020-04-24T01:21:50Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/16157",
        "html_url": "https://github.com/spack/spack/pull/16157",
        "diff_url": "https://github.com/spack/spack/pull/16157.diff",
        "patch_url": "https://github.com/spack/spack/pull/16157.patch"
    },
    "body": "This refactor is to support the `features/solver` branch with the new concretizer -- I'm moving it to mainline early since it's more general.\r\n\r\nPackages in Spack are classes, and we need to be able to execute class methods on mock packages.  The previous design used instances of a single MockPackage class; this version gives each package its own class that can spider depenencies.  This allows us to implement class methods like `possible_dependencies()` on mock packages.\r\n\r\nThis design change moves mock package creation into the `MockPackageMultiRepo`, and mock packages now *must* be created from a repo.  This is required for us to mock `possible_dependencies()`, which needs to be able to get dependency packages from the package repo.\r\n\r\n- [x] `MockPackage` is now `MockPacakgeBase`\r\n- [x] `MockPacakgeBase` instances must now be created with\r\n  `MockPackageMultiRepo.add_package()`\r\n- [x] add `possible_dependencies()` method to `MockPacakgeBase`\r\n- [x] refactor tests to use new code structure\r\n- [x] move package mocking infrastructure into `spack.util.mock_package`,\r\n  as it's becoming a more sophisticated class and it gets lots in `conftest.py`",
    "performed_via_github_app": null
}