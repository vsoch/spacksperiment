{
    "url": "https://api.github.com/repos/spack/spack/issues/117",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/117/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/117/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/117/events",
    "html_url": "https://github.com/spack/spack/issues/117",
    "id": 108845088,
    "node_id": "MDU6SXNzdWUxMDg4NDUwODg=",
    "number": 117,
    "title": "develop, GCC : g++ seems to fail at linking time",
    "user": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2015-09-29T10:50:11Z",
    "updated_at": "2015-12-20T21:36:54Z",
    "closed_at": "2015-12-20T21:36:54Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I have issues using the g++ compiler directly from the command line (during spack builds where it's wrapped seems to work fine):\n\n``` bash\n$ cat main.cpp\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n  vector<int> a;\n  a.push_back(2);\n  cout <<\"Hello world!\"<< endl;\n  return0;\n}\n\n$ module av\n\n--------------------------------------------------------------------------/home/culpo/github/spack-llnl/share/spack/modules/unknown_arch ---------------------------------------------------------------------------\n\nbinutils@2.25%gcc@4.9.3-47dzbj6 gcc@4.9.2%gcc@4.9.3-hiw2pof     gmp@6.0.0a%gcc@4.9.3-6i4n3a4    libelf@0.8.13%gcc@4.9.3-hmnzhss mpc@1.0.2%gcc@4.9.3-tekmzvk     mpfr@3.1.3%gcc@4.9.3-5r53uoc\n\n$ module load gcc@4.9.2%gcc@4.9.3-hiw2pof\n\n$ gcc --version\ngcc (GCC)4.9.2\nCopyright(C)2014FreeSoftwareFoundation,Inc.\nThisis free software; see the source for copying conditions.  Thereis NO\nwarranty;not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n$ g++--version\ng++(GCC)4.9.2\nCopyright(C)2014FreeSoftwareFoundation,Inc.\nThisis free software; see the source for copying conditions.  Thereis NO\nwarranty;not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n$ g++ main.cpp\n/home/culpo/github/spack-llnl/opt/spack/unknown_arch/gcc-4.9.3/binutils-2.25-47dzbj6ozowvfpefw7hktxzcmmht5ikz/bin/ld:/tmp/ccGE5tZp.o:undefined reference to symbol '_Unwind_Resume@@GCC_3.0'\n/home/culpo/github/spack-llnl/opt/spack/unknown_arch/gcc-4.9.3/gcc-4.9.2-hiw2pofremm7dvfe6h5jnyeh5kvjfthj/lib64/libgcc_s.so.1: error adding symbols: DSO missing from\ncommand line\ncollect2: error: ld returned 1exit status\n```\n\nThe issue seems related to wrong path passed to the linker (which I assume tries to link with system libraries somehow). In fact:\n\n``` bash\n$ g++ main.cpp /home/culpo/github/spack-llnl/opt/spack/unknown_arch/gcc-4.9.3/gcc-4.9.2-hiw2pofremm7dvfe6h5jnyeh5kvjfthj/lib64/libgcc_s.so.1\n$ ./a.out\nHello world!\n```\n\nI can reproduce the issue on :\n\n``` bash\n$ uname -a\nLinux nuvolari 3.16.0-49-generic #65~14.04.1-Ubuntu SMP Wed Sep 9 10:03:23 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n$ uname -a\nLinux bellatrix 2.6.32-431.29.2.el6.x86_64 #1 SMP Sun Jul 27 15:55:46 EDT 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n",
    "performed_via_github_app": null
}