{
    "url": "https://api.github.com/repos/spack/spack/issues/9869",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9869/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9869/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9869/events",
    "html_url": "https://github.com/spack/spack/issues/9869",
    "id": 381702213,
    "node_id": "MDU6SXNzdWUzODE3MDIyMTM=",
    "number": 9869,
    "title": "vt won't build without zlib ",
    "user": {
        "login": "erimar77",
        "id": 6336162,
        "node_id": "MDQ6VXNlcjYzMzYxNjI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6336162?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erimar77",
        "html_url": "https://github.com/erimar77",
        "followers_url": "https://api.github.com/users/erimar77/followers",
        "following_url": "https://api.github.com/users/erimar77/following{/other_user}",
        "gists_url": "https://api.github.com/users/erimar77/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/erimar77/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/erimar77/subscriptions",
        "organizations_url": "https://api.github.com/users/erimar77/orgs",
        "repos_url": "https://api.github.com/users/erimar77/repos",
        "events_url": "https://api.github.com/users/erimar77/events{/privacy}",
        "received_events_url": "https://api.github.com/users/erimar77/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-11-16T17:58:28Z",
    "updated_at": "2018-11-16T20:52:16Z",
    "closed_at": "2018-11-16T20:52:16Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install vt\r\n==> Installing vt\r\n==> Searching for binary cache of vt\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for vt found: installing from source\r\n==> Using cached archive: /opt/htcf/spack/var/spack/cache/vt/vt-0.577.tar.gz\r\n==> Staging archive: /opt/htcf/spack/var/spack/stage/vt-0.577-lzxiaaae27jvn4j7tykxi7zu6lg3yrmx/0.577.tar.gz\r\n==> Created stage in /opt/htcf/spack/var/spack/stage/vt-0.577-lzxiaaae27jvn4j7tykxi7zu6lg3yrmx\r\n==> No patches needed for vt\r\n==> Building vt [MakefilePackage]\r\n==> Executing phase: 'edit'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j24'\r\n\r\n35 errors found in build log:\r\n     35     gcc -g -Wall -O2 -I.  -c -o knetfile.o knetfile.c\r\n     36     gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c dnbeta.c -o dnbeta.o\r\n     37     gcc -g -Wall -O2 -I.  -c -o kstring.o kstring.c\r\n     38     In file included from hts_utils.h:43:0,\r\n     39                      from bcf_ordered_writer.h:39,\r\n     40                      from bcf_ordered_writer.cpp:24:\r\n  >> 41     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     42      #include <zlib.h>\r\n     43               ^~~~~~~~\r\n     44     compilation terminated.\r\n     45     In file included from hts_utils.h:43:0,\r\n     46                      from bcf_genotyping_buffered_reader.h:30,\r\n     47                      from bcf_genotyping_buffered_reader.cpp:24:\r\n  >> 48     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     49      #include <zlib.h>\r\n     50               ^~~~~~~~\r\n     51     compilation terminated.\r\n     52     Makefile:137: recipe for target 'bcf_ordered_writer.o' failed\r\n  >> 53     make: *** [bcf_ordered_writer.o] Error 1\r\n     54     make: *** Waiting for unfinished jobs....\r\n     55     gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c i1mach.c -o i1mach.o\r\n     56     Makefile:137: recipe for target 'bcf_genotyping_buffered_reader.o' failed\r\n  >> 57     make: *** [bcf_genotyping_buffered_reader.o] Error 1\r\n     58     gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c pnbinom.c -o pnbinom.o\r\n     59     In file included from hts_utils.h:43:0,\r\n     60                      from bcf_ordered_reader.h:40,\r\n     61                      from annotate_indels.h:28,\r\n     62                      from annotate_indels.cpp:24:\r\n  >> 63     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     64      #include <zlib.h>\r\n     65               ^~~~~~~~\r\n     66     compilation terminated.\r\n     67     In file included from hts_utils.h:43:0,\r\n     68                      from candidate_motif_picker.h:36,\r\n     69                      from candidate_motif_picker.cpp:24:\r\n  >> 70     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     71      #include <zlib.h>\r\n     72               ^~~~~~~~\r\n     73     compilation terminated.\r\n     74     In file included from hts_utils.h:43:0,\r\n     75                      from candidate_region_extractor.h:36,\r\n     76                      from candidate_region_extractor.cpp:24:\r\n  >> 77     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     78      #include <zlib.h>\r\n     79               ^~~~~~~~\r\n     80     compilation terminated.\r\n     81     In file included from hts_utils.h:43:0,\r\n     82                      from bcf_ordered_reader.h:40,\r\n     83                      from cat.h:27,\r\n     84                      from cat.cpp:24:\r\n  >> 85     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     86      #include <zlib.h>\r\n     87               ^~~~~~~~\r\n     88     compilation terminated.\r\n     89     In file included from hts_utils.h:43:0,\r\n     90                      from augmented_bam_record.h:37,\r\n     91                      from augmented_bam_record.cpp:24:\r\n  >> 92     ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     93      #include <zlib.h>\r\n     94               ^~~~~~~~\r\n     95     compilation terminated.\r\n     96     Makefile:137: recipe for target 'annotate_indels.o' failed\r\n  >> 97     make: *** [annotate_indels.o] Error 1\r\n     98     gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_context.o -c pcre2_context.c\r\n     99     In file included from hts_utils.h:43:0,\r\n     100                     from bcf_ordered_reader.h:40,\r\n     101                     from bcf_ordered_reader.cpp:24:\r\n  >> 102    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     103     #include <zlib.h>\r\n     104              ^~~~~~~~\r\n     105    compilation terminated.\r\n     106    Makefile:137: recipe for target 'candidate_motif_picker.o' failed\r\n  >> 107    make: *** [candidate_motif_picker.o] Error 1\r\n     108    Makefile:137: recipe for target 'candidate_region_extractor.o' failed\r\n  >> 109    make: *** [candidate_region_extractor.o] Error 1\r\n     110    echo '/* Empty config.h generated by Makefile */' > config.h\r\n     111    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_dfa_match.o -c pcre2_dfa_match.c\r\n     112    Makefile:137: recipe for target 'augmented_bam_record.o' failed\r\n  >> 113    make: *** [augmented_bam_record.o] Error 1\r\n     114    Makefile:137: recipe for target 'cat.o' failed\r\n  >> 115    make: *** [cat.o] Error 1\r\n     116    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_error.o -c pcre2_error.c\r\n     117    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_jit_compile.o -c pcre2_jit_compile.c\r\n     118    Makefile:137: recipe for target 'bcf_ordered_reader.o' failed\r\n  >> 119    make: *** [bcf_ordered_reader.o] Error 1\r\n     120    echo '#define HTS_VERSION \"1.2.1\"' > version.h\r\n     121    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c qlnorm.c -o qlnorm.o\r\n     122    In file included from hts_utils.h:43:0,\r\n     123                     from genome_interval.h:36,\r\n     124                     from bcf_synced_reader.h:40,\r\n     125                     from annotate_dbsnp_rsid.h:32,\r\n     126                     from annotate_dbsnp_rsid.cpp:24:\r\n  >> 127    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     128     #include <zlib.h>\r\n     129              ^~~~~~~~\r\n     130    compilation terminated.\r\n     131    In file included from hts_utils.h:43:0,\r\n     132                     from genome_interval.h:36,\r\n     133                     from bam_ordered_reader.h:32,\r\n     134                     from bam_ordered_reader.cpp:24:\r\n  >> 135    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     136     #include <zlib.h>\r\n     137              ^~~~~~~~\r\n     138    compilation terminated.\r\n     139    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_maketables.o -c pcre2_maketables.c\r\n     140    In file included from hts_utils.h:43:0,\r\n     141                     from genome_interval.h:36,\r\n     142                     from bcf_synced_reader.h:40,\r\n     143                     from annotate_1000g.h:32,\r\n     144                     from annotate_1000g.cpp:24:\r\n  >> 145    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     146     #include <zlib.h>\r\n     147              ^~~~~~~~\r\n     148    compilation terminated.\r\n     149    In file included from hts_utils.h:43:0,\r\n     150                     from genome_interval.h:36,\r\n     151                     from bcf_synced_reader.h:40,\r\n     152                     from bcf_synced_reader.cpp:24:\r\n  >> 153    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     154     #include <zlib.h>\r\n     155              ^~~~~~~~\r\n     156    compilation terminated.\r\n     157    In file included from hts_utils.h:43:0,\r\n     158                     from bcf_ordered_reader.h:40,\r\n     159                     from annotate_variants.h:41,\r\n     160                     from annotate_variants.cpp:24:\r\n  >> 161    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     162     #include <zlib.h>\r\n     163              ^~~~~~~~\r\n     164    compilation terminated.\r\n     165    Makefile:137: recipe for target 'annotate_dbsnp_rsid.o' failed\r\n  >> 166    make: *** [annotate_dbsnp_rsid.o] Error 1\r\n     167    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_match.o -c pcre2_match.c\r\n     168    Makefile:137: recipe for target 'bam_ordered_reader.o' failed\r\n  >> 169    make: *** [bam_ordered_reader.o] Error 1\r\n     170    gcc -g -Wall -O2 -I.  -c -o bgzf.o bgzf.c\r\n     171    In file included from hts_utils.h:43:0,\r\n     172                     from bcf_ordered_reader.h:40,\r\n     173                     from annotate_regions.h:41,\r\n     174                     from annotate_regions.cpp:24:\r\n  >> 175    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     176     #include <zlib.h>\r\n     177              ^~~~~~~~\r\n     178    compilation terminated.\r\n     179    Makefile:137: recipe for target 'annotate_1000g.o' failed\r\n  >> 180    make: *** [annotate_1000g.o] Error 1\r\n     181    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c rgeom.c -o rgeom.o\r\n     182    Makefile:137: recipe for target 'bcf_synced_reader.o' failed\r\n  >> 183    make: *** [bcf_synced_reader.o] Error 1\r\n     184    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c bessel_i.c -o bessel_i.o\r\n     185    Makefile:137: recipe for target 'annotate_variants.o' failed\r\n  >> 186    make: *** [annotate_variants.o] Error 1\r\n     187    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c dnbinom.c -o dnbinom.o\r\n     188    Makefile:137: recipe for target 'annotate_regions.o' failed\r\n  >> 189    make: *** [annotate_regions.o] Error 1\r\n     190    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c imax2.c -o imax2.o\r\n     191    In file included from hts_utils.h:43:0,\r\n     192                     from program.h:33,\r\n     193                     from align.h:27,\r\n     194                     from align.cpp:24:\r\n  >> 195    ./lib/htslib/htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     196     #include <zlib.h>\r\n     197              ^~~~~~~~\r\n     198    compilation terminated.\r\n     199    Makefile:137: recipe for target 'align.o' failed\r\n  >> 200    make: *** [align.o] Error 1\r\n     201    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c pnchisq.c -o pnchisq.o\r\n     202    In file included from bgzf.c:39:0:\r\n  >> 203    htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     204     #include <zlib.h>\r\n     205              ^~~~~~~~\r\n# Copyright 2013-2018 Lawrence Livermore National Security, LLC and other\r\n     206    compilation terminated.\r\n     207    gcc -g -Wall -O2 -I.  -c -o faidx.o faidx.c\r\n     208    Makefile:134: recipe for target 'bgzf.o' failed\r\n  >> 209    make[1]: *** [bgzf.o] Error 1\r\n     210    make[1]: *** Waiting for unfinished jobs....\r\n     211    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c qlogis.c -o qlogis.o\r\n     212    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_match_data.o -c pcre2_match_data.c\r\n     213    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_newline.o -c pcre2_newline.c\r\n     214    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_ord2utf.o -c pcre2_ord2utf.c\r\n     215    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c rhyper.c -o rhyper.o\r\n     216    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c bessel_j.c -o bessel_j.o\r\n     217    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c dnchisq.c -o dnchisq.o\r\n     218    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c imin2.c -o imin2.o\r\n     219    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c pnf.c -o pnf.o\r\n     220    In file included from faidx.c:34:0:\r\n  >> 221    htslib/bgzf.h:34:10: fatal error: zlib.h: No such file or directory\r\n     222     #include <zlib.h>\r\n     223              ^~~~~~~~\r\n     224    compilation terminated.\r\n     225    Makefile:134: recipe for target 'faidx.o' failed\r\n  >> 226    make[1]: *** [faidx.o] Error 1\r\n     227    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c qnbeta.c -o qnbeta.o\r\n     228    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c rlnorm.c -o rlnorm.o\r\n     229    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_pattern_info.o -c pcre2_pattern_info.c\r\n     230    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_string_utils.o -c pcre2_string_utils.c\r\n     231    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c bessel_k.c -o bessel_k.o\r\n     232    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c dnf.c -o dnf.o\r\n\r\n     ...\r\n\r\n     247      return log(gammafn(p) * (gammafn(q) / gammafn(p + q)));\r\n     248      ^~~~~~\r\n     249    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_ucd.o -c pcre2_ucd.c\r\n     250    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_valid_utf.o -c pcre2_valid_utf.c\r\n     251    make[1]: Leaving directory '/tmp/support/spack-stage/spack-stage-nS2VZp/vt-0.577/lib/htslib'\r\n     252    Makefile:123: recipe for target 'lib/htslib/libhts.a' failed\r\n  >> 253    make: *** [lib/htslib/libhts.a] Error 1\r\n     254    gcc -g -O3 -DHAVE_CONFIG_H -DPCRE2_CODE_UNIT_WIDTH=8 -I. -o pcre2_xclass.o -c pcre2_xclass.c\r\n     255    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c dnorm.c -o dnorm.o\r\n     256    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c lgamma.c -o lgamma.o\r\n     257    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c pnt.c -o pnt.o\r\n     258    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c qnchisq.c -o qnchisq.o\r\n     259    gcc  -Wall -O3 -fPIC -DMATHLIB_STANDALONE   -std=gnu99 -IRmath -DNDEBUG -c rmultinom.c -o rmultinom.o\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux n220 4.15.0-38-generic #41-Ubuntu SMP Wed Oct 10 10:59:38 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tUbuntu 18.04.1 LTS\r\n``` ",
    "performed_via_github_app": null
}