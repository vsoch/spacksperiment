{
    "url": "https://api.github.com/repos/spack/spack/issues/9576",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9576/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9576/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9576/events",
    "html_url": "https://github.com/spack/spack/issues/9576",
    "id": 371538287,
    "node_id": "MDU6SXNzdWUzNzE1MzgyODc=",
    "number": 9576,
    "title": "Installation issue: cuda@9.2.88 %gcc@4.8.5 ",
    "user": {
        "login": "samfux84",
        "id": 11944875,
        "node_id": "MDQ6VXNlcjExOTQ0ODc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11944875?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/samfux84",
        "html_url": "https://github.com/samfux84",
        "followers_url": "https://api.github.com/users/samfux84/followers",
        "following_url": "https://api.github.com/users/samfux84/following{/other_user}",
        "gists_url": "https://api.github.com/users/samfux84/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/samfux84/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/samfux84/subscriptions",
        "organizations_url": "https://api.github.com/users/samfux84/orgs",
        "repos_url": "https://api.github.com/users/samfux84/repos",
        "events_url": "https://api.github.com/users/samfux84/events{/privacy}",
        "received_events_url": "https://api.github.com/users/samfux84/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-10-18T13:45:26Z",
    "updated_at": "2018-10-22T08:47:34Z",
    "closed_at": "2018-10-22T08:47:32Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```\r\n[spackapps@lo-login-01 scripts]$ spack install cuda@9.2.88 %gcc@4.8.5 arch=linux-centos7-x86-64\r\n==> Installing cuda\r\n==> Fetching https://developer.nvidia.com/compute/cuda/9.2/Prod/local_installers/cuda_9.2.88_396.26_linux\r\n######################################################################## 100.0%\r\n==> Already staged cuda-9.2.88-pquxqrclfyimmjuz5l6jxntzrnao3d2y in /cluster/apps/spack/var/spack/stage/cuda-9.2.88-pquxqrclfyimmjuz5l6jxntzrnao3d2y\r\n==> Ran patch() for cuda\r\n==> Building cuda [Package]\r\n==> Executing phase : 'install'\r\n==> Error: IndexError: list index out of range\r\n/cluster/apps/spack/var/spack/repos/builtin/packages/cuda/package.py:59, in install:\r\n     58       def install(self, spec, prefix):\r\n  >> 59           runfile = glob(join_path(self.stage.path, 'cuda*run'))[0]\r\n     60           chmod = which('chmod')\r\n     61           chmod('+x', runfile)\r\n     62           runfile = which(runfile)\r\n     63   \r\n     64           # Note: NVIDIA does not officially support many newer versions of\r\n     65           # compilers.  For example, on CentOS 6, you must use GCC 4.4.7 or\r\n     66           # older. See:\r\n     67           # http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#system-requirements\r\n     68           # for details.\r\n     69   \r\n     70           runfile(\r\n     71               '--silent',         # disable interactive prompts\r\n     72               '--verbose',        # create verbose log file\r\n     73               '--override',       # override compiler version checks\r\n     74               '--toolkit',        # install CUDA Toolkit\r\n     75               '--toolkitpath=%s' % prefix\r\n     76           )\r\n\r\nSee build log for details:\r\n  /dev/shm/spackapps/spack-stage/spack-stage-2mMUcE/spack-build.out\r\n[spackapps@lo-login-01 scripts]$ vi /dev/shm/spackapps/spack-stage/spack-stage-2mMUcE/spack-build.out\r\n[spackapps@lo-login-01 scripts]$\r\n```\r\n\r\nThe spack-build.out file is empty.\r\n\r\n### Platform and user environment\r\n\r\n```\r\n[spackapps@lo-login-01 scripts]$ uname -a\r\nLinux lo-login-01 3.10.0-862.14.4.el7.x86_64 #1 SMP Wed Sep 26 15:12:11 UTC 2018 x86_64 GNU/Linux\r\n[spackapps@lo-login-01 scripts]$ lsb_release -d\r\nDescription:    CentOS Linux release 7.5.1804 (Core)\r\n``` \r\n\r\n### Additional information\r\n\r\n```\r\n[spackapps@lo-login-01 scripts]$ spack spec --install-status cuda@9.2.88 %gcc@4.8.5 arch=linxu-centos7-x86_64\r\nInput spec\r\n--------------------------------\r\n     cuda@9.2.88%gcc@4.8.5 arch=linux-centos7-x86_64 \r\n\r\nNormalized\r\n--------------------------------\r\n     cuda@9.2.88%gcc@4.8.5 arch=linux-centos7-x86_64 \r\n\r\nConcretized\r\n--------------------------------\r\n     cuda@9.2.88%gcc@4.8.5 cflags=\"-ftree-vectorize -O2 -march=core-avx2 -fPIC -mavx2\" cppflags=\"-ftree-vectorize -O2 -march=core-avx2 -fPIC -mavx2\" cxxflags=\"-ftree-vectorize -O2 -march=core-avx2 -fPIC -mavx2\"  arch=linux-centos7-x86_64 \r\n\r\n[spackapps@lo-login-01 scripts]$ \r\n\r\n```\r\n\r\n```\r\n[spackapps@lo-login-01 scripts]$ spack -d install -j 1 cuda@9.2.88 %gcc@4.8.5 arch=linux-centos7-x86_64\r\n==> Reading config file /cluster/apps/spack/etc/spack/defaults/packages.yaml\r\n==> Reading config file /cluster/home/spackapps/.spack/linux/packages.yaml\r\n==> READ LOCK: /cluster/home/spackapps/.spack/cache/providers/.builtin-index.yaml.lock[0:0] [Acquiring]\r\n==> READ LOCK: /cluster/home/spackapps/.spack/cache/providers/.builtin-index.yaml.lock[0:0] [Released]\r\n==> READ LOCK: /cluster/home/spackapps/.spack/cache/providers/.hpc-index.yaml.lock[0:0] [Acquiring]\r\n==> READ LOCK: /cluster/home/spackapps/.spack/cache/providers/.hpc-index.yaml.lock[0:0] [Released]\r\n==> Reading config file /cluster/home/spackapps/.spack/linux/compilers.yaml\r\n==> READ LOCK: /cluster/spack/apps/.spack-db/prefix_lock[4473407184731310179:1] [Acquiring]\r\n==> READ LOCK: /cluster/spack/apps/.spack-db/prefix_lock[4473407184731310179:1] [Released]\r\n==> Installing cuda dependencies\r\n==> Installing cuda\r\n==> Using cached archive: /cluster/apps/spack/var/spack/cache/cuda/cuda-9.2.88.None\r\n==> Already staged cuda-9.2.88-pquxqrclfyimmjuz5l6jxntzrnao3d2y in /cluster/apps/spack/var/spack/stage/cuda-9.2.88-pquxqrclfyimmjuz5l6jxntzrnao3d2y\r\n==> Already patched cuda\r\n==> Building cuda [Package]\r\n==> WRITE LOCK: /cluster/apps/spack/var/spack/stage/.lock[3072098670558868349:1] [Acquiring]\r\n==> WRITE LOCK: /cluster/spack/apps/.spack-db/prefix_lock[4473407184731310179:1] [Acquiring]\r\n==> Executing phase : 'install'\r\n==> WRITE LOCK: /cluster/spack/apps/.spack-db/prefix_lock[4473407184731310179:1] [Released]\r\n==> WRITE LOCK: /cluster/apps/spack/var/spack/stage/.lock[3072098670558868349:1] [Released]\r\n==> Error: IndexError: list index out of range\r\n/cluster/apps/spack/var/spack/repos/builtin/packages/cuda/package.py:59, in install:\r\n     58       def install(self, spec, prefix):\r\n  >> 59           runfile = glob(join_path(self.stage.path, 'cuda*run'))[0]\r\n     60           chmod = which('chmod')\r\n     61           chmod('+x', runfile)\r\n     62           runfile = which(runfile)\r\n     63   \r\n     64           # Note: NVIDIA does not officially support many newer versions of\r\n     65           # compilers.  For example, on CentOS 6, you must use GCC 4.4.7 or\r\n     66           # older. See:\r\n     67           # http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#system-requirements\r\n     68           # for details.\r\n     69   \r\n     70           runfile(\r\n     71               '--silent',         # disable interactive prompts\r\n     72               '--verbose',        # create verbose log file\r\n     73               '--override',       # override compiler version checks\r\n     74               '--toolkit',        # install CUDA Toolkit\r\n     75               '--toolkitpath=%s' % prefix\r\n     76           )\r\n\r\nSee build log for details:\r\n  /dev/shm/spackapps/spack-stage/spack-stage-2mMUcE/spack-build.out\r\nTraceback (most recent call last):\r\n  File \"/cluster/apps/spack/lib/spack/spack/build_environment.py\", line 593, in child_execution\r\n    function(input_stream)\r\n  File \"/cluster/apps/spack/lib/spack/spack/package.py\", line 1305, in build_process\r\n    self.spec, self.prefix)\r\n  File \"/cluster/apps/spack/lib/spack/spack/package.py\", line 109, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/cluster/apps/spack/var/spack/repos/builtin/packages/cuda/package.py\", line 59, in install\r\n    runfile = glob(join_path(self.stage.path, 'cuda*run'))[0]\r\nIndexError: list index out of range\r\n\r\n```\r\n\r\nI am using a maybe outdated version of spack, therefore I am not sure if the problem is related to the package itself or to my old spack installation. So far installing the cuda package worked fine. I only see the problem with version 9.2.88:\r\n\r\n```\r\n[spackapps@lo-login-01 scripts]$ spack find cuda\r\n==> 10 installed packages.\r\n-- linux-centos7-x86_64 / gcc@4.8.5 -----------------------------\r\ncuda@8.0.61  cuda@9.0.176\r\n\r\n-- linux-centos7-x86_64 / gcc@5.4.0 -----------------------------\r\ncuda@8.0.61  cuda@9.0.176\r\n\r\n-- linux-centos7-x86_64 / gcc@6.3.0 -----------------------------\r\ncuda@8.0.61  cuda@9.0.176\r\n\r\n-- linux-centos7-x86_64 / gcc@7.1.0 -----------------------------\r\ncuda@8.0.61  cuda@9.0.176\r\n\r\n-- linux-centos7-x86_64 / intel@18.0.1 --------------------------\r\ncuda@8.0.61  cuda@9.0.176\r\n[spackapps@lo-login-01 scripts]$\r\n```\r\n\r\n\r\n",
    "performed_via_github_app": null
}