{
    "url": "https://api.github.com/repos/spack/spack/issues/21996",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21996/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21996/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21996/events",
    "html_url": "https://github.com/spack/spack/pull/21996",
    "id": 817569020,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTgxMDQwMjMz",
    "number": 21996,
    "title": "Allow relative paths in config files (relative to file dirname)",
    "user": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446615135,
            "node_id": "MDU6TGFiZWw0NDY2MTUxMzU=",
            "url": "https://api.github.com/repos/spack/spack/labels/configuration",
            "name": "configuration",
            "color": "bfd4f2",
            "default": false,
            "description": null
        },
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-02-26T18:23:17Z",
    "updated_at": "2021-03-05T06:29:49Z",
    "closed_at": "2021-03-05T06:29:49Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/21996",
        "html_url": "https://github.com/spack/spack/pull/21996",
        "diff_url": "https://github.com/spack/spack/pull/21996.diff",
        "patch_url": "https://github.com/spack/spack/pull/21996.patch"
    },
    "body": "This allows users to use relative paths for mirrors and repos and other things that may be part of a Spack environment.  There are two ways to do it.\r\n\r\n1. Relative to the file\r\n\r\n    ```yaml\r\n    spack:\r\n      repos:\r\n      - local_dir/my_repository\r\n    ```\r\n\r\n    Which will refer to a repository like this in the directory where `spack.yaml` lives:\r\n\r\n    ```\r\n    env/\r\n      spack.yaml  <-- the config file above\r\n      local_dir/\r\n        my_repository/  <-- this repository\r\n          repo.yaml\r\n          packages/\r\n    ```\r\n\r\n2. Relative to the environment\r\n\r\n    ```yaml\r\n    spack:\r\n      repos:\r\n      - $env/local_dir/my_repository\r\n    ```\r\n\r\nBoth of these would refer to the same directory, but they differ for included files.  For example, if you had this layout:\r\n\r\n```\r\nenv/\r\n    spack.yaml\r\n    repository/\r\n    includes/\r\n        repos.yaml\r\n        repository/\r\n```\r\n\r\nAnd this `spack.yaml`:\r\n\r\n```yaml\r\nspack:\r\n    include: includes/repos.yaml\r\n```\r\n\r\nThen, these two `repos.yaml` files are functionally different:\r\n\r\n```yaml\r\nrepos:\r\n    - $env/repository    # refers to env/repository/ above\r\n\r\nrepos:\r\n    - repository    # refers to env/includes/repository/ above\r\n```\r\n    \r\nThe $env variable will not be evaluated if there is no active environment. This generally means that it should not be used outside of an environment's spack.yaml file. However, if other aspects of your workflow guarantee that there is always an active environment, it may be used in other config scopes.",
    "performed_via_github_app": null
}