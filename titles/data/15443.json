{
    "url": "https://api.github.com/repos/spack/spack/issues/15443",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15443/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15443/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15443/events",
    "html_url": "https://github.com/spack/spack/issues/15443",
    "id": 579347902,
    "node_id": "MDU6SXNzdWU1NzkzNDc5MDI=",
    "number": 15443,
    "title": "Finer selection of virtual providers in a DAG",
    "user": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        },
        {
            "id": 446630556,
            "node_id": "MDU6TGFiZWw0NDY2MzA1NTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/specs",
            "name": "specs",
            "color": "b60205",
            "default": false,
            "description": null
        },
        {
            "id": 456144594,
            "node_id": "MDU6TGFiZWw0NTYxNDQ1OTQ=",
            "url": "https://api.github.com/repos/spack/spack/labels/virtual-dependencies",
            "name": "virtual-dependencies",
            "color": "0052cc",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-03-11T15:26:22Z",
    "updated_at": "2020-03-13T09:27:29Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "As a user I want to be able to use a package only for a subset of the virtual dependencies it provides so that I can select other providers for whatever virtual dependency is not used.\r\n\r\n### Rationale\r\nWhen a spec providing multiple virtual dependencies is present in a DAG Spack enforces the use of all of them, if required by a dependee. To make a concrete example consider  `intel-parallel-studio`: \r\n\r\nhttps://github.com/spack/spack/blob/20c77cade532844c758290c242536436cecfe922/var/spack/repos/builtin/packages/intel-parallel-studio/package.py#L176-L185\r\n\r\nThis package provides multiple virtual dependencies and it would be currently impossible to require the build of a spec which uses:\r\n1. `intel-parallel-studio` to satisfy `mpi` \r\n2. `openblas` to satisfy `lapack`\r\n\r\nThis proposal aims at solving this issue by introducing a syntax to specify the binding of a virtual dependency to a particular provider.\r\n\r\n### Description\r\nSpack should be extended to allow specs like:\r\n```\r\ndealii ^mpi=intel-parallel-studio ^lapack=openblas\r\n```\r\nto mean that `dealii` should be compiled to use the `mpi` from `intel-parallel-studio` and the `lapack` from `openblas`. More in details:\r\n\r\n1. The provider can be specified as an abstract spec (in which case some concretizer heuristics will kick-in) or as a concrete spec by hash.\r\n2. Packages need a way to specify that a set of virtual dependencies needs to be used together (e.g. `openblas` provides both `lapack` and `blas` but within a unique library)\r\n\r\n### Additional information\r\nThis modification will be instrumental to move towards compilers as regular dependencies, since compilers can be modeled as providers of languages and we want to retain the ability to mix them (e.g. `clang` for C and C++, `gcc` for Fortran):\r\n```\r\nhdf5 %cc,cxx=clang %fortran=gcc\r\n```\r\n\r\n### General information\r\n\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}