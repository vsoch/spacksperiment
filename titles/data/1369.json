{
    "url": "https://api.github.com/repos/spack/spack/issues/1369",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/1369/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/1369/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/1369/events",
    "html_url": "https://github.com/spack/spack/issues/1369",
    "id": 167490143,
    "node_id": "MDU6SXNzdWUxNjc0OTAxNDM=",
    "number": 1369,
    "title": "Provide a \"pipe-able\" spack find output format.",
    "user": {
        "login": "hartzell",
        "id": 312978,
        "node_id": "MDQ6VXNlcjMxMjk3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/312978?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hartzell",
        "html_url": "https://github.com/hartzell",
        "followers_url": "https://api.github.com/users/hartzell/followers",
        "following_url": "https://api.github.com/users/hartzell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hartzell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hartzell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hartzell/subscriptions",
        "organizations_url": "https://api.github.com/users/hartzell/orgs",
        "repos_url": "https://api.github.com/users/hartzell/repos",
        "events_url": "https://api.github.com/users/hartzell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hartzell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 513710280,
            "node_id": "MDU6TGFiZWw1MTM3MTAyODA=",
            "url": "https://api.github.com/repos/spack/spack/labels/color",
            "name": "color",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-07-25T23:39:01Z",
    "updated_at": "2017-07-31T19:58:35Z",
    "closed_at": "2017-07-31T19:57:48Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I'd like to be able to pipe the output of `spack find ...` into other commands, but the colorization gets in the way, as do the compiler headers.\n\nMy naive use case was to play with `spack view`, linking all of the things that I've built with _%gcc@5.4.0_ but not _%gcc@4.8.5_ and only one of the several perls I have installed and `grep -v ...` a couple of things.\n### colorization\n\nI thought perhaps short output might not be colored or .... but it seems like `color=True` is hardwired in _lib/spack/spack/cmd/__init__.py_.\n\n[This](http://www.commandlinefu.com/commands/view/3584/remove-color-codes-special-characters-with-sed) (thanks Google!) works but is not very appealing\n\n```\nspack find | sed -r \"s/\\x1B\\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g\"\n```\n\nI could imagine adding a --no_color option to the find subcommand, or teaching the find subcommand to not colorize the output if it's writing to a pipe (not writing to a tty).\n\nWould that be generally useful?\n### compiler headers\n\nRather than have a header separating the packages by compiler, it seems like would be useful to have a way to just include them in the spec: `tcl@8.6.5%gcc@5.4.0`, which is what is useful for e.g. `spec view add`.\n### Useful?\n\nPerhaps if it detects that it's writing to a pipe (not a tty) it could drop the headers and produce a single uncolored line with compiler info as part of the spec.  Options that produce multi word output (e.g. `-l`) would continue to (people can `perl -lane ...` it or whatever strikes their fancy).\n\nIf this seems useful and someone will mentor my Python, I'm happy to take a swing at it.\n",
    "performed_via_github_app": null
}