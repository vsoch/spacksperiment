{
    "url": "https://api.github.com/repos/spack/spack/issues/24450",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/24450/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/24450/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/24450/events",
    "html_url": "https://github.com/spack/spack/issues/24450",
    "id": 926416520,
    "node_id": "MDU6SXNzdWU5MjY0MTY1MjA=",
    "number": 24450,
    "title": "Installation issue: clingo won't build on rhel8",
    "user": {
        "login": "sethrj",
        "id": 741229,
        "node_id": "MDQ6VXNlcjc0MTIyOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/741229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sethrj",
        "html_url": "https://github.com/sethrj",
        "followers_url": "https://api.github.com/users/sethrj/followers",
        "following_url": "https://api.github.com/users/sethrj/following{/other_user}",
        "gists_url": "https://api.github.com/users/sethrj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sethrj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sethrj/subscriptions",
        "organizations_url": "https://api.github.com/users/sethrj/orgs",
        "repos_url": "https://api.github.com/users/sethrj/repos",
        "events_url": "https://api.github.com/users/sethrj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sethrj/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2542559486,
            "node_id": "MDU6TGFiZWwyNTQyNTU5NDg2",
            "url": "https://api.github.com/repos/spack/spack/labels/bootstrap",
            "name": "bootstrap",
            "color": "743ec4",
            "default": false,
            "description": "Issues occurring while spack builds its own dependencies."
        },
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-06-21T16:57:51Z",
    "updated_at": "2021-06-22T14:30:39Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Trying to use clingo on rhel8 with gcc 8.3 installed through the system package provider.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack find -b\r\n==> Showing internal bootstrap store at \"/home/s3j/.spack/bootstrap/store\"\r\n==> 15 installed packages\r\n-- linux-rhel8-x86_64 / gcc@8.3.1 -------------------------------\r\nberkeley-db@18.1.40  cmake@3.20.3   gdbm@1.19      libsigsegv@2.13  ncurses@6.2     perl@5.34.0    re2c@1.2.1    zlib@1.2.11\r\nbison@3.7.6          diffutils@3.7  libiconv@1.16  m4@1.4.19        openssl@1.1.1k  pkgconf@1.7.4  readline@8.1\r\n$ spack solve zlib\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/libiconv-1.16-eovfptqgoevl6gbuiiyhftvw37refjqt\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/libsigsegv-2.13-qrt5iqfwmvyau3qd7kriuejxi6nu4p5p\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/berkeley-db-18.1.40-hehtgcsh3q7zgedcegu7hmi2567rgszs\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/pkgconf-1.7.4-nueqgwm4c7it36pvhxs4x4lgcrda56tf\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/zlib-1.2.11-xqjeqtupcfqqqlaw5ehjlfjjly7zoe3b\r\n[+] /projects/spack/opt/spack/gcc-8.3.1/python/nebkli6 (external python-3.8-3h77chnfvzfaatvkl4g6pkhqkt56ghtq)\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/re2c-1.2.1-43fryz3s27sm7qifg6hog7ozl3dvcnt4\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/diffutils-3.7-plskmdavt46a43qpdrddkmnbs7ubjvtt\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/m4-1.4.19-huzbxrt35xu5fr663j6edplbiwdxbyar\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/ncurses-6.2-tpaqywgi3r7p5f63emxcmpb4ysecgr3g\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/readline-8.1-d7jrl65krlltqovoywp7slaxuvwu3cse\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/gdbm-1.19-jwxbrshhi5xffsub35vbjmwxzg5he4vu\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/perl-5.34.0-dt5v7fy5smkbprv6alljhjdqgmbfi3cy\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/bison-3.7.6-xgsrixaol5mfixde6qfmo4lemjvgu3zj\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/openssl-1.1.1k-hey4lyw73kzqdjtpyt5uotiz7rxvziel\r\n[+] /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/cmake-3.20.3-cdl7x2lzwjysfhrhz23abh6pk5g4z5wq\r\n==> Installing clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g\r\n==> No binary for clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g found: installing from source\r\n==> Using cached archive: /projects/spack/var/spack/cache/_source-cache/git//potassco/clingo.git/2a025667090d71b2c9dce60fe924feb6bde8f667.tar.gz\r\n==> Warning: Fetching from mirror without a checksum!\r\n  This package is normally checked out from a version control system, but it has been archived on a spack mirror.  This means we cannot know a checksum for the tarball in advance. Be sure that your connection to this mirror is secure!\r\n==> Already patched clingo-bootstrap\r\n==> clingo-bootstrap: Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:STRING=/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g' '-DCMAKE_BUILD_TYPE:STRING=Release' '-DCMAKE_INTERPROCEDURAL_OPTIMIZATION:BOOL=OFF' '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=OFF' '-DCMAKE_INSTALL_RPATH:STRING=/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/lib;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/lib64;/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6/lib' '-DCMAKE_PREFIX_PATH:STRING=/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/bison-3.7.6-xgsrixaol5mfixde6qfmo4lemjvgu3zj;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/cmake-3.20.3-cdl7x2lzwjysfhrhz23abh6pk5g4z5wq;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/re2c-1.2.1-43fryz3s27sm7qifg6hog7ozl3dvcnt4;/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6' '-DCLINGO_REQUIRE_PYTHON=ON' '-DCLINGO_BUILD_WITH_PYTHON=ON' '-DPYCLINGO_USER_INSTALL=OFF' '-DPYCLINGO_USE_INSTALL_PREFIX=ON' '-DCLINGO_BUILD_WITH_LUA=OFF' '-DCLINGO_BUILD_PY_SHARED:STRING=OFF' '-DPython_EXECUTABLE:STRING=/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6/bin/python3.8' '-DPython_INCLUDE_DIR:STRING=/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6/include/python3.8' '-DCLINGO_BUILD_APPS:STRING=OFF' '/tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-src'\r\n\r\n4 errors found in build log:\r\n     3     ==> [2021-06-21-12:48:38.693436] 'cmake' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:STRING=/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-\r\n           8.3.1/clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g' '-DCMAKE_BUILD_TYPE:STRING=Release' '-DCMAKE_INTERPROCEDURAL_OPTIMIZATION:BOOL=OFF' '-D\r\n           CMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=OFF' '-DCMAKE_INSTALL_RPATH:STRING=/home/s3j/.spack/bootstrap/store/linux-rh\r\n           el8-x86_64/gcc-8.3.1/clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/lib;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/clingo-\r\n           bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/lib64;/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6/lib' '-DCMAKE_PREFIX_PATH:STRING=/home/s3j/.\r\n           spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/bison-3.7.6-xgsrixaol5mfixde6qfmo4lemjvgu3zj;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gc\r\n           c-8.3.1/cmake-3.20.3-cdl7x2lzwjysfhrhz23abh6pk5g4z5wq;/home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/re2c-1.2.1-43fryz3s27sm7qifg6hog7o\r\n           zl3dvcnt4;/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6' '-DCLINGO_REQUIRE_PYTHON=ON' '-DCLINGO_BUILD_WITH_PYTHON=ON' '-DPYCLINGO_USER_INSTALL=OF\r\n           F' '-DPYCLINGO_USE_INSTALL_PREFIX=ON' '-DCLINGO_BUILD_WITH_LUA=OFF' '-DCLINGO_BUILD_PY_SHARED:STRING=OFF' '-DPython_EXECUTABLE:STRING=/projects/spack/\r\n           opt/spack/gcc-8.3.1/python/nebkli6/bin/python3.8' '-DPython_INCLUDE_DIR:STRING=/projects/spack/opt/spack/gcc-8.3.1/python/nebkli6/include/python3.8' '\r\n           -DCLINGO_BUILD_APPS:STRING=OFF' '/tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-src'\r\n     4     -- The CXX compiler identification is GNU 8.3.1\r\n     5     -- Detecting CXX compiler ABI info\r\n     6     -- Detecting CXX compiler ABI info - failed\r\n     7     -- Check for working CXX compiler: /projects/spack/lib/spack/env/gcc/g++\r\n     8     -- Check for working CXX compiler: /projects/spack/lib/spack/env/gcc/g++ - broken\r\n  >> 9     CMake Error at /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/cmake-3.20.3-cdl7x2lzwjysfhrhz23abh6pk5g4z5wq/share/cmake-3.20/Modules/CM\r\n           akeTestCXXCompiler.cmake:59 (message):\r\n     10      The C++ compiler\r\n     11\r\n     12        \"/projects/spack/lib/spack/env/gcc/g++\"\r\n     13\r\n     14      is not able to compile a simple test program.\r\n     15\r\n\r\n     ...\r\n\r\n     21        gmake[1]: Entering directory '/tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-build-e7xfph2/CMakeFi\r\n           les/CMakeTmp'\r\n     22        Building CXX object CMakeFiles/cmTC_096bc.dir/testCXXCompiler.cxx.o\r\n     23        /projects/spack/lib/spack/env/gcc/g++   -static-libstdc++ -static-libgcc -Wl,--exclude-libs,ALL  -o CMakeFiles/cmTC_096bc.dir/testCXXCompiler.cxx.\r\n           o -c /tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-build-e7xfph2/CMakeFiles/CMakeTmp/testCXXCompiler.\r\n           cxx\r\n     24        Linking CXX executable cmTC_096bc\r\n     25        /home/s3j/.spack/bootstrap/store/linux-rhel8-x86_64/gcc-8.3.1/cmake-3.20.3-cdl7x2lzwjysfhrhz23abh6pk5g4z5wq/bin/cmake -E cmake_link_script CMakeFi\r\n           les/cmTC_096bc.dir/link.txt --verbose=1\r\n     26        /projects/spack/lib/spack/env/gcc/g++ -static-libstdc++ -static-libgcc -Wl,--exclude-libs,ALL  -static-libstdc++ -static-libgcc -Wl,--exclude-libs\r\n           ,ALL  -rdynamic CMakeFiles/cmTC_096bc.dir/testCXXCompiler.cxx.o -o cmTC_096bc\r\n  >> 27    /usr/bin/ld: cannot find -lstdc++\r\n  >> 28        collect2: error: ld returned 1 exit status\r\n  >> 29        gmake[1]: *** [CMakeFiles/cmTC_096bc.dir/build.make:99: cmTC_096bc] Error 1\r\n     30        gmake[1]: Leaving directory '/tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-build-e7xfph2/CMakeFil\r\n           es/CMakeTmp'\r\n     31        gmake: *** [Makefile:127: cmTC_096bc/fast] Error 2\r\n     32\r\n     33\r\n     34\r\n     35\r\n\r\nSee build log for details:\r\n  /tmp/s3j/spack-stage/spack-stage-clingo-bootstrap-spack-e7xfph2po6helmzwem56dkslzlxgzb2g/spack-build-out.txt\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.16.2-3213-7b6ca59038\r\n* **Python:** 3.8.5\r\n* **Platform:** linux-rhel8-haswell\r\n* **Concretizer:** clingo\r\n\r\n### Additional information\r\n\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/6688293/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/6688294/spack-build-env.txt)\r\n\r\n@alalazo \r\n\r\nI tried the solution from https://github.com/spack/spack/pull/22720 , but found the same error as in #24417 \r\n```\r\n$ spack find -b\r\n==> Showing internal bootstrap store at \"/home/s3j/.spack/bootstrap/store\"\r\n==> 15 installed packages\r\n-- linux-rhel8-x86_64 / gcc@8.3.1 -------------------------------\r\nberkeley-db@18.1.40  cmake@3.20.3   gdbm@1.19      libsigsegv@2.13  ncurses@6.2     perl@5.34.0    re2c@1.2.1    zlib@1.2.11\r\nbison@3.7.6          diffutils@3.7  libiconv@1.16  m4@1.4.19        openssl@1.1.1k  pkgconf@1.7.4  readline@8.1\r\n$ spack -d solve zlib\r\n==> [2021-06-21-12:55:42.947580] Imported solve from built-in commands\r\n==> [2021-06-21-12:55:42.948825] Imported solve from built-in commands\r\n==> [2021-06-21-12:55:42.952282] Reading config file /projects/spack/etc/spack/defaults/config.yaml\r\n==> [2021-06-21-12:55:42.979847] Reading config file /projects/spack/etc/spack/config.yaml\r\n==> [2021-06-21-12:55:42.983750] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-06-21-12:55:42.983836] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-06-21-12:55:42.984407] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-06-21-12:55:42.984488] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-06-21-12:55:42.984602] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\n==> [2021-06-21-12:55:42.985087] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/projects/spack/etc/spack/defaults\r\n==> [2021-06-21-12:55:42.985167] [BOOTSTRAP CONFIG SCOPE] name=defaults/linux, path=/projects/spack/etc/spack/defaults/linux\r\n==> [2021-06-21-12:55:42.985245] [BOOTSTRAP CONFIG SCOPE] name=system, path=/etc/spack\r\n==> [2021-06-21-12:55:42.985307] [BOOTSTRAP CONFIG SCOPE] name=system/linux, path=/etc/spack/linux\r\n==> [2021-06-21-12:55:42.985376] [BOOTSTRAP CONFIG SCOPE] name=site, path=/projects/spack/etc/spack\r\n==> [2021-06-21-12:55:42.985434] [BOOTSTRAP CONFIG SCOPE] name=site/linux, path=/projects/spack/etc/spack/linux\r\n==> [2021-06-21-12:55:42.985501] [BOOTSTRAP CONFIG SCOPE] name=user, path=/home/s3j/.spack\r\n==> [2021-06-21-12:55:42.985559] [BOOTSTRAP CONFIG SCOPE] name=user/linux, path=/home/s3j/.spack/linux\r\n==> [2021-06-21-12:55:42.990699] [BOOTSTRAP ROOT SPEC] clingo: clingo-bootstrap@spack+python %gcc target=x86_64\r\n==> [2021-06-21-12:55:42.990788] [BOOTSTRAP MODULE clingo] Try importing from Python\r\n==> [2021-06-21-12:55:42.991149] [BOOTSTRAP MODULE clingo] Try installed specs with query 'clingo-bootstrap@spack+python %gcc target=x86_64 ^python@3.8 '\r\n==> [2021-06-21-12:55:43.067358] Imported buildcache from built-in commands\r\n==> [2021-06-21-12:55:43.072523] Imported buildcache from built-in commands\r\n==> [2021-06-21-12:55:43.081336] [BOOTSTRAP MODULE clingo] Try installing 'clingo-bootstrap@spack%gcc+python arch=linux-None-x86_64 ^python@3.8' from binary cache\r\n==> [2021-06-21-12:57:02.819228] FileNotFoundError: [Errno 2] No such file or directory: '/home/s3j/.spack/bootstrap/store/linux-rhel5-x86_64/gcc-9.3.0/clingo-bootstrap-spack-kt74l7kjzrlp3cgtj2576o33mhsrgyrw'\r\n==> [2021-06-21-12:57:02.824619] Error: 'overrides-1'\r\n```",
    "performed_via_github_app": null
}