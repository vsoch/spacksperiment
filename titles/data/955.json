{
    "url": "https://api.github.com/repos/spack/spack/issues/955",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/955/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/955/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/955/events",
    "html_url": "https://github.com/spack/spack/pull/955",
    "id": 154880280,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NzAxMDY2MzA=",
    "number": 955,
    "title": "complete lua rework",
    "user": {
        "login": "trws",
        "id": 660149,
        "node_id": "MDQ6VXNlcjY2MDE0OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/660149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/trws",
        "html_url": "https://github.com/trws",
        "followers_url": "https://api.github.com/users/trws/followers",
        "following_url": "https://api.github.com/users/trws/following{/other_user}",
        "gists_url": "https://api.github.com/users/trws/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/trws/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/trws/subscriptions",
        "organizations_url": "https://api.github.com/users/trws/orgs",
        "repos_url": "https://api.github.com/users/trws/repos",
        "events_url": "https://api.github.com/users/trws/events{/privacy}",
        "received_events_url": "https://api.github.com/users/trws/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2016-05-14T23:08:05Z",
    "updated_at": "2016-05-17T20:21:51Z",
    "closed_at": "2016-05-17T20:21:51Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/955",
        "html_url": "https://github.com/spack/spack/pull/955",
        "diff_url": "https://github.com/spack/spack/pull/955.diff",
        "patch_url": "https://github.com/spack/spack/pull/955.patch"
    },
    "body": "This PR completely reworks handling of lua and lua extension packages.  In fact, it should _never_ be necessary to use `activate` on a lua package.  The new version installs both lua and luarocks together, and uses them to provide lua and luarocks spack commands.  It also sets LUA_PATH and LUA_CPATH appropriately for lua and all packages installed by it.  The biggest advantage of pulling luarocks into the lua package, rather than leaving it to the side, is that it can be used as a nearly universal build command for released lua projects, most now just need `luarocks('--tree=' + prefix, 'install', rockspeck_path)` in their install method.\n\nThe downside: I still don't have a good way to handle the lua/luajit duality.  This will work for all regular luas, but luajit will not find these modules, as they're installed in interpreter versioned paths.  If anyone knows a way to have two interpreters provide a language and allow extensions from the same set of child packages, I would appreciate a hint.\n",
    "performed_via_github_app": null
}