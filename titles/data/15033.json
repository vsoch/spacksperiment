{
    "url": "https://api.github.com/repos/spack/spack/issues/15033",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15033/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15033/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15033/events",
    "html_url": "https://github.com/spack/spack/issues/15033",
    "id": 566673291,
    "node_id": "MDU6SXNzdWU1NjY2NzMyOTE=",
    "number": 15033,
    "title": "Installation issue: cp2k with intel 2018.5 compiler",
    "user": {
        "login": "samcom12",
        "id": 13285627,
        "node_id": "MDQ6VXNlcjEzMjg1NjI3",
        "avatar_url": "https://avatars.githubusercontent.com/u/13285627?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/samcom12",
        "html_url": "https://github.com/samcom12",
        "followers_url": "https://api.github.com/users/samcom12/followers",
        "following_url": "https://api.github.com/users/samcom12/following{/other_user}",
        "gists_url": "https://api.github.com/users/samcom12/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/samcom12/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/samcom12/subscriptions",
        "organizations_url": "https://api.github.com/users/samcom12/orgs",
        "repos_url": "https://api.github.com/users/samcom12/repos",
        "events_url": "https://api.github.com/users/samcom12/events{/privacy}",
        "received_events_url": "https://api.github.com/users/samcom12/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-02-18T06:19:31Z",
    "updated_at": "2020-02-18T20:36:51Z",
    "closed_at": "2020-02-18T20:36:51Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Installation issue: cp2k with Intel 2018.5 compiler.\r\n\r\n---\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install cp2k  %intel@18.0.5  blas=mkl +cuda+cuda_blas+cuda_fft+elpa+mpi+openmp+pexsi+plumed ^intel-mpi \r\n\r\nNo patches needed for cp2k\r\n==> Building cp2k [MakefilePackage]\r\n==> Executing phase: 'edit'\r\n==> Error: KeyError: 'none'\r\n\r\n/home/samir/spack/var/spack/repos/builtin/packages/cp2k/package.py:392, in edit:\r\n        389                    '37': 'K80',\r\n        390                    '60': 'P100',\r\n        391                    '70': 'V100',\r\n  >>    392                }[cuda_arch]\r\n        393\r\n        394                if (cuda_arch == '35'\r\n        395                        and self.spec.satisfies('+cuda_arch_35_k20x')):\r\n\r\nSee build log for details:\r\n  /tmp/samir/spack-stage/spack-stage-cp2k-6.1-xpeoh7ztmfohfdylqzursgf2el2tc2fp/spack-build-out.txt\r\n\r\n\r\n### Platform and user environment\r\n```commandline\r\n$ uname -a \r\nLinux login04 3.10.0-957.el7.x86_64 #1 SMP Thu Nov 8 23:39:32 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n- `compilers.yaml`\r\n- compiler:\r\n    paths:\r\n      cc: /usr/bin/gcc\r\n      cxx: /usr/bin/g++\r\n      f77: /usr/bin/gfortran\r\n      fc: /usr/bin/gfortran\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment:\r\n      unset: []\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: gcc@4.8.5\r\n- compiler:\r\n    paths:\r\n      cc: /home/apps/gcc-5.5.0/bin/gcc\r\n      cxx: /home/apps/gcc-5.5.0/bin/g++\r\n      f77: /home/apps/gcc-5.5.0/bin/gfortran\r\n      fc: /home/apps/gcc-5.5.0/bin/gfortran\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: gcc@5.5.0\r\n- compiler:\r\n    paths:\r\n      cc: /opt/ohpc/pub/apps/intel/2018_2/compilers_and_libraries_2018.5.274/linux/bin/intel64/icc\r\n      cxx: /opt/ohpc/pub/apps/intel/2018_2/compilers_and_libraries_2018.5.274/linux/bin/intel64/icpc\r\n      f77: /opt/ohpc/pub/apps/intel/2018_2/compilers_and_libraries_2018.5.274/linux/bin/intel64/ifort\r\n      fc: /opt/ohpc/pub/apps/intel/2018_2/compilers_and_libraries_2018.5.274/linux/bin/intel64/ifort\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: intel@18.0.5\r\n- compiler:\r\n    paths:\r\n      cc: /opt/ohpc/pub/apps/intel/2016/compilers_and_libraries_2016.4.258/linux/bin/intel64/icc\r\n      cxx: /opt/ohpc/pub/apps/intel/2016/compilers_and_libraries_2016.4.258/linux/bin/intel64/icpc\r\n      f77: /opt/ohpc/pub/apps/intel/2016/compilers_and_libraries_2016.4.258/linux/bin/intel64/ifort\r\n      fc: /opt/ohpc/pub/apps/intel/2016/compilers_and_libraries_2016.4.258/linux/bin/intel64/ifort\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: intel@16.0.4\r\n- compiler:\r\n    paths:\r\n      cc: /opt/ohpc/pub/apps/intel/2019/compilers_and_libraries_2019.5.281/linux/bin/intel64/icc\r\n      cxx: /opt/ohpc/pub/apps/intel/2019/compilers_and_libraries_2019.5.281/linux/bin/intel64/icpc\r\n      f77: /opt/ohpc/pub/apps/intel/2019/compilers_and_libraries_2019.5.281/linux/bin/intel64/ifort\r\n      fc: /opt/ohpc/pub/apps/intel/2019/compilers_and_libraries_2019.5.281/linux/bin/intel64/ifort\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: intel@19.0.5.281\r\n- compiler:\r\n    paths:\r\n      cc: /opt/ohpc/pub/compiler/gcc/8.3.0/bin/gcc\r\n      cxx: /opt/ohpc/pub/compiler/gcc/8.3.0/bin/g++\r\n      f77: /opt/ohpc/pub/compiler/gcc/8.3.0/bin/gfortran\r\n      fc: /opt/ohpc/pub/compiler/gcc/8.3.0/bin/gfortran\r\n    operating_system: centos7\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    spec: gcc@8.3.0\r\n~\r\n\r\n### Additional information\r\n```console\r\n$  spack spec --install-status cp2k  %intel@18.0.5  blas=mkl +cuda+cuda_blas+cuda_fft+elpa+mpi+openmp+pexsi+plumed ^intel-mpi\r\n\r\nInput spec\r\n--------------------------------\r\n -   cp2k%intel@18.0.5 blas=mkl +cuda+cuda_blas+cuda_fft+elpa+mpi+openmp+pexsi+plumed\r\n -       ^intel-mpi\r\n\r\nConcretized\r\n--------------------------------\r\n -   cp2k@6.1%intel@18.0.5 blas=mkl +cuda cuda_arch=none ~cuda_arch_35_k20x+cuda_blas+cuda_fft+elpa+libxc lmax=5 +mpi                                                                                                                                                            +openmp+pexsi+plumed~sirius smm=libxsmm arch=linux-centos7-skylake_avx512\r\n[+]      ^cuda@10.2.89%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^libxml2@2.9.9%intel@18.0.5~python arch=linux-centos7-skylake_avx512\r\n[+]              ^libiconv@1.16%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]              ^pkgconf@1.6.3%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]              ^xz@5.2.4%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]              ^zlib@1.2.11%intel@18.0.5+optimize+pic+shared arch=linux-centos7-skylake_avx512\r\n[+]      ^elpa@2017.11.001%intel@18.0.5+openmp+optflags arch=linux-centos7-skylake_avx512\r\n[+]          ^intel-mkl@2020.0.166%intel@18.0.5~ilp64+shared threads=openmp arch=linux-centos7-skylake_avx512\r\n[+]              ^cpio@2.13%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^intel-mpi@2019.6.166%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]      ^fftw@3.3.8%intel@18.0.5+mpi+openmp~pfft_patches precision=double,float arch=linux-centos7-skylake_avx512\r\n[+]      ^libint@1.1.6%intel@18.0.5~fortran tune=none arch=linux-centos7-skylake_avx512\r\n[+]          ^autoconf@2.69%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]              ^m4@1.4.18%intel@18.0.5 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9                                                                                                                                                            b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-centos7-skylake_avx512\r\n[+]                  ^libsigsegv@2.12%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]              ^perl@5.30.1%intel@18.0.5+cpanm+shared+threads arch=linux-centos7-skylake_avx512\r\n[+]                  ^gdbm@1.18.1%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]                      ^readline@8.0%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]                          ^ncurses@6.1%intel@18.0.5~symlinks~termlib arch=linux-centos7-skylake_avx512\r\n[+]          ^automake@1.16.1%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^libtool@2.4.6%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]      ^libxc@4.3.2%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]      ^libxsmm@1.14%intel@18.0.5~debug~generator~header-only~shared arch=linux-centos7-skylake_avx512\r\n[+]      ^pexsi@0.10.2%intel@18.0.5+fortran arch=linux-centos7-skylake_avx512\r\n[+]          ^parmetis@4.0.3%intel@18.0.5 build_type=RelWithDebInfo ~gdb patches=4f892531eb0a807eb1b82e683a416d3e3515                                                                                                                                                            4a455274cf9b162fb02054d11a5b,50ed2081bc939269689789942067c58b3e522c269269a430d5d34c00edbc5870,704b84f7c7444d4372cb59c                                                                                                                                                            ca6e1209df4ef3b033bc4ee3cf50f369bce972a9d +shared arch=linux-centos7-skylake_avx512\r\n[+]              ^cmake@3.16.2%intel@18.0.5~doc+ncurses+openssl+ownlibs~qt arch=linux-centos7-skylake_avx512\r\n[+]                  ^openssl@1.1.1d%intel@18.0.5+systemcerts arch=linux-centos7-skylake_avx512\r\n[+]              ^metis@5.1.0%intel@18.0.5 build_type=Release ~gdb~int64 patches=4991da938c1d3a1d3dea78e49bbebecba002                                                                                                                                                            73f98df2a656e38b83d55b281da1 ~real64+shared arch=linux-centos7-skylake_avx512\r\n[+]          ^superlu-dist@5.3.0%intel@18.0.5 build_type=RelWithDebInfo ~int64~openmp+shared arch=linux-centos7-skyla                                                                                                                                                            ke_avx512\r\n[+]      ^plumed@2.5.3%intel@18.0.5+gsl+mpi optional_modules=all +shared arch=linux-centos7-skylake_avx512\r\n[+]          ^gsl@2.5%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]      ^python@3.7.6%intel@18.0.5+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readlin                                                                                                                                                            e+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zlib arch=linux-centos7-skylake_avx512\r\n[+]          ^bzip2@1.0.8%intel@18.0.5+shared arch=linux-centos7-skylake_avx512\r\n[+]              ^diffutils@3.7%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^expat@2.2.9%intel@18.0.5+libbsd arch=linux-centos7-skylake_avx512\r\n[+]              ^libbsd@0.10.0%intel@18.0.5 patches=71b49f52a01420ab632f23373135853a2565f88725fb77e625a7fbf7ea812eef                                                                                                                                                             arch=linux-centos7-skylake_avx512\r\n[+]          ^gettext@0.20.1%intel@18.0.5+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-skylake_avx                                                                                                                                                            512\r\n[+]              ^tar@1.32%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^libffi@3.2.1%intel@18.0.5 arch=linux-centos7-skylake_avx512\r\n[+]          ^sqlite@3.30.1%intel@18.0.5~column_metadata+fts~functions~rtree arch=linux-centos7-skylake_avx512\r\n...\r\n```\r\n\r\n",
    "performed_via_github_app": null
}