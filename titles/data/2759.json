{
    "url": "https://api.github.com/repos/spack/spack/issues/2759",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/2759/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/2759/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/2759/events",
    "html_url": "https://github.com/spack/spack/issues/2759",
    "id": 199041158,
    "node_id": "MDU6SXNzdWUxOTkwNDExNTg=",
    "number": 2759,
    "title": "`spack activate` is not easily reversible.",
    "user": {
        "login": "hartzell",
        "id": 312978,
        "node_id": "MDQ6VXNlcjMxMjk3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/312978?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hartzell",
        "html_url": "https://github.com/hartzell",
        "followers_url": "https://api.github.com/users/hartzell/followers",
        "following_url": "https://api.github.com/users/hartzell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hartzell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hartzell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hartzell/subscriptions",
        "organizations_url": "https://api.github.com/users/hartzell/orgs",
        "repos_url": "https://api.github.com/users/hartzell/repos",
        "events_url": "https://api.github.com/users/hartzell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hartzell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 461818061,
            "node_id": "MDU6TGFiZWw0NjE4MTgwNjE=",
            "url": "https://api.github.com/repos/spack/spack/labels/extensions",
            "name": "extensions",
            "color": "bfdadc",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2017-01-05T19:41:21Z",
    "updated_at": "2020-08-23T18:37:56Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I can activate `py-flake8`:\r\n\r\n```\r\n[hartzelg@rpbuchop001 spack-20161212]$ spack activate py-flake8\r\n==> Activated extension py-configparser@3.5.0%gcc@5.4.0 arch=linux-centos7-x86_64-2vyc36s for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Activated extension py-enum34@1.1.6%gcc@5.4.0 arch=linux-centos7-x86_64-a5hkmca for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Activated extension py-mccabe@0.5.2%gcc@5.4.0 arch=linux-centos7-x86_64-eyrwg56 for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Activated extension py-pycodestyle@2.0.0%gcc@5.4.0 arch=linux-centos7-x86_64-5c257kg for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Activated extension py-pyflakes@1.2.3%gcc@5.4.0 arch=linux-centos7-x86_64-jx725az for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Activated extension py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n```\r\n\r\nbut having done so, this doesn't work:\r\n\r\n```\r\n[hartzelg@rpbuchop001 spack-20161212]$ spack deactivate py-flake8\r\n==> Deactivated extension py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n```\r\n\r\nI can use the `-a` flag:\r\n\r\n```\r\n[hartzelg@rpbuchop001 spack-20161212]$ spack deactivate -a py-flake8\r\n==> Deactivating py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq and all dependencies.\r\n==> Deactivated extension py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Deactivated extension py-configparser@3.5.0%gcc@5.4.0 arch=linux-centos7-x86_64-2vyc36s for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Deactivated extension py-enum34@1.1.6%gcc@5.4.0 arch=linux-centos7-x86_64-a5hkmca for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Deactivated extension py-mccabe@0.5.2%gcc@5.4.0 arch=linux-centos7-x86_64-eyrwg56 for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Deactivated extension py-pycodestyle@2.0.0%gcc@5.4.0 arch=linux-centos7-x86_64-5c257kg for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n==> Deactivated extension py-pyflakes@1.2.3%gcc@5.4.0 arch=linux-centos7-x86_64-jx725az for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n```\r\n\r\nbut that leaves me with two nagging doubts:\r\n\r\n- why is `activate` automagically recursive but `deactivate` is not; and\r\n- is `deactivate -a` smart enough to not deactivate something that is also a dependency for a different top-level package (e.g. above, what would happen if another package also needed `py-enum34` activated?)?  At first glance it does not appear to be:\r\n\r\n    ```\r\n    [hartzelg@rpbuchop001 spack-20161212]$ spack activate py-enum34\r\n    ==> Activated extension py-enum34@1.1.6%gcc@5.4.0 arch=linux-centos7-x86_64-a5hkmca for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    [hartzelg@rpbuchop001 spack-20161212]$ spack activate py-flake8\r\n    ==> Activated extension py-configparser@3.5.0%gcc@5.4.0 arch=linux-centos7-x86_64-2vyc36s for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Activated extension py-mccabe@0.5.2%gcc@5.4.0 arch=linux-centos7-x86_64-eyrwg56 for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Activated extension py-pycodestyle@2.0.0%gcc@5.4.0 arch=linux-centos7-x86_64-5c257kg for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Activated extension py-pyflakes@1.2.3%gcc@5.4.0 arch=linux-centos7-x86_64-jx725az for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Activated extension py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    [hartzelg@rpbuchop001 spack-20161212]$ spack deactivate -a py-flake8\r\n    ==> Deactivating py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq and all dependencies.\r\n    ==> Deactivated extension py-flake8@3.0.4%gcc@5.4.0 arch=linux-centos7-x86_64-5wabxrq for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Deactivated extension py-configparser@3.5.0%gcc@5.4.0 arch=linux-centos7-x86_64-2vyc36s for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Deactivated extension py-enum34@1.1.6%gcc@5.4.0 arch=linux-centos7-x86_64-a5hkmca for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Deactivated extension py-mccabe@0.5.2%gcc@5.4.0 arch=linux-centos7-x86_64-eyrwg56 for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Deactivated extension py-pycodestyle@2.0.0%gcc@5.4.0 arch=linux-centos7-x86_64-5c257kg for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    ==> Deactivated extension py-pyflakes@1.2.3%gcc@5.4.0 arch=linux-centos7-x86_64-jx725az for python@2.7.12~tk~ucs4%gcc@5.4.0\r\n    [hartzelg@rpbuchop001 spack-20161212]$\r\n    ```\r\n\r\nHow do people use `activate` in The Real World(tm)?\r\n\r\n",
    "performed_via_github_app": null
}