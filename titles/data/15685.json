{
    "url": "https://api.github.com/repos/spack/spack/issues/15685",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15685/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15685/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15685/events",
    "html_url": "https://github.com/spack/spack/issues/15685",
    "id": 588108606,
    "node_id": "MDU6SXNzdWU1ODgxMDg2MDY=",
    "number": 15685,
    "title": "autoconf and other packages on ppc64le",
    "user": {
        "login": "germasch",
        "id": 11023174,
        "node_id": "MDQ6VXNlcjExMDIzMTc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/11023174?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/germasch",
        "html_url": "https://github.com/germasch",
        "followers_url": "https://api.github.com/users/germasch/followers",
        "following_url": "https://api.github.com/users/germasch/following{/other_user}",
        "gists_url": "https://api.github.com/users/germasch/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/germasch/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/germasch/subscriptions",
        "organizations_url": "https://api.github.com/users/germasch/orgs",
        "repos_url": "https://api.github.com/users/germasch/repos",
        "events_url": "https://api.github.com/users/germasch/events{/privacy}",
        "received_events_url": "https://api.github.com/users/germasch/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 883727171,
            "node_id": "MDU6TGFiZWw4ODM3MjcxNzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/power",
            "name": "power",
            "color": "8a8edb",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-03-26T02:26:26Z",
    "updated_at": "2020-03-26T08:28:20Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "\r\n### Spack version\r\n<!-- Add the output to the command below -->\r\n```console\r\n[kai@longhorn ~]$ spack --version\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n[kai@longhorn ~]$ spack spec autoconf\r\nInput spec\r\n--------------------------------\r\nautoconf\r\n\r\nConcretized\r\n--------------------------------\r\nautoconf@2.69%gcc@7.3.0 arch=linux-rhel7-power9le\r\n    ^m4@1.4.18%gcc@7.3.0 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-rhel7-power9le\r\n        ^libsigsegv@2.12%gcc@7.3.0 arch=linux-rhel7-power9le\r\n    ^perl@5.30.1%gcc@7.3.0+cpanm+shared+threads arch=linux-rhel7-power9le\r\n        ^gdbm@1.18.1%gcc@7.3.0 arch=linux-rhel7-power9le\r\n            ^readline@8.0%gcc@7.3.0 arch=linux-rhel7-power9le\r\n                ^ncurses@6.2%gcc@7.3.0~symlinks+termlib arch=linux-rhel7-power9le\r\n                    ^pkgconf@1.6.3%gcc@7.3.0 arch=linux-rhel7-power9le\r\n\r\n[kai@longhorn ~]$ spack install autoconf\r\n[...]\r\n\r\nSee build log for details:\r\n  /tmp/kai/spack-stage/spack-stage-autoconf-2.69-ftyunbfd663jlfj24legpgewbdsjygse/spack-build-out.txt\r\nTraceback (most recent call last):\r\n  File \"/home/01537/kai/build/spack/lib/spack/spack/build_environment.py\", line 801, in child_process\r\n    return_value = function()\r\n  File \"/home/01537/kai/build/spack/lib/spack/spack/installer.py\", line 1113, in build_process\r\n    phase(pkg.spec, pkg.prefix)\r\n  File \"/home/01537/kai/build/spack/lib/spack/spack/package.py\", line 112, in phase_wrapper\r\n    callback(instance)\r\n  File \"/home/01537/kai/build/spack/lib/spack/spack/build_systems/autotools.py\", line 160, in _do_patch_config_guess\r\n    raise RuntimeError('Failed to find suitable config.guess')\r\nRuntimeError: Failed to find suitable config.guess\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```console\r\n[kai@longhorn ~]$ uname -a\r\nLinux login1.longhorn.tacc.utexas.edu 4.14.0-115.10.1.el7a.ppc64le #1 SMP Wed Jun 26 09:32:17 UTC 2019 ppc64le ppc64le ppc64le GNU/Linux\r\n[kai@longhorn ~]$ cat /etc/redhat-release\r\nRed Hat Enterprise Linux Server release 7.6 (Maipo)\r\n``` \r\n\r\nThis machine (longhorn) is similar to Summit, except that it has very little software installed.\r\n\r\nI've tracked the issue down already: When trying to install `autoconf`, spack checks whether the included `config.guess` works. It does not, because it does not recognize what should be `powerpc64le-unknown-linux-gnu`. So spack is looking for a newer `config.guess` to replace the included one. On Summit, it'll find one in `/usr/share/automake-x.yy`, and things work. On this machine, automake is not installed (at least not in the standard location). If the package depended on `automake`, it'd look at the spack-installed automake to find a newer `config.guess`. That doesn't apply here.\r\n\r\nI don't have access to install anything in `/usr/share`, so the question is, how can I provide an updated `config.guess`? I've hacked around it for now by modifying spack's source so that it searches in my home directory, but clearly that's not a sustainable solution.\r\n\r\n[This problem isn't really limited to just the autoconf package, either, but any package that ships with an outdated `config.guess`, which doesn't depend on `automake`: `libsodium` was another manifestation of the same issue.]\r\n\r\nOne way to make it possible to work around this problem would be for spack to search for `config.guess` in a user-specified location, though I still don't like it, since the user would still have to go find an appropriate `config.guess`, and point spack to it. I'd much rather have something that works out of the box, but I don't have any good idea on how to get it done.\r\n",
    "performed_via_github_app": null
}