{
    "url": "https://api.github.com/repos/spack/spack/issues/15475",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15475/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15475/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15475/events",
    "html_url": "https://github.com/spack/spack/pull/15475",
    "id": 580257468,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTAzMDQ0",
    "number": 15475,
    "title": "Environments/views: only override spec prefix for non-external packages",
    "user": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-03-12T22:24:41Z",
    "updated_at": "2020-04-03T20:26:34Z",
    "closed_at": "2020-04-03T20:26:34Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/15475",
        "html_url": "https://github.com/spack/spack/pull/15475",
        "diff_url": "https://github.com/spack/spack/pull/15475.diff",
        "patch_url": "https://github.com/spack/spack/pull/15475.patch"
    },
    "body": "For an environment that contains externally-defined packages (i.e. with `buildable: False` in `packages.yaml`), Spack was treating external packages as having the same prefix as other packages in the view. This allows external packages to retain their true prefix (as they are not actually linked into the view like Spack-installed packages).\r\n\r\n~I haven't yet thoroughly checked this to ensure e.g. that this keeps system paths out of the shell modifications.~ (EDIT: there is now a test for that)\r\n\r\nFixes https://github.com/spack/spack/issues/14797\r\nFixes https://github.com/spack/spack/issues/14743\r\n\r\nTODOs:\r\n\r\n- [x] add test about removing system paths for external packages in views\r\n- [x] confirm that test fails prior to this update",
    "performed_via_github_app": null
}