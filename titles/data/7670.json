{
    "url": "https://api.github.com/repos/spack/spack/issues/7670",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7670/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7670/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7670/events",
    "html_url": "https://github.com/spack/spack/issues/7670",
    "id": 311560161,
    "node_id": "MDU6SXNzdWUzMTE1NjAxNjE=",
    "number": 7670,
    "title": "spack install libxml2%intel failing with intel 2017",
    "user": {
        "login": "rrobinson-RMS",
        "id": 31763028,
        "node_id": "MDQ6VXNlcjMxNzYzMDI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/31763028?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rrobinson-RMS",
        "html_url": "https://github.com/rrobinson-RMS",
        "followers_url": "https://api.github.com/users/rrobinson-RMS/followers",
        "following_url": "https://api.github.com/users/rrobinson-RMS/following{/other_user}",
        "gists_url": "https://api.github.com/users/rrobinson-RMS/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rrobinson-RMS/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rrobinson-RMS/subscriptions",
        "organizations_url": "https://api.github.com/users/rrobinson-RMS/orgs",
        "repos_url": "https://api.github.com/users/rrobinson-RMS/repos",
        "events_url": "https://api.github.com/users/rrobinson-RMS/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rrobinson-RMS/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 17,
    "created_at": "2018-04-05T10:43:37Z",
    "updated_at": "2018-04-27T23:13:55Z",
    "closed_at": "2018-04-05T11:43:41Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hi my install of libxml2 with intel compilier is failing it work with GCC.\r\nIt doesnt seem to be able to get to the intel libraries ie libimf.so libsvml.so etc\r\n\r\n[rrobinson@ukvmlx-ssh-02 spack]$ echo $CPATH \r\n/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/ipp/include:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/mkl/include:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/tbb/include:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/daal/include\r\n\r\n[rrobinson@ukvmlx-ssh-02 spack]$ echo $LD_LIBRARY_PATH \r\n/mnt/opt/Centos6.4/intel_2017/itac/2017.0.020/mic/slib:/mnt/opt/Centos6.4/intel_2017/itac/2017.0.020/intel64/slib:/mnt/opt/Centos6.4/intel_2017//itac/2017.0.020/mic/slib:/mnt/opt/Centos6.4/intel_2017//itac/2017.0.020/intel64/slib:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/mpi/intel64/lib:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/mpi/mic/lib:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/ipp/lib/intel64:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/mkl/lib/intel64:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/tbb/lib/intel64/gcc4.4:/mnt/opt/Centos6.4/intel_2017/debugger_2017/iga/lib:/mnt/opt/Centos6.4/intel_2017/debugger_2017/libipt/intel64/lib:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/daal/lib/intel64_lin:/mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/daal/../tbb/lib/intel64_lin/gcc4.4:/opt/rh/devtoolset-7/root/usr/lib64:/opt/rh/devtoolset-\r\n\r\nWhere should I have the path to the libraries ?\r\n\r\nCPATH ?\r\n\r\nThanks Roger\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n 1. CentOS 7.4 , intel compiliers 2017\r\n\r\n\r\n\r\n\r\n==> pkgconf is already installed in /mnt/opt/Centos7/hpc/spack/spack/opt/spack/linux-centos7-x86_64/intel-17.0.0/pkgconf-1.4.0-qfmfixfgcndtvh2ju2j6mf7mqtaqz74z\r\n==> xz is already installed in /mnt/opt/Centos7/hpc/spack/spack/opt/spack/linux-centos7-x86_64/intel-17.0.0/xz-5.2.3-lfico6fisgwk7rvzmcisppgb4lvvnpyx\r\n==> zlib is already installed in /mnt/opt/Centos7/hpc/spack/spack/opt/spack/linux-centos7-x86_64/intel-17.0.0/zlib-1.2.11-aqvemvpmoisxdurh3wqafsseuvslh2dc\r\n==> Installing libxml2\r\n==> Using cached archive: /mnt/opt/Centos7/hpc/spack/spack/var/spack/cache/libxml2/libxml2-2.9.4.tar.gz\r\n==> Staging archive: /mnt/opt/Centos7/hpc/spack/spack/var/spack/stage/libxml2-2.9.4-ln64jgbbv4pgoypxu5ktebbgshhlwn6k/libxml2-2.9.4.tar.gz\r\n==> Created stage in /mnt/opt/Centos7/hpc/spack/spack/var/spack/stage/libxml2-2.9.4-ln64jgbbv4pgoypxu5ktebbgshhlwn6k\r\n==> No patches needed for libxml2\r\n==> Building libxml2 [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j12'\r\n\r\n13 errors found in build log:\r\n     29      checking for tar... /usr/bin/tar\r\n     30      checking for perl... /usr/bin/perl\r\n     31      checking for wget... /usr/bin/wget\r\n     32      checking for xmllint... /usr/bin/xmllint\r\n     33      checking for xsltproc... /usr/bin/xsltproc\r\n     34      checking for pkg-config... /mnt/opt/Centos7/hpc/spack/spack/opt/spack/linux-centos7-x86_64/intel-17.0.0/pkgconf-1.4.0-qfmfixfgcndtvh2ju2j6mf7mqtaqz74z/bin/pkg-config\r\n  >> 35      checking pkg-config is at least version 0.9.0... /mnt/opt/Centos7/hpc/spack/spack/opt/spack/linux-centos7-x86_64/intel-17.0.0/pkgconf-1.4.0-qfmfixfgcndtvh2ju2j6mf7mqtaqz74z/bin/pkg-config: error while loading shared libraries: libimf.so: cannot open shared object file: No such file or directory\r\n     36      no\r\n     37      checking how to print strings... printf\r\n     38      checking for a sed that does not truncate output... /usr/bin/sed\r\n     39      checking for grep that handles long lines and -e... /usr/bin/grep\r\n     40      checking for egrep... /usr/bin/grep -E\r\n     41      checking for fgrep... /usr/bin/grep -F\r\n\r\n     ...\r\n\r\n     1424    ld: warning: libsvml.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1425    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1426    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1427    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1428    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1429    ld: .libs/testC14N: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1430    ld: final link failed: Bad value\r\n     1431    ld: .libs/testRelax: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1432    ld: final link failed: Bad value\r\n     1433    make[2]: *** [Makefile:1070: testRelax] Error 1\r\n     1434    make[2]: *** Waiting for unfinished jobs....\r\n     1435    ld: .libs/testURI: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1436    ld: final link failed: Bad value\r\n     1437    ld: .libs/testSAX: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1438    ld: final link failed: Bad value\r\n     1439    make[2]: *** [Makefile:1086: testURI] Error 1\r\n     1440    make[2]: *** [Makefile:1050: testC14N] Error 1\r\n     1441    make[2]: *** [Makefile:1074: testSAX] Error 1\r\n     1442    ld: .libs/xmllint: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1443    ld: final link failed: Bad value\r\n     1444    make[2]: *** [Makefile:1118: xmllint] Error 1\r\n     1445    ld: warning: libimf.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1446    ld: warning: libsvml.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1447    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1448    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1449    ld: warning: libimf.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n\r\n     ...\r\n\r\n     1460    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1461    ld: warning: libimf.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1462    ld: warning: libsvml.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1463    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1464    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1465    ld: .libs/testXPath: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1466    ld: final link failed: Bad value\r\n     1467    ld: .libs/xmlcatalog: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1468    ld: final link failed: Bad value\r\n     1469    ld: .libs/testAutomata: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1470    ld: final link failed: Bad value\r\n     1471    make[2]: *** [Makefile:1090: testXPath] Error 1\r\n     1472    make[2]: *** [Makefile:1114: xmlcatalog] Error 1\r\n     1473    ld: .libs/testSchemas: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1474    ld: final link failed: Bad value\r\n     1475    ld: .libs/testThreads: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1476    ld: final link failed: Bad value\r\n     1477    ld: warning: libimf.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1478    ld: warning: libsvml.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1479    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1480    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1481    make[2]: *** [Makefile:1046: testAutomata] Error 1\r\n     1482    make[2]: *** [Makefile:1078: testSchemas] Error 1\r\n     1483    make[2]: *** [Makefile:1082: testThreads] Error 1\r\n     1484    ld: .libs/testRegexp: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1485    ld: final link failed: Bad value\r\n     1486    make[2]: *** [Makefile:1066: testRegexp] Error 1\r\n     1487    ld: warning: libimf.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1488    ld: warning: libsvml.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1489    ld: warning: libirng.so, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1490    ld: warning: libintlc.so.5, needed by ./.libs/libxml2.so, not found (try using -rpath or -rpath-link)\r\n     1491    ld: .libs/testHTML: hidden symbol `__intel_cpu_features_init_x' in /mnt/opt/Centos6.4/intel_2017/compilers_and_libraries_2017.0.098/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\r\n  >> 1492    ld: final link failed: Bad value\r\n     1493    make[2]: *** [Makefile:1054: testHTML] Error 1\r\n     1494    make[2]: Leaving directory '/tmp/rrobinson/spack-stage/spack-stage-d9SKXp/libxml2-2.9.4'\r\n     1495    make[1]: *** [Makefile:1440: all-recursive] Error 1\r\n     1496    make[1]: Leaving directory '/tmp/rrobinson/spack-stage/spack-stage-d9SKXp/libxml2-2.9.4'\r\n     1497    make: *** [Makefile:859: all] Error 2\r\n\r\nSee build log for details:\r\n  /mnt/opt/Centos7/hpc/spack/spack/var/spack/stage/libxml2-2.9.4-ln64jgbbv4pgoypxu5ktebbgshhlwn6k/libxml2-2.9.4/spack-build.out\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack <command1> <spec>\r\n$ spack <command2> <spec>\r\n...\r\n```\r\n\r\n\r\n",
    "performed_via_github_app": null
}