{
    "url": "https://api.github.com/repos/spack/spack/issues/9912",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9912/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9912/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9912/events",
    "html_url": "https://github.com/spack/spack/issues/9912",
    "id": 383154160,
    "node_id": "MDU6SXNzdWUzODMxNTQxNjA=",
    "number": 9912,
    "title": "Installation issue: p4est v1.1",
    "user": {
        "login": "jppelteret",
        "id": 10460610,
        "node_id": "MDQ6VXNlcjEwNDYwNjEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/10460610?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jppelteret",
        "html_url": "https://github.com/jppelteret",
        "followers_url": "https://api.github.com/users/jppelteret/followers",
        "following_url": "https://api.github.com/users/jppelteret/following{/other_user}",
        "gists_url": "https://api.github.com/users/jppelteret/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jppelteret/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jppelteret/subscriptions",
        "organizations_url": "https://api.github.com/users/jppelteret/orgs",
        "repos_url": "https://api.github.com/users/jppelteret/repos",
        "events_url": "https://api.github.com/users/jppelteret/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jppelteret/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-11-21T14:52:59Z",
    "updated_at": "2018-11-22T18:40:23Z",
    "closed_at": "2018-11-22T18:40:23Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\nWith spack release/v0.12:\r\n```console\r\n$ spack install dealii ^cmake@3.9.4 ^petsc@3.9.4 ^slepc@3.9.2\r\n```\r\nThis leads to\r\n```console\r\n==> Installing p4est\r\n==> Searching for binary cache of p4est\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for p4est found: installing from source\r\n==> Using cached archive: /opt/spack/var/spack/cache/p4est/p4est-1.1.tar.gz\r\n==> Staging archive: /opt/spack/var/spack/stage/p4est-1.1-d5lb75eicxoy5a3z5g3lcm56lypenolf/p4est-1.1.tar.gz\r\n==> Created stage in /opt/spack/var/spack/stage/p4est-1.1-d5lb75eicxoy5a3z5g3lcm56lypenolf\r\n==> Using cached archive: /opt/spack/var/spack/cache/p4est/b506aab224b988fec210cc212469f2c4f58b2d04.patch\r\nThe text leading up to this was:\r\n--------------------------\r\n|From b506aab224b988fec210cc212469f2c4f58b2d04 Mon Sep 17 00:00:00 2001\r\n|From: Carsten Burstedde <burstedde@ins.uni-bonn.de>\r\n|Date: Mon, 14 Aug 2017 10:26:32 +0200\r\n|Subject: [PATCH] Fix openmp and pthread configure to undefault\r\n|\r\n|---\r\n| config/sc_openmp.m4  | 16 ++++++++++++----\r\n| config/sc_pthread.m4 | 14 +++++++++++---\r\n| 2 files changed, 23 insertions(+), 7 deletions(-)\r\n|\r\n|diff --git a/config/sc_openmp.m4 b/config/sc_openmp.m4\r\n|index 3a76d3ac..33df7f6c 100644\r\n|--- a/config/sc_openmp.m4\r\n|+++ b/config/sc_openmp.m4\r\n--------------------------\r\nFile to patch:\r\n```console\r\n$ spack install ^p4est@1.1%gcc@5.4.0~openmp\r\n```\r\n\r\nThis could probably be minimised to \r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux xxxxxxxx 4.15.0-39-generic #42~16.04.1-Ubuntu SMP Wed Oct 24 17:09:54 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tUbuntu 16.04.5 LTS\r\n``` \r\n\r\n### Additional information\r\n\r\nI believe that the patches applied to p4est here (https://github.com/spack/spack/blob/develop/var/spack/repos/builtin/packages/p4est/package.py#L31-L37) does not apply to v1.1. It should therefore be guarded by some check. Installation proceeds correctly with the patch lines commented out.\r\n\r\nWith v2.0 and the patches in place, installation proceeds as expected:\r\n```\r\n==> Installing p4est\r\n==> Searching for binary cache of p4est\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for p4est found: installing from source\r\n==> Fetching http://p4est.github.io/release/p4est-2.0.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /opt/spack/var/spack/stage/p4est-2.0-q2l25nh2itarhzhhvyklnxihujkitqzq/p4est-2.0.tar.gz\r\n==> Created stage in /opt/spack/var/spack/stage/p4est-2.0-q2l25nh2itarhzhhvyklnxihujkitqzq\r\n==> Using cached archive: /opt/spack/var/spack/cache/p4est/b506aab224b988fec210cc212469f2c4f58b2d04.patch\r\n==> Applied patch https://github.com/cburstedde/libsc/commit/b506aab224b988fec210cc212469f2c4f58b2d04.patch\r\n==> Fetching https://github.com/cburstedde/libsc/commit/b45a51a7ef97883a3d4dcbd05cb2c77890a76f75.patch\r\n######################################################################## 100.0%\r\n==> Applied patch https://github.com/cburstedde/libsc/commit/b45a51a7ef97883a3d4dcbd05cb2c77890a76f75.patch\r\n```\r\n",
    "performed_via_github_app": null
}