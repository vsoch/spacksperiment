{
    "url": "https://api.github.com/repos/spack/spack/issues/20134",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20134/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20134/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20134/events",
    "html_url": "https://github.com/spack/spack/issues/20134",
    "id": 752006265,
    "node_id": "MDU6SXNzdWU3NTIwMDYyNjU=",
    "number": 20134,
    "title": "spack spec py-pyscf dose not stop",
    "user": {
        "login": "tkameyama",
        "id": 18064250,
        "node_id": "MDQ6VXNlcjE4MDY0MjUw",
        "avatar_url": "https://avatars.githubusercontent.com/u/18064250?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tkameyama",
        "html_url": "https://github.com/tkameyama",
        "followers_url": "https://api.github.com/users/tkameyama/followers",
        "following_url": "https://api.github.com/users/tkameyama/following{/other_user}",
        "gists_url": "https://api.github.com/users/tkameyama/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tkameyama/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tkameyama/subscriptions",
        "organizations_url": "https://api.github.com/users/tkameyama/orgs",
        "repos_url": "https://api.github.com/users/tkameyama/repos",
        "events_url": "https://api.github.com/users/tkameyama/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tkameyama/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-11-27T06:08:14Z",
    "updated_at": "2020-12-04T05:48:27Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "`spack spec py-pyscf` dose not stop.\r\n\r\npy-pyscf include `depends_on('xcfun@:2.0.0a2')` but xcfun@2.0.0a2 and before versions are deleted.\r\nBut version 2.0.0 is existed.\r\nWhen i remove this depends_on, `spack spec py-pyscf` is works.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack spec py-pyscf\r\nInput spec\r\n--------------------------------\r\npy-pyscf\r\n\r\nConcretized\r\n--------------------------------\r\n...\r\n```\r\n\r\n### Error Message\r\n\r\n```console\r\n$ spack --debug py-pyscf\r\n==> [2020-11-27-14:50:13.820235] Imported spec from built-in commands\r\n==> [2020-11-27-14:50:13.822313] Imported spec from built-in commands\r\nInput spec\r\n--------------------------------\r\npy-pyscf\r\n\r\nConcretized\r\n--------------------------------\r\n==> [2020-11-27-14:50:13.826639] Reading config file /work/kameyama/spack/spack/etc/spack/defaults/config.yaml\r\n==> [2020-11-27-14:50:13.913463] Reading config file /home/kameyama/.spack/config.yaml\r\n==> [2020-11-27-14:50:13.919021] Reading config file /work/kameyama/spack/spack/etc/spack/defaults/repos.yaml\r\n==> [2020-11-27-14:50:14.104386] python applying constraint pkgconfig@0.9.0:\r\n==> [2020-11-27-14:50:14.153854] py-numpy applying constraint python@2.7:2.8,3.4:\r\n==> [2020-11-27-14:50:14.163733] py-setuptools applying constraint python\r\n==> [2020-11-27-14:50:14.168348] py-numpy applying constraint python@2.7:2.8,3.4:\r\n==> [2020-11-27-14:50:14.169975] py-numpy applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.190400] py-scipy applying constraint python@2.6:2.8,3.2:\r\n==> [2020-11-27-14:50:14.192099] py-scipy applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.194514] py-scipy applying constraint py-numpy@1.5.1:+blas+lapack\r\n==> [2020-11-27-14:50:14.198756] py-scipy applying constraint python@2.6:2.8,3.2:\r\n==> [2020-11-27-14:50:14.201403] py-scipy applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.204974] py-scipy applying constraint py-numpy@1.5.1:+blas+lapack\r\n==> [2020-11-27-14:50:14.206985] py-scipy applying constraint blas\r\n==> [2020-11-27-14:50:14.208133] py-scipy applying constraint lapack\r\n==> [2020-11-27-14:50:14.220991] py-h5py applying constraint python\r\n==> [2020-11-27-14:50:14.229567] py-cython applying constraint python@2.6:2.8,3.3:\r\n==> [2020-11-27-14:50:14.232416] py-cython applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.243692] py-pkgconfig applying constraint python@2.6:2.8,3.3:\r\n==> [2020-11-27-14:50:14.245627] py-pkgconfig applying constraint pkgconfig\r\n==> [2020-11-27-14:50:14.255248] py-nose applying constraint python\r\n==> [2020-11-27-14:50:14.258491] py-nose applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.261739] py-pkgconfig applying constraint python@2.6:2.8,3.3:\r\n==> [2020-11-27-14:50:14.263236] py-pkgconfig applying constraint pkgconfig\r\n==> [2020-11-27-14:50:14.265934] py-pkgconfig applying constraint py-nose@1.0:\r\n==> [2020-11-27-14:50:14.267865] py-h5py applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.275102] py-cached-property applying constraint python\r\n==> [2020-11-27-14:50:14.277280] py-cached-property applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.279398] py-h5py applying constraint py-numpy@1.7:\r\n==> [2020-11-27-14:50:14.286789] py-six applying constraint python\r\n==> [2020-11-27-14:50:14.310574] hdf5 applying constraint zlib@1.1.2:\r\n==> [2020-11-27-14:50:14.313150] py-h5py applying constraint python\r\n==> [2020-11-27-14:50:14.315767] py-h5py applying constraint py-cython@0.23:\r\n==> [2020-11-27-14:50:14.319252] py-h5py applying constraint py-pkgconfig\r\n==> [2020-11-27-14:50:14.321978] py-h5py applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.324450] py-h5py applying constraint py-cached-property@1.5:\r\n==> [2020-11-27-14:50:14.327024] py-h5py applying constraint py-numpy@1.7:\r\n==> [2020-11-27-14:50:14.329243] py-h5py applying constraint py-six\r\n==> [2020-11-27-14:50:14.331381] py-h5py applying constraint hdf5@1.8.4:+hl\r\n==> [2020-11-27-14:50:14.333087] py-pyscf applying constraint blas\r\n==> [2020-11-27-14:50:14.342239] libcint applying constraint cmake@2.6:\r\n==> [2020-11-27-14:50:14.343750] libcint applying constraint blas\r\n==> [2020-11-27-14:50:14.440545] xcfun applying constraint cmake@3.14:\r\n==> [2020-11-27-14:50:14.442781] xcfun applying constraint python@3:\r\n==> [2020-11-27-14:50:14.450373] py-pybind11 applying constraint cmake\r\n==> [2020-11-27-14:50:14.456867] py-pybind11 applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.459490] py-pybind11 applying constraint python\r\n==> [2020-11-27-14:50:14.461744] xcfun applying constraint py-numpy\r\n==> [2020-11-27-14:50:14.464111] xcfun applying constraint cmake@3.14:\r\n==> [2020-11-27-14:50:14.466393] xcfun applying constraint python@3:\r\n==> [2020-11-27-14:50:14.468446] xcfun applying constraint py-pybind11\r\n==> [2020-11-27-14:50:14.472790] xcfun applying constraint py-numpy\r\n==> [2020-11-27-14:50:14.475258] py-pyscf applying constraint python@2.6:\r\n==> [2020-11-27-14:50:14.477882] py-pyscf applying constraint cmake@2.8:\r\n==> [2020-11-27-14:50:14.480862] py-pyscf applying constraint py-numpy@1.8.0:\r\n==> [2020-11-27-14:50:14.484070] py-pyscf applying constraint py-scipy@0.12:\r\n==> [2020-11-27-14:50:14.487012] py-pyscf applying constraint py-h5py@2.3.0:\r\n==> [2020-11-27-14:50:14.488054] py-pyscf applying constraint blas\r\n==> [2020-11-27-14:50:14.490311] py-pyscf applying constraint libcint+coulomb_erf+f12\r\n==> [2020-11-27-14:50:14.493070] py-pyscf applying constraint libxc\r\n==> [2020-11-27-14:50:14.495498] py-pyscf applying constraint xcfun@:2.0.0a2\r\n==> [2020-11-27-14:50:14.500210] Reading config file /work/kameyama/spack/spack/etc/spack/defaults/packages.yaml\r\n==> [2020-11-27-14:50:14.840904] py-pyscf applying constraint python@2.6:\r\n==> [2020-11-27-14:50:14.842215] python applying constraint pkgconfig@0.9.0:\r\n==> [2020-11-27-14:50:14.847244] py-pyscf applying constraint cmake@2.8:\r\n==> [2020-11-27-14:50:14.851865] py-pyscf applying constraint py-numpy@1.8.0:\r\n==> [2020-11-27-14:50:14.854618] py-numpy applying constraint python@2.7:2.8,3.4:\r\n==> [2020-11-27-14:50:14.857140] py-numpy applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.860724] py-setuptools applying constraint python\r\n==> [2020-11-27-14:50:14.863150] py-numpy applying constraint openblas\r\n==> [2020-11-27-14:50:14.864467] py-numpy applying constraint openblas\r\n==> [2020-11-27-14:50:14.867616] py-pyscf applying constraint py-scipy@0.12:\r\n==> [2020-11-27-14:50:14.870329] py-scipy applying constraint python@2.6:2.8,3.2:\r\n==> [2020-11-27-14:50:14.872481] py-scipy applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.876070] py-scipy applying constraint py-numpy@1.5.1:+blas+lapack\r\n==> [2020-11-27-14:50:14.877544] py-scipy applying constraint openblas\r\n==> [2020-11-27-14:50:14.878449] py-scipy applying constraint openblas\r\n==> [2020-11-27-14:50:14.880645] py-pyscf applying constraint py-h5py@2.3.0:\r\n==> [2020-11-27-14:50:14.884347] py-h5py applying constraint python\r\n==> [2020-11-27-14:50:14.886707] py-h5py applying constraint py-cython@0.23:\r\n==> [2020-11-27-14:50:14.890346] py-cython applying constraint python@2.6:2.8,3.3:\r\n==> [2020-11-27-14:50:14.893611] py-cython applying constraint py-setuptools\r\n==> [2020-11-27-14:50:14.896840] py-h5py applying constraint py-pkgconfig\r\n...\r\n==> [2020-11-27-14:50:16.233964] ncurses applying constraint pkgconf@1.7.3%gcc@9.3.0 arch=linux-centos7-sandybridge\r\n==> [2020-11-27-14:50:16.238327] python applying constraint ncurses\r\n^CSignal received : entering python shell.\r\nTraceback:\r\n  File \"/home/kameyama/work/spack/bin/spack\", line 66, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/main.py\", line 762, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/main.py\", line 490, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/cmd/spec.py\", line 102, in spec\r\n    spec.concretize()\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2477, in concretize\r\n    self._old_concretize(tests)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2279, in _old_concretize\r\n    self._expand_virtual_packages(concretizer),\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2200, in _expand_virtual_packages\r\n    copy.normalize(force=True)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2836, in normalize\r\n    any_change = self._normalize_helper(\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2770, in _normalize_helper\r\n    changed |= self._merge_dependency(\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2729, in _merge_dependency\r\n    changed |= spec_dependency._normalize_helper(\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2759, in _normalize_helper\r\n    dep = self._evaluate_dependency_conditions(dep_name)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 2582, in _evaluate_dependency_conditions\r\n    dep = dp.Dependency(self.name, Spec(name), type=())\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 1035, in __init__\r\n    spec_list = SpecParser(self).parse(spec_like)\r\n  File \"/work/kameyama/spack/spack/lib/spack/spack/spec.py\", line 4196, in __init__\r\n    self.previous = None\r\n\r\n>>> \r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n* **Spack:** 0.16.0-70-44665cb4e\r\n* **Python:** 3.8.6\r\n* **Platform:** linux-centos7-sandybridge\r\n* **Concretizer:** original\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n\r\n",
    "performed_via_github_app": null
}