{
    "url": "https://api.github.com/repos/spack/spack/issues/19051",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19051/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19051/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19051/events",
    "html_url": "https://github.com/spack/spack/issues/19051",
    "id": 711412077,
    "node_id": "MDU6SXNzdWU3MTE0MTIwNzc=",
    "number": 19051,
    "title": "RStudio breaks with spack installed version of R",
    "user": {
        "login": "grabear",
        "id": 20953530,
        "node_id": "MDQ6VXNlcjIwOTUzNTMw",
        "avatar_url": "https://avatars.githubusercontent.com/u/20953530?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/grabear",
        "html_url": "https://github.com/grabear",
        "followers_url": "https://api.github.com/users/grabear/followers",
        "following_url": "https://api.github.com/users/grabear/following{/other_user}",
        "gists_url": "https://api.github.com/users/grabear/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/grabear/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/grabear/subscriptions",
        "organizations_url": "https://api.github.com/users/grabear/orgs",
        "repos_url": "https://api.github.com/users/grabear/repos",
        "events_url": "https://api.github.com/users/grabear/events{/privacy}",
        "received_events_url": "https://api.github.com/users/grabear/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446619830,
            "node_id": "MDU6TGFiZWw0NDY2MTk4MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/R",
            "name": "R",
            "color": "d93f0b",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-09-29T20:06:39Z",
    "updated_at": "2021-01-17T20:15:38Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hello spack team!  \r\n\r\nI'm having trouble getting RStudio Desktop to run on my machine with a version of R installed using spack.  Rstudio will run, but I get an error message on startup.  It seems to be a networking/internet issue because I cannot install packages.  Additionally, this error is not generated when running R straight from the command line.\r\n\r\n**Disclosure**:  I'm using spack on Linux Mint.\r\n\r\n### System Information\r\n```fsh\r\ngrabear@slab02:~$  inxi -Fxz\r\nSystem:    Kernel: 5.4.0-48-generic x86_64 bits: 64 compiler: gcc v: 9.3.0 Desktop: Cinnamon 4.6.7 \r\n           Distro: Linux Mint 20 Ulyana base: Ubuntu 20.04 focal \r\nMachine:   Type: Desktop System: Dell product: OptiPlex 5070 v: N/A serial: <filter> \r\n           Mobo: Dell model: 0YJMC0 v: A01 serial: <filter> UEFI: Dell v: 1.2.1 date: 11/14/2019 \r\nCPU:       Topology: 6-Core model: Intel Core i5-9500 bits: 64 type: MCP arch: Kaby Lake rev: A L2 cache: 9216 KiB \r\n           flags: avx avx2 lm nx pae sse sse2 sse3 sse4_1 sse4_2 ssse3 vmx bogomips: 36000 \r\n           Speed: 800 MHz min/max: 800/4400 MHz Core speeds (MHz): 1: 800 2: 800 3: 800 4: 800 5: 800 6: 800\r\n\r\n```\r\n\r\n### R Session Info\r\n\r\n```R\r\nR version 4.0.2 (2020-06-22)\r\nPlatform: x86_64-pc-linux-gnu (64-bit)\r\nRunning under: Linux Mint 20\r\n\r\nMatrix products: default\r\nBLAS:   $SPACK_ROOT/opt/spack/linux-linuxmint20-skylake/gcc-9.3.0/r-4.0.2-bmidqc6uvsc2ng2qgv7qvkd3jwcubr4l/rlib/R/lib/libRblas.so\r\nLAPACK: $SPACK_ROOT/opt/spack/linux-linuxmint20-skylake/gcc-9.3.0/r-4.0.2-bmidqc6uvsc2ng2qgv7qvkd3jwcubr4l/rlib/R/lib/libRlapack.so\r\n\r\nlocale:\r\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \r\n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \r\n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \r\n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \r\n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \r\n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \r\n\r\nattached base packages:\r\n[1] stats     graphics  grDevices utils     datasets  methods   base     \r\n\r\nloaded via a namespace (and not attached):\r\n[1] compiler_4.0.2\r\n\r\n```\r\n### RStudio Session Info\r\n\r\n```R\r\nR version 4.0.2 (2020-06-22)\r\nPlatform: x86_64-pc-linux-gnu (64-bit)\r\nRunning under: Linux Mint 20\r\n\r\nMatrix products: default\r\nBLAS:   $SPACK_ROOT/opt/spack/linux-linuxmint20-skylake/gcc-9.3.0/r-4.0.2-bmidqc6uvsc2ng2qgv7qvkd3jwcubr4l/rlib/R/lib/libRblas.so\r\nLAPACK: $SPACK_ROOT/opt/spack/linux-linuxmint20-skylake/gcc-9.3.0/r-4.0.2-bmidqc6uvsc2ng2qgv7qvkd3jwcubr4l/rlib/R/lib/libRlapack.so\r\n\r\nlocale:\r\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \r\n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=en_US.UTF-8       LC_NAME=C                 \r\n [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \r\n\r\nattached base packages:\r\n[1] stats     graphics  grDevices utils     datasets  methods   base     \r\n\r\nloaded via a namespace (and not attached):\r\n[1] compiler_4.0.2 tools_4.0.2   \r\n```\r\n### Steps to reproduce the issue\r\n\r\n```fsh\r\n##########################################################\r\n###### Install and configure spack and dependencies ######\r\n##########################################################\r\nsudo apt-get install git\r\nsudo apt-get install -y gnupg2\r\ncd $HOME\r\ngit clone https://github.com/spack/spack.git\r\necho `export SPACK_ROOT=$HOME/spack` >> $HOME/.profile\r\necho `export PATH=$SPACK_ROOT/bin:$PATH` >> $HOME/.profile\r\nsource ./.profile\r\n\r\n########################################\r\n###### Install and configure LMOD ######\r\n########################################\r\nspack install lmod\r\necho `source $(spack location -i lmod)/lmod/lmod/init/bash` >> $HOME/.profile\r\necho `source $SPACK_ROOT/share/spack/setup-env.sh' >> $HOME/.profile \r\nsource ./.profile\r\n# Consider restarting for good measure\r\n\r\n##################################\r\n###### Install Rstudio only ######\r\n##################################\r\ncd $HOME/Downloads\r\nwget https://download1.rstudio.org/desktop/bionic/amd64/rstudio-1.3.1093-amd64.deb\r\nsudo apt-get build-dep r-base\r\nsudo gdebi ./rstudio-1.3.1093-amd64.deb\r\n\r\n##################################\r\n###### Install R with Spack ######\r\n##################################\r\nspack install r@4.0.2\r\nspack install r@3.6.2\r\necho `module load r-4.0.2-gcc-9.3.0-bmidqc6` >> $HOME/.profile \r\necho `export RSTUDIO_WHICH_R=$(which R)` $HOME/.profile\r\n# Consider restarting for good measure\r\n\r\n# Run Rstudio from the terminal or click the icon\r\nrstudio\r\n```\r\n### Error Message\r\n\r\nWhen running rstudio, on startup an Error message occurs:\r\n`Error in tools::startDynamicHelp() : internet routines cannot be loaded`\r\n\r\nAnd when running the command manually:\r\n```R\r\n> tools::startDynamicHelp()\r\nstarting httpd help server ...Error in tools::startDynamicHelp() : internet routines cannot be loaded\r\n```\r\n\r\nWhen running R from the command line, there are no issues.\r\n\r\n### Additional information\r\n\r\nI'm aware that this may be an RStudio issue, but I wanted to confirm that this could not be handled using a non-default spack installation or by creating a rstudio-desktop package.\r\n\r\nHere are some of the other issues I can link to that seemed to be similar:\r\n* https://github.com/ContinuumIO/anaconda-issues/issues/4421\r\n* https://github.com/rstudio/rstudio/issues/4904\r\n* https://github.com/ContinuumIO/anaconda-issues/issues/8640\r\n* https://github.com/ContinuumIO/anaconda-issues/issues/9993\r\n* https://community.rstudio.com/t/internet-routines-cannot-be-loaded/67349\r\n* https://stackoverflow.com/questions/36803908/trouble-installing-packages-in-centos-internet-routines-cannot-be-loaded/36874346\r\n\r\nUseful links:\r\n* https://docs.rstudio.com/resources/install-r/\r\n* https://github.com/spack/spack/blob/develop/var/spack/repos/builtin/packages/r/package.py\r\n* https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html\r\n* https://cran.r-project.org/web/packages/startup/vignettes/startup-intro.html\r\n* https://cran.r-project.org/doc/manuals/r-patched/R-admin.pdf\r\n* https://support.rstudio.com/hc/en-us/articles/218004217-Building-R-from-source\r\n* https://support.rstudio.com/hc/en-us/articles/200486138-Changing-R-versions-for-RStudio-desktop\r\n* https://gist.github.com/ElToro1966/999f1c8ca51a75648dd587a3170e4335\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate\r\n\r\n",
    "performed_via_github_app": null
}