{
    "url": "https://api.github.com/repos/spack/spack/issues/20476",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20476/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20476/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20476/events",
    "html_url": "https://github.com/spack/spack/issues/20476",
    "id": 770991288,
    "node_id": "MDU6SXNzdWU3NzA5OTEyODg=",
    "number": 20476,
    "title": "\"Could NOT find MPI\" error for MPI builds on Theta (Cray XC40)",
    "user": {
        "login": "giltirn",
        "id": 8957187,
        "node_id": "MDQ6VXNlcjg5NTcxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8957187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/giltirn",
        "html_url": "https://github.com/giltirn",
        "followers_url": "https://api.github.com/users/giltirn/followers",
        "following_url": "https://api.github.com/users/giltirn/following{/other_user}",
        "gists_url": "https://api.github.com/users/giltirn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/giltirn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/giltirn/subscriptions",
        "organizations_url": "https://api.github.com/users/giltirn/orgs",
        "repos_url": "https://api.github.com/users/giltirn/repos",
        "events_url": "https://api.github.com/users/giltirn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/giltirn/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-12-18T15:54:00Z",
    "updated_at": "2021-01-08T20:15:48Z",
    "closed_at": "2021-01-08T20:15:48Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I am trying to build my dependencies on Theta using a spack environment with the following spack.yaml\r\n\r\n```\r\nspack:\r\n\r\n  specs:\r\n  - mpich\r\n  - cereal@1.3.0 %gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n  - libzmq@4.3.2 %gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n  - googletest@1.10.0 %gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n  - adios2 @2.6.0 %gcc@9.3.0-cray ^libfabric@1.9.0 arch=cray-cnl7-mic_knl\r\n  - py-mochi-sonata ^mochi-sonata@master ^python@3.6.0 %gcc@9.3.0-cray ^libfabric@1.9.0 arch=cray-cnl7-mic_knl\r\n  - mochi-sonata +benchmark @master %gcc@9.3.0-cray ^libfabric@1.9.0 arch=cray-cnl7-mic_knl\r\n  - mercury @master %gcc@9.3.0-cray ^libfabric@1.9.0 arch=cray-cnl7-mic_knl\r\n  concretization: together\r\n  compilers:\r\n  - compiler:\r\n      spec: gcc@9.3.0-cray\r\n      paths:\r\n        cc: /opt/cray/pe/craype/2.6.5/bin/cc\r\n        cxx: /opt/cray/pe/craype/2.6.5/bin/CC\r\n        f77: /opt/cray/pe/craype/2.6.5/bin/ftn\r\n        fc: /opt/cray/pe/craype/2.6.5/bin/ftn\r\n      flags: {}\r\n      operating_system: cnl7\r\n      target: any\r\n      modules:\r\n      - PrgEnv-gnu\r\n      - gcc/9.3.0\r\n      - craype-mic-knl\r\n      - cray-mpich/7.7.10\r\n      environment:\r\n        unset: []\r\n      extra_rpaths: []\r\n  repos:\r\n  - /gpfs/mira-home/ckelly/install_chimbuko/sds/sds-repo\r\n  upstreams:\r\n    alcf-spack:\r\n      install_tree: /soft/spack/root/opt/spack\r\n  packages:\r\n    all:\r\n      compiler:\r\n      - gcc@9.3.0-cray\r\n      providers:\r\n        mpi:\r\n        - mpich\r\n        pkgconfig:\r\n        - pkg-config\r\n      buildable: true\r\n      version: []\r\n      target: []\r\n    mpich:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: mpich@7.7.10%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        modules:\r\n        - cray-mpich/7.7.10\r\n    pkg-config:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: pkg-config@0.28%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        prefix: /usr\r\n    autoconf:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: autoconf@2.69%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        prefix: /usr\r\n    automake:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: automake@1.13.4%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        prefix: /usr\r\n    bzip2:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: bzip2@1.0.6%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        prefix: /usr\r\n    zlib:\r\n      buildable: false\r\n      version: []\r\n      target: []\r\n      compiler: []\r\n      providers: {}\r\n      externals:\r\n      - spec: zlib\r\n        prefix: /usr\r\n    openssl:\r\n      buildable: false\r\n      version: []\r\n      target: []\r\n      compiler: []\r\n      providers: {}\r\n      externals:\r\n      - spec: openssl@1.1.1d\r\n        prefix: /usr\r\n    gdbm:\r\n      buildable: false\r\n      version: []\r\n      target: []\r\n      compiler: []\r\n      providers: {}\r\n      externals:\r\n      - spec: gdbm\r\n        prefix: /usr\r\n    m4:\r\n      buildable: false\r\n      version: []\r\n      target: []\r\n      compiler: []\r\n      providers: {}\r\n      externals:\r\n      - spec: m4\r\n        prefix: /usr\r\n\r\n    cmake:\r\n      buildable: false\r\n      compiler: []\r\n      version: []\r\n      target: []\r\n      providers: {}\r\n      externals:\r\n      - spec: cmake@3.18.0%gcc@9.3.0-cray arch=cray-cnl7-mic_knl\r\n        modules:\r\n        - cmake/3.18.0\r\n\r\n\r\n\r\n  view: true\r\n```\r\nWhile most of the components are compiling, I am having trouble with adios2:\r\n\r\n```\r\n==> Installing adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v\r\n==> No binary for adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v found: installing from source\r\n==> Using cached archive: /gpfs/mira-home/ckelly/install_chimbuko/spack/var/spack/cache/_source-cache/archive/45/45b41889065f8b840725928db092848b8a8b8d1bfae1b92e72f8868d1c76216c.tar.gz\r\n==> adios2: Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:STRING=/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v' '-DCMAKE_BUILD_TYPE:STRING=Release' '-DCMAKE_INTERPROCEDURAL_OPTIMIZATION:BOOL=OFF' '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=OFF' '-DCMAKE_INSTALL_RPATH:STRING=/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/lib64;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/c-blosc-1.17.0-i3cwue3bief3pzbf5mvsqckwq7j33zkk/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/lz4-1.9.2-wjzhqaipciy3tu6njtk2n3lwx3hqr3dn/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/snappy-1.1.8-iiduzwqbvbqnfi5qtspgdwwxwnnwg3i5/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/zstd-1.4.5-fes7v556roaxbebcjcjx4iv44hast5mw/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libfabric-1.9.0-hbsts2yocmcfrdplcd62cmq5bgw7qn2c/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libffi-3.3-5r3rs6dribd5f5zhmwkmfdjgy6tkrmvt/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libpng-1.6.37-hld6nebxzrnv7tlwvkhriqlvs2iohvrb/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/sz-2.0.2.0-uzb4fjrpzwilxsrlfmacnsbkm7nq2i6k/lib;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libffi-3.3-5r3rs6dribd5f5zhmwkmfdjgy6tkrmvt/lib64;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/zfp-0.5.5-ryoihfcj2d47rmthxpvxgozyd3elfspp/lib64;/opt/gcc/9.3.0/snos' '-DCMAKE_PREFIX_PATH:STRING=/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/c-blosc-1.17.0-i3cwue3bief3pzbf5mvsqckwq7j33zkk;/lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libfabric-1.9.0-hbsts2yocmcfrdplcd62cmq5bgw7qn2c;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libffi-3.3-5r3rs6dribd5f5zhmwkmfdjgy6tkrmvt;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/libpng-1.6.37-hld6nebxzrnv7tlwvkhriqlvs2iohvrb;None;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/sz-2.0.2.0-uzb4fjrpzwilxsrlfmacnsbkm7nq2i6k;/gpfs/mira-home/ckelly/install_chimbuko/spack/opt/spack/cray-cnl7-mic_knl/gcc-9.3.0-cray/zfp-0.5.5-ryoihfcj2d47rmthxpvxgozyd3elfspp' '-DBUILD_SHARED_LIBS:BOOL=ON' '-DADIOS2_BUILD_TESTING=OFF' '-DADIOS2_BUILD_EXAMPLES=OFF' '-DADIOS2_USE_MPI=ON' '-DADIOS2_USE_MGARD=OFF' '-DADIOS2_USE_ZFP=ON' '-DADIOS2_USE_SZ=ON' '-DADIOS2_USE_DataMan=OFF' '-DADIOS2_USE_SST=ON' '-DADIOS2_USE_HDF5=OFF' '-DADIOS2_USE_Python=OFF' '-DADIOS2_USE_Fortran=ON' '-DADIOS2_USE_Endian_Reverse=OFF' '-DBUILD_TESTING:BOOL=OFF' '-DADIOS2_USE_Blosc=ON' '-DADIOS2_USE_BZip2=ON' '-DADIOS2_USE_PNG=ON' '-DADIOS2_USE_SSC=ON' '-DADIOS2_USE_DataSpaces=OFF' '-DADIOS2_USE_IME=OFF' '-DCMAKE_DISABLE_FIND_PACKAGE_BISON=TRUE' '-DCMAKE_DISABLE_FIND_PACKAGE_FLEX=TRUE' '-DCMAKE_DISABLE_FIND_PACKAGE_CrayDRC=TRUE' '-DCMAKE_DISABLE_FIND_PACKAGE_NVSTREAM=TRUE' '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-src'\r\n\r\n1 error found in build log:\r\n     31    -- Check for working Fortran compiler: /gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran - skipped\r\n     32    -- Checking whether /gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran supports Fortran 90\r\n     33    -- Checking whether /gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran supports Fortran 90 - yes\r\n     34    -- Could NOT find MPI_C (missing: MPI_C_LIB_NAMES MPI_C_HEADER_DIR MPI_C_WORKS)\r\n     35    -- Could NOT find MPI_CXX (missing: MPI_CXX_LIB_NAMES MPI_CXX_HEADER_DIR MPI_CXX_WORKS)\r\n     36    -- Could NOT find MPI_Fortran (missing: MPI_Fortran_LIB_NAMES MPI_Fortran_F77_HEADER_DIR MPI_Fortran_MODULE_DIR MPI_Fortran_WORKS)\r\n  >> 37    CMake Error at /lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan/share/cmake-3.18/Modules/FindPackageHandleStandardArgs.cmake:165 (message\r\n           ):\r\n     38      Could NOT find MPI (missing: MPI_C_FOUND MPI_CXX_FOUND MPI_Fortran_FOUND C\r\n     39      Fortran)\r\n     40    Call Stack (most recent call first):\r\n     41      /lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan/share/cmake-3.18/Modules/FindPackageHandleStandardArgs.cmake:458 (_FPHSA_FAILURE_MESSA\r\n           GE)\r\n     42      /lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan/share/cmake-3.18/Modules/FindMPI.cmake:1721 (find_package_handle_standard_args)\r\n     43      cmake/FindMPI.cmake:10 (include)\r\n\r\nSee build log for details:\r\n  /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-out.txt\r\n\r\n```\r\n\r\nAs you can see I am here including mpich as a root dependency following the advice from [here](https://github.com/spack/spack/issues/16910), but it is apparently not working.\r\n\r\nThe build seems to be failing due to the include path not containing mpi.h:\r\n\r\n```\r\nckelly@thetalogin6:~/install_chimbuko/sds> cat /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeError.log\r\nThe MPI test test_mpi for C in mode normal failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_70a6b/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_70a6b.dir/build.make CMakeFiles/cmTC_70a6b.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding C object CMakeFiles/cmTC_70a6b.dir/test_mpi.c.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gcc   -std=gnu99 -o CMakeFiles/cmTC_70a6b.dir/test_mpi.c.o -c /lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan/share/cmake-3.18/Modules/FindMPI/test_mpi.c\r\n/lus/theta-fs0/software/spack/root/opt/spack/linux-sles15-x86_64/gcc-9.3.0/cmake-3.18.0-vdrxoxwaornw3hiyw357ktcetub6bsan/share/cmake-3.18/Modules/FindMPI/test_mpi.c:1:10: fatal error: mpi.h: No such file or directory\r\n    1 | #include <mpi.h>\r\n      |          ^~~~~~~\r\ncompilation terminated.\r\ngmake[1]: *** [CMakeFiles/cmTC_70a6b.dir/build.make:85: CMakeFiles/cmTC_70a6b.dir/test_mpi.c.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_70a6b/fast] Error 2\r\n\r\n\r\n\r\nThe MPI test test_mpi for CXX in mode normal failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_1e4ca/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_1e4ca.dir/build.make CMakeFiles/cmTC_1e4ca.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding CXX object CMakeFiles/cmTC_1e4ca.dir/test_mpi.cpp.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/g++   -std=gnu++11 -o CMakeFiles/cmTC_1e4ca.dir/test_mpi.cpp.o -c /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.cpp\r\n/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.cpp:1:10: fatal error: mpi.h: No such file or directory\r\n    1 | #include <mpi.h>\r\n      |          ^~~~~~~\r\ncompilation terminated.\r\ngmake[1]: *** [CMakeFiles/cmTC_1e4ca.dir/build.make:85: CMakeFiles/cmTC_1e4ca.dir/test_mpi.cpp.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_1e4ca/fast] Error 2\r\n\r\n\r\n\r\nThe MPI test test_mpi for Fortran in mode F77_HEADER failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_3f561/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_3f561.dir/build.make CMakeFiles/cmTC_3f561.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding Fortran object CMakeFiles/cmTC_3f561.dir/test_mpi.f90.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran    -c /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90 -o CMakeFiles/cmTC_3f561.dir/test_mpi.f90.o\r\n/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90:3: Error: Can't open included file 'mpif.h'\r\ngmake[1]: *** [CMakeFiles/cmTC_3f561.dir/build.make:85: CMakeFiles/cmTC_3f561.dir/test_mpi.f90.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_3f561/fast] Error 2\r\n\r\n\r\n\r\nThe MPI test test_mpi for Fortran in mode F90_MODULE failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_8e481/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_8e481.dir/build.make CMakeFiles/cmTC_8e481.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding Fortran object CMakeFiles/cmTC_8e481.dir/test_mpi.f90.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran    -c /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90 -o CMakeFiles/cmTC_8e481.dir/test_mpi.f90.o\r\n/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90:2:10:\r\n\r\n    2 |       use mpi\r\n      |          1\r\nFatal Error: Cannot open module file 'mpi.mod' for reading at (1): No such file or directory\r\ncompilation terminated.\r\ngmake[1]: *** [CMakeFiles/cmTC_8e481.dir/build.make:85: CMakeFiles/cmTC_8e481.dir/test_mpi.f90.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_8e481/fast] Error 2\r\n\r\n\r\n\r\nThe MPI test test_mpi for Fortran in mode F08_MODULE failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_97a98/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_97a98.dir/build.make CMakeFiles/cmTC_97a98.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding Fortran object CMakeFiles/cmTC_97a98.dir/test_mpi.f90.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran    -c /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90 -o CMakeFiles/cmTC_97a98.dir/test_mpi.f90.o\r\n/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90:2:10:\r\n\r\n    2 |       use mpi_f08\r\n      |          1\r\nFatal Error: Cannot open module file 'mpi_f08.mod' for reading at (1): No such file or directory\r\ncompilation terminated.\r\ngmake[1]: *** [CMakeFiles/cmTC_97a98.dir/build.make:85: CMakeFiles/cmTC_97a98.dir/test_mpi.f90.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_97a98/fast] Error 2\r\n\r\n\r\n\r\nThe MPI test test_mpi for Fortran in mode F77_HEADER_NOKIND failed to compile with the following output:\r\nChange Dir: /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command(s):/usr/bin/gmake cmTC_b031e/fast && /usr/bin/gmake  -f CMakeFiles/cmTC_b031e.dir/build.make CMakeFiles/cmTC_b031e.dir/build\r\ngmake[1]: Entering directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\nBuilding Fortran object CMakeFiles/cmTC_b031e.dir/test_mpi.f90.o\r\n/gpfs/mira-home/ckelly/install_chimbuko/spack/lib/spack/env/gcc/gfortran    -c /tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90 -o CMakeFiles/cmTC_b031e.dir/test_mpi.f90.o\r\n/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/FindMPI/test_mpi.f90:3: Error: Can't open included file 'mpif.h'\r\ngmake[1]: *** [CMakeFiles/cmTC_b031e.dir/build.make:85: CMakeFiles/cmTC_b031e.dir/test_mpi.f90.o] Error 1\r\ngmake[1]: Leaving directory '/tmp/ckelly/spack-stage/spack-stage-adios2-2.6.0-vw2kjnsj7k55bpf7sj4tay47supf2d3v/spack-build-vw2kjns/CMakeFiles/CMakeTmp'\r\ngmake: *** [Makefile:140: cmTC_b031e/fast] Error 2\r\n```\r\n\r\nI have tried adding ^mpich as a dependency to the adios2 spec but that did not work either. I would very much appreciate any help you can provide.\r\n\r\n```\r\nckelly@thetalogin6:~/install_chimbuko/sds> spack debug report\r\n* **Spack:** 0.16.0-123-42ed6e25e\r\n* **Python:** 3.6.10\r\n* **Platform:** cray-sles15-haswell\r\n* **Concretizer:** original\r\n```\r\n\r\n### Additional information\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [ ] I have run the failing commands in debug mode and reported the output\r\n\r\n",
    "performed_via_github_app": null
}