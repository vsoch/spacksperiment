{
    "url": "https://api.github.com/repos/spack/spack/issues/1521",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/1521/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/1521/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/1521/events",
    "html_url": "https://github.com/spack/spack/issues/1521",
    "id": 171231734,
    "node_id": "MDU6SXNzdWUxNzEyMzE3MzQ=",
    "number": 1521,
    "title": "Spack installations slow down CLI",
    "user": {
        "login": "sknigh",
        "id": 18291531,
        "node_id": "MDQ6VXNlcjE4MjkxNTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/18291531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sknigh",
        "html_url": "https://github.com/sknigh",
        "followers_url": "https://api.github.com/users/sknigh/followers",
        "following_url": "https://api.github.com/users/sknigh/following{/other_user}",
        "gists_url": "https://api.github.com/users/sknigh/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sknigh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sknigh/subscriptions",
        "organizations_url": "https://api.github.com/users/sknigh/orgs",
        "repos_url": "https://api.github.com/users/sknigh/repos",
        "events_url": "https://api.github.com/users/sknigh/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sknigh/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2016-08-15T18:34:03Z",
    "updated_at": "2016-09-01T20:00:22Z",
    "closed_at": "2016-09-01T20:00:22Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Parts of Spack CLI slow down noticeably as the number of installations increase.\n\n``` bash\n[vagrant@cent7 ~]$ time spack install astyle\n==> Installing astyle\n==> Trying to fetch from file:///home/vagrant/spack/var/spack/cache/astyle/astyle-2.04.tar.gz\n######################################################################## 100.0%\n==> Staging archive: /home/vagrant/spack/var/spack/stage/astyle-2.04-g53ucw44hxi62qqnvpr57lomgsq3aaxg/astyle-2.04.tar.gz\n==> Created stage in /home/vagrant/spack/var/spack/stage/astyle-2.04-g53ucw44hxi62qqnvpr57lomgsq3aaxg\n==> No patches needed for astyle\n==> Building astyle\n==> Successfully installed astyle\n  Fetch: 0.06s.  Build: 6.85s.  Total: 6.91s.\n[+] /home/vagrant/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/astyle-2.04-g53ucw44hxi62qqnvpr57lomgsq3aaxg\n\nreal    0m31.096s\nuser    0m27.289s\nsys     0m3.791s\n```\n\n``` bash\n[vagrant@cent7 ~]$ spack find\n==> 130 installed packages.\n-- linux-centos7-x86_64 / gcc@4.8.5 -----------------------------\nR@3.3.0         curl@7.50.1        git@2.8.1           jpeg@9b              libsigsegv@2.10  openmpi@2.0.0      python@2.7.11            r-curl@1.0           r-ggplot2@2.1.0    r-iterators@1.0.8  r-mime@0.5            r-rcppeigen@0.3.2.8.1  r-rstan@2.10.1          r-xlconnectjars@0.2-12  tk@8.6.5\nastyle@2.04     datamash@1.1.0     glib@2.42.1         libaio@0.3.110-1     libtiff@4.0.3    openssl@1.0.2h     python@3.5.2             r-dbi@0.4-1          r-git2r@0.15.0     r-jsonlite@1.0     r-munsell@0.4.3       r-registry@0.3         r-rstudioapi@0.6        r-xlsx@0.5.7            unixodbc@2.3.4\nautoconf@2.69   expat@2.1.0        gmp@6.1.1           libedit@3.1          libtool@2.4.6    pango@1.40.1       r-BiocGenerics@bioc-3.3  r-devtools@1.11.1    r-gridbase@0.4-7   r-labeling@0.3     r-nmf@0.20.6          r-reshape2@1.4.1       r-scales@0.4.0          r-xlsxjars@0.6.1        xz@5.2.2\nautomake@1.15   fontconfig@2.11.1  harfbuzz@0.9.37     libevent@2.0.21      libxml2@2.9.2    parallel@20160422  r-R6@2.1.2               r-dichromat@2.0-0    r-gridextra@2.2.1  r-lattice@0.20-33  r-openssl@0.9.4       r-rjava@0.9-8          r-stanheaders@2.10.0-2  r-xtable@1.8-2          zlib@1.2.8\nboost@1.61.0    freetype@2.5.3     hwloc@1.11.3        libffi@3.2.1         m4@1.4.17        pcre@8.38          r-abind@1.4-3            r-digest@0.6.9       r-gtable@0.2.0     r-magic@1.5-6      r-packrat@0.4.7-1     r-rmysql@0.10.9        r-stringi@1.1.1         readline@6.3\nbzip2@1.0.6     gcc@4.9.2          icu@54.1            libhio@1.3.0.1       mariadb@10.1.14  perl@5.24.0        r-bh@1.60.0-2            r-doparallel@1.0.10  r-httr@1.1.0       r-magrittr@1.5     r-pkgmaker@0.22       r-rngtools@1.2.4       r-stringr@1.0.0         ruby@2.2.0\ncairo@1.14.0    gcc@5.3.0          isl@0.14            libjson-c@0.11       mpc@1.0.3        pixman@0.32.6      r-cluster@2.0.4          r-filehash@2.3       r-igraph@1.0.1     r-mass@7.3-45      r-plyr@1.8.4          r-rodbc@1.3-13         r-whisker@0.3-2         sqlite@3.8.5\ncmake@2.8.10.2  gcc@6.1.0          jdk@8u92-linux-x64  libpciaccess@0.13.4  mpfr@3.1.4       pkg-config@0.29.1  r-codetools@0.2-14       r-foreach@1.4.3      r-inline@0.3.14    r-matrix@1.2-6     r-rcolorbrewer@1.1-2  r-rpostgresql@0.4-1    r-withr@1.0.1           tar@1.29\ncmake@3.5.2     gettext@0.19.8.1   jemalloc@4.1.0      libpng@1.6.16        ncurses@6.0      postgresql@9.5.3   r-colorspace@1.2-6       r-foreign@0.8-66     r-irlba@2.0.0      r-memoise@1.0.0    r-rcpp@0.12.6         r-rsqlite@1.0.0        r-xlconnect@0.2-12      tcl@8.6.5\n```\n\n``` bash\n[vagrant@cent7 ~]$ time spack load astyle\n\nreal    0m33.399s\nuser    0m30.105s\nsys     0m3.273s\n```\n\n``` bash\n[vagrant@cent7 ~]$ time spack location -i astyle\n/home/vagrant/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/astyle-2.04-g53ucw44hxi62qqnvpr57lomgsq3aaxg\n\nreal    0m24.009s\nuser    0m21.304s\nsys     0m2.700s\n```\n\n``` bash\n[vagrant@cent7 ~]$ which astyle\n~/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/astyle-2.04-g53ucw44hxi62qqnvpr57lomgsq3aaxg/bin/astyle\n[vagrant@cent7 ~]$ time spack find astyle\n==> 1 installed packages.\n-- linux-centos7-x86_64 / gcc@4.8.5 -----------------------------\nastyle@2.04\n\nreal    0m23.771s\nuser    0m20.826s\nsys     0m2.937s\n```\n\n``` bash\n[vagrant@cent7 ~]$ time spack uninstall astyle\n==> The following packages will be uninstalled : \n\n-- linux-centos7-x86_64 / gcc@4.8.5 -----------------------------\ng53ucw4 astyle@2.04%gcc\n\n\n==> Do you want to proceed ? [y/n]\ny\n==> Successfully uninstalled astyle@2.04%gcc@4.8.5 arch=linux-centos7-x86_64-g53ucw4\n\nreal    1m10.609s\nuser    1m3.053s\nsys     0m4.606s\n```\n\nOther commands don't seem to be affected.\n\n``` bash\n[vagrant@cent7 ~]$ (time spack spec astyle) 2>&1 | grep \"^real\"\nreal    0m0.333s\n[vagrant@cent7 ~]$ (time spack list) 2>&1 | grep \"^real\"\nreal    0m0.324s\n[vagrant@cent7 ~]$ (time spack info astyle) 2>&1 | grep \"^real\"\nreal    0m0.315s\n```\n",
    "performed_via_github_app": null
}