{
    "url": "https://api.github.com/repos/spack/spack/issues/4898",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4898/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4898/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4898/events",
    "html_url": "https://github.com/spack/spack/issues/4898",
    "id": 245462382,
    "node_id": "MDU6SXNzdWUyNDU0NjIzODI=",
    "number": 4898,
    "title": "Error: Invalid spec error for new un-committed package - debugging advice?",
    "user": {
        "login": "jgalarowicz",
        "id": 630197,
        "node_id": "MDQ6VXNlcjYzMDE5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/630197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jgalarowicz",
        "html_url": "https://github.com/jgalarowicz",
        "followers_url": "https://api.github.com/users/jgalarowicz/followers",
        "following_url": "https://api.github.com/users/jgalarowicz/following{/other_user}",
        "gists_url": "https://api.github.com/users/jgalarowicz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jgalarowicz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jgalarowicz/subscriptions",
        "organizations_url": "https://api.github.com/users/jgalarowicz/orgs",
        "repos_url": "https://api.github.com/users/jgalarowicz/repos",
        "events_url": "https://api.github.com/users/jgalarowicz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jgalarowicz/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2017-07-25T16:37:39Z",
    "updated_at": "2017-08-07T17:48:49Z",
    "closed_at": "2017-08-07T17:48:49Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hi,\r\n\r\nI'm trying to add a new package for our new GUI.   This new package depends on openspeedshop, which traditionally builds its own qt3 based GUI.  I've recently added a multi-valued variant to pass to openspeedshop that tells it not to build the qt3 GUI to avoid conflicts like the one below (Invalid spec).\r\nBut apparently, I'm not doing something correctly because I'm still getting this conflict (below).\r\n\r\nThis is the command I'm using:\r\n```\r\nspack install cbtf-argonavis-gui\r\n```\r\nwhich results in this error:\r\n```\r\n==> Error: Invalid spec: 'qt@4.8.6:^bzip2^font-util^fontconfig^freetype^gettext@0.19:^glib^icu4c^inputproto^jpeg^kbproto^lcms^libffi^libmng^libpng^libpthread-stubs^libtiff^libx11^libxau@0.99.2:^libxcb@1.1.92:^libxdmcp^libxml2+python^openssl^pkg-config@0.24:+internal_glib^util-macros^xcb-proto^xextproto^xproto@7.0.17:^xtrans^xz^zlib@1.0.4:'. Package qt requires version 3.3.8b, but spec asked for 4.8.6:\r\n```\r\nDoes anyone have a suggestion on how to debug this?   -d on the spack line doesn't show anything.\r\n\r\nThis is my new (un-committed) package file for the new GUI:\r\n```python\r\nfrom spack import *\r\n\r\n\r\nclass CbtfArgonavisGui(Package):\r\n    \"\"\"CBTF Argo Navis GUI project contains the GUI that views CUDA performance\r\n       information.\r\n\r\n    \"\"\"\r\n    homepage = \"http://sourceforge.net/p/cbtf/wiki/Home/\"\r\n\r\n    # Mirror access template example\r\n    url = \"file:/home/jeg/spack_updates/cbtf-argonavis-gui-0.8.1.tar.gz\"\r\n    version('0.8.1', 'c8a0b35f20f13ada62463acdce802a7b')\r\n\r\n    #version('0.8.1', branch='master',\r\n    #        git='https://github.com/OpenSpeedShop/cbtf-argonavis-gui.git')\r\n\r\n    depends_on(\"cmake@3.0.2\", type='build')\r\n    depends_on(\"openspeedshop+cuda gui='qt4'\")\r\n    depends_on('qt@4.8.6:')\r\n    depends_on(\"boost@1.50.0:1.59.0\")\r\n    depends_on(\"cbtf\")\r\n    depends_on(\"cbtf-krell\")\r\n    depends_on(\"cbtf-argonavis\")\r\n    depends_on(\"cuda\")\r\n    depends_on(\"mrnet@5.0.1:+lwthreads\", when='+cbtf')\r\n    depends_on(\"xerces-c@3.1.1:\")\r\n    depends_on(\"graphviz\")\r\n    depends_on(\"QtGraph\")\r\n\r\n    parallel = False\r\n\r\n    def setup_environment(self, spack_env, run_env):\r\n        \"\"\"Set up the compile and runtime environments for a package.\"\"\"\r\n        spack_env.set('BOOSTROOT', self.spec['boost'].prefix)\r\n        spack_env.set('CBTF_ROOT', self.spec['cbtf'].prefix)\r\n        spack_env.set('CBTF_KRELL_ROOT', self.spec['cbtf-krell'].prefix)\r\n        spack_env.set('CBTF_ARGONAVIS_ROOT', self.spec['cbtf-argonavis'].prefix)\r\n        spack_env.set('OSS_CBTF_ROOT', self.spec['openspeedshop'].prefix)\r\n        spack_env.set('GRAPHVIZ_ROOT', self.spec['graphviz'].prefix)\r\n        spack_env.set('QTGRAPHLIB_ROOT', self.spec['QtGraph'].prefix)\r\n        spack_env.set('KRELL_ROOT_MRNET', self.spec['mrnet'].prefix)\r\n        spack_env.set('KRELL_ROOT_XERCES', self.spec['xerces-c'].prefix)\r\n        spack_env.set('INSTALL_ROOT', self.spec.prefix)\r\n\r\n\r\n    def install(self, spec, prefix):\r\n        options = ['-o', 'Makefile', 'openss-gui.pro']\r\n        qmake = which('qmake')\r\n        qmake(*options)\r\n        make()\r\n        make(\"install\")\r\n```\r\nThese are my attempts at building:\r\n```\r\n[jeg@localhost packages]$ spack install cbtf-argonavis-gui\r\n==> Error: Invalid spec: 'qt@4.8.6:^bzip2^font-util^fontconfig^freetype^gettext@0.19:^glib^icu4c^inputproto^jpeg^kbproto^lcms^libffi^libmng^libpng^libpthread-stubs^libtiff^libx11^libxau@0.99.2:^libxcb@1.1.92:^libxdmcp^libxml2+python^openssl^pkg-config@0.24:+internal_glib^util-macros^xcb-proto^xextproto^xproto@7.0.17:^xtrans^xz^zlib@1.0.4:'. Package qt requires version 3.3.8b, but spec asked for 4.8.6:\r\n[jeg@localhost packages]$ spack find\r\n==> 154 installed packages.\r\n-- linux-fedora19-x86_64 / gcc@4.8.3 ----------------------------\r\nQtGraph@1.0.0       cmake@3.7.2        gettext@0.19.8.1   libelf@0.8.13         libxau@1.0.8       openssl@1.1.0e     readline@6.3\r\nbinutils@2.24       cmake@3.8.1        gettext@0.19.8.1   libffi@3.2.1          libxcb@1.12        otf2@2.0           readline@6.3\r\nbinutils@2.24       cube@4.3.4         gettext@0.19.8.1   libmng@2.0.2          libxcb@1.12        papi@5.5.0         readline@7.0\r\nbinutils@2.24       cuda@6.0           ghostscript@9.21   libmng@2.0.2          libxdmcp@1.1.2     papi@5.5.1         scorep@2.0.2\r\nbison@3.0.4         dyninst@9.2.0      glib@1.2.10-39     libmng@2.0.2          libxml2@2.9.4      pcre@8.40          sqlite@3.8.5\r\nbison@3.0.4         dyninst@9.2.0      glib@2.53.1        libmng@2.0.3          libxml2@2.9.4      perl@5.24.1        sqlite@3.18.0\r\nboost@1.59.0        dyninst@9.3.2      gperf@3.0.4        libmonitor@20130218   libxml2@2.9.4      pkg-config@0.29.1  tar@1.29\r\nboost@1.59.0        elfutils@0.163     graphviz@2.38.0    libpciaccess@0.13.4   libxml2@2.9.4      pkg-config@0.29.2  util-macros@1.19.0\r\nbzip2@1.0.6         expat@2.2.0        help2man@1.47.4    libpng@1.2.57         libxml2@2.9.4      python@2.7.13      util-macros@1.19.1\r\nbzip2@1.0.6         flex@2.6.1         hwloc@1.11.6       libpng@1.2.57         libxml2@2.9.4      python@2.7.13      xcb-proto@1.12\r\ncbtf@1.8            flex@2.6.3         icu4c@57.1         libpng@1.6.29         m4@1.4.17          python@2.7.13      xcb-proto@1.12\r\ncbtf@1.8            flex@2.6.3         icu4c@58.2         libpthread-stubs@0.3  m4@1.4.18          python@2.7.13      xcb-proto@1.12\r\ncbtf@1.8            flex@2.6.4         inputproto@2.3.2   libpthread-stubs@0.4  m4@1.4.18          python@2.7.13      xcb-proto@1.12\r\ncbtf-argonavis@1.8  font-util@1.3.1    jpeg@9b            libsigsegv@2.10       mrnet@5.0.1-2      qt@3.3.8b          xerces-c@3.1.4\r\ncbtf-argonavis@1.8  fontconfig@2.12.1  kbproto@1.0.7      libsigsegv@2.11       mrnet@5.0.1-2      qt@3.3.8b          xextproto@7.3.0\r\ncbtf-krell@1.8      fontconfig@2.12.1  lcms@2.6           libtiff@4.0.6         ncurses@6.0        qt@3.3.8b          xproto@7.0.29\r\ncbtf-krell@1.8      fontconfig@2.12.3  lcms@2.6           libtiff@4.0.6         ncurses@6.0        qt@3.3.8b          xproto@7.0.31\r\ncbtf-krell@1.8      fontconfig@2.12.3  lcms@2.8           libtiff@4.0.7         opari2@2.0         qt@5.8.0           xtrans@1.3.5\r\ncbtf-krell@1.8      fontconfig@2.12.3  lcms@2.8           libtiff@4.0.8         openmpi@2.0.2      qt@5.8.0           xz@5.2.2\r\ncmake@3.0.2         freetype@2.7.1     libdwarf@20160507  libtool@2.4.6         openspeedshop@2.3  qt@5.9.1           xz@5.2.3\r\ncmake@3.1.0         freetype@2.7.1     libdwarf@20160507  libunwind@1.1         openssl@1.0.2j     qt@5.9.1           zlib@1.2.10\r\ncmake@3.7.1         gettext@0.19.8.1   libdwarf@20160507  libx11@1.6.5          openssl@1.0.2k     qtgraph@1.0.0      zlib@1.2.11\r\n\r\n\r\n[jeg@localhost packages]$ spack -d install cbtf-argonavis-gui\r\n==> Error: Invalid spec: 'qt@4.8.6:^bzip2^font-util^fontconfig^freetype^gettext@0.19:^glib^icu4c^inputproto^jpeg^kbproto^lcms^libffi^libmng^libpng^libpthread-stubs^libtiff^libx11^libxau@0.99.2:^libxcb@1.1.92:^libxdmcp^libxml2+python^openssl^pkg-config@0.24:+internal_glib^util-macros^xcb-proto^xextproto^xproto@7.0.17:^xtrans^xz^zlib@1.0.4:'. Package qt requires version 3.3.8b, but spec asked for 4.8.6:\r\n\r\n[jeg@localhost packages]$ spack install openspeedshop gui=\"qt4\"\r\n==> openspeedshop is already installed in /home/jeg/spack/opt/spack/linux-fedora19-x86_64/gcc-4.8.3/openspeedshop-2.3-fwr472lzmao66qfl46qdfnmm2vlyr5ky\r\n[jeg@localhost packages]$ spack uninstall -a -f openspeedshop\r\n==> The following packages will be uninstalled:\r\n\r\n-- linux-fedora19-x86_64 / gcc@4.8.3 ----------------------------\r\nfwr472l openspeedshop@2.3%gcc+cbtf~cuda~frontend gui=qt4 ~mpich~mpich2~mpt~mvapich~mvapich2~offline~openmpi~runtime\r\n\r\n==> Do you want to proceed? [y/N] y\r\n==> Successfully uninstalled openspeedshop@2.3%gcc@4.8.3+cbtf~cuda~frontend gui=qt4 ~mpich~mpich2~mpt~mvapich~mvapich2~offline~openmpi~runtime arch=linux-fedora19-x86_64 /fwr472l\r\n[jeg@localhost packages]$ spack -d install cbtf-argonavis-gui\r\n==> Error: Invalid spec: 'qt@4.8.6:^bzip2^font-util^fontconfig^freetype^gettext@0.19:^glib^icu4c^inputproto^jpeg^kbproto^lcms^libffi^libmng^libpng^libpthread-stubs^libtiff^libx11^libxau@0.99.2:^libxcb@1.1.92:^libxdmcp^libxml2+python^openssl^pkg-config@0.24:+internal_glib^util-macros^xcb-proto^xextproto^xproto@7.0.17:^xtrans^xz^zlib@1.0.4:'. Package qt requires version 3.3.8b, but spec asked for 4.8.6:\r\n```",
    "performed_via_github_app": null
}