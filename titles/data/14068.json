{
    "url": "https://api.github.com/repos/spack/spack/issues/14068",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14068/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14068/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14068/events",
    "html_url": "https://github.com/spack/spack/issues/14068",
    "id": 535766391,
    "node_id": "MDU6SXNzdWU1MzU3NjYzOTE=",
    "number": 14068,
    "title": "Installation issue: hypre with +openmp variant",
    "user": {
        "login": "weijianwen",
        "id": 908249,
        "node_id": "MDQ6VXNlcjkwODI0OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/908249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/weijianwen",
        "html_url": "https://github.com/weijianwen",
        "followers_url": "https://api.github.com/users/weijianwen/followers",
        "following_url": "https://api.github.com/users/weijianwen/following{/other_user}",
        "gists_url": "https://api.github.com/users/weijianwen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/weijianwen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/weijianwen/subscriptions",
        "organizations_url": "https://api.github.com/users/weijianwen/orgs",
        "repos_url": "https://api.github.com/users/weijianwen/repos",
        "events_url": "https://api.github.com/users/weijianwen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/weijianwen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2019-12-10T14:29:34Z",
    "updated_at": "2019-12-17T17:35:09Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install hypre %gcc@8.3.0\r\nspack install <spec> # Fill in the exact spec you are using\r\n...\r\n11 errors found in build log:\r\n     733\r\n     734    Making lib ...\r\n     735    make[1]: Entering directory `/tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/lib'\r\n     736    Building libHYPRE.so ...\r\n     737    /lustre/opt/spack/lib/spack/env/gcc/gcc -shared  -o libHYPRE-2.18.2.so   /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/IJ_mv/*.o /tmp/rpm/spack-stage-hypre-2.18.2-\r\n            kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/distributed_ls/Euclid/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/distributed_ls/ParaSails/*.o /tmp/rpm/spack-\r\n            stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/distributed_ls/pilut/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/distributed_matrix/*.o /tm\r\n            p/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/krylov/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/matrix_matrix/*.o /tmp/rpm/s\r\n            pack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/multivector/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/parcsr_ls/*.o /tmp/rpm/spack-s\r\n            tage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/parcsr_mv/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/parcsr_block_mv/*.o /tmp/rpm/spack-sta\r\n            ge-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/seq_mv/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/sstruct_ls/*.o /tmp/rpm/spack-stage-hypre-2\r\n            .18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/sstruct_mv/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/struct_ls/*.o /tmp/rpm/spack-stage-hypre-2.18.2-k\r\n            q24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/struct_mv/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y\r\n            5knic6p3km3wzn3ct2p7oa2/spack-src/src/blas/*.o /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/lapack/*.o    -L/lustre/opt/cascadelake/linux-centos7-skylake_avx512/g\r\n            cc-8.3.0/openblas-0.3.7-paog42mpv4e5re4aypej77asddpq2ra7/lib  -lopenblas -L/lustre/opt/cascadelake/linux-centos7-skylake_avx512/gcc-8.3.0/openblas-0.3.7-paog42mpv4e5re4aypej77asddpq2ra7/lib  -lopenb\r\n            las -lm      -Wl,-soname,libHYPRE-2.18.2.so -Wl,-z,defs\r\n     738    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/hypre_prefix_sum.o: In function `hypre_prefix_sum':\r\n  >> 739    hypre_prefix_sum.c:(.text+0x3a): undefined reference to `omp_in_parallel'\r\n     740    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/hypre_prefix_sum.o: In function `hypre_prefix_sum_pair':\r\n  >> 741    hypre_prefix_sum.c:(.text+0x129): undefined reference to `omp_in_parallel'\r\n     742    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/hypre_prefix_sum.o: In function `hypre_prefix_sum_triple':\r\n  >> 743    hypre_prefix_sum.c:(.text+0x2fd): undefined reference to `omp_in_parallel'\r\n     744    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/hypre_prefix_sum.o: In function `hypre_prefix_sum_multiple':\r\n  >> 745    hypre_prefix_sum.c:(.text+0x39a): undefined reference to `omp_in_parallel'\r\n     746    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/threading.o: In function `hypre_NumThreads':\r\n  >> 747    threading.c:(.text+0x5): undefined reference to `omp_get_max_threads'\r\n     748    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/threading.o: In function `hypre_NumActiveThreads':\r\n  >> 749    threading.c:(.text+0x13): undefined reference to `omp_get_num_threads'\r\n     750    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/threading.o: In function `hypre_GetThreadNum':\r\n  >> 751    threading.c:(.text+0x21): undefined reference to `omp_get_thread_num'\r\n     752    /tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/utilities/threading.o: In function `hypre_SetNumThreads':\r\n  >> 753    threading.c:(.text+0x2f): undefined reference to `omp_set_num_threads'\r\n  >> 754    collect2: error: ld returned 1 exit status\r\n  >> 755    make[1]: *** [libHYPRE.so] Error 1\r\n     756    make[1]: Leaving directory `/tmp/rpm/spack-stage-hypre-2.18.2-kq24jop7y5knic6p3km3wzn3ct2p7oa2/spack-src/src/lib'\r\n  >> 757    make: *** [all] Error 1\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux 3.10.0-862.el7.x86_64 #1 SMP Fri Apr 20 16:44:24 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:    CentOS Linux release 7.5.1804 (Core)\r\n``` \r\n\r\nA workaround is to build hypre without `openmp` variant.",
    "performed_via_github_app": null
}