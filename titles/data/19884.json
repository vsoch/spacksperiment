{
    "url": "https://api.github.com/repos/spack/spack/issues/19884",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19884/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19884/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19884/events",
    "html_url": "https://github.com/spack/spack/pull/19884",
    "id": 741809061,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTIwMDU4NTgz",
    "number": 19884,
    "title": "Pipelines: Compare target family instead of architecture",
    "user": {
        "login": "scottwittenburg",
        "id": 6527504,
        "node_id": "MDQ6VXNlcjY1Mjc1MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6527504?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scottwittenburg",
        "html_url": "https://github.com/scottwittenburg",
        "followers_url": "https://api.github.com/users/scottwittenburg/followers",
        "following_url": "https://api.github.com/users/scottwittenburg/following{/other_user}",
        "gists_url": "https://api.github.com/users/scottwittenburg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scottwittenburg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scottwittenburg/subscriptions",
        "organizations_url": "https://api.github.com/users/scottwittenburg/orgs",
        "repos_url": "https://api.github.com/users/scottwittenburg/repos",
        "events_url": "https://api.github.com/users/scottwittenburg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scottwittenburg/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-11-12T17:59:03Z",
    "updated_at": "2020-11-12T18:46:17Z",
    "closed_at": "2020-11-12T18:46:16Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/19884",
        "html_url": "https://github.com/spack/spack/pull/19884",
        "diff_url": "https://github.com/spack/spack/pull/19884.diff",
        "patch_url": "https://github.com/spack/spack/pull/19884.patch"
    },
    "body": "In compiler bootstrapping pipelines, we add an artificial dependency\r\nbetween jobs for packages to be built with a bootstrapped compiler\r\nand the job building the compiler.  To find the right bootstrapped\r\ncompiler for each spec, we compared not only the compiler spec to\r\nthat required by the package spec, but also the architectures of\r\nthe compiler and package spec.\r\n\r\nBut this prevented us from finding the bootstrapped compiler for a\r\nspec in cases where the architecture of the compiler wasn't exactly\r\nthe same as the spec.  For example, a gcc@4.8.5 might have given\r\nhaswell as the architecture, while the spec had broadwell.  By\r\ncomparing the families instead of the architecture itself, we know\r\nthat we can build the zlib for broadwell with the gcc for haswell.\r\n\r\nCompiler bootstrapping is still going to have issues until #17563 can be rebased and merged, but this is fixes a problem orthogonal to the issues addressed in that PR.  And since that PR doesn't touch the same files, it should be fine to merge this ahead of it.",
    "performed_via_github_app": null
}