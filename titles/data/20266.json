{
    "url": "https://api.github.com/repos/spack/spack/issues/20266",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20266/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20266/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20266/events",
    "html_url": "https://github.com/spack/spack/issues/20266",
    "id": 758553304,
    "node_id": "MDU6SXNzdWU3NTg1NTMzMDQ=",
    "number": 20266,
    "title": "Spack stages file/directory permissions hardcoded to `700`",
    "user": {
        "login": "BenWeber42",
        "id": 7927333,
        "node_id": "MDQ6VXNlcjc5MjczMzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7927333?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BenWeber42",
        "html_url": "https://github.com/BenWeber42",
        "followers_url": "https://api.github.com/users/BenWeber42/followers",
        "following_url": "https://api.github.com/users/BenWeber42/following{/other_user}",
        "gists_url": "https://api.github.com/users/BenWeber42/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/BenWeber42/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/BenWeber42/subscriptions",
        "organizations_url": "https://api.github.com/users/BenWeber42/orgs",
        "repos_url": "https://api.github.com/users/BenWeber42/repos",
        "events_url": "https://api.github.com/users/BenWeber42/events{/privacy}",
        "received_events_url": "https://api.github.com/users/BenWeber42/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1024483943,
            "node_id": "MDU6TGFiZWwxMDI0NDgzOTQz",
            "url": "https://api.github.com/repos/spack/spack/labels/permissions",
            "name": "permissions",
            "color": "cc374f",
            "default": false,
            "description": ""
        },
        {
            "id": 1371552534,
            "node_id": "MDU6TGFiZWwxMzcxNTUyNTM0",
            "url": "https://api.github.com/repos/spack/spack/labels/stage",
            "name": "stage",
            "color": "b50fc1",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-12-07T14:18:40Z",
    "updated_at": "2021-02-09T18:12:44Z",
    "closed_at": "2021-02-09T18:12:44Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Currently, the spack stages directory & file permissions are set to `700`. I believe this is only due to historical reasons.\r\n\r\nBasically, this behavior was added here https://github.com/spack/spack/pull/8773/commits/be7c5f684e80f63293380cb309b1c7bf4e9c7f8e#diff-ef561cde79864134a9c7c4fd5746f04535ebcf460065d212ba2d5d07986b9e93. I can only assume that someone noticed that the file permissions for temporary files are `700` by default and so ported this behavior also for normal stage directories.\r\n\r\nLater on, temporary stage directories were removed here https://github.com/spack/spack/pull/12072 and now normal stage directories are stuck with hardcoded `700` file permissions.\r\n\r\nThis is overly restrictive and an issue if one wants to inspect someone else's stage directory (e.g., to look at the build log). Specifically, we use jenkins to build spack packages nightly. When they fail, the build logs are only accessible to the jenkins user.\r\n\r\nPermissions of the install directories are configurable (https://spack.readthedocs.io/en/latest/build_settings.html#package-permissions) whereas stage directories have hardcoded permissions:\r\nhttps://github.com/spack/spack/blob/af9bf816fe17a92f56ca0354779ac2fa7892f377/lib/spack/spack/stage.py#L601-L614\r\n\r\nI think at least group members should get read permissions. Possibly this should also be configurable.",
    "performed_via_github_app": null
}