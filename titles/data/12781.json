{
    "url": "https://api.github.com/repos/spack/spack/issues/12781",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12781/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12781/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12781/events",
    "html_url": "https://github.com/spack/spack/issues/12781",
    "id": 491877878,
    "node_id": "MDU6SXNzdWU0OTE4Nzc4Nzg=",
    "number": 12781,
    "title": "Installation issue: superlu-dist",
    "user": {
        "login": "freifrauvonbleifrei",
        "id": 9729409,
        "node_id": "MDQ6VXNlcjk3Mjk0MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9729409?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/freifrauvonbleifrei",
        "html_url": "https://github.com/freifrauvonbleifrei",
        "followers_url": "https://api.github.com/users/freifrauvonbleifrei/followers",
        "following_url": "https://api.github.com/users/freifrauvonbleifrei/following{/other_user}",
        "gists_url": "https://api.github.com/users/freifrauvonbleifrei/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/freifrauvonbleifrei/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/freifrauvonbleifrei/subscriptions",
        "organizations_url": "https://api.github.com/users/freifrauvonbleifrei/orgs",
        "repos_url": "https://api.github.com/users/freifrauvonbleifrei/repos",
        "events_url": "https://api.github.com/users/freifrauvonbleifrei/events{/privacy}",
        "received_events_url": "https://api.github.com/users/freifrauvonbleifrei/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-09-10T20:21:24Z",
    "updated_at": "2021-05-23T13:59:37Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install superlu-dist \r\n... \r\n# the relevant part of the error message\r\n==> Installing superlu-dist\r\n==> Searching for binary cache of superlu-dist\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for superlu-dist found: installing from source\r\n==> Using cached archive: /home/pollinta/Desktop/spack/var/spack/cache/superlu-dist/superlu-dist-6.1.1.tar.gz\r\n==> Staging archive: /home/pollinta/Desktop/spack/var/spack/stage/superlu-dist-6.1.1-dsbbqkf4ufldtvecl24bv7biam2alc32/v6.1.1.tar.gz\r\n==> Created stage in /home/pollinta/Desktop/spack/var/spack/stage/superlu-dist-6.1.1-dsbbqkf4ufldtvecl24bv7biam2alc32\r\n==> No patches needed for superlu-dist\r\n==> Building superlu-dist [CMakePackage]\r\n==> Executing phase: 'cmake'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j4'\r\n\r\n17 errors found in build log:\r\n     1020    /usr/lib/mpich/bin/mpicc -I/home/pollinta/Desktop/spack/opt/spack/linux-ub\r\n             untu18.04-x86_64/gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd27q4v7jbl\r\n             /include -DUSE_VENDOR_BLAS -fopenmp  -std=c99 -O2 -g -DNDEBUG    -fopenmp \r\n             -rdynamic CMakeFiles/pddrive_ABglobal.dir/pddrive_ABglobal.c.o  -o pddrive\r\n             _ABglobal -Wl,-rpath,/tmp/pollinta/spack-stage/spack-stage-UlxKkG/spack-bu\r\n             ild/SRC:/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-x86_64/gc\r\n             c-7.4.0/openblas-0.3.6-whdohbyhho3g3sp5g2uqt6tnzedcb725/lib ../SRC/libsupe\r\n             rlu_dist.so.6.1.1 /home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04\r\n             -x86_64/gcc-7.4.0/openblas-0.3.6-whdohbyhho3g3sp5g2uqt6tnzedcb725/lib/libo\r\n             penblas.so -lm -L/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-\r\n             x86_64/gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd27q4v7jbl/lib -lpar\r\n             metis -L/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-x86_64/gc\r\n             c-7.4.0/metis-5.1.0-q6wvktue4oy654iuyspzahnj7xbgjjry/lib -lmetis\r\n     1021    [ 79%] Linking C executable pzdrive4_ABglobal\r\n     1022    cd /tmp/pollinta/spack-stage/spack-stage-UlxKkG/spack-build/EXAMPLE && /us\r\n             r/bin/cmake -E cmake_link_script CMakeFiles/pzdrive4_ABglobal.dir/link.txt\r\n              --verbose=1\r\n     1023    /usr/lib/mpich/bin/mpicc -I/home/pollinta/Desktop/spack/opt/spack/linux-ub\r\n             untu18.04-x86_64/gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd27q4v7jbl\r\n             /include -DUSE_VENDOR_BLAS -fopenmp  -std=c99 -O2 -g -DNDEBUG    -fopenmp \r\n             -rdynamic CMakeFiles/pzdrive4_ABglobal.dir/pzdrive4_ABglobal.c.o  -o pzdri\r\n             ve4_ABglobal -Wl,-rpath,/tmp/pollinta/spack-stage/spack-stage-UlxKkG/spack\r\n             -build/SRC:/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-x86_64\r\n             /gcc-7.4.0/openblas-0.3.6-whdohbyhho3g3sp5g2uqt6tnzedcb725/lib ../SRC/libs\r\n             uperlu_dist.so.6.1.1 /home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18\r\n             .04-x86_64/gcc-7.4.0/openblas-0.3.6-whdohbyhho3g3sp5g2uqt6tnzedcb725/lib/l\r\n             ibopenblas.so -lm -L/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.\r\n             04-x86_64/gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd27q4v7jbl/lib -l\r\n             parmetis -L/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-x86_64\r\n             /gcc-7.4.0/metis-5.1.0-q6wvktue4oy654iuyspzahnj7xbgjjry/lib -lmetis\r\n     1024    [ 80%] Building C object TEST/CMakeFiles/pdtest.dir/dcreate_matrix.c.o\r\n     1025    cd /tmp/pollinta/spack-stage/spack-stage-UlxKkG/spack-build/TEST && /usr/l\r\n             ib/mpich/bin/mpicc  -I/tmp/pollinta/spack-stage/spack-stage-UlxKkG/spack-b\r\n             uild/SRC -I/home/pollinta/Desktop/spack/opt/spack/linux-ubuntu18.04-x86_64\r\n             /gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd27q4v7jbl/include -I/home\r\n             /pollinta/Desktop/spack/var/spack/stage/superlu-dist-6.1.1-dsbbqkf4ufldtve\r\n             cl24bv7biam2alc32/spack-src/SRC  -I/home/pollinta/Desktop/spack/opt/spack/\r\n             linux-ubuntu18.04-x86_64/gcc-7.4.0/parmetis-4.0.3-rae4zttxwnlxqlbsn325uzd2\r\n             7q4v7jbl/include -DUSE_VENDOR_BLAS -fopenmp  -std=c99 -O2 -g -DNDEBUG -fPI\r\n             E   -o CMakeFiles/pdtest.dir/dcreate_matrix.c.o   -c /home/pollinta/Deskto\r\n             p/spack/var/spack/stage/superlu-dist-6.1.1-dsbbqkf4ufldtvecl24bv7biam2alc3\r\n             2/spack-src/TEST/dcreate_matrix.c\r\n  >> 1026    ../SRC/libsuperlu_dist.so.6.1.1: undefined reference to `GOMP_taskloop'\r\n  >> 1027    collect2: error: ld returned 1 exit status\r\n     1028    EXAMPLE/CMakeFiles/pzdrive2_ABglobal.dir/build.make:99: recipe for target \r\n             'EXAMPLE/pzdrive2_ABglobal' failed\r\n  >> 1029    make[2]: *** [EXAMPLE/pzdrive2_ABglobal] Error 1\r\n     1030    make[2]: Leaving directory '/tmp/pollinta/spack-stage/spack-stage-UlxKkG/s\r\n             pack-build'\r\n     1031    CMakeFiles/Makefile2:1208: recipe for target 'EXAMPLE/CMakeFiles/pzdrive2_\r\n             ABglobal.dir/all' failed\r\n```\r\n\r\n### Platform and user environment\r\n```commandline\r\n$ uname -a \r\nLinux lap15 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tUbuntu 18.04.3 LTS\r\n``` \r\n\r\nIt may be due to me using the system-installed mpich. from `packages.yaml`:\r\n```\r\n    mpich:\r\n        version: [3.3]\r\n        paths:\r\n            mpich@3.3%gcc@7.4.0 device=ch3 +hydra netmod=tcp patches=c7d4ecf865dccff5b764d9c66b6a470d11b0b1a5b4f7ad1ffa61079ad6b5dede +pci pmi=pmi +romio~slurm~verbs arch=linux-ubuntu18.04-x86_64 : /usr/lib/mpich\r\n            buildable: False\r\n```\r\nwhere\r\n```\r\n$mpicc.mpich -v\r\nmpicc for MPICH version 3.3a2\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\r\nOFFLOAD_TARGET_NAMES=nvptx-none\r\nOFFLOAD_TARGET_DEFAULT=1\r\nTarget: x86_64-linux-gnu\r\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 7.4.0-1ubuntu1~18.04.1' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\r\nThread model: posix\r\ngcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1) \r\n```\r\nplease let me know if the system default could cause the issue.\r\n",
    "performed_via_github_app": null
}