{
    "url": "https://api.github.com/repos/spack/spack/issues/23550",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/23550/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/23550/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/23550/events",
    "html_url": "https://github.com/spack/spack/issues/23550",
    "id": 885229424,
    "node_id": "MDU6SXNzdWU4ODUyMjk0MjQ=",
    "number": 23550,
    "title": "Installation issue: petsc+mumps [^mumps+openmp]",
    "user": {
        "login": "lpoirel",
        "id": 4563513,
        "node_id": "MDQ6VXNlcjQ1NjM1MTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4563513?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lpoirel",
        "html_url": "https://github.com/lpoirel",
        "followers_url": "https://api.github.com/users/lpoirel/followers",
        "following_url": "https://api.github.com/users/lpoirel/following{/other_user}",
        "gists_url": "https://api.github.com/users/lpoirel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lpoirel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lpoirel/subscriptions",
        "organizations_url": "https://api.github.com/users/lpoirel/orgs",
        "repos_url": "https://api.github.com/users/lpoirel/repos",
        "events_url": "https://api.github.com/users/lpoirel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lpoirel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "jedbrown",
        "id": 3303,
        "node_id": "MDQ6VXNlcjMzMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3303?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jedbrown",
        "html_url": "https://github.com/jedbrown",
        "followers_url": "https://api.github.com/users/jedbrown/followers",
        "following_url": "https://api.github.com/users/jedbrown/following{/other_user}",
        "gists_url": "https://api.github.com/users/jedbrown/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jedbrown/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jedbrown/subscriptions",
        "organizations_url": "https://api.github.com/users/jedbrown/orgs",
        "repos_url": "https://api.github.com/users/jedbrown/repos",
        "events_url": "https://api.github.com/users/jedbrown/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jedbrown/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "jedbrown",
            "id": 3303,
            "node_id": "MDQ6VXNlcjMzMDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3303?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jedbrown",
            "html_url": "https://github.com/jedbrown",
            "followers_url": "https://api.github.com/users/jedbrown/followers",
            "following_url": "https://api.github.com/users/jedbrown/following{/other_user}",
            "gists_url": "https://api.github.com/users/jedbrown/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jedbrown/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jedbrown/subscriptions",
            "organizations_url": "https://api.github.com/users/jedbrown/orgs",
            "repos_url": "https://api.github.com/users/jedbrown/repos",
            "events_url": "https://api.github.com/users/jedbrown/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jedbrown/received_events",
            "type": "User",
            "site_admin": false
        },
        {
            "login": "BarrySmith",
            "id": 512185,
            "node_id": "MDQ6VXNlcjUxMjE4NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/512185?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BarrySmith",
            "html_url": "https://github.com/BarrySmith",
            "followers_url": "https://api.github.com/users/BarrySmith/followers",
            "following_url": "https://api.github.com/users/BarrySmith/following{/other_user}",
            "gists_url": "https://api.github.com/users/BarrySmith/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BarrySmith/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BarrySmith/subscriptions",
            "organizations_url": "https://api.github.com/users/BarrySmith/orgs",
            "repos_url": "https://api.github.com/users/BarrySmith/repos",
            "events_url": "https://api.github.com/users/BarrySmith/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BarrySmith/received_events",
            "type": "User",
            "site_admin": false
        },
        {
            "login": "balay",
            "id": 5642668,
            "node_id": "MDQ6VXNlcjU2NDI2Njg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5642668?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/balay",
            "html_url": "https://github.com/balay",
            "followers_url": "https://api.github.com/users/balay/followers",
            "following_url": "https://api.github.com/users/balay/following{/other_user}",
            "gists_url": "https://api.github.com/users/balay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/balay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/balay/subscriptions",
            "organizations_url": "https://api.github.com/users/balay/orgs",
            "repos_url": "https://api.github.com/users/balay/repos",
            "events_url": "https://api.github.com/users/balay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/balay/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-10T22:16:34Z",
    "updated_at": "2021-06-01T09:37:19Z",
    "closed_at": "2021-06-01T09:37:19Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "```console\r\n$ spack install petsc+mumps\r\n```\r\nfails since PRs https://github.com/spack/spack/pull/23161 by @RemiLacroix-IDRIS (add `+openmp` version to mumps)  and https://github.com/spack/spack/pull/23143 by me (set `+openmp` as default for mumps): a test program for mumps fails for not finding openmp in petsc's configure.\r\n\r\nhttps://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MATSOLVERMUMPS.html reads \r\n> \"Use` ./configure --with-openmp --download-hwloc` (or `--with-hwloc`) to enable running MUMPS in MPI+OpenMP hybrid mode and non-MUMPS in flat-MPI mode.\"\r\n\r\n@balay @jedbrown @BarrySmith \r\nI can work on a PR for this.\r\n\r\nJust adding \r\n```python\r\n            if spec.satisfies('^mumps+openmp'):\r\n                options.extend([\r\n                    '--with-openmp=1'\r\n                ])\r\n```\r\nsolves the installation issue, but as far as I understand, when `^mumps+openmp`, petsc should depend on hwloc and have `--with-openmp=1` and `--with-hwloc-dir=...`\r\nAm I correct?\r\n\r\nOr should we add `+openmp` and `+hwloc` variants to petsc and use conflicts to forbid `spack install petsc ~openmp ^mumps +openmp` and `spack install petsc ~hwloc ^mumps +openmp`?",
    "performed_via_github_app": null
}