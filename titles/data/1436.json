{
    "url": "https://api.github.com/repos/spack/spack/issues/1436",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/1436/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/1436/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/1436/events",
    "html_url": "https://github.com/spack/spack/issues/1436",
    "id": 169264254,
    "node_id": "MDU6SXNzdWUxNjkyNjQyNTQ=",
    "number": 1436,
    "title": "git won't build for me now that it `depends_on('gettext')`",
    "user": {
        "login": "hartzell",
        "id": 312978,
        "node_id": "MDQ6VXNlcjMxMjk3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/312978?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hartzell",
        "html_url": "https://github.com/hartzell",
        "followers_url": "https://api.github.com/users/hartzell/followers",
        "following_url": "https://api.github.com/users/hartzell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hartzell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hartzell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hartzell/subscriptions",
        "organizations_url": "https://api.github.com/users/hartzell/orgs",
        "repos_url": "https://api.github.com/users/hartzell/repos",
        "events_url": "https://api.github.com/users/hartzell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hartzell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 584430629,
            "node_id": "MDU6TGFiZWw1ODQ0MzA2Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/git",
            "name": "git",
            "color": "bfdadc",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2016-08-04T00:21:45Z",
    "updated_at": "2019-05-03T19:24:04Z",
    "closed_at": "2018-01-09T15:40:10Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I made a PR for the git package that enables perl and pcre a while back.  Since then another PR has been merged that enables gettext support.\n\nI've rebased my PR and am trying to unsuccessfully to test it, there's a gettext related problem.  I've stepped back to the commit that added gettext support and I have the same problem there.\n\nThe symptom is that it's blowing up with it tries to link executables because it can't find an implementation for libintl_gettext().  E.g. lots and lots of:\n\n```\n    LINK git-show-index\nlibgit.a(wrapper.o): In function `_':\n/tmp/throgg/spack-stage/spack-stage-d4Tihu/git-git-fdeee3d/gettext.h:54: undefined reference to `libintl_gettext'\n/tmp/throgg/spack-stage/spack-stage-d4Tihu/git-git-fdeee3d/gettext.h:54: undefined reference to `libintl_gettext'\n/tmp/throgg/spack-stage/spack-stage-d4Tihu/git-git-fdeee3d/gettext.h:54: undefined reference to `libintl_gettext'\n/tmp/throgg/spack-stage/spack-stage-d4Tihu/git-git-fdeee3d/gettext.h:54: undefined reference to `libintl_gettext'\n/tmp/throgg/spack-stage/spack-stage-d4Tihu/git-git-fdeee3d/gettext.h:54: undefined reference to `libintl_gettext'\n```\n\nIf I `spack env git bash` and cd into the staging dir and run `make -V=1` and then try to run the \"link\" command by hand I can replicate the failure.  If I try again with a `-L... -lintl` added, e.g.:\n\n```\n-L/home/throgg/spack/opt/spack/linux-centos7-x86_64/gcc-5.4.0/gettext-0.19.8.1-dhus6ppmjmb6ze2pfml3yixa6a5o4ufn/lib -lintl\n```\n\nThen things link fine.\n\nThe `configure` script doesn't seem to have any support for `--with-gettext` so I'm not sure what should be happening.  If I comment the `depends_on('gettext')` out then the build succeeds.\n\nI'm on a fairly sparsely configure CentOS 7 system.\n\n@adamjstewart -- I think that your commit added `depends_on('gettext')` to git.  Did/does it work for you?\n",
    "performed_via_github_app": null
}