{
    "url": "https://api.github.com/repos/spack/spack/issues/16581",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16581/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16581/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16581/events",
    "html_url": "https://github.com/spack/spack/issues/16581",
    "id": 615990337,
    "node_id": "MDU6SXNzdWU2MTU5OTAzMzc=",
    "number": 16581,
    "title": "Installation issue: py-pyyaml",
    "user": {
        "login": "tmadlener",
        "id": 16774861,
        "node_id": "MDQ6VXNlcjE2Nzc0ODYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/16774861?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tmadlener",
        "html_url": "https://github.com/tmadlener",
        "followers_url": "https://api.github.com/users/tmadlener/followers",
        "following_url": "https://api.github.com/users/tmadlener/following{/other_user}",
        "gists_url": "https://api.github.com/users/tmadlener/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tmadlener/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tmadlener/subscriptions",
        "organizations_url": "https://api.github.com/users/tmadlener/orgs",
        "repos_url": "https://api.github.com/users/tmadlener/repos",
        "events_url": "https://api.github.com/users/tmadlener/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tmadlener/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "adamjstewart",
            "id": 12021217,
            "node_id": "MDQ6VXNlcjEyMDIxMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adamjstewart",
            "html_url": "https://github.com/adamjstewart",
            "followers_url": "https://api.github.com/users/adamjstewart/followers",
            "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
            "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
            "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
            "repos_url": "https://api.github.com/users/adamjstewart/repos",
            "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-05-11T15:50:37Z",
    "updated_at": "2020-05-18T14:57:52Z",
    "closed_at": "2020-05-18T14:57:52Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Thanks for taking the time to report this build failure. To proceed with the report please:\r\n\r\n1. Title the issue \"Installation issue: <name-of-the-package>\".\r\n2. Provide the information required below.\r\n\r\nWe encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively! -->\r\n\r\n### Steps to reproduce the issue\r\n\r\nI have tried to build a package that depends on `py-pyyaml`, but `py-pyyaml` fails during the build stage due to what looks like a linker error. I am not sure whether this is due to the linker looking at the wrong place or if it is something else.\r\n\r\n<!-- Fill in the exact spec you are trying to build and the relevant part of the error message -->\r\n```console\r\n$ spack install py-pyyaml\r\n==> Error: Failed to install py-pyyaml due to ChildError: ProcessError: Command exited with status 1:\r\n    '/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/python-3.7.7-oqdlfukk7v3iajirursoemgwjz4uq6uc/bin/python3.7' '-s' 'setup.py' '--no-user-cfg' '--with-libyaml' 'build'\r\n3 errors found in build log:\r\n     425    In file included from ext/_yaml.h:2,\r\n     426                     from ext/_yaml.c:596:\r\n     427    /home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/libyaml-0.2.4-k46pfvmdak4ogt5qbu34cdkjtw4yjey5/include/yaml.h:635\r\n            :1: note: expected 'const yaml_char_t *' {aka 'const unsigned char *'} but argument is of type 'char *'\r\n     428     yaml_mapping_start_event_initialize(yaml_event_t *event,\r\n     429     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     430    /opt/rh/devtoolset-8/root/usr/bin/gcc -pthread -shared -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/gettext-\r\n            0.20.2-ywb257jdmwqy5gwssz6opqhqmjmnfpkh/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/readline-8.0-qfr2d6\r\n            nrzui4pihmumw2ngs5oezg2ebx/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/ncurses-6.2-gy7fmfawhiwde4tk4lwn\r\n            vwppf6xg6nku/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/openssl-1.1.1g-73vqdkaryyg356e2skc7uu5foyllury\r\n            y/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/sqlite-3.31.1-5lrgvo7dtj6p4m2gv4d5gy7ecpshet3o/lib -L/hom\r\n            e/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/gdbm-1.18.1-rw5vcezglu4vrccrvzt7u3vormfpnslk/lib -L/home/hsf/spack/op\r\n            t/spack/linux-centos7-sandybridge/gcc-8.3.1/zlib-1.2.11-j2ucagtfig5spujohz2kfvt6bvqczkoa/lib -L/home/hsf/spack/opt/spack/linux-\r\n            centos7-sandybridge/gcc-8.3.1/bzip2-1.0.8-ipfmbxrjzthhecv4mf3ecwi6jp5nlks7/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandyb\r\n            ridge/gcc-8.3.1/xz-5.2.5-ssqjpbn5vti7tluiwqo3pxbgdx2d4p6x/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/e\r\n            xpat-2.2.9-bijlnz6u5vp3oy35osxfghvelwbl4gok/lib -L/home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/libffi-3.3-a557\r\n            3cu6i6sycxun36p6ahlpvfxuy7kx/lib64 build/temp.linux-x86_64-3.7/ext/_yaml.o -L/home/hsf/spack/opt/spack/linux-centos7-sandybridg\r\n            e/gcc-8.3.1/python-3.7.7-oqdlfukk7v3iajirursoemgwjz4uq6uc/lib -lyaml -lpython3.7m -o build/lib.linux-x86_64-3.7/_yaml.cpython-3\r\n            7m-x86_64-linux-gnu.so\r\n  >> 431    /opt/rh/devtoolset-8/root/usr/libexec/gcc/x86_64-redhat-linux/8/ld: cannot find -lyaml\r\n  >> 432    collect2: error: ld returned 1 exit status\r\n     433    /home/hsf/spack/opt/spack/linux-centos7-sandybridge/gcc-8.3.1/python-3.7.7-oqdlfukk7v3iajirursoemgwjz4uq6uc/lib/python3.7/distu\r\n            tils/dist.py:274: UserWarning: Unknown distribution option: 'python_requires'\r\n     434      warnings.warn(msg)\r\n  >> 435    error: command '/opt/rh/devtoolset-8/root/usr/bin/gcc' failed with exit status 1\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.14.2-1047-ff6a0fc\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-sandybridge\r\n```\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists\r\n\r\n\r\n. -->\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/4610527/spack-build-env.txt)\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/4610529/spack-build-out.txt)\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}