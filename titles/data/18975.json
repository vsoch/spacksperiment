{
    "url": "https://api.github.com/repos/spack/spack/issues/18975",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/18975/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/18975/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/18975/events",
    "html_url": "https://github.com/spack/spack/issues/18975",
    "id": 709176329,
    "node_id": "MDU6SXNzdWU3MDkxNzYzMjk=",
    "number": 18975,
    "title": "installing intel package for gcc (other than the latest) doesn't work",
    "user": {
        "login": "downloadico",
        "id": 18726451,
        "node_id": "MDQ6VXNlcjE4NzI2NDUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/18726451?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/downloadico",
        "html_url": "https://github.com/downloadico",
        "followers_url": "https://api.github.com/users/downloadico/followers",
        "following_url": "https://api.github.com/users/downloadico/following{/other_user}",
        "gists_url": "https://api.github.com/users/downloadico/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/downloadico/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/downloadico/subscriptions",
        "organizations_url": "https://api.github.com/users/downloadico/orgs",
        "repos_url": "https://api.github.com/users/downloadico/repos",
        "events_url": "https://api.github.com/users/downloadico/events{/privacy}",
        "received_events_url": "https://api.github.com/users/downloadico/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 1433532775,
            "node_id": "MDU6TGFiZWwxNDMzNTMyNzc1",
            "url": "https://api.github.com/repos/spack/spack/labels/triage",
            "name": "triage",
            "color": "ed9793",
            "default": false,
            "description": "The issue needs to be prioritized"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-09-25T18:05:15Z",
    "updated_at": "2020-09-25T18:05:15Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Explain, in a clear and concise way, the command you ran and the result you were trying to achieve.\r\nExample: \"I ran `spack find` to list all the installed packages and ...\" -->\r\n\r\nI had the intel@19.1.2.254 package installed with the gcc@10.2.0 compiler and I want it to be installed with the gcc@4.8.5 compiler.\r\nI ran 'spack uninstall -y  intel@19.1.2.254%gcc@10.2.0 && spack install intel@19.1.2.254%gcc@4.8.5 && spack find intel@19.1.2.254'\r\n```console\r\n$ spack uninstall -y  intel@19.1.2.254%gcc@10.2.0 && spack -d install -v intel@19.1.2.254%gcc@4.8.5 && spack find intel@19.1.2.254\r\n==> Successfully uninstalled intel@19.1.2.254%gcc@10.2.0+rpath auto_dispatch=none arch=linux-centos7-haswell/iltlfnk\r\n==> [2020-09-25-11:48:02.982835] Imported install from built-in commands\r\n==> [2020-09-25-11:48:02.984070] Reading config file /opt/spack/etc/spack/defaults/config.yaml\r\n==> [2020-09-25-11:48:03.004822] Imported install from built-in commands\r\n==> [2020-09-25-11:48:03.007298] Reading config file /opt/spack/etc/spack/defaults/repos.yaml\r\n==> [2020-09-25-11:48:03.072878] Reading config file /opt/spack/etc/spack/defaults/packages.yaml\r\n==> [2020-09-25-11:48:03.096944] Reading config file /etc/spack/packages.yaml\r\n==> [2020-09-25-11:48:03.128232] Reading config file /opt/spack/etc/spack/packages.yaml\r\n==> [2020-09-25-11:48:03.159054] Reading config file /etc/spack/compilers.yaml\r\n==> [2020-09-25-11:48:03.253723] Reading config file /root/.spack/linux/compilers.yaml\r\n==> [2020-09-25-11:48:03.359129] DATABASE LOCK TIMEOUT: 3s\r\n==> [2020-09-25-11:48:03.359201] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2020-09-25-11:48:03.589502] intel@19.1.2.254 : externally installed in /opt/intel/compilers_and_libraries_2020.2.254/linux\r\n==> [2020-09-25-11:48:03.590689] intel@19.1.2.254 : generating module file\r\n==> [2020-09-25-11:48:03.592234] Reading config file /opt/spack/etc/spack/defaults/modules.yaml\r\n==> [2020-09-25-11:48:03.605015] Reading config file /opt/spack/etc/spack/defaults/linux/modules.yaml\r\n==> [2020-09-25-11:48:03.608798] Reading config file /etc/spack/modules.yaml\r\n==> [2020-09-25-11:48:03.673306] \tWHITELIST : intel@19.1.2.254%gcc@10.2.0+rpath auto_dispatch=none arch=linux-centos7-haswell/iltlfnk\r\n==> [2020-09-25-11:48:03.673383] \t\tmatches rule: intel\r\n==> [2020-09-25-11:48:03.683138] \tWRITE: intel@19.1.2.254%gcc@10.2.0+rpath auto_dispatch=none arch=linux-centos7-haswell/iltlfnk [/opt/spack/share/spack/lmod/linux-centos7-x86_64/gcc/10.2.0/intel/19.1.2.254-iltl.lua]\r\n==> [2020-09-25-11:48:03.829327] normalize_path.normalize_suite_dir:\t/opt/intel/compilers_and_libraries_2020.2.254\r\n==> [2020-09-25-11:48:03.830280] file_to_source.normalize_path:\t/opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh\r\n==> [2020-09-25-11:48:03.830359] sourcing /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh\r\n==> [2020-09-25-11:48:03.830873] Warning: Quotes in command arguments can confuse scripts like configure.\r\n  The following arguments may cause problems when executed:\r\n      source /dev/null &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"\r\n  Quotes aren't needed because spack doesn't use a shell.\r\n  Consider removing them\r\n==> [2020-09-25-11:48:03.830975] '/bin/bash' '-c' 'source /dev/null &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"'\r\n==> [2020-09-25-11:48:03.867777] Warning: Quotes in command arguments can confuse scripts like configure.\r\n  The following arguments may cause problems when executed:\r\n      source /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh intel64 &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"\r\n  Quotes aren't needed because spack doesn't use a shell.\r\n  Consider removing them\r\n==> [2020-09-25-11:48:03.867945] '/bin/bash' '-c' 'source /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh intel64 &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"'\r\n==> [2020-09-25-11:48:04.103720] \tWRITE: intel@19.1.2.254%gcc@10.2.0+rpath auto_dispatch=none arch=linux-centos7-haswell/iltlfnk [/opt/spack/share/spack/modules/linux-centos7-haswell/intel-19.1.2.254-gcc-10.2.0-iltlfnk]\r\n==> [2020-09-25-11:48:04.131700] normalize_path.normalize_suite_dir:\t/opt/intel/compilers_and_libraries_2020.2.254\r\n==> [2020-09-25-11:48:04.132513] file_to_source.normalize_path:\t/opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh\r\n==> [2020-09-25-11:48:04.132590] sourcing /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh\r\n==> [2020-09-25-11:48:04.132990] Warning: Quotes in command arguments can confuse scripts like configure.\r\n  The following arguments may cause problems when executed:\r\n      source /dev/null &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"\r\n  Quotes aren't needed because spack doesn't use a shell.\r\n  Consider removing them\r\n==> [2020-09-25-11:48:04.133092] '/bin/bash' '-c' 'source /dev/null &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"'\r\n==> [2020-09-25-11:48:04.168499] Warning: Quotes in command arguments can confuse scripts like configure.\r\n  The following arguments may cause problems when executed:\r\n      source /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh intel64 &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"\r\n  Quotes aren't needed because spack doesn't use a shell.\r\n  Consider removing them\r\n==> [2020-09-25-11:48:04.168677] '/bin/bash' '-c' 'source /opt/intel/compilers_and_libraries_2020.2.254/linux/bin/compilervars.sh intel64 &> /dev/null && python3 -c \"import os, json; print(json.dumps(dict(os.environ)))\"'\r\n==> [2020-09-25-11:48:04.384702] SKIP: shebang filtering [external package]\r\n==> [2020-09-25-11:48:04.384810] intel@19.1.2.254 : registering into DB\r\n==> 1 installed package\r\n-- linux-centos7-haswell / gcc@10.2.0 ---------------------------\r\nintel@19.1.2.254\r\n\r\n```\r\n\r\n### Error Message\r\n\r\nno errors reported, but the intel@19.1.2.254%gcc@4.8.5 package isn't installed, instead the  intel@19.1.2.254%gcc@10.2.0 package is reinstalled.\r\n\r\nThis happens when intel@19.1.2.254 is installed with spack-installed gcc versions as the installing compiler and with other intel versions as well.\r\nHowever, installing other packages listed in packages.yaml will install with other gcc versions as I would expect.\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n* **Spack:** 0.15.4-1142-3632cf1\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-haswell\r\n\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\npackages.yaml contents include:\r\n  ...\r\n  intel:\r\n    externals:\r\n    - spec: intel@19.1.2.254\r\n      prefix: /opt/intel/compilers_and_libraries_2020.2.254/linux/\r\n  ...\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n\r\n<!-- We encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively!\r\n\r\nIf you want to ask a question about the tool (how to use it, what it can currently do, etc.), try the `#general` channel on our Slack first. We have a welcoming community and chances are you'll get your reply faster and without opening an issue.\r\n\r\nOther than that, thanks for taking the time to contribute to Spack! -->\r\n",
    "performed_via_github_app": null
}