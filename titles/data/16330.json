{
    "url": "https://api.github.com/repos/spack/spack/issues/16330",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/16330/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/16330/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/16330/events",
    "html_url": "https://github.com/spack/spack/issues/16330",
    "id": 607788170,
    "node_id": "MDU6SXNzdWU2MDc3ODgxNzA=",
    "number": 16330,
    "title": "Dependent packages do not get put into spack environment",
    "user": {
        "login": "bvanessen",
        "id": 6210171,
        "node_id": "MDQ6VXNlcjYyMTAxNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6210171?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bvanessen",
        "html_url": "https://github.com/bvanessen",
        "followers_url": "https://api.github.com/users/bvanessen/followers",
        "following_url": "https://api.github.com/users/bvanessen/following{/other_user}",
        "gists_url": "https://api.github.com/users/bvanessen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bvanessen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bvanessen/subscriptions",
        "organizations_url": "https://api.github.com/users/bvanessen/orgs",
        "repos_url": "https://api.github.com/users/bvanessen/repos",
        "events_url": "https://api.github.com/users/bvanessen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bvanessen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446630669,
            "node_id": "MDU6TGFiZWw0NDY2MzA2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/dependencies",
            "name": "dependencies",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        },
        {
            "id": 512483390,
            "node_id": "MDU6TGFiZWw1MTI0ODMzOTA=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-medium",
            "name": "impact-medium",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 480333036,
            "node_id": "MDU6TGFiZWw0ODAzMzMwMzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/workaround",
            "name": "workaround",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2020-04-27T19:18:24Z",
    "updated_at": "2020-06-06T01:12:59Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!-- Explain, in a clear and concise way, the command you ran and the result you were trying to achieve. -->\r\nWhen activating a spack environment, the dependent packages are not explicitly put into the view and they do not setup shell environment variables.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack env activate -p <some environment>\r\n```\r\n\r\nI had to explicitly add both python and cuda as root packages in an environment to get them visible in the activated environemnt.\r\n\r\n### Error Message\r\n\r\n<!-- If Spack reported an error, provide the error message. If it did not report an error but the output appears incorrect, provide the incorrect output. If there was no error message and no output but the result is incorrect, describe how it does not match what you expect. -->\r\n```console\r\n$ which python\r\n$ echo $CUDA_ROOT\r\n```\r\n\r\nIf you don't have python as a root package, you will not see it in the path.  If you don't have cuda as a root package it will not setup the correct shell environment variables.\r\n",
    "performed_via_github_app": null
}