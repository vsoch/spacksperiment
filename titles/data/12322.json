{
    "url": "https://api.github.com/repos/spack/spack/issues/12322",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12322/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12322/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12322/events",
    "html_url": "https://github.com/spack/spack/issues/12322",
    "id": 478244433,
    "node_id": "MDU6SXNzdWU0NzgyNDQ0MzM=",
    "number": 12322,
    "title": "Installation issue: grackle",
    "user": {
        "login": "qobilidop",
        "id": 5176695,
        "node_id": "MDQ6VXNlcjUxNzY2OTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5176695?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/qobilidop",
        "html_url": "https://github.com/qobilidop",
        "followers_url": "https://api.github.com/users/qobilidop/followers",
        "following_url": "https://api.github.com/users/qobilidop/following{/other_user}",
        "gists_url": "https://api.github.com/users/qobilidop/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/qobilidop/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/qobilidop/subscriptions",
        "organizations_url": "https://api.github.com/users/qobilidop/orgs",
        "repos_url": "https://api.github.com/users/qobilidop/repos",
        "events_url": "https://api.github.com/users/qobilidop/events{/privacy}",
        "received_events_url": "https://api.github.com/users/qobilidop/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-08-08T04:29:08Z",
    "updated_at": "2019-11-21T16:07:18Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Installing grackle on a Mac would fail. I figured out the reason but need help deciding the best solution.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install grackle\r\n...\r\n==> Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make'\r\n...\r\n$ cat path/to/spack-build-out.txt\r\n...\r\nCompiling auto_show_config.c failed!\r\nSee out.compile for error messages.\r\n...\r\n$ cat path/to/out.compile\r\nerror: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: unknown option character `-' in: --mode=compile\r\n...\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -srv\r\nDarwin 18.7.0 Darwin Kernel Version 18.7.0: Thu Jun 20 18:42:21 PDT 2019; root:xnu-4903.270.47~4/RELEASE_X86_64\r\n``` \r\n\r\n### Additional information\r\n\r\nThe issue is that on Mac `glibtool` should be used instead of `libtool` as noted in the [grackle installation doc](https://grackle.readthedocs.io/en/grackle-3.1.1/Installation.html#building). I see two solutions:\r\n\r\n1. Make `libtool` always a dependancy. [Currently it's conditioned on code version](https://github.com/spack/spack/blob/36fbd6cf4cce68424bdea92a8426ddcfce922595/var/spack/repos/builtin/packages/grackle/package.py#L28), but I don't understand why. I tried this myself, and it solves the issue.\r\n2. Conditionally set `MACH_LIBTOOL = glibtool` when on Mac. If there is a reason to keep `libtool` a conditional dependancy, this might be the way to go.\r\n\r\nBased on the file history, @loikki and @alalazo might know more about this package.\r\n",
    "performed_via_github_app": null
}