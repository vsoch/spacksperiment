{
    "url": "https://api.github.com/repos/spack/spack/issues/21189",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21189/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21189/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21189/events",
    "html_url": "https://github.com/spack/spack/pull/21189",
    "id": 790810124,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTU4OTY0MDM0",
    "number": 21189,
    "title": "Feature: deployment mode",
    "user": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-01-21T08:17:13Z",
    "updated_at": "2021-02-10T22:59:15Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/21189",
        "html_url": "https://github.com/spack/spack/pull/21189",
        "diff_url": "https://github.com/spack/spack/pull/21189.diff",
        "patch_url": "https://github.com/spack/spack/pull/21189.patch"
    },
    "body": "This PR adds a \"deployment mode\" that can be enabled in Spack.\r\n\r\nThe goal of deployment mode is to allow Spack to deploy pre-built binaries from either an environment or a raw Spack instance, in a restricted mode that allows Spack to be safely run as root.\r\n\r\nTo allow Spack to run safely as root, all commands that can edit Spack source, edit Spack configs, or run arbitrary code from anywhere other than a Spack package in a previously configured repo are banned. Attempting to run any of those commands in deployment mode will result in an error. The commands are listed in `$spack/lib/spack/spack/test/cmd/common/deployment.py`. Additionally, all commands and options that modify the active environment are negated, so that either the configured environment or no environment is used, depending on the configuration. Lastly, the `spack -k` option to ignore SSL certificates throws an exception when run in deployment mode.\r\n\r\nCommands that modify the specs in the environment (but not its configuration) are allowed, but require user confirmation. These include the `add` and `remove` commands. The `uninstall` and `deprecate` commands require confirmation by default when in the standard Spack mode; when in \"deployment\" mode, the confirmation is mandatory (that is, the commands ignore the `-y` option).\r\n\r\nThe `install` command has several modifications in deployment mode. These modifications are equivalent to mandating the following arguments: `--cache-only --use-cache --clean`. In deployment mode, the `install` command also does not accept the `--no-check-signature` option (warns the user and ignores the option).",
    "performed_via_github_app": null
}