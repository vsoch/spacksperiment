{
    "url": "https://api.github.com/repos/spack/spack/issues/9904",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9904/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9904/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9904/events",
    "html_url": "https://github.com/spack/spack/issues/9904",
    "id": 382665696,
    "node_id": "MDU6SXNzdWUzODI2NjU2OTY=",
    "number": 9904,
    "title": "Installation issue: gcc@9.1.0 ",
    "user": {
        "login": "mathomp4",
        "id": 2982494,
        "node_id": "MDQ6VXNlcjI5ODI0OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2982494?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mathomp4",
        "html_url": "https://github.com/mathomp4",
        "followers_url": "https://api.github.com/users/mathomp4/followers",
        "following_url": "https://api.github.com/users/mathomp4/following{/other_user}",
        "gists_url": "https://api.github.com/users/mathomp4/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mathomp4/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mathomp4/subscriptions",
        "organizations_url": "https://api.github.com/users/mathomp4/orgs",
        "repos_url": "https://api.github.com/users/mathomp4/repos",
        "events_url": "https://api.github.com/users/mathomp4/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mathomp4/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 616911200,
            "node_id": "MDU6TGFiZWw2MTY5MTEyMDA=",
            "url": "https://api.github.com/repos/spack/spack/labels/gcc",
            "name": "gcc",
            "color": "0052cc",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 29,
    "created_at": "2018-11-20T13:34:37Z",
    "updated_at": "2020-02-18T22:08:47Z",
    "closed_at": "2020-02-18T22:08:47Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hello all. On my tour of starting back to using Spack after my basic issue (#9841), I took the next step: Let's build gcc 8.2.0!\r\n\r\nAnd I failed. Note that I have built gcc 8.2.0 on this Macbook before with no big issues, building with clang and no other modules installed. It gets through all the dependencies, but eventually in the gcc build, it throws an error because it tries to use a command line option clang doesn't have.\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install gcc@8.2.0\r\n==> libsigsegv is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/libsigsegv-2.11-3dbarbwqjfkr6culyztgxx2zqxdv4y4c\r\n==> m4 is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/m4-1.4.18-eumxfdeyiylcfkiupr5a2qerk4getsp3\r\n==> pkgconf is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/pkgconf-1.5.4-v6nji6urapzl7zhtc5a33gx3qjffnuhq\r\n==> ncurses is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/ncurses-6.1-3zvai2464mpmryqtefjdkzn3udofiwux\r\n==> readline is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/readline-7.0-gudiambsgalud5frz557xz6blvb3dfes\r\n==> gdbm is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gdbm-1.18.1-e7c7wi73impjaqjsd4nkneizcschurpv\r\n==> perl is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/perl-5.26.2-c7io3u3umylskbrpbmqh4xylvbpazpce\r\n==> autoconf is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/autoconf-2.69-zt4odhcbydnxlbdmvb5s57ytiovgcnmt\r\n==> automake is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/automake-1.16.1-prjhna3o3hsiouxbuvpz6biz2chepymi\r\n==> libtool is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/libtool-2.4.6-75s5xqeyblajfff44vqgkcz73nogfsx4\r\n==> gmp is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gmp-6.1.2-4ljog5w7jrtzgp4jyntwfdh3snyhjege\r\n==> isl is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/isl-0.18-kad3jjvckb7hx3cjwetzqfl4hvbomfkb\r\n==> mpfr is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/mpfr-3.1.6-kue2fdntiwnwgwx3qywo6edbkohpcde3\r\n==> mpc is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/mpc-1.1.0-jakt4tsjoy4vaerfcux7anmsssionb5q\r\n==> zlib is already installed in /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/zlib-1.2.11-caosjr5fcruvzyocttnqqkpackpwyzpz\r\n==> Installing gcc\r\n==> Searching for binary cache of gcc\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for gcc found: installing from source\r\n==> Using cached archive: /Users/mathomp4/spack/var/spack/cache/gcc/gcc-8.2.0.tar.xz\r\n==> Staging archive: /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0.tar.xz\r\n==> Created stage in /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur\r\n==> Applied patch darwin/gcc-7.1.0-headerpad.patch\r\n==> Ran patch() for gcc\r\n==> Building gcc [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n...wait a long while because gcc...\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j4' 'bootstrap'\r\n\r\n1 error found in build log:\r\n     150120    /bin/sh ./libtool --tag=CC   --mode=compile /private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-stage/sp\r\n               ack-stage-KGZX0Q/gcc-8.2.0/spack-build/./gcc/xgcc -B/private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-\r\n               stage/spack-stage-KGZX0Q/gcc-8.2.0/spack-build/./gcc/ -B/Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.\r\n               0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/bin/ -B/Users/mathomp4/spack/opt/spack/darwin-h\r\n               ighsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/lib/ -isystem /User\r\n               s/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-app\r\n               le-darwin17.7.0/include -isystem /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2\r\n               q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/sys-include    -DHAVE_CONFIG_H -I. -I/Users/mathomp4/spack/var/spack/s\r\n               tage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath  -I /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-at\r\n               iy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath/../include   -g -O2 -MT math/acosq.lo -MD -MP -MF $depbase.Tpo -c -o ma\r\n               th/acosq.lo /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath/math/acos\r\n               q.c &&\\\r\n     150121    mv -f $depbase.Tpo $depbase.Plo\r\n     150122    checking for __atomic_fetch_op for size 1... /Users/mathomp4/spack/lib/spack/env/clang/clang++ -std=gnu++98   -g -O2 -DIN_GC\r\n               C     -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-f\r\n               ormat-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H\r\n                -DGENERATOR_FILE -fno-PIE -static-libstdc++ -static-libgcc   -o build/genchecksum \\\r\n     150123        build/genchecksum.o .././libiberty/libiberty.a\r\n     150124    libtool: compile:  /private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-stage/spack-stage-KGZX0Q/gcc-8.2.\r\n               0/spack-build/./gcc/xgcc -B/private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-stage/spack-stage-KGZX0Q/\r\n               gcc-8.2.0/spack-build/./gcc/ -B/Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2\r\n               elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/bin/ -B/Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10\r\n               .0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/lib/ -isystem /Users/mathomp4/spack/opt/spac\r\n               k/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/include -\r\n               isystem /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecs\r\n               ur/x86_64-apple-darwin17.7.0/sys-include -DHAVE_CONFIG_H -I. -I/Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguo\r\n               qbfuzine7fppbyecsur/gcc-8.2.0/libquadmath -I /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsu\r\n               r/gcc-8.2.0/libquadmath/../include -g -O2 -MT math/acosq.lo -MD -MP -MF math/.deps/acosq.Tpo -c /Users/mathomp4/spack/var/sp\r\n               ack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath/math/acosq.c  -fno-common -DPIC -o math/.libs/aco\r\n               sq.o\r\n     150125    yes\r\n  >> 150126    checking for __atomic_fetch_op for size 2... clang: error: unsupported option '-static-libgcc'\r\n     150127    make[2]: *** [Makefile:2869: build/genchecksum] Error 1\r\n     150128    make[2]: Leaving directory '/private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-stage/spack-stage-KGZX0Q\r\n               /gcc-8.2.0/spack-build/gcc'\r\n     150129    make[1]: *** [Makefile:4624: all-gcc] Error 2\r\n     150130    make[1]: *** Waiting for unfinished jobs....\r\n     150131    depbase=`echo math/frexpq.lo | sed 's|[^/]*$|.deps/&|;s|\\.lo$||'`;\\\r\n     150132    /bin/sh ./libtool --tag=CC   --mode=compile /private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-stage/sp\r\n               ack-stage-KGZX0Q/gcc-8.2.0/spack-build/./gcc/xgcc -B/private/var/folders/xd/wjjr8kvn0f92vflz1snwqk040xnyzb/T/mathomp4/spack-\r\n               stage/spack-stage-KGZX0Q/gcc-8.2.0/spack-build/./gcc/ -B/Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.\r\n               0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/bin/ -B/Users/mathomp4/spack/opt/spack/darwin-h\r\n               ighsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/lib/ -isystem /User\r\n               s/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/x86_64-app\r\n               le-darwin17.7.0/include -isystem /Users/mathomp4/spack/opt/spack/darwin-highsierra-x86_64/clang-10.0.0-apple/gcc-8.2.0-atiy2\r\n               q2elsguoqbfuzine7fppbyecsur/x86_64-apple-darwin17.7.0/sys-include    -DHAVE_CONFIG_H -I. -I/Users/mathomp4/spack/var/spack/s\r\n               tage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath  -I /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-at\r\n               iy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath/../include   -g -O2 -MT math/frexpq.lo -MD -MP -MF $depbase.Tpo -c -o m\r\n               ath/frexpq.lo /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/libquadmath/math/fr\r\n               expq.c &&\\\r\n\r\nSee build log for details:\r\n  /Users/mathomp4/spack/var/spack/stage/gcc-8.2.0-atiy2q2elsguoqbfuzine7fppbyecsur/gcc-8.2.0/spack-build.out\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a\r\nDarwin gs6101-parcel.ndc.nasa.gov 17.7.0 Darwin Kernel Version 17.7.0: Wed Oct 10 23:06:14 PDT 2018; root:xnu-4570.71.13~1/RELEASE_X86_64 x86_64\r\n$ sw_vers\r\nProductName:\tMac OS X\r\nProductVersion:\t10.13.6\r\nBuildVersion:\t17G3025\r\n```\r\n\r\n### Additional information\r\n\r\nPer the hints in the issue template:\r\n\r\n```console\r\n$ spack spec --install-status gcc@8.2.0\r\nInput spec\r\n--------------------------------\r\n -   gcc@8.2.0\r\n\r\nConcretized\r\n--------------------------------\r\n -   gcc@8.2.0%clang@10.0.0-apple~binutils languages=c,c++,fortran patches=ecc5ac43951b34cbc5db15f585b4e704c42e2e487f9ed4c24fadef3f3857930b ~piclibs~strip arch=darwin-highsierra-x86_64\r\n[+]      ^gmp@6.1.2%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]          ^autoconf@2.69%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]              ^m4@1.4.18%clang@10.0.0-apple patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,c0a408fbffb7255fcc75e26bd8edab116fc81d216bfd18b473668b7739a4158e,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=darwin-highsierra-x86_64\r\n[+]                  ^libsigsegv@2.11%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]              ^perl@5.26.2%clang@10.0.0-apple+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=darwin-highsierra-x86_64\r\n[+]                  ^gdbm@1.18.1%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]                      ^readline@7.0%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]                          ^ncurses@6.1%clang@10.0.0-apple~symlinks~termlib arch=darwin-highsierra-x86_64\r\n[+]                              ^pkgconf@1.5.4%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]          ^automake@1.16.1%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]          ^libtool@2.4.6%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]      ^isl@0.18%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]      ^mpc@1.1.0%clang@10.0.0-apple arch=darwin-highsierra-x86_64\r\n[+]          ^mpfr@3.1.6%clang@10.0.0-apple patches=66a5d58364113a21405fc53f4a48f4e8 arch=darwin-highsierra-x86_64\r\n[+]      ^zlib@1.2.11%clang@10.0.0-apple+optimize+pic+shared arch=darwin-highsierra-x86_64\r\n```\r\n\r\nI am currently trying a rebuilding of the package with the following options:\r\n```console\r\n$ spack -d install -j 1 gcc@8.2.0\r\n```\r\nbut that will take...forever? Bootstrapping gcc isn't a quick thing, `-j1` infinitely so.\r\n",
    "performed_via_github_app": null
}