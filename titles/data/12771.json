{
    "url": "https://api.github.com/repos/spack/spack/issues/12771",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12771/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12771/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12771/events",
    "html_url": "https://github.com/spack/spack/issues/12771",
    "id": 491305556,
    "node_id": "MDU6SXNzdWU0OTEzMDU1NTY=",
    "number": 12771,
    "title": "Installation issue: Python 3.7.4 ",
    "user": {
        "login": "sameershende",
        "id": 2651193,
        "node_id": "MDQ6VXNlcjI2NTExOTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2651193?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sameershende",
        "html_url": "https://github.com/sameershende",
        "followers_url": "https://api.github.com/users/sameershende/followers",
        "following_url": "https://api.github.com/users/sameershende/following{/other_user}",
        "gists_url": "https://api.github.com/users/sameershende/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sameershende/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sameershende/subscriptions",
        "organizations_url": "https://api.github.com/users/sameershende/orgs",
        "repos_url": "https://api.github.com/users/sameershende/repos",
        "events_url": "https://api.github.com/users/sameershende/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sameershende/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-09-09T20:19:52Z",
    "updated_at": "2019-09-09T21:18:16Z",
    "closed_at": "2019-09-09T21:18:16Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install python@3.7.4 %gcc@8.3.0\r\n==> Successfully installed sqlite\r\n  Fetch: 0.01s.  Build: 1m 25.89s.  Total: 1m 25.90s.\r\n[+] /storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/sqlite-3.28.0-c3c6nga6zlm6ztt2xvicohpv3sskeu3k\r\n==> Installing python\r\n==> Searching for binary cache of python\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for python found: installing from source\r\n==> Using cached archive: /storage/packages/e4s/spack/var/spack/cache/python/python-3.7.4.tgz\r\n==> Staging archive: /tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha/Python-3.7.4.tgz\r\n==> Created stage in /tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha\r\n==> Ran patch() for python\r\n==> Building python [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n138 errors found in build log:\r\n     894     LD_LIBRARY_PATH=/tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha/spack-src/spack-build CC='/storage/packages/e4\r\n             s/spack/lib/spack/env/gcc/gcc -pthread' LDSHARED='/storage/packages/e4s/spack/lib/spack/env/gcc/gcc -pthread -shared -L/storage/pack\r\n             ages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/gettext-0.19.8.1-rbwd45rhs7l2qqu4czarv5266mrgb2fm/lib -L/storage/packages/e4s\r\n             /spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/readline-7.0-xsmixsv2fyzic2fdfpsfzoedfgiq4nie/lib -L/storage/packages/e4s/spack/opt/s\r\n             pack/linux-rhel7-ppc64le/gcc-8.3.0/ncurses-6.1-6u5qgduyv7p3q2vzi6whkanqmqui5me6/lib -L/storage/packages/e4s/spack/opt/spack/linux-rh\r\n             el7-ppc64le/gcc-8.3.0/openssl-1.1.1c-mwq3qmrxrqmwusrwosemr2kb2pmniskr/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64l\r\n             e/gcc-8.3.0/sqlite-3.28.0-c3c6nga6zlm6ztt2xvicohpv3sskeu3k/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0\r\n             /gdbm-1.18.1-euh4ibqjkhw73rs2x6ylg57gnvcp7r7d/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/zlib-1.2.11-\r\n             g67ewuutvcrcqzkdvx24fgkul7ykns6h/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/bzip2-1.0.8-eauwd5zy7gmld\r\n             tcsjlxdlnimkh2mio52/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/xz-5.2.4-gjje5qce7h7w2rmvhcwboe5aqtphh\r\n             rp5/lib -L/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/expat-2.2.5-agx2fqvbwxob7or4f6xa3x7dfqkjp7ha/lib -L/st\r\n             orage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-8.3.0/libffi-3.2.1-ifqpzeucrp4mck4drnvfbfpg2br3kmhb/lib64   ' OPT='-DNDEB\r\n             UG -g -fwrapv -O3 -Wall' \t_TCLTK_INCLUDES='' _TCLTK_LIBS='' \t./python -E /tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz\r\n             5a6nljluha/spack-src/setup.py   --no-user-cfg build\r\n     895     running build\r\n     896     running build_ext\r\n     897     INFO: Can't locate Tcl/Tk libs and/or headers\r\n     898     building '_struct' extension\r\n     899     /storage/packages/e4s/spack/lib/spack/env/gcc/gcc -pthread -fPIC -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fP\r\n             IC -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration -\r\n             I. -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/python-3.7.4-tlelwevvhxlv5q374f5yipjrtxi6fzo3/include -IObj\r\n             ects -IPython -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/sqlite-3.28.0-b6qvxkj2r3sgysb2cvkvxv5pnrodgxom/i\r\n             nclude -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/ncurses-6.1-jp42wsit7mklqgtlbq7rys5prgrrhajs/include -I\r\n             /storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/expat-2.2.5-wlslwljfzi52exlanr7koedbpx7wngz2/include -I/storage/\r\n             packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/xz-5.2.4-goozwyd3vo334mzphodqavktxzvhxgv2/include -I/storage/packages/e4s\r\n             /spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/readline-7.0-saf6z7uchqyykwtaixttbfhr2qc3zgb6/include -I/storage/packages/e4s/spack/o\r\n             pt/spack/linux-rhel7-ppc64le/gcc-4.8.5/gdbm-1.18.1-qstr2ltko3dz3m3fsati3ynvwhkdbsqt/include -I/storage/packages/e4s/spack/opt/spack/\r\n             linux-rhel7-ppc64le/gcc-4.8.5/bzip2-1.0.8-o3sdu6rpqilyfbezqx4f6qnghnjlxfio/include -I/storage/packages/e4s/spack/opt/spack/linux-rhe\r\n             l7-ppc64le/gcc-4.8.5/zlib-1.2.11-4v3ticyykh2xcgw5fzltjrfuxkx7ipqh/include -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64l\r\n             e/gcc-4.8.5/openssl-1.1.1c-z225fw73fpylz4jd7um4oxpdyhzamijc/include -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-\r\n             4.8.5/gettext-0.19.8.1-girtgotiovck56xyhzi3x2ln6jiyao2y/include -I/usr/local/include -I/tmp/sameer/spack-stage/python-3.7.4-tlelwevv\r\n             hxlv5q374f5yipjrtxi6fzo3/spack-src/Include -I/tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha/spack-src/spack-b\r\n             uild -c _struct.c -o build/temp.linux-ppc64le-3.7/_struct.o\r\n  >> 900     gcc: error: _struct.c: No such file or directory\r\n  >> 901     gcc: fatal error: no input files\r\n     902     compilation terminated.\r\n     903     building '_ctypes_test' extension\r\n     904     creating build/temp.linux-ppc64le-3.7/_ctypes\r\n     905     /storage/packages/e4s/spack/lib/spack/env/gcc/gcc -pthread -fPIC -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fP\r\n             IC -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration -\r\n             I. -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/python-3.7.4-tlelwevvhxlv5q374f5yipjrtxi6fzo3/include -IObj\r\n             ects -IPython -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/sqlite-3.28.0-b6qvxkj2r3sgysb2cvkvxv5pnrodgxom/i\r\n             nclude -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/ncurses-6.1-jp42wsit7mklqgtlbq7rys5prgrrhajs/include -I\r\n             /storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/expat-2.2.5-wlslwljfzi52exlanr7koedbpx7wngz2/include -I/storage/\r\n             packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/xz-5.2.4-goozwyd3vo334mzphodqavktxzvhxgv2/include -I/storage/packages/e4s\r\n             /spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/readline-7.0-saf6z7uchqyykwtaixttbfhr2qc3zgb6/include -I/storage/packages/e4s/spack/o\r\n             pt/spack/linux-rhel7-ppc64le/gcc-4.8.5/gdbm-1.18.1-qstr2ltko3dz3m3fsati3ynvwhkdbsqt/include -I/storage/packages/e4s/spack/opt/spack/\r\n             linux-rhel7-ppc64le/gcc-4.8.5/bzip2-1.0.8-o3sdu6rpqilyfbezqx4f6qnghnjlxfio/include -I/storage/packages/e4s/spack/opt/spack/linux-rhe\r\n             l7-ppc64le/gcc-4.8.5/zlib-1.2.11-4v3ticyykh2xcgw5fzltjrfuxkx7ipqh/include -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64l\r\n             e/gcc-4.8.5/openssl-1.1.1c-z225fw73fpylz4jd7um4oxpdyhzamijc/include -I/storage/packages/e4s/spack/opt/spack/linux-rhel7-ppc64le/gcc-\r\n             4.8.5/gettext-0.19.8.1-girtgotiovck56xyhzi3x2ln6jiyao2y/include -I/usr/local/include -I/tmp/sameer/spack-stage/python-3.7.4-tlelwevv\r\n             hxlv5q374f5yipjrtxi6fzo3/spack-src/Include -I/tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha/spack-src/spack-b\r\n             uild -c _ctypes/_ctypes_test.c -o build/temp.linux-ppc64le-3.7/_ctypes/_ctypes_test.o\r\n  >> 906     gcc: error: _ctypes/_ctypes_test.c: No such file or directory\r\n  >> 907     gcc: fatal error: no input files\r\n     908     compilation terminated.\r\n     909     building 'array' extension\r\n...\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux cyclops.nic.local 4.14.0-115.10.1.el7a.ppc64le #1 SMP Wed Jun 26 09:32:17 UTC 2019 ppc64le ppc64le ppc64le GNU/Linux\r\n$ lsb_release -d\r\nDescription:\tRed Hat Enterprise Linux Server release 7.6 (Maipo)\r\n``` \r\n\r\n### Additional information\r\nLooks like the build command needs to cd to the following Modules directory before compiling:\r\n\r\n\r\n\r\ncd /tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha/spack-src/Modules\r\n[sameer@ Modules]$ ls _struct.c\r\n_struct.c\r\n[sameer@ Modules]$ ls _ctypes/_ctypes_test.c\r\n_ctypes/_ctypes_test.c\r\n\r\n\r\n```console\r\n$ spack spec --install-status <spec>\r\n ~]$ spack spec --install-status python@3.7.4\r\nInput spec\r\n--------------------------------\r\n -   python@3.7.4\r\n\r\nConcretized\r\n--------------------------------\r\n -   python@3.7.4%gcc@8.3.0+bz2+ctypes+dbm+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zlib arch=linux-rhel7-ppc64le\r\n[+]      ^bzip2@1.0.8%gcc@8.3.0+shared arch=linux-rhel7-ppc64le\r\n[+]          ^diffutils@3.7%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]      ^expat@2.2.5%gcc@8.3.0+libbsd arch=linux-rhel7-ppc64le\r\n[+]          ^libbsd@0.9.1%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]      ^gdbm@1.18.1%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]          ^readline@7.0%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]              ^ncurses@6.1%gcc@8.3.0~symlinks~termlib arch=linux-rhel7-ppc64le\r\n[+]                  ^pkgconf@1.6.1%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]      ^gettext@0.19.8.1%gcc@8.3.0+bzip2+curses+git~libunistring+libxml2 patches=9acdb4e73f67c241b5ef32505c9ddf7cf6884ca8ea661692f21dca28483b04b8 +tar+xz arch=linux-rhel7-ppc64le\r\n[+]          ^libxml2@2.9.9%gcc@8.3.0~python arch=linux-rhel7-ppc64le\r\n[+]              ^libiconv@1.15%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]              ^xz@5.2.4%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]              ^zlib@1.2.11%gcc@8.3.0+optimize+pic+shared arch=linux-rhel7-ppc64le\r\n[+]          ^tar@1.31%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]      ^libffi@3.2.1%gcc@8.3.0 arch=linux-rhel7-ppc64le\r\n[+]      ^openssl@1.1.1c%gcc@8.3.0+systemcerts arch=linux-rhel7-ppc64le\r\n[+]          ^perl@5.26.2%gcc@8.3.0+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=linux-rhel7-ppc64le\r\n[+]      ^sqlite@3.28.0%gcc@8.3.0+fts~functions~rtree arch=linux-rhel7-ppc64le\r\n```\r\n\r\n```console\r\n$ spack location -s python@3.7.4\r\n/tmp/sameer/spack-stage/python-3.7.4-hh7uoyvjbzg24abvrux7kz5a6nljluha\r\n```\r\nRebuilding the package with the following options:\r\n```console\r\n$ spack -d install -j 1 python@3.7.4 %gcc@8.3.0\r\n\r\n```\r\n[spack-build-out.txt](https://github.com/spack/spack/files/3592419/spack-build-out.txt)\r\n\r\n[spack-cc-python-hh7uoyv.in.log](https://github.com/spack/spack/files/3592434/spack-cc-python-hh7uoyv.in.log)\r\n[spack-cc-python-hh7uoyv.out.log](https://github.com/spack/spack/files/3592435/spack-cc-python-hh7uoyv.out.log)\r\n",
    "performed_via_github_app": null
}