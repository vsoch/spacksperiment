{
    "url": "https://api.github.com/repos/spack/spack/issues/15447",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15447/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15447/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15447/events",
    "html_url": "https://github.com/spack/spack/pull/15447",
    "id": 579424420,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODIwNDk0",
    "number": 15447,
    "title": "geant4: new version 10.6 plus simplifications",
    "user": {
        "login": "drbenmorgan",
        "id": 1102642,
        "node_id": "MDQ6VXNlcjExMDI2NDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1102642?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/drbenmorgan",
        "html_url": "https://github.com/drbenmorgan",
        "followers_url": "https://api.github.com/users/drbenmorgan/followers",
        "following_url": "https://api.github.com/users/drbenmorgan/following{/other_user}",
        "gists_url": "https://api.github.com/users/drbenmorgan/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/drbenmorgan/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/drbenmorgan/subscriptions",
        "organizations_url": "https://api.github.com/users/drbenmorgan/orgs",
        "repos_url": "https://api.github.com/users/drbenmorgan/repos",
        "events_url": "https://api.github.com/users/drbenmorgan/events{/privacy}",
        "received_events_url": "https://api.github.com/users/drbenmorgan/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1281134171,
            "node_id": "MDU6TGFiZWwxMjgxMTM0MTcx",
            "url": "https://api.github.com/repos/spack/spack/labels/hep",
            "name": "hep",
            "color": "bfdadc",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2020-03-11T17:19:39Z",
    "updated_at": "2020-03-31T08:54:32Z",
    "closed_at": "2020-03-31T08:54:32Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/15447",
        "html_url": "https://github.com/spack/spack/pull/15447",
        "diff_url": "https://github.com/spack/spack/pull/15447.diff",
        "patch_url": "https://github.com/spack/spack/pull/15447.patch"
    },
    "body": "This is a fairly major refactor and simplification of Geant4 and its associated data packages, and *will* changes hashes of previous installs. I think this is worthwhile for long term maintenance of the package, so this PR is \"Draft\" for now to get early eyes on it and discuss with interested parties.\r\n\r\nThe primary change is the removal of the `data` variant so the physics model data packages are always installed by the `g4XXX` packages, then used by Geant4 itself through the `geant4-data` package. `geant4-data` is now a `BundlePackage` whose version maps to that of `geant4` and depends on the `g4XXX` packages at the exact versions the `geant4` version supports. It creates a \"view\" (more on that later) of the data so Geant4's install mechanisms sees a single directory. Each `g4XXX` package also now sets the appropriate runtime environment.\r\n\r\nI believe removal of the `data` variant is worthwhile as the external data is platform/arch independent, so really benefits reuse and reducing install sizes.\r\n\r\nThe second breaking change is to move the versioning to \"standard\" semantic versioning, so `10.6.0` rather than `10.06.p00`. This is just to make the packaging cleaner and simple, plus the use of the Geant4 GitLab repo.\r\n\r\nThe remainder of the updates are pure simplification and cleanup. \r\n\r\nOne potential issue to look at is the \"view\" creation in `geant4-data`. All this does is create a directory `<prefix>/share/geant4-data-<version>/` and create symlinks in that to the `g4xxx` data  directories. That works, and Geant4's seems fine with it. However, if a spack environment/view is created and `geant4-data` installed in this, the symlinks under `<viewprefix>/share/geant4-data-<version>/` are created as normal but empty directories.\r\n\r\nI'm not sure this is critical as the environment variables needed by Geant4 are set correctly, but feels like I've missed something.",
    "performed_via_github_app": null
}