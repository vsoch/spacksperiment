{
    "url": "https://api.github.com/repos/spack/spack/issues/25016",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/25016/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/25016/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/25016/events",
    "html_url": "https://github.com/spack/spack/pull/25016",
    "id": 949888448,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njk0NTIwMjAx",
    "number": 25016,
    "title": "Add smoke test for darshan-util",
    "user": {
        "login": "kevin-harms",
        "id": 19574311,
        "node_id": "MDQ6VXNlcjE5NTc0MzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/19574311?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kevin-harms",
        "html_url": "https://github.com/kevin-harms",
        "followers_url": "https://api.github.com/users/kevin-harms/followers",
        "following_url": "https://api.github.com/users/kevin-harms/following{/other_user}",
        "gists_url": "https://api.github.com/users/kevin-harms/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/kevin-harms/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kevin-harms/subscriptions",
        "organizations_url": "https://api.github.com/users/kevin-harms/orgs",
        "repos_url": "https://api.github.com/users/kevin-harms/repos",
        "events_url": "https://api.github.com/users/kevin-harms/events{/privacy}",
        "received_events_url": "https://api.github.com/users/kevin-harms/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1858171143,
            "node_id": "MDU6TGFiZWwxODU4MTcxMTQz",
            "url": "https://api.github.com/repos/spack/spack/labels/stand-alone-tests",
            "name": "stand-alone-tests",
            "color": "5ec0d6",
            "default": false,
            "description": "Stand-alone (or smoke) tests for installed packages"
        },
        {
            "id": 729584669,
            "node_id": "MDU6TGFiZWw3Mjk1ODQ2Njk=",
            "url": "https://api.github.com/repos/spack/spack/labels/update-package",
            "name": "update-package",
            "color": "c68137",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "tldahlgren",
        "id": 35777542,
        "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
        "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tldahlgren",
        "html_url": "https://github.com/tldahlgren",
        "followers_url": "https://api.github.com/users/tldahlgren/followers",
        "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
        "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
        "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
        "repos_url": "https://api.github.com/users/tldahlgren/repos",
        "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tldahlgren",
            "id": 35777542,
            "node_id": "MDQ6VXNlcjM1Nzc3NTQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/35777542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tldahlgren",
            "html_url": "https://github.com/tldahlgren",
            "followers_url": "https://api.github.com/users/tldahlgren/followers",
            "following_url": "https://api.github.com/users/tldahlgren/following{/other_user}",
            "gists_url": "https://api.github.com/users/tldahlgren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tldahlgren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tldahlgren/subscriptions",
            "organizations_url": "https://api.github.com/users/tldahlgren/orgs",
            "repos_url": "https://api.github.com/users/tldahlgren/repos",
            "events_url": "https://api.github.com/users/tldahlgren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tldahlgren/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-07-21T16:19:19Z",
    "updated_at": "2021-07-22T23:46:10Z",
    "closed_at": "2021-07-22T23:46:09Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/25016",
        "html_url": "https://github.com/spack/spack/pull/25016",
        "diff_url": "https://github.com/spack/spack/pull/25016.diff",
        "patch_url": "https://github.com/spack/spack/pull/25016.patch"
    },
    "body": "Add a smoke test for the darshan-util package. \r\n\r\nThis adds a test to run darshan-parser against an example logfile which is included in the darshan release. The test verifies that 3 counters are present in the output, one for each of the POSIX, MPI-IO, and STDIO modules. The test assumes that darshan-parser must be in the user's path.\r\n\r\nExample output:\r\nkharms@shuttleworth:~/working/darshan/spack$ spack install darshan-util\r\n[+] /home/kharms/working/darshan/spack/opt/spack/linux-ubuntu20.04-sandybridge/gcc-9.3.0/zlib-1.2.11-bjaye35neuvuamo32i2cbv4c22m367c2\r\n==> Installing darshan-util-3.3.1-vtcpygtbyefth637pue7cyyi35mg4fnk\r\n==> No binary for darshan-util-3.3.1-vtcpygtbyefth637pue7cyyi35mg4fnk found: installing from source\r\n==> Using cached archive: /home/kharms/working/darshan/spack/var/spack/cache/_source-cache/archive/28/281d871335977d0592a49d053df93d68ce1840f6fdec27fea7a59586a84395f7.tar.gz\r\n==> No patches needed for darshan-util\r\n==> darshan-util: Executing phase: 'autoreconf'\r\n==> darshan-util: Executing phase: 'configure'\r\n==> darshan-util: Executing phase: 'build'\r\n==> darshan-util: Executing phase: 'install'\r\n==> darshan-util: Successfully installed darshan-util-3.3.1-vtcpygtbyefth637pue7cyyi35mg4fnk\r\n  Fetch: 0.03s.  Build: 9.87s.  Total: 9.90s.\r\n[+] /home/kharms/working/darshan/spack/opt/spack/linux-ubuntu20.04-sandybridge/gcc-9.3.0/darshan-util-3.3.1-vtcpygtbyefth637pue7cyyi35mg4fnk\r\nkharms@shuttleworth:~/working/darshan/spack$ spack test run darshan-util\r\n==> Spack test qjfbz5waqzhol6xxuy4k3svxehz4d6cx\r\n==> Testing package darshan-util-3.3.1-vtcpygt\r\n==> Error: TestFailure: 1 tests failed.\r\n\r\n\r\nFailed to find executable 'darshan-parser'\r\n\r\n/home/kharms/working/darshan/spack/lib/spack/spack/package.py:1871, in run_test:\r\n       1868                    # stack instead of from traceback.\r\n       1869                    # The traceback is truncated here, so we can't use it to\r\n       1870                    # traverse the stack.\r\n  >>   1871                    m = '\\n'.join(\r\n       1872                        spack.build_environment.get_package_context(tb)\r\n       1873                    )\r\n       1874\r\n\r\n\r\n/home/kharms/working/darshan/spack/lib/spack/spack/build_environment.py:1029, in _setup_pkg_and_run:\r\n       1026        tb_string = traceback.format_exc()\r\n       1027\r\n       1028        # build up some context from the offending package so we can\r\n  >>   1029        # show that, too.\r\n       1030        package_context = get_package_context(tb)\r\n       1031\r\n       1032        logfile = None\r\n\r\nSee test log for details:\r\n  /home/kharms/.spack/test/qjfbz5waqzhol6xxuy4k3svxehz4d6cx/darshan-util-3.3.1-vtcpygt-test-out.txt\r\n\r\nkharms@shuttleworth:~/working/darshan/spack$ spack load darshan-util\r\nkharms@shuttleworth:~/working/darshan/spack$ spack test run darshan-util\r\n==> Spack test qjfbz5waqzhol6xxuy4k3svxehz4d6cx\r\n==> Testing package darshan-util-3.3.1-vtcpygt\r\n",
    "performed_via_github_app": null
}