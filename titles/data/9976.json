{
    "url": "https://api.github.com/repos/spack/spack/issues/9976",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9976/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9976/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9976/events",
    "html_url": "https://github.com/spack/spack/issues/9976",
    "id": 385549589,
    "node_id": "MDU6SXNzdWUzODU1NDk1ODk=",
    "number": 9976,
    "title": "Installation issue: perl %gcc@8.2.0 (MacOS w/ Homebrew gcc)",
    "user": {
        "login": "jdeaton",
        "id": 17778287,
        "node_id": "MDQ6VXNlcjE3Nzc4Mjg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/17778287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jdeaton",
        "html_url": "https://github.com/jdeaton",
        "followers_url": "https://api.github.com/users/jdeaton/followers",
        "following_url": "https://api.github.com/users/jdeaton/following{/other_user}",
        "gists_url": "https://api.github.com/users/jdeaton/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jdeaton/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jdeaton/subscriptions",
        "organizations_url": "https://api.github.com/users/jdeaton/orgs",
        "repos_url": "https://api.github.com/users/jdeaton/repos",
        "events_url": "https://api.github.com/users/jdeaton/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jdeaton/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 616911200,
            "node_id": "MDU6TGFiZWw2MTY5MTEyMDA=",
            "url": "https://api.github.com/repos/spack/spack/labels/gcc",
            "name": "gcc",
            "color": "0052cc",
            "default": false,
            "description": null
        },
        {
            "id": 446614839,
            "node_id": "MDU6TGFiZWw0NDY2MTQ4Mzk=",
            "url": "https://api.github.com/repos/spack/spack/labels/macOS",
            "name": "macOS",
            "color": "c5def5",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-11-29T03:08:16Z",
    "updated_at": "2019-08-17T12:24:25Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install -j 1 perl %gcc@8.2.0\r\n==> pkgconf is already installed in /Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/pkgconf-1.5.4-dn3w3hopodcnplaajdjxvbq3hue76igv\r\n==> ncurses is already installed in /Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/ncurses-6.1-vyd7chtuclxb5zbetkhpbrcanujuae2h\r\n==> readline is already installed in /Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/readline-7.0-zxnycwyjdmshcaywt2kit4un5v6c4xct\r\n==> gdbm is already installed in /Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/gdbm-1.18.1-srufr3uu7p6r7bujvzvgjobjplmoo6rx\r\n==> Installing perl\r\n==> Searching for binary cache of perl\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for perl found: installing from source\r\n==> Using cached archive: /Users/deatonjd/Code/spack/var/spack/cache/perl/perl-5.26.2.tar.gz\r\n==> Using cached archive: /Users/deatonjd/Code/spack/var/spack/cache/perl/cpanm-5.26.2.tar.gz\r\n==> Staging archive: /Users/deatonjd/Code/spack/var/spack/stage/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/perl-5.26.2.tar.gz\r\n==> Created stage in /Users/deatonjd/Code/spack/var/spack/stage/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw\r\n==> Staging archive: /Users/deatonjd/Code/spack/var/spack/stage/resource-cpanm-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/App-cpanminus-1.7042.tar.gz\r\n==> Created stage in /Users/deatonjd/Code/spack/var/spack/stage/resource-cpanm-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw\r\n==> Moving resource stage\r\n\tsource : /Users/deatonjd/Code/spack/var/spack/stage/resource-cpanm-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/App-cpanminus-1.7042/\r\n\tdestination : /Users/deatonjd/Code/spack/var/spack/stage/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/perl-5.26.2/cpanm/cpanm\r\n==> Using cached archive: /Users/deatonjd/Code/spack/var/spack/cache/perl/perl-5.26.1-guard_old_libcrypt_fix.patch\r\n==> Applied patch https://src.fedoraproject.org/rpms/perl/raw/004cea3a67df42e92ffdf4e9ac36d47a3c6a05a4/f/perl-5.26.1-guard_old_libcrypt_fix.patch\r\n==> Building perl [Package]\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make'\r\n\r\n2 errors found in build log:\r\n     2066    vxs.inc:222:5: note: here\r\n     2067         case 1:\r\n     2068         ^~~~\r\n     2069    cc -c -DPERL_CORE -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -DAPPLLIB_EXP=\"/Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbaw\r\n             zogw/lib/perl5\" -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/Users/deatonjd/Code/spack/opt/spack/darwin-mojave-x86_64/gcc-8.2.0/gdbm-1.18.1-srufr3uu7p6r7bujvzvgjobjplmoo6rx/inc\r\n             lude -DPERL_USE_SAFE_PUTENV -std=c89 -O3 -Wall -Werror=declaration-after-statement -Wextra -Wc++-compat -Wwrite-strings globals.c\r\n     2070    In file included from perl.h:28,\r\n     2071                     from globals.c:32:\r\n  >> 2072    config.h:3951:25: error: 'undef' undeclared here (not in a function); did you mean 'index'?\r\n     2073     #define DOUBLEINFBYTES  undef  /**/\r\n     2074                             ^~~~~\r\n     2075    perl.h:6937:32: note: in expansion of macro 'DOUBLEINFBYTES'\r\n     2076     INFNAN_U8_NV_DECL PL_inf = { { DOUBLEINFBYTES } };\r\n     2077                                    ^~~~~~~~~~~~~~\r\n  >> 2078    make: *** [globals.o] Error 1\r\n\r\nSee build log for details:\r\n  /Users/deatonjd/Code/spack/var/spack/stage/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/perl-5.26.2/spack-build.out\r\n```\r\n\r\n### Platform and user environment\r\n```commandline\r\n$ uname -a\r\nDarwin JDeaton.deaton 18.2.0 Darwin Kernel Version 18.2.0: Fri Oct  5 19:41:49 PDT 2018; root:xnu-4903.221.2~2/RELEASE_X86_64 x86_64\r\n``` \r\n\r\n- `packages.yaml` - all still defaults\r\n- `compilers.yaml` \r\n```\r\ncompilers:\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: mojave\r\n    paths:\r\n      cc: /usr/bin/clang\r\n      cxx: /usr/bin/clang++\r\n      f77: /usr/local/bin/gfortran\r\n      fc: /usr/local/bin/gfortran\r\n    spec: clang@10.0.0-apple\r\n    target: x86_64\r\n- compiler:\r\n    environment: {}\r\n    extra_rpaths: []\r\n    flags: {}\r\n    modules: []\r\n    operating_system: mojave\r\n    paths:\r\n      cc: /usr/local/bin/gcc-8\r\n      cxx: /usr/local/bin/g++-8\r\n      f77: /usr/local/bin/gfortran-8\r\n      fc: /usr/local/bin/gfortran-8\r\n    spec: gcc@8.2.0\r\n    target: x86_64\r\n```\r\n\r\n### Additional information\r\nGCC from Homebrew basic `brew install gcc`.\r\n\r\n#### spack spec --install-status\r\n```console\r\n$ spack spec --install-status perl %gcc@8.2.0\r\nInput spec\r\n--------------------------------\r\n -   perl%gcc@8.2.0\r\n\r\nConcretized\r\n--------------------------------\r\n -   perl@5.26.2%gcc@8.2.0+cpanm patches=0eac10ed90aeb0459ad8851f88081d439a4e41978e586ec743069e8b059370ac +shared+threads arch=darwin-mojave-x86_64 \r\n[+]      ^gdbm@1.18.1%gcc@8.2.0 arch=darwin-mojave-x86_64 \r\n[+]          ^readline@7.0%gcc@8.2.0 arch=darwin-mojave-x86_64 \r\n[+]              ^ncurses@6.1%gcc@8.2.0~symlinks~termlib arch=darwin-mojave-x86_64 \r\n[+]                  ^pkgconf@1.5.4%gcc@8.2.0 arch=darwin-mojave-x86_64 \r\n...\r\n```\r\n\r\n#### Attached files\r\n- `spack log-parse --show=errors,warnings /Users/deatonjd/Code/spack/var/spack/stage/perl-5.26.2-t4e4jbcs6flb3qkqlfn2mj7oxbawzogw/perl-5.26.2/spack-build.out` - \r\n[spack-build-errors-warnings.txt](https://github.com/spack/spack/files/2627435/spack-build-errors-warnings.txt)\r\n- `spack -d install -j 1 perl %gcc@8.2.0` - \r\n[spack-cc-perl-t4e4jbc.in.log](https://github.com/spack/spack/files/2627438/spack-cc-perl-t4e4jbc.in.log)\r\n- `spack -d install -j 1 perl %gcc@8.2.0` - \r\n[spack-cc-perl-t4e4jbc.out.log](https://github.com/spack/spack/files/2627439/spack-cc-perl-t4e4jbc.out.log)\r\n",
    "performed_via_github_app": null
}