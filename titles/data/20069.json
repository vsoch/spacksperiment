{
    "url": "https://api.github.com/repos/spack/spack/issues/20069",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20069/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20069/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20069/events",
    "html_url": "https://github.com/spack/spack/issues/20069",
    "id": 749892581,
    "node_id": "MDU6SXNzdWU3NDk4OTI1ODE=",
    "number": 20069,
    "title": "Installation issue: clingo fails to build on gcc 4.8.5 (Red Hat's GCC version 4.8.5-44) on CentOS 7",
    "user": {
        "login": "robertu94",
        "id": 7604212,
        "node_id": "MDQ6VXNlcjc2MDQyMTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7604212?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/robertu94",
        "html_url": "https://github.com/robertu94",
        "followers_url": "https://api.github.com/users/robertu94/followers",
        "following_url": "https://api.github.com/users/robertu94/following{/other_user}",
        "gists_url": "https://api.github.com/users/robertu94/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/robertu94/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robertu94/subscriptions",
        "organizations_url": "https://api.github.com/users/robertu94/orgs",
        "repos_url": "https://api.github.com/users/robertu94/repos",
        "events_url": "https://api.github.com/users/robertu94/events{/privacy}",
        "received_events_url": "https://api.github.com/users/robertu94/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446623646,
            "node_id": "MDU6TGFiZWw0NDY2MjM2NDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/concretization",
            "name": "concretization",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 1029761810,
            "node_id": "MDU6TGFiZWwxMDI5NzYxODEw",
            "url": "https://api.github.com/repos/spack/spack/labels/vendored-dependencies",
            "name": "vendored-dependencies",
            "color": "b1fc49",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-11-24T17:12:43Z",
    "updated_at": "2020-11-26T01:52:29Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Thanks for all your hard work on spack, and on the new concertizer specifically; Spack is one of my favorite HPC tools.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n#on CentOS-7 with epel-release installed\r\n$ spack install clingo@master\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.16.0-57-348cbe1\r\n* **Python:** 2.7.5\r\n* **Platform:** linux-centos7-skylake\r\n* **Concretizer:** original\r\n\r\n```\r\npackages:\r\n  gcc:\r\n    externals:\r\n    - spec: gcc@4.8.5 languages=c,c++,fortran\r\n      prefix: /usr\r\n      extra_attributes:\r\n        compilers:\r\n          c: /usr/bin/x86_64-redhat-linux-gcc\r\n          cxx: /usr/bin/g++\r\n          fortran: /usr/bin/gfortran\r\n  git:\r\n    externals:\r\n    - spec: git@1.8.3.1~tcltk\r\n      prefix: /usr\r\n  cmake:\r\n    externals:\r\n    - spec: cmake@2.8.12.2\r\n      prefix: /usr\r\n  tar:\r\n    externals:\r\n    - spec: tar@1.26\r\n      prefix: /usr\r\n  python:\r\n    externals:\r\n    - spec: python@2.7.5+bz2+ctypes+dbm+lzma+nis+pyexpat+readline+sqlite3+ssl~tix~tkinter+uuid+zlib\r\n      prefix: /usr\r\n  diffutils:\r\n    externals:\r\n    - spec: diffutils@3.3\r\n      prefix: /usr\r\n  cpio:\r\n    externals:\r\n    - spec: cpio@2.11\r\n      prefix: /usr\r\n  perl:\r\n    externals:\r\n    - spec: perl@5.16.3~cpanm+shared+threads\r\n      prefix: /usr\r\n  xz:\r\n    externals:\r\n    - spec: xz@5.2.2\r\n      prefix: /usr\r\n  findutils:\r\n    externals:\r\n    - spec: findutils@4.5.11\r\n      prefix: /usr\r\n  texinfo:\r\n    externals:\r\n    - spec: texinfo@5.1\r\n      prefix: /usr\r\n  bash:\r\n    externals:\r\n    - spec: bash@4.2.46\r\n      prefix: /usr\r\n  pkg-config:\r\n    externals:\r\n    - spec: pkg-config@0.27.1\r\n      prefix: /usr\r\n\r\n```\r\n\r\n### Additional information\r\n\r\nSome of the groups that we collaborate with still use CentOS-7 (or equivalent versions of Scientific Linux), and bootstrapping clingo fails with a very unclear build error messages because gcc 4.8.5 only supports some of C++14, and not enough to build clingo.  Specifically it is missing some changes in c++14 that relaxed rules about exception specifiers in defaulted operators and some bug fixes for using `&` to capture variadic template arguments.  It seems that you tried to catch these problems with the try catch block looking for the c++14 compiler flag, but that didn't seem to be enough.\r\n\r\nHowever before these issues, Clingo won't even configure without modifying the package to have \r\n\r\n`depends_on('cmake@3.1:', type='build')`\r\n\r\nSince the system installed version of cmake on CentOS7 is cmake 2.8.12.2\r\n\r\nIf clingo is going to be bootstrapped in the future, it seems crucial to me that the error messages be intelligible.\r\n\r\n\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/5591481/spack-build-env.txt)\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/5591482/spack-build-out.txt)\r\n\r\n@tgamblin \r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}