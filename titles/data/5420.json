{
    "url": "https://api.github.com/repos/spack/spack/issues/5420",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5420/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5420/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5420/events",
    "html_url": "https://github.com/spack/spack/issues/5420",
    "id": 259610318,
    "node_id": "MDU6SXNzdWUyNTk2MTAzMTg=",
    "number": 5420,
    "title": "can't build py-mccabe (and py-flake8) on osx",
    "user": {
        "login": "cyrush",
        "id": 1194526,
        "node_id": "MDQ6VXNlcjExOTQ1MjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1194526?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cyrush",
        "html_url": "https://github.com/cyrush",
        "followers_url": "https://api.github.com/users/cyrush/followers",
        "following_url": "https://api.github.com/users/cyrush/following{/other_user}",
        "gists_url": "https://api.github.com/users/cyrush/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cyrush/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cyrush/subscriptions",
        "organizations_url": "https://api.github.com/users/cyrush/orgs",
        "repos_url": "https://api.github.com/users/cyrush/repos",
        "events_url": "https://api.github.com/users/cyrush/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cyrush/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "tgamblin",
        "id": 299842,
        "node_id": "MDQ6VXNlcjI5OTg0Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgamblin",
        "html_url": "https://github.com/tgamblin",
        "followers_url": "https://api.github.com/users/tgamblin/followers",
        "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
        "organizations_url": "https://api.github.com/users/tgamblin/orgs",
        "repos_url": "https://api.github.com/users/tgamblin/repos",
        "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgamblin/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "tgamblin",
            "id": 299842,
            "node_id": "MDQ6VXNlcjI5OTg0Mg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/299842?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tgamblin",
            "html_url": "https://github.com/tgamblin",
            "followers_url": "https://api.github.com/users/tgamblin/followers",
            "following_url": "https://api.github.com/users/tgamblin/following{/other_user}",
            "gists_url": "https://api.github.com/users/tgamblin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tgamblin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tgamblin/subscriptions",
            "organizations_url": "https://api.github.com/users/tgamblin/orgs",
            "repos_url": "https://api.github.com/users/tgamblin/repos",
            "events_url": "https://api.github.com/users/tgamblin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tgamblin/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-09-21T19:45:15Z",
    "updated_at": "2017-09-25T19:46:48Z",
    "closed_at": "2017-09-25T19:46:48Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "On OSX (10.11.6), I can't use spack to install `py-flake8` b/c `py-mccabe` (one of flake8's dependencies) fails.\r\n\r\nIssue looks like a problem with `pytest-runner` being needed.\r\n\r\nI tried adding `pytest-runner`, but it failed to build & thats as far down as the rabbit hole I had time to explore.\r\n\r\n\r\nFull Details Below.\r\n\r\n**spack install py-flake8**\r\n```\r\n==> python is already installed in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/python-2.7.14-5vxw6f2k4hjdnk7fi6tulhtrasixblki\r\n==> py-enum34 is already installed in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-enum34-1.1.6-hdwea3dsqtekcgnnwje3sg6m7zvqvss3\r\n==> python is already installed in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/python-2.7.14-5vxw6f2k4hjdnk7fi6tulhtrasixblki\r\n==> py-pytest is already installed in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-pytest-3.0.7-jk7mvh7cjoj4ii4uj57aeud3bwg2b737\r\n==> py-setuptools is already installed in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275\r\n==> Installing py-mccabe\r\n==> Using cached archive: /Users/harrison37/Work/2017_09_conduit_spack_update/spack/var/spack/cache/py-mccabe/py-mccabe-0.5.2.tar.gz\r\n==> Already staged py-mccabe-0.5.2-2svvfdbb5hhuzqydx37fmodrxcr47a64 in /Users/harrison37/Work/2017_09_conduit_spack_update/spack/var/spack/stage/py-mccabe-0.5.2-2svvfdbb5hhuzqydx37fmodrxcr47a64\r\n==> No patches needed for py-mccabe\r\n==> Building py-mccabe [PythonPackage]\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/python-2.7.14-5vxw6f2k4hjdnk7fi6tulhtrasixblki/bin/python2.7' 'setup.py' '--no-user-cfg' 'build'\r\nSee build log for details:\r\n  /Users/harrison37/Work/2017_09_conduit_spack_update/spack/var/spack/stage/py-mccabe-0.5.2-2svvfdbb5hhuzqydx37fmodrxcr47a64/mccabe-0.5.2/spack-build.out\r\n```\r\n\r\n**log with py-mccabe build error (w/o pytest-runner)**\r\n\r\n```\r\nNo local packages or working download links found for pytest-runner\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 57, in <module>\r\n    'Topic :: Software Development :: Quality Assurance',\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/python-2.7.14-5vxw6f2k4hjdnk7fi6tulhtrasixblki/lib/python2.7/distutils/core.py\", line 111, in setup\r\n    _setup_distribution = dist = klass(attrs)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 318, in __init__\r\n    self.fetch_build_eggs(attrs['setup_requires'])\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 375, in fetch_build_eggs\r\n    replace_conflicting=True,\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 851, in resolve\r\n    dist = best[req.key] = env.best_match(req, ws, installer)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1123, in best_match\r\n    return self.obtain(req, installer)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1135, in obtain\r\n    return installer(requirement)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 443, in fetch_build_egg\r\n    return cmd.easy_install(req)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 667, in easy_install\r\n    raise DistutilsError(msg)\r\ndistutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pytest-runner')\r\n```\r\n\r\n**log of pytest-runner build error**\r\n```\r\nNo local packages or working download links found for setuptools_scm>=1.15.0\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 49, in <module>\r\n    setuptools.setup(**params)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/python-2.7.14-5vxw6f2k4hjdnk7fi6tulhtrasixblki/lib/python2.7/distutils/core.py\", line 111, in setup\r\n    _setup_distribution = dist = klass(attrs)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 318, in __init__\r\n    self.fetch_build_eggs(attrs['setup_requires'])\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 375, in fetch_build_eggs\r\n    replace_conflicting=True,\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 851, in resolve\r\n    dist = best[req.key] = env.best_match(req, ws, installer)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1123, in best_match\r\n    return self.obtain(req, installer)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1135, in obtain\r\n    return installer(requirement)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/dist.py\", line 443, in fetch_build_egg\r\n    return cmd.easy_install(req)\r\n  File \"/Users/harrison37/Work/2017_09_conduit_spack_update/spack/opt/spack/darwin-elcapitan-x86_64/clang-7.3.0-apple/py-setuptools-35.0.2-2jxxsgfojlrnbs52bshmraxsjbhzt275/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 667, in easy_install\r\n    raise DistutilsError(msg)\r\ndistutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('setuptools_scm>=1.15.0')\r\n\r\n```",
    "performed_via_github_app": null
}