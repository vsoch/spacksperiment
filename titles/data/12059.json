{
    "url": "https://api.github.com/repos/spack/spack/issues/12059",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/12059/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/12059/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/12059/events",
    "html_url": "https://github.com/spack/spack/issues/12059",
    "id": 470023971,
    "node_id": "MDU6SXNzdWU0NzAwMjM5NzE=",
    "number": 12059,
    "title": "Installation issue: vtkm fails to build with cmake@3.9.6 as required by ascent",
    "user": {
        "login": "wspear",
        "id": 7329201,
        "node_id": "MDQ6VXNlcjczMjkyMDE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7329201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wspear",
        "html_url": "https://github.com/wspear",
        "followers_url": "https://api.github.com/users/wspear/followers",
        "following_url": "https://api.github.com/users/wspear/following{/other_user}",
        "gists_url": "https://api.github.com/users/wspear/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wspear/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wspear/subscriptions",
        "organizations_url": "https://api.github.com/users/wspear/orgs",
        "repos_url": "https://api.github.com/users/wspear/repos",
        "events_url": "https://api.github.com/users/wspear/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wspear/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        },
        {
            "id": 512483390,
            "node_id": "MDU6TGFiZWw1MTI0ODMzOTA=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-medium",
            "name": "impact-medium",
            "color": "fef2c0",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "wspear",
        "id": 7329201,
        "node_id": "MDQ6VXNlcjczMjkyMDE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7329201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wspear",
        "html_url": "https://github.com/wspear",
        "followers_url": "https://api.github.com/users/wspear/followers",
        "following_url": "https://api.github.com/users/wspear/following{/other_user}",
        "gists_url": "https://api.github.com/users/wspear/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wspear/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wspear/subscriptions",
        "organizations_url": "https://api.github.com/users/wspear/orgs",
        "repos_url": "https://api.github.com/users/wspear/repos",
        "events_url": "https://api.github.com/users/wspear/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wspear/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "wspear",
            "id": 7329201,
            "node_id": "MDQ6VXNlcjczMjkyMDE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7329201?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wspear",
            "html_url": "https://github.com/wspear",
            "followers_url": "https://api.github.com/users/wspear/followers",
            "following_url": "https://api.github.com/users/wspear/following{/other_user}",
            "gists_url": "https://api.github.com/users/wspear/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wspear/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wspear/subscriptions",
            "organizations_url": "https://api.github.com/users/wspear/orgs",
            "repos_url": "https://api.github.com/users/wspear/repos",
            "events_url": "https://api.github.com/users/wspear/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wspear/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2019-07-18T22:38:53Z",
    "updated_at": "2019-07-31T14:21:35Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Installing ascent requires a particular spec for the vtkm package which fails to build. After a bit of twiddling I determined that it is use of cmake 3.9.6 that causes the problem. \r\n\r\nFor reasons I am not yet sure of, possibly relating to my use of an environment, explicitly telling vtkm to build with cmake@3.14.5 resulted it in still building with the older version.\r\n\r\nOut side of my environment the command:\r\n\r\n`spack install vtkm@master%gcc@7.3.0~64bitids build_type=Release ~cuda cuda_arch=none +doubleprecision~logging+mpi+openmp+rendering+shared~tbb^cmake@3.9.6`\r\n\r\nFails like:\r\n\r\n```\r\n==> Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '/spack/var/spack/stage/vtkm-master-hy47h2llqflza75otyaceebohf7sepp7/spack-src' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:PATH=/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/vtkm-master-hy47h2llqflza75otyaceebohf7sepp7' '-DCMAKE_BUILD_TYPE:STRING=Release' '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=FALSE' '-DCMAKE_INSTALL_RPATH:STRING=/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/vtkm-master-hy47h2llqflza75otyaceebohf7sepp7/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/vtkm-master-hy47h2llqflza75otyaceebohf7sepp7/lib64;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/ncurses-6.1-3tmz3apsfbu5ugilyfs4kao77mmymirf/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/openssl-1.1.1b-bgw4bicirlqearriata4sq2b5mwwj2he/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/zlib-1.2.11-zknfwanbwk6tnyaplsykwghx7cvnz4cr/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/openmpi-3.1.4-snnwzweze3spic6dhldkp4i6mwdjkcaf/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/hwloc-1.11.11-j3nx57yv75swbdskyyb4umz2rcylvxw3/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/libpciaccess-0.13.5-f5k35g4jnofnql3akgfs5iuhijsfbjsq/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/libxml2-2.9.9-z2euiks4vtz4rr5saethub567ivgrucu/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/libiconv-1.15-g3ciqiy6jxwg6frzrfs6b23lfz2in4ck/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/xz-5.2.4-jw7ekw4wtqrma5ho6vlhal4fzliygckx/lib;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/numactl-2.0.12-kmyhvetaitwqryjb5hs3w5iucsgipo7u/lib' '-DCMAKE_PREFIX_PATH:STRING=/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/openmpi-3.1.4-snnwzweze3spic6dhldkp4i6mwdjkcaf;/spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/cmake-3.9.6-jxmv4chemkwv7a3hd3hwk4ccrcxpzq7e' '-DVTKm_ENABLE_TESTING:BOOL=OFF' '-DBUILD_SHARED_LIBS=ON' '-DVTKm_ENABLE_CUDA:BOOL=OFF' '-DVTKm_USE_DOUBLE_PRECISION:BOOL=ON' '-DVTKm_ENABLE_LOGGING:BOOL=OFF' '-DVTKm_ENABLE_MPI:BOOL=ON' '-DVTKm_ENABLE_OPENMP:BOOL=ON' '-DVTKm_ENABLE_RENDERING:BOOL=ON' '-DVTKm_ENABLE_TBB:BOOL=OFF' '-DVTKm_USE_64BIT_IDS:BOOL=OFF'\r\n\r\n4 errors found in build log:\r\n     20    -- Looking for pthread.h - found\r\n     21    -- Looking for pthread_create\r\n     22    -- Looking for pthread_create - not found\r\n     23    -- Check if compiler accepts -pthread\r\n     24    -- Check if compiler accepts -pthread - yes\r\n     25    -- Found Threads: TRUE\r\n  >> 26    CMake Error at /tmp/root/spack-stage/spack-stage-3Z_HgM/spack-build/\r\n           CMakeFiles/CMakeTmp/CMakeLists.txt:18 (add_executable):\r\n     27      Cannot find source file:\r\n     28    \r\n     29        /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/cmake-3.9.6-jxmv\r\n           4chemkwv7a3hd3hwk4ccrcxpzq7e/share/cmake-3.9/Modules/FindMPI/test_mp\r\n           i.c\r\n     30    \r\n     31      Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .h\r\n           m .hpp\r\n     32      .hxx .in .txx\r\n     33    \r\n     34    \r\n  >> 35    CMake Error: CMake can not determine linker language for target: cmT\r\n           C_663bd\r\n  >> 36    CMake Error: Cannot determine link language for target \"cmTC_663bd\".\r\n  >> 37    CMake Error at CMake/FindMPI.cmake:1204 (try_compile):\r\n     38      Failed to generate test project build system.\r\n     39    Call Stack (most recent call first):\r\n     40      CMake/FindMPI.cmake:1255 (_MPI_try_staged_settings)\r\n     41      CMake/FindMPI.cmake:1417 (_MPI_check_lang_works)\r\n     42      CMake/VTKmMPI.cmake:16 (find_package)\r\n     43      CMake/VTKmWrappers.cmake:15 (include)\r\n\r\nSee build log for details:\r\n  /spack/var/spack/stage/vtkm-master-hy47h2llqflza75otyaceebohf7sepp7/spack-build-out.txt\r\n```\r\n\r\n",
    "performed_via_github_app": null
}