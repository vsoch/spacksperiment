{
    "url": "https://api.github.com/repos/spack/spack/issues/6202",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6202/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6202/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6202/events",
    "html_url": "https://github.com/spack/spack/issues/6202",
    "id": 272296610,
    "node_id": "MDU6SXNzdWUyNzIyOTY2MTA=",
    "number": 6202,
    "title": "Spack using system CMake instead of Spack CMake",
    "user": {
        "login": "rspavel",
        "id": 4571189,
        "node_id": "MDQ6VXNlcjQ1NzExODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4571189?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rspavel",
        "html_url": "https://github.com/rspavel",
        "followers_url": "https://api.github.com/users/rspavel/followers",
        "following_url": "https://api.github.com/users/rspavel/following{/other_user}",
        "gists_url": "https://api.github.com/users/rspavel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rspavel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rspavel/subscriptions",
        "organizations_url": "https://api.github.com/users/rspavel/orgs",
        "repos_url": "https://api.github.com/users/rspavel/repos",
        "events_url": "https://api.github.com/users/rspavel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rspavel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-11-08T18:11:37Z",
    "updated_at": "2017-11-08T18:48:37Z",
    "closed_at": "2017-11-08T18:24:59Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I noticed a similar error on a few other spackages but llvm seems to trigger it most consistently. It appears that even though Spack thinks it is using the specified version the path is not set up to actually use the intended CMake. So if your platform has a particularly old version of CMake, it is unable to build things that are dependent on more modern features\r\n\r\n```\r\n[rspavel@cn212 ~]$ spack install llvm\r\n...\r\n==> cmake@3.7.1 : externally installed in /projects/opt/centos7/cmake/3.7.1/bin/cmake\r\n==> cmake@3.7.1 : already registered in DB\r\n...\r\n==> Building llvm [CMakePackage]\r\n==> Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '/home/rspavel/Software/spack/var/spack/stage/llvm-5.0.0-r2jo5zftpctuqjouhlzacb2fc4mlezgr/llvm-5.0.0.src' '-G' 'Unix Makefiles' '\r\n...\r\n\r\n1 error found in build log:\r\n     [ ... ]\r\n  >> 3     CMake Error at CMakeLists.txt:3 (cmake_minimum_required):\r\n     4       CMake 3.4.3 or higher is required.  You are running version 2.8.12.2\r\n     5\r\n     6\r\n     7     -- Configuring incomplete, errors occurred!\r\n...\r\n[rspavel@cn212 ~]$ cat ~/.spack/packages.yaml\r\npackages:\r\n    cmake:\r\n        paths:\r\n            cmake@3.7.1: /projects/opt/centos7/cmake/3.7.1/bin/cmake\r\n        buildable: False\r\n[rspavel@cn212 ~]$ /projects/opt/centos7/cmake/3.7.1/bin/cmake --version\r\ncmake version 3.7.1\r\n[rspavel@cn212 ~]$ /usr/bin/cmake --version\r\ncmake version 2.8.12.2\r\n[rspavel@cn212 ~]$ spack env llvm which cmake\r\n/usr/bin/cmake\r\n```",
    "performed_via_github_app": null
}