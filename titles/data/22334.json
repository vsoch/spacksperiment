{
    "url": "https://api.github.com/repos/spack/spack/issues/22334",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22334/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22334/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22334/events",
    "html_url": "https://github.com/spack/spack/issues/22334",
    "id": 833131374,
    "node_id": "MDU6SXNzdWU4MzMxMzEzNzQ=",
    "number": 22334,
    "title": "Installation issue: [soapdenovo2] symbol needs debug section",
    "user": {
        "login": "vsoch",
        "id": 814322,
        "node_id": "MDQ6VXNlcjgxNDMyMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/814322?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vsoch",
        "html_url": "https://github.com/vsoch",
        "followers_url": "https://api.github.com/users/vsoch/followers",
        "following_url": "https://api.github.com/users/vsoch/following{/other_user}",
        "gists_url": "https://api.github.com/users/vsoch/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vsoch/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vsoch/subscriptions",
        "organizations_url": "https://api.github.com/users/vsoch/orgs",
        "repos_url": "https://api.github.com/users/vsoch/repos",
        "events_url": "https://api.github.com/users/vsoch/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vsoch/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-03-16T19:31:29Z",
    "updated_at": "2021-06-27T11:58:39Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "We are building soapdenovo2 with containerize, and hitting [build errors](https://github.com/autamus/registry/pull/85/checks?check_run_id=2118967546)\r\n\r\n> Symbol needs debug section which does not exist\r\n\r\n```\r\nRemoving intermediate container cc791cc16417\r\n ---> 3627133f025a\r\nStep 7/15 : RUN cd /opt/spack-environment && spack env activate . && spack install --fail-fast && spack gc -y\r\n ---> Running in f9c9c80d3134\r\n==> Concretized soapdenovo2\r\n -   b5pvtz2  soapdenovo2@242%gcc@7.5.0 arch=linux-ubuntu18.04-haswell\r\n\r\n==> Installing environment /opt/spack-environment\r\n==> Installing soapdenovo2-242-b5pvtz2di5q5ypod4rdxjw5ugpfkjo6o\r\n==> No binary for soapdenovo2-242-b5pvtz2di5q5ypod4rdxjw5ugpfkjo6o found: installing from source\r\n==> Fetching https://spack-llnl-mirror.s3-us-west-2.amazonaws.com/_source-cache/archive/a0/a0043ceb41bc17a1c3fd2b8abe4f9029a60ad3edceb2b15af3c2cfabd36aa11b.tar.gz\r\n==> No patches needed for soapdenovo2\r\n==> soapdenovo2: Executing phase: 'edit'\r\n==> soapdenovo2: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j2'\r\n\r\n21 errors found in build log:\r\n     52     Compiling dfibHeap.c...\r\n     53     Compiling fib.c...\r\n     54     Compiling fib.c...\r\n     55     Compiling fibHeap.c...\r\n     56     Compiling hashFunction.c...\r\n     57     hashFunction.c: Assembler messages:\r\n  >> 58     hashFunction.c:94: Error: invalid instruction suffix for `push'\r\n  >> 59     hashFunction.c:97: Error: invalid instruction suffix for `pop'\r\n  >> 60     hashFunction.c:94: Error: invalid instruction suffix for `push'\r\n  >> 61     hashFunction.c:97: Error: invalid instruction suffix for `pop'\r\n  >> 62     Error in command: gcc -c -O3 -fomit-frame-pointer -w  -DMER127 -m64\r\n              -Iinc hashFunction.c\r\n     63     Compiling kmer.c...\r\n     64     Compiling hashFunction.c...\r\n     65     hashFunction.c: Assembler messages:\r\n  >> 66     hashFunction.c:94: Error: invalid instruction suffix for `push'\r\n  >> 67     hashFunction.c:97: Error: invalid instruction suffix for `pop'\r\n  >> 68     hashFunction.c:94: Error: invalid instruction suffix for `push'\r\n  >> 69     hashFunction.c:97: Error: invalid instruction suffix for `pop'\r\n  >> 70     Error in command: gcc -c -O3 -fomit-frame-pointer -w  -DMER63 -m64 \r\n             -Iinc hashFunction.c\r\n     71     Compiling kmer.c...\r\n     72     Compiling lib.c...\r\n     73     Compiling loadGraph.c...\r\n     74     Compiling loadPath.c...\r\n     75     Compiling loadPreGraph.c...\r\n     76     Compiling loadPreGraph.c...\r\n\r\n     ...\r\n\r\n     125    Compiling read2edge.c...\r\n     126    Compiling read2edge.c...\r\n     127    Compiling iterate.c...\r\n     128    Compiling iterate.c...\r\n     129    SOAPdenovo-127mer objects generated.\r\n     130    standardPregraph/iterate.o: file not recognized: File truncated\r\n  >> 131    collect2: error: ld returned 1 exit status\r\n     132    Makefile:60: recipe for target 'SOAPdenovo-127mer' failed\r\n  >> 133    make: *** [SOAPdenovo-127mer] Error 1\r\n     134    make: *** Waiting for unfinished jobs....\r\n     135    SOAPdenovo-63mer objects generated.\r\n     136    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(bam.o): relocation R_X86\r\n            _64_32 against `.rodata.str1.1' can not be used when making a PIE o\r\n            bject; recompile with -fPIC\r\n     137    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(bam_import.o): relocatio\r\n            n R_X86_64_32 against `.rodata.str1.1' can not be used when making \r\n            a PIE object; recompile with -fPIC\r\n     138    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(sam.o): relocation R_X86\r\n            _64_32 against `.rodata.str1.8' can not be used when making a PIE o\r\n            bject; recompile with -fPIC\r\n     139    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(bam_pileup.o): relocatio\r\n            n R_X86_64_32 against `.rodata.str1.8' can not be used when making \r\n            a PIE object; recompile with -fPIC\r\n\r\n     ...\r\n\r\n     142    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(sam_header.o): relocatio\r\n            n R_X86_64_32 against `.rodata.str1.1' can not be used when making \r\n            a PIE object; recompile with -fPIC\r\n     143    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(bgzf.o): relocation R_X8\r\n            6_64_32 against `.rodata.str1.1' can not be used when making a PIE \r\n            object; recompile with -fPIC\r\n     144    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(kstring.o): relocation R\r\n            _X86_64_32 against `.text' can not be used when making a PIE object\r\n            ; recompile with -fPIC\r\n     145    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(bam_aux.o): relocation R\r\n            _X86_64_32S against `.rodata' can not be used when making a PIE obj\r\n            ect; recompile with -fPIC\r\n     146    /usr/bin/ld: ./sparsePregraph/inc/libbam.a(razf.o): relocation R_X8\r\n            6_64_32 against `.rodata.str1.1' can not be used when making a PIE \r\n            object; recompile with -fPIC\r\n     147    standardPregraph/main.o: In function `main':\r\n  >> 148    main.c:(.text.startup+0xc): undefined reference to `crc32c_Init'\r\n     149    standardPregraph/cutTipPreGraph.o: In function `removeSingleTips':\r\n  >> 150    cutTipPreGraph.c:(.text+0x73e): undefined reference to `hash_kmer'\r\n  >> 151    cutTipPreGraph.c:(.text+0x879): undefined reference to `hash_kmer'\r\n  >> 152    cutTipPreGraph.c:(.text+0xa43): undefined reference to `hash_kmer'\r\n     153    standardPregraph/cutTipPreGraph.o: In function `removeMinorTips':\r\n  >> 154    cutTipPreGraph.c:(.text+0xfb6): undefined reference to `hash_kmer'\r\n  >> 155    cutTipPreGraph.c:(.text+0x10ea): undefined reference to `hash_kmer'\r\n     156    standardPregraph/cutTipPreGraph.o:cutTipPreGraph.c:(.text+0x12d5): \r\n            more undefined references to `hash_kmer' follow\r\n  >> 157    /usr/bin/ld: final link failed: Symbol needs debug section which do\r\n            es not exist\r\n  >> 158    collect2: error: ld returned 1 exit status\r\n     159    Makefile:56: recipe for target 'SOAPdenovo-63mer' failed\r\n  >> 160    make: *** [SOAPdenovo-63mer] Error 1\r\n\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-soapdenovo2-242-b5pvtz2di5q5ypod4rdxjw5ugpfkjo6o/spack-build-out.txt\r\n\r\n==> Updating view at /opt/view\r\n==> Error: Terminating after first install failure: ProcessError: Command exited with status 2:\r\n    'make' '-j2'\r\n```\r\n\r\nThe spack.yaml looks like this:\r\n\r\n```yaml\r\nspack:\r\n  specs: [\"soapdenovo2\"]\r\n  view: true\r\n  container:\r\n    os_packages:\r\n      build:\r\n        - python3-dev\r\n      final:\r\n        - ca-certificates\r\n    strip: false\r\n```",
    "performed_via_github_app": null
}