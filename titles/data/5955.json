{
    "url": "https://api.github.com/repos/spack/spack/issues/5955",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/5955/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/5955/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/5955/events",
    "html_url": "https://github.com/spack/spack/pull/5955",
    "id": 268476033,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ4NzI2NzQw",
    "number": 5955,
    "title": "setup-env.sh support for lmod and dotkit",
    "user": {
        "login": "krafczyk",
        "id": 6449564,
        "node_id": "MDQ6VXNlcjY0NDk1NjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6449564?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krafczyk",
        "html_url": "https://github.com/krafczyk",
        "followers_url": "https://api.github.com/users/krafczyk/followers",
        "following_url": "https://api.github.com/users/krafczyk/following{/other_user}",
        "gists_url": "https://api.github.com/users/krafczyk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/krafczyk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/krafczyk/subscriptions",
        "organizations_url": "https://api.github.com/users/krafczyk/orgs",
        "repos_url": "https://api.github.com/users/krafczyk/repos",
        "events_url": "https://api.github.com/users/krafczyk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/krafczyk/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        },
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        },
        {
            "id": 446619526,
            "node_id": "MDU6TGFiZWw0NDY2MTk1MjY=",
            "url": "https://api.github.com/repos/spack/spack/labels/new-package",
            "name": "new-package",
            "color": "444444",
            "default": false,
            "description": null
        },
        {
            "id": 475435626,
            "node_id": "MDU6TGFiZWw0NzU0MzU2MjY=",
            "url": "https://api.github.com/repos/spack/spack/labels/shell-support",
            "name": "shell-support",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "krafczyk",
        "id": 6449564,
        "node_id": "MDQ6VXNlcjY0NDk1NjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6449564?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krafczyk",
        "html_url": "https://github.com/krafczyk",
        "followers_url": "https://api.github.com/users/krafczyk/followers",
        "following_url": "https://api.github.com/users/krafczyk/following{/other_user}",
        "gists_url": "https://api.github.com/users/krafczyk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/krafczyk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/krafczyk/subscriptions",
        "organizations_url": "https://api.github.com/users/krafczyk/orgs",
        "repos_url": "https://api.github.com/users/krafczyk/repos",
        "events_url": "https://api.github.com/users/krafczyk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/krafczyk/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "krafczyk",
            "id": 6449564,
            "node_id": "MDQ6VXNlcjY0NDk1NjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6449564?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/krafczyk",
            "html_url": "https://github.com/krafczyk",
            "followers_url": "https://api.github.com/users/krafczyk/followers",
            "following_url": "https://api.github.com/users/krafczyk/following{/other_user}",
            "gists_url": "https://api.github.com/users/krafczyk/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/krafczyk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/krafczyk/subscriptions",
            "organizations_url": "https://api.github.com/users/krafczyk/orgs",
            "repos_url": "https://api.github.com/users/krafczyk/repos",
            "events_url": "https://api.github.com/users/krafczyk/events{/privacy}",
            "received_events_url": "https://api.github.com/users/krafczyk/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-10-25T17:04:39Z",
    "updated_at": "2019-02-12T12:23:55Z",
    "closed_at": "2019-02-12T12:23:55Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/5955",
        "html_url": "https://github.com/spack/spack/pull/5955",
        "diff_url": "https://github.com/spack/spack/pull/5955.diff",
        "patch_url": "https://github.com/spack/spack/pull/5955.patch"
    },
    "body": "This PR introduces support for the lmod and dotkit module systems. This completes setup-env.sh's support for all three module systems. Towards this end, the following had to be done:\r\n\r\n- A new subcommand `getraw` was added to the `config` command. This allows the user to query spack's configuration from the command line. This also includes the ability to find the lengths of lists using the `LEN` special keyword and use integers to access list elements by index. This was necessary to help `setup-env.sh` figure out which module systems where enabled, and more importantly, which were at the top of the list to establish whether `environemnt-modules` or `lmod` have priority for definition of the `module` function.\r\n- The `dotkit` package was created.\r\n- `setup-env.sh` logic was updated in order to more seamlessly handle the multiple module systems. First an array is filled with the enabled module systems, Then `module` or `use` is defined depending on which module systems are enabled and whether these functions are already defined.\r\n- `spack bootstrap` logic was changed slightly to only install a module system's package if it is enabled.\r\n- `spack module` logic was changed to set the default module type to that at the top of the modules enabled list. This means users no longer have to specify `-m` for the majority of cases.\r\n- `spack module loads` dotkit usage command was corrected.\r\n- Two tests depending on `tcl` modules being enabled have been given skip statements if `tcl` is not enabled. This prevents test failures when the user has disabled `tcl`.\r\n- Documentation was updated detailing these new features. I do not believe that this documentation is totally complete, and I'm currently looking for outside opinions on it.\r\n\r\nThis PR depends on #5904 to be merged for `lmod` to build properly on at least some systems.",
    "performed_via_github_app": null
}