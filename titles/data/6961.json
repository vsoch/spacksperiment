{
    "url": "https://api.github.com/repos/spack/spack/issues/6961",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6961/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6961/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6961/events",
    "html_url": "https://github.com/spack/spack/issues/6961",
    "id": 289102332,
    "node_id": "MDU6SXNzdWUyODkxMDIzMzI=",
    "number": 6961,
    "title": "Problems with cmake build_type variant",
    "user": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 508566016,
            "node_id": "MDU6TGFiZWw1MDg1NjYwMTY=",
            "url": "https://api.github.com/repos/spack/spack/labels/cmake",
            "name": "cmake",
            "color": "c2e0c6",
            "default": false,
            "description": null
        },
        {
            "id": 456144565,
            "node_id": "MDU6TGFiZWw0NTYxNDQ1NjU=",
            "url": "https://api.github.com/repos/spack/spack/labels/defaults",
            "name": "defaults",
            "color": "bfd4f2",
            "default": false,
            "description": null
        },
        {
            "id": 466955297,
            "node_id": "MDU6TGFiZWw0NjY5NTUyOTc=",
            "url": "https://api.github.com/repos/spack/spack/labels/proposal",
            "name": "proposal",
            "color": "0e8a16",
            "default": false,
            "description": null
        },
        {
            "id": 493969518,
            "node_id": "MDU6TGFiZWw0OTM5Njk1MTg=",
            "url": "https://api.github.com/repos/spack/spack/labels/variants",
            "name": "variants",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-01-17T00:27:03Z",
    "updated_at": "2018-04-20T09:04:42Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "### Summary\r\n\r\nThe build_type variant turns on CMAKE_BUILD_TYPE, which sets optimization flags. Those flags are set after the user-specified CMAKE_C_FLAGS and equivalents. This leads to user flags being rejected under default configurations.\r\n\r\n### Proposal\r\n\r\nChange the default for the `build_type` variant to `\"\"`. This is consistent with CMake defaults outside of Spack, and will allow users to specify compiler flags manually without being overridden by CMake. CMake build types can still be specified using the `build_type` variant.\r\n\r\n### Positive effects\r\n\r\n- CMake packages will by default respect compiler optimization flags passed by the user.\r\n- CMake packages will now behave by default as they would outside of Spack by default.\r\n\r\n### Potential negatives\r\n\r\n- The default build is now less optimized\r\n- Packages that have set a different default build type in their CMakeLists.txt file will need to override the build_type variant in their package.py file to change the default. (This is actually already true, it just now also applies to packages with default RelWithDebInfo, which was the previous Spack default).\r\n\r\n### Technical scope\r\n\r\nVery small. I have created a PR to change this. #6970 ",
    "performed_via_github_app": null
}