{
    "url": "https://api.github.com/repos/spack/spack/issues/7881",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7881/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7881/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7881/events",
    "html_url": "https://github.com/spack/spack/pull/7881",
    "id": 317182925,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTgzNzAzOTU4",
    "number": 7881,
    "title": "Use GitLab's API endpoint for fetching a git snapshot.",
    "user": {
        "login": "skosukhin",
        "id": 19591868,
        "node_id": "MDQ6VXNlcjE5NTkxODY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19591868?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skosukhin",
        "html_url": "https://github.com/skosukhin",
        "followers_url": "https://api.github.com/users/skosukhin/followers",
        "following_url": "https://api.github.com/users/skosukhin/following{/other_user}",
        "gists_url": "https://api.github.com/users/skosukhin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/skosukhin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/skosukhin/subscriptions",
        "organizations_url": "https://api.github.com/users/skosukhin/orgs",
        "repos_url": "https://api.github.com/users/skosukhin/repos",
        "events_url": "https://api.github.com/users/skosukhin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/skosukhin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 497155826,
            "node_id": "MDU6TGFiZWw0OTcxNTU4MjY=",
            "url": "https://api.github.com/repos/spack/spack/labels/url-parsing",
            "name": "url-parsing",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2018-04-24T11:26:25Z",
    "updated_at": "2018-08-02T11:54:58Z",
    "closed_at": "2018-04-26T21:40:11Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/7881",
        "html_url": "https://github.com/spack/spack/pull/7881",
        "diff_url": "https://github.com/spack/spack/pull/7881.diff",
        "patch_url": "https://github.com/spack/spack/pull/7881.patch"
    },
    "body": "Currently, Spack recognises a URL that leads to a git snapshot with a given tag:\r\n\r\n`https://gitlab*/project/name/repository/archive.tar.gz?ref=v1.0.0`\r\n\r\nSuch URLs are not GitLab API endpoints and their stability is not guaranteed. For example, they were unintentionally broken in GitLab 10.7. Although they will be fixed in GitLab 10.7.1, the developers [recommend switching to API URLs](https://gitlab.com/gitlab-org/gitlab-ce/issues/45586), which look like:\r\n\r\n`https://gitlab*/api/v4/projects/project%2Fname/repository/archive.tar.gz?sha=v1.0.0`\r\n\r\nWith this PR Spack will be able to recognise GitLab API URLs and make correct version substitution in them.",
    "performed_via_github_app": null
}