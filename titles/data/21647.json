{
    "url": "https://api.github.com/repos/spack/spack/issues/21647",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21647/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21647/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21647/events",
    "html_url": "https://github.com/spack/spack/issues/21647",
    "id": 807163864,
    "node_id": "MDU6SXNzdWU4MDcxNjM4NjQ=",
    "number": 21647,
    "title": "Implement --include-test-deps switch",
    "user": {
        "login": "RobertRosca",
        "id": 32569096,
        "node_id": "MDQ6VXNlcjMyNTY5MDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/32569096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RobertRosca",
        "html_url": "https://github.com/RobertRosca",
        "followers_url": "https://api.github.com/users/RobertRosca/followers",
        "following_url": "https://api.github.com/users/RobertRosca/following{/other_user}",
        "gists_url": "https://api.github.com/users/RobertRosca/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/RobertRosca/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/RobertRosca/subscriptions",
        "organizations_url": "https://api.github.com/users/RobertRosca/orgs",
        "repos_url": "https://api.github.com/users/RobertRosca/repos",
        "events_url": "https://api.github.com/users/RobertRosca/events{/privacy}",
        "received_events_url": "https://api.github.com/users/RobertRosca/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-02-12T11:34:28Z",
    "updated_at": "2021-02-12T11:34:28Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "<!--*Please add a concise summary of your suggestion here.*-->\r\n\r\nIt would be useful to have a way to:\r\n- Just install test dependencies, without running tests for a package\r\n- Concretise an environment with test dependencies included\r\n- See the spec for a package with the test dependencies included\r\n\r\n<!--*Is your feature request related to a problem? Please describe it!*-->\r\n\r\nIssue came up in some development work I've been doing where PRs modifying a package file run the build and install time tests for the package, to save on install/compilation time a docker image gets built with all of the dependencies for the package beforehand. This way the CI only has to install the modified package itself and does not waste time compiling all of the dependencies.\r\n\r\nThis works fine, however there's no simple way for me to get all of the dependencies for the packages **including** the test dependencies as the only flags available to install test dependencies also run the tests for a package, which may or may not execute correctly, leading to an error.\r\n\r\n<!--*Describe the solution you'd like and the alternatives you have considered.*-->\r\n\r\nAdding in a `--include-test-deps` flag to `install`, `spec`, and `concretize`, which only add the test dependencies to the specs, without actually executing the tests themselves.\r\n\r\n### Additional information\r\n\r\nThis request is analogous to https://github.com/spack/spack/pull/19955 which implemented a `--include-build-deps` switch, so I think it's a reasonable idea.\r\n\r\nI'm happy to do a PR for this myself if people agree it'd be worthwhile (and approved :wink:)\r\n\r\n### General information\r\n\r\n- [x] I have run `spack --version` and reported the version of Spack - 0.16.0\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate",
    "performed_via_github_app": null
}