{
    "url": "https://api.github.com/repos/spack/spack/issues/14259",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14259/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14259/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14259/events",
    "html_url": "https://github.com/spack/spack/issues/14259",
    "id": 541252367,
    "node_id": "MDU6SXNzdWU1NDEyNTIzNjc=",
    "number": 14259,
    "title": "Spack Environments are still slow",
    "user": {
        "login": "adamjstewart",
        "id": 12021217,
        "node_id": "MDQ6VXNlcjEyMDIxMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/12021217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjstewart",
        "html_url": "https://github.com/adamjstewart",
        "followers_url": "https://api.github.com/users/adamjstewart/followers",
        "following_url": "https://api.github.com/users/adamjstewart/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamjstewart/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamjstewart/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamjstewart/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjstewart/orgs",
        "repos_url": "https://api.github.com/users/adamjstewart/repos",
        "events_url": "https://api.github.com/users/adamjstewart/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamjstewart/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        },
        {
            "id": 512483406,
            "node_id": "MDU6TGFiZWw1MTI0ODM0MDY=",
            "url": "https://api.github.com/repos/spack/spack/labels/impact-high",
            "name": "impact-high",
            "color": "fef2c0",
            "default": false,
            "description": ""
        },
        {
            "id": 460427403,
            "node_id": "MDU6TGFiZWw0NjA0Mjc0MDM=",
            "url": "https://api.github.com/repos/spack/spack/labels/performance",
            "name": "performance",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-12-21T00:12:58Z",
    "updated_at": "2019-12-24T02:36:57Z",
    "closed_at": "2019-12-24T02:36:57Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "If I run `spack install` on an **already installed environment**, it's prohibitively slow:\r\n```console\r\n$ time spack install\r\n...\r\nreal\t30m59.352s\r\nuser\t29m9.952s\r\nsys\t1m20.677s\r\n```\r\nObviously, installing an environment that is partially installed or has updates available takes even longer. These results are from my laptop. Results on Blue Waters using an NFS-mounted Python are significantly worse. The environment in question is pretty big:\r\n```yaml\r\nspack:\r\n  specs:\r\n  - bash\r\n  - gnupg\r\n  - graphviz\r\n  - watch\r\n  - wget\r\n  - automake\r\n  - autoconf\r\n  - libtool\r\n  - m4\r\n  - cmake\r\n  - ninja\r\n  - patchelf\r\n  - mercurial\r\n  - subversion\r\n  - python\r\n  - py-boto3\r\n  - py-codecov\r\n  - py-flake8\r\n  - py-matplotlib\r\n  - py-numpy\r\n  - py-pandas\r\n  - py-pyinstrument\r\n  - py-pytest\r\n  - py-pytest-cov\r\n  - py-pytest-mock\r\n  - py-pytest-runner\r\n  - py-setuptools\r\n  - py-scikit-learn\r\n  - py-scipy\r\n  - py-sphinx\r\n  - py-sphinx-rtd-theme\r\n  - py-sphinxcontrib-programoutput\r\n  - py-tables\r\n  - py-torch\r\n  - py-torchvision\r\n  - py-twine\r\n  - awscli\r\n  - gdal\r\n\r\n  concretization: together\r\n```\r\nIf you run `spack -d install`, you'll see that we are acquiring and releasing locks on the database tens of thousands of times. If you don't run `spack -d`, Spack will appear to hang for 15+ minutes after concretization and after installation while it's... _thinking_. This can cause SSH connections to drop, or cause users to believe that Spack is stuck in an infinite loop and erroneously kill it.\r\n\r\nHere is a pyinstrument profile to see what is slowing us down:\r\n```console\r\n$ pyinstrument --show-all $(which spack) install\r\n...\r\n3247.100 <module>  spack:20\r\n\u2514\u2500 3246.257 main  spack/main.py:634\r\n   \u2514\u2500 3240.397 _invoke_command  spack/main.py:450\r\n      \u2514\u2500 3240.394 install  spack/cmd/install.py:247\r\n         \u251c\u2500 2051.416 install_all  spack/environment.py:1178\r\n         \u2502  \u251c\u2500 1834.348 regenerate_views  spack/environment.py:1049\r\n         \u2502  \u2502  \u2514\u2500 1834.327 regenerate  spack/environment.py:509\r\n         \u2502  \u2502     \u251c\u2500 1700.009 <genexpr>  spack/environment.py:519\r\n         \u2502  \u2502     \u2502  \u2514\u2500 1699.679 installed  spack/package.py:1018\r\n         \u2502  \u2502     \u2502     \u251c\u2500 1095.547 converter  spack/database.py:84\r\n         \u2502  \u2502     \u2502     \u2502  \u2514\u2500 1095.547 get_record  spack/database.py:948\r\n         \u2502  \u2502     \u2502     \u2502     \u251c\u2500 626.998 query_by_spec_hash  spack/database.py:452\r\n         \u2502  \u2502     \u2502     \u2502     \u2502  \u2514\u2500 626.994 __enter__  llnl/util/lock.py:376\r\n         \u2502  \u2502     \u2502     \u2502     \u2502     \u2514\u2500 625.986 _read  spack/database.py:795\r\n         \u2502  \u2502     \u2502     \u2502     \u2502        \u2514\u2500 624.665 _read_from_file  spack/database.py:496\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u251c\u2500 287.852 _read_spec_from_dict  spack/database.py:427\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502  \u2514\u2500 287.112 from_node_dict  spack/spec.py:1644\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502     \u2514\u2500 240.678 __init__  spack/spec.py:961\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u251c\u2500 144.593 parse  spack/parse.py:150\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502  \u251c\u2500 75.968 setup  spack/parse.py:144\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502  \u2502  \u2514\u2500 68.907 split  shlex.py:300\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502  \u2514\u2500 68.346 do_parse  spack/spec.py:3969\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502     \u2514\u2500 63.816 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502        \u2514\u2500 56.029 [self]  \r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u251c\u2500 33.422 __init__  spack/spec.py:3957\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2514\u2500 32.790 [self]  \r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u251c\u2500 166.480 _mark_concrete  spack/spec.py:2282\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502  \u2514\u2500 164.242 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502     \u2514\u2500 160.897 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u251c\u2500 121.374 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502  \u2514\u2500 101.216 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502     \u2514\u2500 66.099 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2502        \u2514\u2500 34.036 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2502        \u2514\u2500 35.833 [self]  \r\n         \u2502  \u2502     \u2502     \u2502     \u2502           \u2514\u2500 147.629 load  spack/util/spack_json.py:22\r\n         \u2502  \u2502     \u2502     \u2502     \u2502              \u2514\u2500 147.628 load  json/__init__.py:274\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                 \u2514\u2500 147.535 loads  json/__init__.py:299\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                    \u2514\u2500 147.531 decode  json/decoder.py:332\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                       \u2514\u2500 147.524 raw_decode  json/decoder.py:343\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                          \u2514\u2500 140.194 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                             \u2514\u2500 107.990 <genexpr>  spack/util/spack_json.py:53\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                                \u2514\u2500 101.094 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                                   \u251c\u2500 55.385 [self]  \r\n         \u2502  \u2502     \u2502     \u2502     \u2502                                   \u2514\u2500 45.708 <listcomp>  spack/util/spack_json.py:48\r\n         \u2502  \u2502     \u2502     \u2502     \u2502                                      \u2514\u2500 43.952 [self]  \r\n         \u2502  \u2502     \u2502     \u2502     \u2514\u2500 468.550 _get_matching_spec_key  spack/database.py:937\r\n         \u2502  \u2502     \u2502     \u2502        \u2514\u2500 468.550 query_by_spec_hash  spack/database.py:452\r\n         \u2502  \u2502     \u2502     \u2502           \u2514\u2500 468.549 __enter__  llnl/util/lock.py:376\r\n         \u2502  \u2502     \u2502     \u2502              \u2514\u2500 467.389 _read  spack/database.py:795\r\n         \u2502  \u2502     \u2502     \u2502                 \u2514\u2500 466.078 _read_from_file  spack/database.py:496\r\n         \u2502  \u2502     \u2502     \u2502                    \u251c\u2500 187.574 _read_spec_from_dict  spack/database.py:427\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502  \u2514\u2500 186.850 from_node_dict  spack/spec.py:1644\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502     \u2514\u2500 135.468 __init__  spack/spec.py:961\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502        \u2514\u2500 105.740 parse  spack/parse.py:150\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u251c\u2500 69.493 do_parse  spack/spec.py:3969\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u2502  \u2514\u2500 64.907 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u2502     \u2514\u2500 37.334 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u2514\u2500 35.971 setup  spack/parse.py:144\r\n         \u2502  \u2502     \u2502     \u2502                    \u251c\u2500 137.709 _mark_concrete  spack/spec.py:2282\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502  \u2514\u2500 135.411 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502     \u2514\u2500 132.027 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502        \u2514\u2500 122.131 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u2514\u2500 101.748 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502              \u2514\u2500 66.525 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502                 \u2514\u2500 34.440 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502     \u2502                    \u251c\u2500 91.796 load  spack/util/spack_json.py:22\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502  \u2514\u2500 91.796 load  json/__init__.py:274\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502     \u2514\u2500 91.713 loads  json/__init__.py:299\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502        \u2514\u2500 91.713 decode  json/decoder.py:332\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502           \u2514\u2500 91.706 raw_decode  json/decoder.py:343\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502              \u2514\u2500 84.568 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502                 \u2514\u2500 68.240 <genexpr>  spack/util/spack_json.py:53\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502                    \u2514\u2500 61.076 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502     \u2502                    \u2502                       \u2514\u2500 50.856 [self]  \r\n         \u2502  \u2502     \u2502     \u2502                    \u2514\u2500 42.530 _assign_dependencies  spack/database.py:464\r\n         \u2502  \u2502     \u2502     \u2502                       \u2514\u2500 38.086 _add_dependency  spack/spec.py:1123\r\n         \u2502  \u2502     \u2502     \u2514\u2500 604.105 prefix  spack/package.py:1038\r\n         \u2502  \u2502     \u2502        \u2514\u2500 604.105 prefix  spack/spec.py:1340\r\n         \u2502  \u2502     \u2502           \u2514\u2500 583.942 query_by_spec_hash  spack/database.py:452\r\n         \u2502  \u2502     \u2502              \u2514\u2500 583.928 __enter__  llnl/util/lock.py:376\r\n         \u2502  \u2502     \u2502                 \u2514\u2500 582.760 _read  spack/database.py:795\r\n         \u2502  \u2502     \u2502                    \u2514\u2500 581.411 _read_from_file  spack/database.py:496\r\n         \u2502  \u2502     \u2502                       \u251c\u2500 225.305 _read_spec_from_dict  spack/database.py:427\r\n         \u2502  \u2502     \u2502                       \u2502  \u2514\u2500 224.586 from_node_dict  spack/spec.py:1644\r\n         \u2502  \u2502     \u2502                       \u2502     \u2514\u2500 177.685 __init__  spack/spec.py:961\r\n         \u2502  \u2502     \u2502                       \u2502        \u251c\u2500 136.025 parse  spack/parse.py:150\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502  \u251c\u2500 86.910 setup  spack/parse.py:144\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502  \u2502  \u2514\u2500 79.706 split  shlex.py:300\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502  \u2502     \u2514\u2500 61.377 __init__  shlex.py:21\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502  \u2514\u2500 48.830 do_parse  spack/spec.py:3969\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502     \u2514\u2500 44.251 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502                       \u2502        \u2502        \u2514\u2500 34.236 [self]  \r\n         \u2502  \u2502     \u2502                       \u2502        \u2514\u2500 32.988 [self]  \r\n         \u2502  \u2502     \u2502                       \u251c\u2500 168.826 load  spack/util/spack_json.py:22\r\n         \u2502  \u2502     \u2502                       \u2502  \u2514\u2500 168.824 load  json/__init__.py:274\r\n         \u2502  \u2502     \u2502                       \u2502     \u2514\u2500 168.728 loads  json/__init__.py:299\r\n         \u2502  \u2502     \u2502                       \u2502        \u2514\u2500 168.723 decode  json/decoder.py:332\r\n         \u2502  \u2502     \u2502                       \u2502           \u2514\u2500 168.716 raw_decode  json/decoder.py:343\r\n         \u2502  \u2502     \u2502                       \u2502              \u2514\u2500 161.303 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502                       \u2502                 \u251c\u2500 114.640 <genexpr>  spack/util/spack_json.py:53\r\n         \u2502  \u2502     \u2502                       \u2502                 \u2502  \u2514\u2500 107.824 _strify  spack/util/spack_json.py:40\r\n         \u2502  \u2502     \u2502                       \u2502                 \u2502     \u2514\u2500 82.671 <listcomp>  spack/util/spack_json.py:48\r\n         \u2502  \u2502     \u2502                       \u2502                 \u2502        \u2514\u2500 80.896 [self]  \r\n         \u2502  \u2502     \u2502                       \u2502                 \u2514\u2500 33.632 iteritems  six.py:586\r\n         \u2502  \u2502     \u2502                       \u251c\u2500 137.305 _mark_concrete  spack/spec.py:2282\r\n         \u2502  \u2502     \u2502                       \u2502  \u2514\u2500 134.988 traverse  spack/spec.py:1197\r\n         \u2502  \u2502     \u2502                       \u2502     \u2514\u2500 131.587 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502                       \u2502        \u2514\u2500 121.728 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502                       \u2502           \u2514\u2500 101.244 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502                       \u2502              \u2514\u2500 66.003 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502                       \u2502                 \u2514\u2500 34.096 traverse_edges  spack/spec.py:1212\r\n         \u2502  \u2502     \u2502                       \u2514\u2500 43.680 _assign_dependencies  spack/database.py:464\r\n         \u2502  \u2502     \u2502                          \u2514\u2500 39.167 _add_dependency  spack/spec.py:1123\r\n         \u2502  \u2502     \u2502                             \u2514\u2500 34.843 __contains__  _collections_abc.py:664\r\n         \u2502  \u2502     \u2502                                \u2514\u2500 34.281 [self]  \r\n         \u2502  \u2502     \u251c\u2500 58.325 remove_specs  spack/filesystem_view.py:369\r\n         \u2502  \u2502     \u2502  \u2514\u2500 52.867 get_all_specs  spack/filesystem_view.py:474\r\n         \u2502  \u2502     \u2502     \u2514\u2500 49.408 get_spec_from_file  spack/filesystem_view.py:620\r\n         \u2502  \u2502     \u2502        \u2514\u2500 49.275 from_yaml  spack/spec.py:1929\r\n         \u2502  \u2502     \u2502           \u2514\u2500 48.789 load  ruamel/yaml/main.py:68\r\n         \u2502  \u2502     \u2502              \u2514\u2500 48.618 get_single_data  ruamel/yaml/constructor.py:58\r\n         \u2502  \u2502     \u2502                 \u2514\u2500 47.978 get_single_node  ruamel/yaml/composer.py:46\r\n         \u2502  \u2502     \u2502                    \u2514\u2500 47.964 compose_document  ruamel/yaml/composer.py:68\r\n         \u2502  \u2502     \u2502                       \u2514\u2500 47.963 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                          \u2514\u2500 47.952 compose_mapping_node  ruamel/yaml/composer.py:145\r\n         \u2502  \u2502     \u2502                             \u2514\u2500 47.936 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                \u2514\u2500 47.924 compose_sequence_node  ruamel/yaml/composer.py:120\r\n         \u2502  \u2502     \u2502                                   \u2514\u2500 47.702 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                      \u2514\u2500 47.688 compose_mapping_node  ruamel/yaml/composer.py:145\r\n         \u2502  \u2502     \u2502                                         \u2514\u2500 47.562 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                            \u2514\u2500 47.270 compose_mapping_node  ruamel/yaml/composer.py:145\r\n         \u2502  \u2502     \u2502                                               \u2514\u2500 46.374 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                                  \u2514\u2500 44.573 compose_mapping_node  ruamel/yaml/composer.py:145\r\n         \u2502  \u2502     \u2502                                                     \u2514\u2500 41.285 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                                        \u2514\u2500 37.814 compose_mapping_node  ruamel/yaml/composer.py:145\r\n         \u2502  \u2502     \u2502                                                           \u2514\u2500 37.266 compose_node  ruamel/yaml/composer.py:81\r\n         \u2502  \u2502     \u2502                                                              \u2514\u2500 36.538 compose_sequence_node  ruamel/yaml/composer.py:120\r\n         \u2502  \u2502     \u2502                                                                 \u2514\u2500 36.432 check_event  ruamel/yaml/parser.py:112\r\n         \u2502  \u2502     \u2502                                                                    \u2514\u2500 36.418 parse_indentless_sequence_entry  ruamel/yaml/parser.py:463\r\n         \u2502  \u2502     \u2502                                                                       \u2514\u2500 35.913 peek_token  ruamel/yaml/scanner.py:141\r\n         \u2502  \u2502     \u2502                                                                          \u2514\u2500 35.869 fetch_more_tokens  ruamel/yaml/scanner.py:169\r\n         \u2502  \u2502     \u2502                                                                             \u2514\u2500 35.802 fetch_plain  ruamel/yaml/scanner.py:687\r\n         \u2502  \u2502     \u2502                                                                                \u2514\u2500 35.768 scan_plain  ruamel/yaml/scanner.py:1329\r\n         \u2502  \u2502     \u2502                                                                                   \u2514\u2500 35.474 __init__  ruamel/yaml/tokens.py:179\r\n         \u2502  \u2502     \u2502                                                                                      \u2514\u2500 35.471 __init__  ruamel/yaml/tokens.py:6\r\n         \u2502  \u2502     \u2514\u2500 54.019 clean  spack/filesystem_view.py:594\r\n         \u2502  \u2502        \u2514\u2500 48.909 _purge_broken_links  spack/filesystem_view.py:591\r\n         \u2502  \u2502           \u2514\u2500 48.907 remove_dead_links  llnl/util/filesystem.py:902\r\n         \u2502  \u2502              \u2514\u2500 38.575 remove_if_dead_link  llnl/util/filesystem.py:914\r\n         \u2502  \u2502                 \u2514\u2500 36.281 realpath  posixpath.py:391\r\n         \u2502  \u2502                    \u2514\u2500 35.139 _joinrealpath  posixpath.py:400\r\n         \u2502  \u251c\u2500 178.753 _install  spack/environment.py:1009\r\n         \u2502  \u2502  \u251c\u2500 136.882 do_install  spack/package.py:1552\r\n         \u2502  \u2502  \u2502  \u251c\u2500 54.648 converter  spack/database.py:84\r\n         \u2502  \u2502  \u2502  \u2502  \u2514\u2500 54.648 get_record  spack/database.py:948\r\n         \u2502  \u2502  \u2502  \u2514\u2500 36.976 check_for_unfinished_installation  spack/package.py:1852\r\n         \u2502  \u2502  \u2502     \u2514\u2500 36.833 converter  spack/database.py:84\r\n         \u2502  \u2502  \u2502        \u2514\u2500 36.832 get_record  spack/database.py:948\r\n         \u2502  \u2502  \u2514\u2500 41.828 build_log_path  spack/package.py:1995\r\n         \u2502  \u2502     \u2514\u2500 41.828 installed  spack/package.py:1018\r\n         \u2502  \u2502        \u2514\u2500 41.828 converter  spack/database.py:84\r\n         \u2502  \u2502           \u2514\u2500 41.828 get_record  spack/database.py:948\r\n         \u2502  \u2514\u2500 38.315 build_log_path  spack/package.py:1995\r\n         \u2502     \u2514\u2500 38.315 installed  spack/package.py:1018\r\n         \u2502        \u2514\u2500 38.315 converter  spack/database.py:84\r\n         \u2502           \u2514\u2500 38.315 get_record  spack/database.py:948\r\n         \u2514\u2500 1188.969 write  spack/environment.py:1366\r\n            \u2514\u2500 1188.852 regenerate_views  spack/environment.py:1049\r\n               \u2514\u2500 1188.832 regenerate  spack/environment.py:509\r\n                  \u251c\u2500 1083.264 <genexpr>  spack/environment.py:519\r\n                  \u2502  \u2514\u2500 1083.190 installed  spack/package.py:1018\r\n                  \u2502     \u251c\u2500 711.043 converter  spack/database.py:84\r\n                  \u2502     \u2502  \u2514\u2500 711.043 get_record  spack/database.py:948\r\n                  \u2502     \u2502     \u251c\u2500 362.062 _get_matching_spec_key  spack/database.py:937\r\n                  \u2502     \u2502     \u2502  \u2514\u2500 362.062 query_by_spec_hash  spack/database.py:452\r\n                  \u2502     \u2502     \u2502     \u2514\u2500 362.062 __enter__  llnl/util/lock.py:376\r\n                  \u2502     \u2502     \u2502        \u2514\u2500 361.179 _read  spack/database.py:795\r\n                  \u2502     \u2502     \u2502           \u2514\u2500 359.884 _read_from_file  spack/database.py:496\r\n                  \u2502     \u2502     \u2502              \u251c\u2500 140.173 _mark_concrete  spack/spec.py:2282\r\n                  \u2502     \u2502     \u2502              \u2502  \u2514\u2500 137.815 traverse  spack/spec.py:1197\r\n                  \u2502     \u2502     \u2502              \u2502     \u2514\u2500 134.348 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502     \u2502              \u2502        \u2514\u2500 123.358 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502     \u2502              \u2502           \u2514\u2500 102.547 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502     \u2502              \u2502              \u2514\u2500 66.889 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502     \u2502              \u2502                 \u2514\u2500 34.485 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502     \u2502              \u251c\u2500 134.421 _read_spec_from_dict  spack/database.py:427\r\n                  \u2502     \u2502     \u2502              \u2502  \u2514\u2500 133.646 from_node_dict  spack/spec.py:1644\r\n                  \u2502     \u2502     \u2502              \u2502     \u2514\u2500 84.516 __init__  spack/spec.py:961\r\n                  \u2502     \u2502     \u2502              \u2502        \u2514\u2500 62.849 parse  spack/parse.py:150\r\n                  \u2502     \u2502     \u2502              \u2502           \u2514\u2500 34.353 do_parse  spack/spec.py:3969\r\n                  \u2502     \u2502     \u2502              \u2514\u2500 64.059 load  spack/util/spack_json.py:22\r\n                  \u2502     \u2502     \u2502                 \u2514\u2500 64.058 load  json/__init__.py:274\r\n                  \u2502     \u2502     \u2502                    \u2514\u2500 64.044 loads  json/__init__.py:299\r\n                  \u2502     \u2502     \u2502                       \u2514\u2500 64.043 decode  json/decoder.py:332\r\n                  \u2502     \u2502     \u2502                          \u2514\u2500 64.037 raw_decode  json/decoder.py:343\r\n                  \u2502     \u2502     \u2502                             \u2514\u2500 56.718 _strify  spack/util/spack_json.py:40\r\n                  \u2502     \u2502     \u2502                                \u2514\u2500 35.968 <genexpr>  spack/util/spack_json.py:53\r\n                  \u2502     \u2502     \u2514\u2500 348.981 query_by_spec_hash  spack/database.py:452\r\n                  \u2502     \u2502        \u2514\u2500 348.980 __enter__  llnl/util/lock.py:376\r\n                  \u2502     \u2502           \u2514\u2500 348.144 _read  spack/database.py:795\r\n                  \u2502     \u2502              \u2514\u2500 346.874 _read_from_file  spack/database.py:496\r\n                  \u2502     \u2502                 \u251c\u2500 139.401 _mark_concrete  spack/spec.py:2282\r\n                  \u2502     \u2502                 \u2502  \u2514\u2500 136.964 traverse  spack/spec.py:1197\r\n                  \u2502     \u2502                 \u2502     \u2514\u2500 133.404 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502                 \u2502        \u2514\u2500 123.023 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502                 \u2502           \u2514\u2500 102.359 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502                 \u2502              \u2514\u2500 66.697 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502                 \u2502                 \u2514\u2500 34.507 traverse_edges  spack/spec.py:1212\r\n                  \u2502     \u2502                 \u251c\u2500 119.240 _read_spec_from_dict  spack/database.py:427\r\n                  \u2502     \u2502                 \u2502  \u2514\u2500 118.497 from_node_dict  spack/spec.py:1644\r\n                  \u2502     \u2502                 \u2502     \u2514\u2500 70.645 __init__  spack/spec.py:961\r\n                  \u2502     \u2502                 \u2502        \u2514\u2500 49.334 parse  spack/parse.py:150\r\n                  \u2502     \u2502                 \u2514\u2500 66.331 load  spack/util/spack_json.py:22\r\n                  \u2502     \u2502                    \u2514\u2500 66.328 load  json/__init__.py:274\r\n                  \u2502     \u2502                       \u2514\u2500 66.323 loads  json/__init__.py:299\r\n                  \u2502     \u2502                          \u2514\u2500 66.318 decode  json/decoder.py:332\r\n                  \u2502     \u2502                             \u2514\u2500 66.308 raw_decode  json/decoder.py:343\r\n                  \u2502     \u2502                                \u2514\u2500 58.795 _strify  spack/util/spack_json.py:40\r\n                  \u2502     \u2502                                   \u2514\u2500 38.564 <genexpr>  spack/util/spack_json.py:53\r\n                  \u2502     \u2514\u2500 372.146 prefix  spack/package.py:1038\r\n                  \u2502        \u2514\u2500 372.146 prefix  spack/spec.py:1340\r\n                  \u2502           \u2514\u2500 351.851 query_by_spec_hash  spack/database.py:452\r\n                  \u2502              \u2514\u2500 351.848 __enter__  llnl/util/lock.py:376\r\n                  \u2502                 \u2514\u2500 350.812 _read  spack/database.py:795\r\n                  \u2502                    \u2514\u2500 349.524 _read_from_file  spack/database.py:496\r\n                  \u2502                       \u251c\u2500 138.783 _mark_concrete  spack/spec.py:2282\r\n                  \u2502                       \u2502  \u2514\u2500 136.440 traverse  spack/spec.py:1197\r\n                  \u2502                       \u2502     \u2514\u2500 132.876 traverse_edges  spack/spec.py:1212\r\n                  \u2502                       \u2502        \u2514\u2500 122.885 traverse_edges  spack/spec.py:1212\r\n                  \u2502                       \u2502           \u2514\u2500 102.180 traverse_edges  spack/spec.py:1212\r\n                  \u2502                       \u2502              \u2514\u2500 66.926 traverse_edges  spack/spec.py:1212\r\n                  \u2502                       \u2502                 \u2514\u2500 34.444 traverse_edges  spack/spec.py:1212\r\n                  \u2502                       \u251c\u2500 125.520 _read_spec_from_dict  spack/database.py:427\r\n                  \u2502                       \u2502  \u2514\u2500 124.776 from_node_dict  spack/spec.py:1644\r\n                  \u2502                       \u2502     \u2514\u2500 75.308 __init__  spack/spec.py:961\r\n                  \u2502                       \u2502        \u2514\u2500 47.162 parse  spack/parse.py:150\r\n                  \u2502                       \u2514\u2500 62.555 load  spack/util/spack_json.py:22\r\n                  \u2502                          \u2514\u2500 62.554 load  json/__init__.py:274\r\n                  \u2502                             \u2514\u2500 62.551 loads  json/__init__.py:299\r\n                  \u2502                                \u2514\u2500 62.550 decode  json/decoder.py:332\r\n                  \u2502                                   \u2514\u2500 62.543 raw_decode  json/decoder.py:343\r\n                  \u2502                                      \u2514\u2500 55.066 _strify  spack/util/spack_json.py:40\r\n                  \u2502                                         \u2514\u2500 36.667 <genexpr>  spack/util/spack_json.py:53\r\n                  \u2514\u2500 54.874 clean  spack/filesystem_view.py:594\r\n                     \u2514\u2500 47.476 _purge_broken_links  spack/filesystem_view.py:591\r\n                        \u2514\u2500 47.476 remove_dead_links  llnl/util/filesystem.py:902\r\n                           \u2514\u2500 38.638 remove_if_dead_link  llnl/util/filesystem.py:914\r\n                              \u2514\u2500 36.343 realpath  posixpath.py:391\r\n                                 \u2514\u2500 35.115 _joinrealpath  posixpath.py:400\r\n```\r\n\r\n@tgamblin ",
    "performed_via_github_app": null
}