{
    "url": "https://api.github.com/repos/spack/spack/issues/4887",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/4887/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/4887/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/4887/events",
    "html_url": "https://github.com/spack/spack/issues/4887",
    "id": 245187603,
    "node_id": "MDU6SXNzdWUyNDUxODc2MDM=",
    "number": 4887,
    "title": "petsc does not build with ~double",
    "user": {
        "login": "jiseung",
        "id": 24727548,
        "node_id": "MDQ6VXNlcjI0NzI3NTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/24727548?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jiseung",
        "html_url": "https://github.com/jiseung",
        "followers_url": "https://api.github.com/users/jiseung/followers",
        "following_url": "https://api.github.com/users/jiseung/following{/other_user}",
        "gists_url": "https://api.github.com/users/jiseung/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jiseung/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jiseung/subscriptions",
        "organizations_url": "https://api.github.com/users/jiseung/orgs",
        "repos_url": "https://api.github.com/users/jiseung/repos",
        "events_url": "https://api.github.com/users/jiseung/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jiseung/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-07-24T19:42:30Z",
    "updated_at": "2017-08-03T17:02:08Z",
    "closed_at": "2017-08-03T17:02:08Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "```\r\nspack install petsc~double\r\n```\r\nproduces \r\n```\r\n==> hypre is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/hypre-2.11.2-iqu6vzcbd2dn4f5hcq4b7y2ogsl3m7ij\r\n==> superlu-dist is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/superlu-dist-5.1.3-54d4jjhr7blxdqh5a2oty43cv2qg2sva\r\n==> hdf5 is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/hdf5-1.10.1-ak7hkbf4jf6lujtodaxcskihxsyezefc\r\n==> python is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/python-2.7.13-5xsz3tmkpq3xyuklugxh2xcbiqtsvgqd\r\n==> openmpi is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openmpi-2.1.1-bdm67yaoa77o6sioamjnfuilwuiy2hfj\r\n==> parmetis is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/parmetis-4.0.3-6wsxpoxdyxnueegmqehv6ay3khcs77ug\r\n==> openblas is already installed in /home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openblas-0.2.19-nhjhpp4nhjdreeldddhpp5cnxp4wu3md\r\n==> Installing petsc\r\n==> Using cached archive: /home/jiseung/spack/var/spack/cache/petsc/petsc-3.7.6.tar.gz\r\n==> Already staged petsc-3.7.6-z22dahuvgesc3luyiek6od5f4wzeejrk in /home/jiseung/spack/var/spack/stage/petsc-3.7.6-z22dahuvgesc3luyiek6od5f4wzeejrk\r\n==> Already patched petsc\r\n==> Building petsc [Package]\r\n==> Executing phase : 'install'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    './configure' '--prefix=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/petsc-3.7.6-z22dahuvgesc3luyiek6od5f4wzeejrk' '--with-ssl=0' '--with-x=0' '--download-c2html=0' '--download-sowing=0' '--download-hwloc=0' '--with-cc=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openmpi-2.1.1-bdm67yaoa77o6sioamjnfuilwuiy2hfj/bin/mpicc' '--with-cxx=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openmpi-2.1.1-bdm67yaoa77o6sioamjnfuilwuiy2hfj/bin/mpic++' '--with-fc=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openmpi-2.1.1-bdm67yaoa77o6sioamjnfuilwuiy2hfj/bin/mpif90' '--with-precision=single' '--with-scalar-type=real' '--with-shared-libraries=1' '--with-debugging=0' '--with-64-bit-indices=0' '--with-blas-lapack-lib=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/openblas-0.2.19-nhjhpp4nhjdreeldddhpp5cnxp4wu3md/lib/libopenblas.so' '--with-scalapack=0' '--with-metis=1' '--with-metis-dir=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/metis-5.1.0-p5kfthhc2k5gykwum2phtsihklwt5pbq' '--with-boost=0' '--with-hdf5=1' '--with-hdf5-dir=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/hdf5-1.10.1-ak7hkbf4jf6lujtodaxcskihxsyezefc' '--with-hypre=1' '--with-hypre-dir=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/hypre-2.11.2-iqu6vzcbd2dn4f5hcq4b7y2ogsl3m7ij' '--with-parmetis=1' '--with-parmetis-dir=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/parmetis-4.0.3-6wsxpoxdyxnueegmqehv6ay3khcs77ug' '--with-mumps=0' '--with-trilinos=0' '--with-superlu_dist-include=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/superlu-dist-5.1.3-54d4jjhr7blxdqh5a2oty43cv2qg2sva/include' '--with-superlu_dist-lib=/home/jiseung/spack/opt/spack/linux-rhel7-x86_64/gcc-4.8.5/superlu-dist-5.1.3-54d4jjhr7blxdqh5a2oty43cv2qg2sva/lib/libsuperlu_dist.a' '--with-superlu_dist=1'\r\n/home/jiseung/spack/var/spack/repos/builtin/packages/petsc/package.py:230, in install:\r\n     164      def install(self, spec, prefix):\r\n     165          options = ['--with-ssl=0',\r\n     166                     '--with-x=0',\r\n     167                     '--download-c2html=0',\r\n     168                     '--download-sowing=0',\r\n     169                     '--download-hwloc=0']\r\n     170          options.extend(self.mpi_dependent_options())\r\n     171          options.extend([\r\n     172              '--with-precision=%s' % (\r\n     173                  'double' if '+double' in spec else 'single'),\r\n     174              '--with-scalar-type=%s' % (\r\n     175                  'complex' if '+complex' in spec else 'real'),\r\n     176              '--with-shared-libraries=%s' % ('1' if '+shared' in spec else '0'),\r\n     177              '--with-debugging=%s' % ('1' if '+debug' in spec else '0'),\r\n     178              '--with-64-bit-indices=%s' % ('1' if '+int64' in spec else '0')\r\n     179          ])\r\n     180          # Make sure we use exactly the same Blas/Lapack libraries\r\n     181          # across the DAG. To that end list them explicitly\r\n     182          lapack_blas = spec['lapack'].libs + spec['blas'].libs\r\n     183          options.extend([\r\n     184              '--with-blas-lapack-lib=%s' % lapack_blas.joined()\r\n     185          ])\r\n     186  \r\n     187          if 'trilinos' in spec:\r\n     188              options.append('--with-cxx-dialect=C++11')\r\n     189  \r\n     190          # Help PETSc pick up Scalapack from MKL:\r\n     191          if 'scalapack' in spec:\r\n     192              scalapack = spec['scalapack'].libs\r\n     193              options.extend([\r\n     194                  '--with-scalapack-lib=%s' % scalapack.joined(),\r\n     195                  '--with-scalapack=1'\r\n     196              ])\r\n     197          else:\r\n     198              options.extend([\r\n     199                  '--with-scalapack=0'\r\n     200              ])\r\n     201  \r\n     202          # Activates library support if needed\r\n     203          for library in ('metis', 'boost', 'hdf5', 'hypre', 'parmetis',\r\n     204                          'mumps', 'trilinos'):\r\n     205              options.append(\r\n     206                  '--with-{library}={value}'.format(\r\n     207                      library=library, value=('1' if library in spec else '0'))\r\n     208              )\r\n     209              if library in spec:\r\n     210                  options.append(\r\n     211                      '--with-{library}-dir={path}'.format(\r\n     212                          library=library, path=spec[library].prefix)\r\n     213                  )\r\n     214          # PETSc does not pick up SuperluDist from the dir as they look for\r\n     215          # superlu_dist_4.1.a\r\n     216          if 'superlu-dist' in spec:\r\n     217              options.extend([\r\n     218                  '--with-superlu_dist-include=%s' %\r\n     219                  spec['superlu-dist'].prefix.include,\r\n     220                  '--with-superlu_dist-lib=%s' %\r\n     221                  join_path(spec['superlu-dist'].prefix.lib,\r\n     222                            'libsuperlu_dist.a'),\r\n     223                  '--with-superlu_dist=1'\r\n     224              ])\r\n     225          else:\r\n     226              options.append(\r\n     227                  '--with-superlu_dist=0'\r\n     228              )\r\n     229  \r\n  >> 230          configure('--prefix=%s' % prefix, *options)\r\n     231  \r\n     232          # PETSc has its own way of doing parallel make.\r\n     233          make('MAKE_NP=%s' % make_jobs, parallel=False)\r\n     234          make(\"install\")\r\n     235  \r\n     236          # solve Poisson equation in 2D to make sure nothing is broken:\r\n     237          if ('mpi' in spec) and self.run_tests:\r\n     238              with working_dir('src/ksp/ksp/examples/tutorials'):\r\n     239                  env['PETSC_DIR'] = self.prefix\r\n     240                  cc = Executable(spec['mpi'].mpicc)\r\n     241                  cc('ex50.c', '-I%s' % prefix.include, '-L%s' % prefix.lib,\r\n     242                     '-lpetsc', '-lm', '-o', 'ex50')\r\n     243                  run = Executable(join_path(spec['mpi'].prefix.bin, 'mpirun'))\r\n     244                  run('ex50', '-da_grid_x', '4', '-da_grid_y', '4')\r\n     245                  if 'superlu-dist' in spec:\r\n     246                      run('ex50',\r\n     247                          '-da_grid_x', '4',\r\n     248                          '-da_grid_y', '4',\r\n     249                          '-pc_type', 'lu',\r\n     250                          '-pc_factor_mat_solver_package', 'superlu_dist')\r\n     251  \r\n     252                  if 'mumps' in spec:\r\n     253                      run('ex50',\r\n     254                          '-da_grid_x', '4',\r\n     255                          '-da_grid_y', '4',\r\n     256                          '-pc_type', 'lu',\r\n     257                          '-pc_factor_mat_solver_package', 'mumps')\r\n     258  \r\n     259                  if 'hypre' in spec:\r\n     260                      run('ex50',\r\n     261                          '-da_grid_x', '4',\r\n     262                          '-da_grid_y', '4',\r\n     263                          '-pc_type', 'hypre',\r\n     264                          '-pc_hypre_type', 'boomeramg')\r\n```",
    "performed_via_github_app": null
}