{
    "url": "https://api.github.com/repos/spack/spack/issues/17327",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17327/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17327/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17327/events",
    "html_url": "https://github.com/spack/spack/pull/17327",
    "id": 648801258,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDQyNTQ3OTUx",
    "number": 17327,
    "title": "Use libstdc++ to fix build error of biobloom",
    "user": {
        "login": "ketsubouchi",
        "id": 67359246,
        "node_id": "MDQ6VXNlcjY3MzU5MjQ2",
        "avatar_url": "https://avatars.githubusercontent.com/u/67359246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ketsubouchi",
        "html_url": "https://github.com/ketsubouchi",
        "followers_url": "https://api.github.com/users/ketsubouchi/followers",
        "following_url": "https://api.github.com/users/ketsubouchi/following{/other_user}",
        "gists_url": "https://api.github.com/users/ketsubouchi/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ketsubouchi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ketsubouchi/subscriptions",
        "organizations_url": "https://api.github.com/users/ketsubouchi/orgs",
        "repos_url": "https://api.github.com/users/ketsubouchi/repos",
        "events_url": "https://api.github.com/users/ketsubouchi/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ketsubouchi/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-07-01T08:57:20Z",
    "updated_at": "2020-07-02T06:11:57Z",
    "closed_at": "2020-07-02T06:11:57Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/17327",
        "html_url": "https://github.com/spack/spack/pull/17327",
        "diff_url": "https://github.com/spack/spack/pull/17327.diff",
        "patch_url": "https://github.com/spack/spack/pull/17327.patch"
    },
    "body": "`spack install biobloom%fj` failed with errors such as\r\n```console\r\n> 101    /fefs/home/n0026/work/spack/lib/spack/env/fj/case-insensitive/FCC -\r\n            Wall -Wextra -Werror  -fopenmp -w -fopenmp  -o biobloommimaker biob\r\n            loommimaker-BioBloomMIMaker.o biobloommimaker-Options.o ../Common/l\r\n            ibcommon.a -lz -lsdsl -ldl\r\n     102    /opt/arm/gcc-8.2.0_Generic-AArch64_RHEL-7_aarch64-linux/lib/gcc/aar\r\n            ch64-linux-gnu/8.2.0/../../../../aarch64-linux-gnu/bin/ld: biobloom\r\n            mimaker-BioBloomMIMaker.o: in function `bool sdsl::store_to_file<sd\r\n            sl::bit_vector_il<512u> >(sdsl::bit_vector_il<512u> const&, std::__\r\n            cxx11::basic_string<char, std::char_traits<char>, std::allocator<ch\r\n            ar> > const&)` \r\n     103    /fefs/home/n0026/work/spack/opt/spack/linux-rhel8-thunderx2/fj-4.1.\r\n            0/sdsl-lite-2.1.1-wbul254d5iaeyd6xykzzi3jb5akqrsbd/include/sdsl/io.\r\n            hpp:660: undefined reference to `sdsl::osfstream::osfstream(std::__\r\n            cxx11::basic_string<char, std::char_traits<char>, std::allocator<ch\r\n            ar> > const&, std::_Ios_Openmode)`\r\n```\r\nMismatch of stdlib is the reason of these errors. So I patched `-stdlib=libc++` to `-stdlib=stdlibc++` in CMakeLists.txt of sdsl-lite.\r\n```console\r\n> if( CMAKE_COMPILER_IS_GNUCXX )\r\n    append_cxx_compiler_flags(\"-std=c++11 -Wall -Wextra -DNDEBUG\" \"GCC\" CMAKE_CXX_FLAGS)\r\n    append_cxx_compiler_flags(\"-O3 -ffast-math -funroll-loops\" \"GCC\" CMAKE_CXX_OPT_FLAGS)\r\n    if ( CODE_COVERAGE )\r\n        append_cxx_compiler_flags(\"-g -fprofile-arcs -ftest-coverage -lgcov\" \"GCC\" CMAKE_CXX_FLAGS)\r\n    endif()\r\nelse()\r\n    if( CMAKE_COMPILER_IS_CLANGXX )\r\n\t\tappend_cxx_compiler_flags(\"-std=c++11 -DNDEBUG\" \"CLANG\" CMAKE_CXX_FLAGS)\r\n\t\tappend_cxx_compiler_flags(\"-stdlib=libc++\" \"CLANG\" CMAKE_CXX_FLAGS)\r\n\t\tappend_cxx_compiler_flags(\"-O3 -ffast-math -funroll-loops -D__extern_always_inline=\\\"extern __always_inline\\\" \" \"CLANG\" CMAKE_CXX_OPT_FLAGS)\r\n\telse()\r\n```",
    "performed_via_github_app": null
}