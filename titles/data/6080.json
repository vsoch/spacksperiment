{
    "url": "https://api.github.com/repos/spack/spack/issues/6080",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6080/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6080/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6080/events",
    "html_url": "https://github.com/spack/spack/issues/6080",
    "id": 270418989,
    "node_id": "MDU6SXNzdWUyNzA0MTg5ODk=",
    "number": 6080,
    "title": "GCC +binutils requires libstdc++-static RPM",
    "user": {
        "login": "rgmiller",
        "id": 1301479,
        "node_id": "MDQ6VXNlcjEzMDE0Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1301479?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rgmiller",
        "html_url": "https://github.com/rgmiller",
        "followers_url": "https://api.github.com/users/rgmiller/followers",
        "following_url": "https://api.github.com/users/rgmiller/following{/other_user}",
        "gists_url": "https://api.github.com/users/rgmiller/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rgmiller/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rgmiller/subscriptions",
        "organizations_url": "https://api.github.com/users/rgmiller/orgs",
        "repos_url": "https://api.github.com/users/rgmiller/repos",
        "events_url": "https://api.github.com/users/rgmiller/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rgmiller/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 616911200,
            "node_id": "MDU6TGFiZWw2MTY5MTEyMDA=",
            "url": "https://api.github.com/repos/spack/spack/labels/gcc",
            "name": "gcc",
            "color": "0052cc",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-11-01T19:13:39Z",
    "updated_at": "2017-11-06T16:12:55Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Enabling the binutils variant causes the build to fail on my Fedora system.  The problem is caused by the fact that this variant appends `-static-libstdc++` to the ldflags for the boot and stage1 builds.  Unfortunately, on Fedora 26 at least, libstdc++-static is a separate RPM and it's optional.  (It's not even included in the \"C Development Tools and Libraries\" group.)\r\n\r\nAlso, the error message when the build fails is quite misleading.  The message says that the configure script can't determine the size of a 'long long'.  You have to dig down into the config.log file to see that the test  program the configure script tries to build failed to link because it couldn't find libstdc++.a.\r\n\r\nI'm not sure what the proper fix for this is.  There's no libstdc++ Spack package for the gcc package to depend on.  Maybe there should be?  At the very least, I think we should make the error message clearer.  Could we add some code to package.py to check for the presence of libstdc++.a before starting the build?\r\n\r\nThis issue is (somewhat) related to #5397 in that #5397's proposed solution will trigger this problem all the time, not just for the +binutils variant.",
    "performed_via_github_app": null
}