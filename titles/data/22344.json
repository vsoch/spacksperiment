{
    "url": "https://api.github.com/repos/spack/spack/issues/22344",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22344/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22344/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22344/events",
    "html_url": "https://github.com/spack/spack/issues/22344",
    "id": 833236489,
    "node_id": "MDU6SXNzdWU4MzMyMzY0ODk=",
    "number": 22344,
    "title": "Installation issue: llvm won't build without '-j1'",
    "user": {
        "login": "nlvw",
        "id": 5723368,
        "node_id": "MDQ6VXNlcjU3MjMzNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5723368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nlvw",
        "html_url": "https://github.com/nlvw",
        "followers_url": "https://api.github.com/users/nlvw/followers",
        "following_url": "https://api.github.com/users/nlvw/following{/other_user}",
        "gists_url": "https://api.github.com/users/nlvw/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/nlvw/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nlvw/subscriptions",
        "organizations_url": "https://api.github.com/users/nlvw/orgs",
        "repos_url": "https://api.github.com/users/nlvw/repos",
        "events_url": "https://api.github.com/users/nlvw/events{/privacy}",
        "received_events_url": "https://api.github.com/users/nlvw/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2021-03-16T22:12:37Z",
    "updated_at": "2021-03-29T17:52:56Z",
    "closed_at": "2021-03-28T17:06:46Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When trying to install llvm (>=11.0.0) on the 0.16/develop branches, it always fails unless I specify '-j1'.  The problem is when I specify '-j1' the build takes 8+ hours.  I've tried with other levels of parallel such as '-j4','-j8',etc.. with the same results.\r\n\r\nHere is an example of the error I'm seeing:\r\n![image](https://user-images.githubusercontent.com/5723368/111384595-50cc7300-866f-11eb-8b28-890610ecd609.png)\r\n\r\n### Steps to reproduce the issue\r\n\r\nTry Installing the following spec:\r\n[llvm.spec.yml.txt](https://github.com/spack/spack/files/6152407/llvm.spec.yml.txt)\r\n```console\r\n$ spack spec -l llvm\r\nInput spec\r\n--------------------------------\r\nllvm\r\n\r\nConcretized\r\n--------------------------------\r\neqkhvuo  llvm@11.0.1%gcc@9.3.0~all_targets+clang~code_signing+compiler-rt~cuda+flang+gold+internal_unwind~ipo+libcxx+lld+lldb~llvm_dylib~mlir~omp_debug~omp_tsan+polly~python~shared_libs~split_dwarf build_type=Release cuda_arch=none arch=linux-centos7-x86_64\r\n33e7wmy      ^binutils@2.36.1%gcc@9.3.0+gold~headers~interwork~ld~libiberty~lto+nls~plugins arch=linux-centos7-x86_64\r\nzxtgsuh          ^diffutils@3.7%gcc@9.3.0 arch=linux-centos7-x86_64\r\n3h4ijv3              ^libiconv@1.16%gcc@9.3.0 arch=linux-centos7-x86_64\r\nxqkgnhw          ^gettext@0.21%gcc@9.3.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-x86_64\r\n7p6pftw              ^bzip2@1.0.8%gcc@9.3.0+shared arch=linux-centos7-x86_64\r\npvvnuip              ^libxml2@2.9.10%gcc@9.3.0~python arch=linux-centos7-x86_64\r\naso2b7h                  ^pkgconf@1.7.3%gcc@9.3.0 arch=linux-centos7-x86_64\r\nn24wphj                  ^xz@5.2.5%gcc@9.3.0~pic arch=linux-centos7-x86_64\r\no5eyrr4                  ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-centos7-x86_64\r\nhwn6g5r              ^ncurses@6.2%gcc@9.3.0~symlinks+termlib arch=linux-centos7-x86_64\r\nhnz4zml              ^tar@1.32%gcc@9.3.0 arch=linux-centos7-x86_64\r\nmgxre4e      ^cmake@3.19.5%gcc@9.3.0~doc+ncurses+openssl+ownlibs~qt build_type=Release patches=b48396c0e4f61756248156b6cebe9bc0d7a22228639b47b5aa77c9330588ce88 arch=linux-centos7-x86_64\r\npwrr6dy          ^openssl@1.1.1j%gcc@9.3.0~docs+systemcerts arch=linux-centos7-x86_64\r\nsrxrr5q              ^perl@5.32.1%gcc@9.3.0+cpanm+shared+threads arch=linux-centos7-x86_64\r\nquwnvxd                  ^berkeley-db@18.1.40%gcc@9.3.0~docs patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-centos7-x86_64\r\nv7k2dmp                  ^gdbm@1.18.1%gcc@9.3.0 arch=linux-centos7-x86_64\r\ngqh5clp                      ^readline@8.0%gcc@9.3.0 arch=linux-centos7-x86_64\r\ngkka5py      ^hwloc@2.4.1%gcc@9.3.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci+shared arch=linux-centos7-x86_64\r\nrwtvmjb          ^libpciaccess@0.16%gcc@9.3.0 arch=linux-centos7-x86_64\r\n7h77rfe              ^libtool@2.4.6%gcc@9.3.0 arch=linux-centos7-x86_64\r\n7mznmph                  ^m4@1.4.18%gcc@9.3.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-centos7-x86_64\r\nc65ernv                      ^libsigsegv@2.12%gcc@9.3.0 arch=linux-centos7-x86_64\r\nrn4mhf3              ^util-macros@1.19.1%gcc@9.3.0 arch=linux-centos7-x86_64\r\ngtnab2l      ^libedit@3.1-20191231%gcc@9.3.0 arch=linux-centos7-x86_64\r\nnwfnf6b      ^perl-data-dumper@2.173%gcc@9.3.0 arch=linux-centos7-x86_64\r\nrubanf6      ^python@3.8.6%gcc@9.3.0+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87 arch=linux-centos7-x86_64\r\ni7lbdia          ^expat@2.2.10%gcc@9.3.0+libbsd arch=linux-centos7-x86_64\r\nlkj3fww              ^libbsd@0.10.0%gcc@9.3.0 arch=linux-centos7-x86_64\r\n3z4ue4q          ^libffi@3.3%gcc@9.3.0 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0 arch=linux-centos7-x86_64\r\nzjhayua          ^sqlite@3.34.0%gcc@9.3.0+column_metadata+fts~functions~rtree arch=linux-centos7-x86_64\r\n2kalov5          ^util-linux-uuid@2.36%gcc@9.3.0 arch=linux-centos7-x86_64\r\n6wl3nr5      ^swig@4.0.2%gcc@9.3.0 arch=linux-centos7-x86_64\r\ncg22j7n          ^pcre@8.44%gcc@9.3.0~jit+multibyte+utf arch=linux-centos7-x86_64\r\ndicciek      ^z3@4.8.9%gcc@9.3.0+python arch=linux-centos7-x86_64\r\nxh3q24y          ^py-setuptools@50.3.2%gcc@9.3.0 arch=linux-centos7-x86_64\r\n\r\n```\r\n\r\n### Information on your system\r\n\r\n<!-- Please include the output of `spack debug report` -->\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.16.1-1721-603331e\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-cascadelake\r\n* **Concretizer:** original\r\n```\r\n[compilers.yaml.txt](https://github.com/spack/spack/files/6152376/compilers.yaml.txt)\r\n[packages.yaml.txt](https://github.com/spack/spack/files/6152377/packages.yaml.txt)\r\n[config.yaml.txt](https://github.com/spack/spack/files/6152379/config.yaml.txt)\r\n\r\n### Additional information\r\n\r\n\r\n<!-- Please upload the following files. They should be present in the stage directory of the failing build. Also upload any config.log or similar file if one exists. -->\r\n[spack-build-env.txt](https://github.com/spack/spack/files/6152351/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/6152352/spack-build-out.txt)\r\n[spack-configure-args.txt](https://github.com/spack/spack/files/6152355/spack-configure-args.txt)\r\n\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n@naromero77 \r\n@trws \r\n\r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}