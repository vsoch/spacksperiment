{
    "url": "https://api.github.com/repos/spack/spack/issues/2982",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/2982/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/2982/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/2982/events",
    "html_url": "https://github.com/spack/spack/issues/2982",
    "id": 204622317,
    "node_id": "MDU6SXNzdWUyMDQ2MjIzMTc=",
    "number": 2982,
    "title": "Built-In Recursive Module Loading",
    "user": {
        "login": "citibeth",
        "id": 1924215,
        "node_id": "MDQ6VXNlcjE5MjQyMTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1924215?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/citibeth",
        "html_url": "https://github.com/citibeth",
        "followers_url": "https://api.github.com/users/citibeth/followers",
        "following_url": "https://api.github.com/users/citibeth/following{/other_user}",
        "gists_url": "https://api.github.com/users/citibeth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/citibeth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/citibeth/subscriptions",
        "organizations_url": "https://api.github.com/users/citibeth/orgs",
        "repos_url": "https://api.github.com/users/citibeth/repos",
        "events_url": "https://api.github.com/users/citibeth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/citibeth/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2017-02-01T15:54:07Z",
    "updated_at": "2018-04-08T14:52:53Z",
    "closed_at": "2018-04-08T14:52:52Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "@Exteris @tgamblin @alalazo \r\n\r\n> The only option left is to make environment modules, but these lose dependency information...\r\n> Can we modify our modules to also load dependencies as well? I thought that\r\nworked? Or is that only for Lmod?\r\n> I think if the modules shipped with a configuration with... prereq loading enabled by default, that would be way better.\r\n\r\nCurrently, setting up recursive loading of modules requires users add per-package information in `modules.yaml`.  This is fundamentally the wrong place (see #1662).  Which dependencies need to be loaded recursively is package-specific, and should therefore go with all other package-specific things (in `package.py`).\r\n\r\nHow to fix:\r\n\r\n1. Design and implement a mechanisms that allows packagers to add recursive module loading information to `package.py`.  Is this an optional kwarg on `depends_on()`?\r\n\r\n2. Design a setting in `modules.yaml` to be able to turn package auto-loading on/off; or even override what is in `package.py` on a per-package basis.\r\n\r\n3. Modify the module generation logic to incorporate recursive-loading information from the packages, as well as its current source of `modules.yaml`.\r\n\r\n4. Add default rules to some Package superclasses.  For example, `PythonPackage` should auto-load its dependencies by default, whereas `AutotoolsPackage` and `CMakePackage` do not.\r\n\r\n5. Successively refine by adding more detailed information on recursive module loading, by editing `package.py` files on a per-package basis.\r\n\r\nI believe this issue needs to be fixed before we see widespread use of recursive module loading among typical Spack users.  Nobody wants to configure how 50 modules handle recursive loading --- especially since they likely don't even know the correct configuration for most of those modules.\r\n",
    "performed_via_github_app": null
}