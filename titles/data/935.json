{
    "url": "https://api.github.com/repos/spack/spack/issues/935",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/935/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/935/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/935/events",
    "html_url": "https://github.com/spack/spack/pull/935",
    "id": 154144341,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njk2MDQ3ODI=",
    "number": 935,
    "title": "[WIP] Speed up with targeted memoization",
    "user": {
        "login": "citibeth",
        "id": 1924215,
        "node_id": "MDQ6VXNlcjE5MjQyMTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1924215?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/citibeth",
        "html_url": "https://github.com/citibeth",
        "followers_url": "https://api.github.com/users/citibeth/followers",
        "following_url": "https://api.github.com/users/citibeth/following{/other_user}",
        "gists_url": "https://api.github.com/users/citibeth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/citibeth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/citibeth/subscriptions",
        "organizations_url": "https://api.github.com/users/citibeth/orgs",
        "repos_url": "https://api.github.com/users/citibeth/repos",
        "events_url": "https://api.github.com/users/citibeth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/citibeth/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2016-05-11T01:58:19Z",
    "updated_at": "2016-05-12T03:40:55Z",
    "closed_at": "2016-05-12T03:40:55Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/935",
        "html_url": "https://github.com/spack/spack/pull/935",
        "diff_url": "https://github.com/spack/spack/pull/935.diff",
        "patch_url": "https://github.com/spack/spack/pull/935.patch"
    },
    "body": "I added a few memoizations to avoid re-doing work again and again.  Not that this is how things should be in the end... but it DOES speed me up from 30 seconds to 15 for a simple \"spack spec\" command.\n\nOn my run...\n\nIt's true, virtual dependencies are taking a lot of time.  _expand_virtual_packages() is only called 3 times.  But then ProviderIndex() is instantiated 738 (!) times.  Overall, 6838 specs are created --- FAR MORE than there are specs in the entire repo!\n\nI suspect that speedup will happen through some more targeted re-use of objects.  Among other things, it looks like the same Spec is being instantiated multiple times.  And we shouldn't have to instantiate ProviderIndex 738 times.\n\nIn the meantime, I've shaved down the pain for myself somewhat.\n",
    "performed_via_github_app": null
}