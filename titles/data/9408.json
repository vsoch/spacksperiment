{
    "url": "https://api.github.com/repos/spack/spack/issues/9408",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9408/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9408/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9408/events",
    "html_url": "https://github.com/spack/spack/issues/9408",
    "id": 365936421,
    "node_id": "MDU6SXNzdWUzNjU5MzY0MjE=",
    "number": 9408,
    "title": "Installation issue: Cannot concretize ecp-proxy-apps",
    "user": {
        "login": "EmreAtes",
        "id": 15252235,
        "node_id": "MDQ6VXNlcjE1MjUyMjM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15252235?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/EmreAtes",
        "html_url": "https://github.com/EmreAtes",
        "followers_url": "https://api.github.com/users/EmreAtes/followers",
        "following_url": "https://api.github.com/users/EmreAtes/following{/other_user}",
        "gists_url": "https://api.github.com/users/EmreAtes/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/EmreAtes/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/EmreAtes/subscriptions",
        "organizations_url": "https://api.github.com/users/EmreAtes/orgs",
        "repos_url": "https://api.github.com/users/EmreAtes/repos",
        "events_url": "https://api.github.com/users/EmreAtes/events{/privacy}",
        "received_events_url": "https://api.github.com/users/EmreAtes/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-10-02T14:52:01Z",
    "updated_at": "2018-10-02T22:07:18Z",
    "closed_at": "2018-10-02T21:00:47Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n[eates@nid00020 ~/spack/bin]$ ./spack install ecp-proxy-apps\r\n==> Warning: Could not detect module function from bash. Trying to detect modulecmd from `which`\r\n==> Warning: Could not detect module function from bash. Trying to detect modulecmd from `which`\r\n==> Error: Multiple providers found for 'gl': ['mesa@18.1.2%gcc@7.3.0~hwrender~llvm+swrender arch=cray-cnl6-haswell  ^binutils@2.31.1%gcc@7.3.0+gold~libiberty+nls~plugins arch=cray-cnl6-haswell  ^bison@3.0.5%gcc@7.3.0 arch=cray-cnl6-haswell  ^bzip2@1.0.6%gcc@7.3.0+shared arch=cray-cnl6-haswell  ^damageproto@1.1: ^expat@2.2.5%gcc@7.3.0+libbsd arch=cray-cnl6-haswell  ^fixesproto@5.0: ^flex@2.6.3%gcc@7.3.0+lex arch=cray-cnl6-haswell  ^gdbm@1.14.1%gcc@7.3.0 arch=cray-cnl6-haswell  ^gettext@0.19.8.1%gcc@7.3.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=cray-cnl6-haswell  ^glproto@1.4.14: ^help2man@1.47.4%gcc@7.3.0 arch=cray-cnl6-haswell  ^icu4c@60.1%gcc@7.3.0 arch=cray-cnl6-haswell  ^inputproto@2.3.2%gcc@7.3.0 arch=cray-cnl6-haswell  ^kbproto@1.0.7%gcc@7.3.0 arch=cray-cnl6-haswell  ^libbsd ^libpthread-stubs@0.4%gcc@7.3.0 arch=cray-cnl6-haswell  ^libsigsegv@2.11%gcc@7.3.0 arch=cray-cnl6-haswell  ^libx11@1.6.5%gcc@7.3.0 arch=cray-cnl6-haswell  ^libxau@1.0.8%gcc@7.3.0 arch=cray-cnl6-haswell  ^libxcb@1.13%gcc@7.3.0 arch=cray-cnl6-haswell  ^libxdamage ^libxdmcp@1.1.2%gcc@7.3.0 arch=cray-cnl6-haswell  ^libxext ^libxfixes ^libxml2@2.9.8%gcc@7.3.0~python arch=cray-cnl6-haswell  ^libxshmfence@1.1: ^libxv ^libxvmc ^m4@1.4.18%gcc@7.3.0+sigsegv arch=cray-cnl6-haswell  ^ncurses@6.1%gcc@7.3.0~symlinks~termlib arch=cray-cnl6-haswell  ^openssl@1.0.2o%gcc@7.3.0+systemcerts arch=cray-cnl6-haswell  ^perl@5.26.2%gcc@7.3.0+cpanm+shared+threads arch=cray-cnl6-haswell  ^pkgconf@1.4.2%gcc@7.3.0 arch=cray-cnl6-haswell  ^presentproto@1.0: ^py-mako@1.0.4%gcc@7.3.0 arch=cray-cnl6-haswell  ^py-markupsafe@1.0%gcc@7.3.0 arch=cray-cnl6-haswell  ^py-setuptools@40.2.0%gcc@7.3.0 arch=cray-cnl6-haswell  ^python@3.6%gcc@7.3.0+dbm~optimizations+pic+pythoncmd+shared~tk~ucs4 arch=cray-cnl6-haswell  ^readline@7.0%gcc@7.3.0 arch=cray-cnl6-haswell  ^tar ^util-macros@1.19.1%gcc@7.3.0 arch=cray-cnl6-haswell  ^videoproto ^xcb-proto@1.13%gcc@7.3.0 arch=cray-cnl6-haswell  ^xextproto@7.3.0%gcc@7.3.0 arch=cray-cnl6-haswell  ^xproto@7.0.31%gcc@7.3.0 arch=cray-cnl6-haswell  ^xtrans@1.3.5%gcc@7.3.0 arch=cray-cnl6-haswell  ^xz@5.2.4%gcc@7.3.0 arch=cray-cnl6-haswell  ^zlib@1.2.11%gcc@7.3.0+optimize+pic+shared arch=cray-cnl6-haswell', 'opengl']\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n[eates@nid00020 ~/spack/bin]$ uname -a\r\nLinux nid00020 4.4.73-5.1_4.0.141-cray_ari_c #1 SMP Mon Mar 12 17:11:28 UTC 2018 (4.0.141) x86_64 x86_64 x86_64 GNU/Linux\r\n[eates@nid00020 ~/spack/bin]$ lsb_release -d\r\nDescription:    SUSE Linux Enterprise Server 12 SP3\r\n``` \r\n\r\n\r\n### Additional information\r\n\r\nI've managed to narrow the problem down a little. Among the dependencies for `ecp-proxy-apps`, only `candle-benchmarks` is having a problem, which comes down to depending on `opencv`. At /var/spack/repos/builtin/packages/candle-benchmarks/package.py:47 The benchmark depends on  `opencv@3.2.0: +core +highgui +imgproc +jpeg +png +tiff +zlib +python -dnn ~eigen`, which also fails to `spec`. \r\n\r\nI can successfully install `mesa` using spack, so I'm not sure where the problem comes from. \r\n\r\nThere's also an old version of `mesa` installed in `/usr/`, which I've tried adding to `packages.yaml`, like #7986 but it doesn't change the error message that much.\r\n\r\n```commandline\r\n[eates@nid00020 ~/spack/bin]$ cat ~/.spack/packages.yaml\r\npackages:\r\n... more stuff here ...\r\n  mesa:\r\n    paths:\r\n      mesa: /usr/\r\n    buildable: False\r\n  mpich:\r\n    modules:\r\n      mpich: cray-mpich\r\n    buildable: False\r\n  all:\r\n    providers:\r\n      gl: [mesa]\r\n      mpi: [mpich]\r\n\r\n[eates@nid00020 ~/spack/bin]$ ./spack install opencv@3.2.0:+core+highgui+imgproc+jpeg+png+tiff+zlib+python~dnn~eigen\r\n==> Warning: Could not detect module function from bash. Trying to detect modulecmd from `which`\r\n==> Warning: Could not detect module function from bash. Trying to detect modulecmd from `which`\r\n==> Error: Multiple providers found for 'gl': ['mesa@18.1.2%gcc@7.3.0~hwrender~llvm+swrender arch=cray-cnl6-haswell', 'opengl']\r\n``` \r\n\r\nI've looked at #8133 and #7901 but it didn't resolve my issue.\r\n",
    "performed_via_github_app": null
}