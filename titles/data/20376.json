{
    "url": "https://api.github.com/repos/spack/spack/issues/20376",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/20376/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/20376/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/20376/events",
    "html_url": "https://github.com/spack/spack/pull/20376",
    "id": 766832013,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTM5NzM1OTU4",
    "number": 20376,
    "title": "Refactor flake8 handling and tool compatibility",
    "user": {
        "login": "trws",
        "id": 660149,
        "node_id": "MDQ6VXNlcjY2MDE0OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/660149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/trws",
        "html_url": "https://github.com/trws",
        "followers_url": "https://api.github.com/users/trws/followers",
        "following_url": "https://api.github.com/users/trws/following{/other_user}",
        "gists_url": "https://api.github.com/users/trws/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/trws/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/trws/subscriptions",
        "organizations_url": "https://api.github.com/users/trws/orgs",
        "repos_url": "https://api.github.com/users/trws/repos",
        "events_url": "https://api.github.com/users/trws/events{/privacy}",
        "received_events_url": "https://api.github.com/users/trws/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 471995122,
            "node_id": "MDU6TGFiZWw0NzE5OTUxMjI=",
            "url": "https://api.github.com/repos/spack/spack/labels/commands",
            "name": "commands",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 584430621,
            "node_id": "MDU6TGFiZWw1ODQ0MzA2MjE=",
            "url": "https://api.github.com/repos/spack/spack/labels/flake8",
            "name": "flake8",
            "color": "5319e7",
            "default": false,
            "description": null
        },
        {
            "id": 976371064,
            "node_id": "MDU6TGFiZWw5NzYzNzEwNjQ=",
            "url": "https://api.github.com/repos/spack/spack/labels/style",
            "name": "style",
            "color": "dbc83b",
            "default": false,
            "description": "code style"
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2020-12-14T19:06:24Z",
    "updated_at": "2020-12-22T17:28:47Z",
    "closed_at": "2020-12-22T17:28:47Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/20376",
        "html_url": "https://github.com/spack/spack/pull/20376",
        "diff_url": "https://github.com/spack/spack/pull/20376.diff",
        "patch_url": "https://github.com/spack/spack/pull/20376.patch"
    },
    "body": "This PR does three related things to try to improve developer tooling quality of life:\r\n\r\n1. Adds new options to `.flake8` so it applies the rules of both `.flake8` and `.flake_package` based on paths in the repository.\r\n2. Adds a re-factoring of the `spack flake8` logic into a flake8 plugin so using flake8 directly, or through editor or language server integration, only reports errors that `spack flake8` would.\r\n3. Allows star import of `spack.pkgkit` in packages, since this is now the thing that needs to be imported for completion to work correctly in package files, it's nice to be able to do that.\r\n\r\nI'm sorely tempted to sed over the whole repository and put `from spack.pkgkit import *` in every package, but at least being allowed to do it on a per-package basis helps.\r\n\r\nAs an example of what the result of this is:\r\n\r\n```\r\n~/Workspace/Projects/spack/spack develop* \u21e3\r\n\u276f flake8 --format=pylint ./var/spack/repos/builtin/packages/kripke/package.py\r\n./var/spack/repos/builtin/packages/kripke/package.py:6: [F403] 'from spack.pkgkit import *' used; unable to detect undefined names\r\n./var/spack/repos/builtin/packages/kripke/package.py:25: [E501] line too long (88 > 79 characters)\r\n\r\n~/Workspace/Projects/spack/spack refactor-flake8*\r\n1 \u276f flake8 --format=spack ./var/spack/repos/builtin/packages/kripke/package.py\r\n\r\n~/Workspace/Projects/spack/spack refactor-flake8*\r\n\u276f flake8 ./var/spack/repos/builtin/packages/kripke/package.py\r\n```",
    "performed_via_github_app": null
}