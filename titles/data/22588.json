{
    "url": "https://api.github.com/repos/spack/spack/issues/22588",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/22588/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/22588/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/22588/events",
    "html_url": "https://github.com/spack/spack/pull/22588",
    "id": 842364253,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjAxOTYwMjI1",
    "number": 22588,
    "title": "Separable module configurations",
    "user": {
        "login": "becker33",
        "id": 13971568,
        "node_id": "MDQ6VXNlcjEzOTcxNTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/13971568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/becker33",
        "html_url": "https://github.com/becker33",
        "followers_url": "https://api.github.com/users/becker33/followers",
        "following_url": "https://api.github.com/users/becker33/following{/other_user}",
        "gists_url": "https://api.github.com/users/becker33/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/becker33/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/becker33/subscriptions",
        "organizations_url": "https://api.github.com/users/becker33/orgs",
        "repos_url": "https://api.github.com/users/becker33/repos",
        "events_url": "https://api.github.com/users/becker33/events{/privacy}",
        "received_events_url": "https://api.github.com/users/becker33/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1959390341,
            "node_id": "MDU6TGFiZWwxOTU5MzkwMzQx",
            "url": "https://api.github.com/repos/spack/spack/labels/breaking-change",
            "name": "breaking-change",
            "color": "ea1076",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-03-26T23:56:51Z",
    "updated_at": "2021-05-17T11:35:06Z",
    "closed_at": "2021-05-14T22:03:29Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/22588",
        "html_url": "https://github.com/spack/spack/pull/22588",
        "diff_url": "https://github.com/spack/spack/pull/22588.diff",
        "patch_url": "https://github.com/spack/spack/pull/22588.patch"
    },
    "body": "Currently, module configurations are inconsistent because modulefiles are generated with the configs for the active environment, but are shared among all environments (and spack outside any environment).\r\n\r\nThis PR fixes that by allowing Spack environments (or other spack config scopes) to define additional sets of modules to generate. Each set of modules can enable either lmod or tcl modules, and contains all of the previously available module configuration. The user defines the name of each module set -- the set configured in Spack by default is named \"default\", and is the one returned by module manipulation commands in the absence of user intervention.\r\n\r\nAs part of this change, the module roots configuration moved from the `config` section to inside each module configuration.\r\n\r\nAdditionally, it adds a feature that the modulefiles for an environment can be configured to be relative to an environment view rather than the underlying prefix. This will not be enabled by default, as it should only be enabled within an environment and for non-default views constructed with separate projections per-spec.\r\n\r\nTODO:\r\n- [x] code changes to support multiple module sets\r\n- [x] code changes to support modules relative to a view\r\n- [x] Tests for multiple module configurations\r\n- [x] Tests for modules relative to a view\r\n- [x] Backwards compatibility for module roots from config section\r\n- [x] Backwards compatibility for default module set without the name specified\r\n- [x] Tests for backwards compatibility\r\n- [ ] Documentation changes",
    "performed_via_github_app": null
}