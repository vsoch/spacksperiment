{
    "url": "https://api.github.com/repos/spack/spack/issues/14518",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14518/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14518/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14518/events",
    "html_url": "https://github.com/spack/spack/issues/14518",
    "id": 550370866,
    "node_id": "MDU6SXNzdWU1NTAzNzA4NjY=",
    "number": 14518,
    "title": "Installation Issue: py-torch fails to fetch sub-repos when running without networking",
    "user": {
        "login": "coreyjadams",
        "id": 6619961,
        "node_id": "MDQ6VXNlcjY2MTk5NjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6619961?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/coreyjadams",
        "html_url": "https://github.com/coreyjadams",
        "followers_url": "https://api.github.com/users/coreyjadams/followers",
        "following_url": "https://api.github.com/users/coreyjadams/following{/other_user}",
        "gists_url": "https://api.github.com/users/coreyjadams/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/coreyjadams/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/coreyjadams/subscriptions",
        "organizations_url": "https://api.github.com/users/coreyjadams/orgs",
        "repos_url": "https://api.github.com/users/coreyjadams/repos",
        "events_url": "https://api.github.com/users/coreyjadams/events{/privacy}",
        "received_events_url": "https://api.github.com/users/coreyjadams/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 446643530,
            "node_id": "MDU6TGFiZWw0NDY2NDM1MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/fetching",
            "name": "fetching",
            "color": "fbca04",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-01-15T19:02:40Z",
    "updated_at": "2021-06-30T16:38:54Z",
    "closed_at": "2021-06-30T16:38:54Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "This is happening @ Argonne Leadership Computing Facility, for the Theta supercomputer.  I am trying to install py-torch however it can not compile on the login nodes, since they are haswell chips and the compute nodes are KNL (I think this is the cause, AVX512 is missing, but it's not clear).\r\n\r\nInstalling on the login nodes fails for unclear reasons:\r\n```\r\n==> Error: ProcessError: Command exited with status -4:\r\n    '/soft/interpreters/python/3.6/intel/2019.3.075/bin/python3.6' '-s' 'setup.py' '--no-user-cfg' 'install' '--prefix=/lus/theta-fs0/software/datascience/spack/opt/spack/cray-cnl6-mic_knl/gcc-8.3.0/py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq' '--single-version-externally-managed' '--root=/'\r\nSee build log for details:\r\n  /tmp/cadams/spack-stage/spack-stage-py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq/spack-build-out.txt\r\n```\r\n\r\nThere is no extra information in the file specified.\r\n\r\nInstalling on the compute nodes ought to satisfy the build requirement, however I think py-torch pulls from sub repositories and we don't have access to networking on compute nodes:\r\n\r\n```\r\n==> Warning: Fetching from mirror without a checksum!\r\n  This package is normally checked out from a version control system, but it has been archived on a spack mirror.  This means we cannot know a checksum for the tarball in advance. Be sure that your connection to this mirror is secure!\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/soft/interpreters/python/3.6/intel/2019.3.075/bin/python3.6' '-s' 'setup.py' '--no-user-cfg' 'install' '--prefix=/lus/theta-fs0/software/datascience/spack/opt/spack/cray-cnl6-mic_knl/gcc-8.3.0/py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq' '--single-version-externally-managed' '--root=/'\r\n\r\n2 errors found in build log:\r\n     92     Cloning into 'psimd'...\r\n     93     fatal: unable to access 'https://github.com/Maratyszcza/psimd.git/': Failed to connect to github.com port 443: Connection timed out\r\n     94     Cloning into 'psimd'...\r\n     95     fatal: unable to access 'https://github.com/Maratyszcza/psimd.git/': Failed to connect to github.com port 443: Connection timed out\r\n     96     -- Had to git clone more than once:\r\n     97               3 times.\r\n  >> 98     CMake Error at /tmp/cadams/spack-stage/spack-stage-py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq/spack-src/build/confu-deps/psimd-download/psimd-prefix/tmp/psimd-gitclone.cmake:66 (message):\r\n     99       Failed to clone repository: 'https://github.com/Maratyszcza/psimd.git'\r\n     100\r\n     101\r\n     102    ninja: build stopped: subcommand failed.\r\n  >> 103    CMake Error at third_party/FP16/CMakeLists.txt:94 (ADD_SUBDIRECTORY):\r\n     104      ADD_SUBDIRECTORY given source\r\n     105      \"/tmp/cadams/spack-stage/spack-stage-py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq/spack-src/build/confu-srcs/psimd\"\r\n     106      which is not an existing directory.\r\n     107\r\n     108\r\n     109    -- Found system Eigen at /lus/theta-fs0/software/datascience/spack/opt/spack/cray-cnl6-mic_knl/gcc-8.3.0/eigen-3.3.7-rnf3w44mxhjijj7ok2yaypcttpa3wy7z/include/eigen3\r\n\r\nSee build log for details:\r\n  /tmp/cadams/spack-stage/spack-stage-py-torch-1.3.1-hbkhwn36w556jas6nexjb3zkh3id2twq/spack-build-out.txt\r\n```\r\n\r\nI tried to fetch all of the packages needed for the build prior to running the build script, however it doesn't seem to have the psimd submodule when it goes to install.  Any ideas how to fetch this so it doesn't need to compile?",
    "performed_via_github_app": null
}