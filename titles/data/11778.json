{
    "url": "https://api.github.com/repos/spack/spack/issues/11778",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/11778/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/11778/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/11778/events",
    "html_url": "https://github.com/spack/spack/issues/11778",
    "id": 457632113,
    "node_id": "MDU6SXNzdWU0NTc2MzIxMTM=",
    "number": 11778,
    "title": "Installation issue: qthreads",
    "user": {
        "login": "carsonwoods",
        "id": 11012397,
        "node_id": "MDQ6VXNlcjExMDEyMzk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11012397?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/carsonwoods",
        "html_url": "https://github.com/carsonwoods",
        "followers_url": "https://api.github.com/users/carsonwoods/followers",
        "following_url": "https://api.github.com/users/carsonwoods/following{/other_user}",
        "gists_url": "https://api.github.com/users/carsonwoods/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/carsonwoods/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/carsonwoods/subscriptions",
        "organizations_url": "https://api.github.com/users/carsonwoods/orgs",
        "repos_url": "https://api.github.com/users/carsonwoods/repos",
        "events_url": "https://api.github.com/users/carsonwoods/events{/privacy}",
        "received_events_url": "https://api.github.com/users/carsonwoods/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-06-18T18:30:54Z",
    "updated_at": "2019-07-03T01:00:57Z",
    "closed_at": "2019-07-03T01:00:57Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install qthreads\r\n\r\n==> libsigsegv is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/libsigsegv-2.11-3z3ly3vqpql7veqcnqmlg6coqwjaia3o\r\n==> m4 is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/m4-1.4.18-um3migmzhmoxaintlk7inemjrgkomdq6\r\n==> libtool is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/libtool-2.4.6-5b4jgcxhg4ga242vqp5yauqahlljh7dp\r\n==> pkgconf is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/pkgconf-1.6.0-k3uhwzufpvpgwrspu62l5k3whckeeg7u\r\n==> util-macros is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/util-macros-1.19.1-k4q6z4etq3krlcwyiuaby7mr5lhqazjv\r\n==> libpciaccess is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/libpciaccess-0.13.5-3e2n2ilrngunnkuyicu6gn455t4d3axo\r\n==> libiconv is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/libiconv-1.15-zkaoqdkrktcomccpy2mrma5fnvimdmnk\r\n==> xz is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/xz-5.2.4-reoh44hb2n5bpu3yaznnq5csatgyyj5x\r\n==> zlib is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/zlib-1.2.11-t42xxrenq6cnzjw7pewzqganweyq557x\r\n==> libxml2 is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/libxml2-2.9.9-oxzicqek6r5jtc35x7jxff52mdp3f66h\r\n==> hwloc is already installed in /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs\r\n==> Installing qthreads\r\n==> Searching for binary cache of qthreads\r\n==> Finding buildcaches in /ascldap/users/carwood/dev/atse-spack/atse-mirror/build_cache\r\n==> No binary for qthreads found: installing from source\r\n==> Fetching file:///ascldap/users/carwood/dev/atse-spack/atse-mirror/qthreads/qthreads-1.12.tar.bz2\r\ncurl: (37) Couldn't open file /ascldap/users/carwood/dev/atse-spack/atse-mirror/qthreads/qthreads-1.12.tar.bz2\r\n==> Fetching from file:///ascldap/users/carwood/dev/atse-spack/atse-mirror/qthreads/qthreads-1.12.tar.bz2 failed.\r\n==> Fetching https://github.com/Qthreads/qthreads/releases/download/1.12/qthread-1.12.tar.bz2\r\n######################################################################## 100.0%\r\n==> Staging archive: /home/carwood/spack/var/spack/stage/qthreads-1.12-krhxfo2lytqyprbqehngfdns5qr6lljx/qthread-1.12.tar.bz2\r\n==> Created stage in /home/carwood/spack/var/spack/stage/qthreads-1.12-krhxfo2lytqyprbqehngfdns5qr6lljx\r\n==> No patches needed for qthreads\r\n==> Building qthreads [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n21 errors found in build log:\r\n     363      CC       affinity/hwloc.lo\r\n     364      CC       qtimer/gettime.lo\r\n     365      CC       ds/qarray.lo\r\n     366      CC       ds/qdqueue.lo\r\n     367      CC       ds/qlfqueue.lo\r\n     368    affinity/hwloc.c: In function 'num_usable_by_depth':\r\n  >> 369    affinity/hwloc.c:62:67: error: 'struct hwloc_obj' has no member nam\r\n            ed 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     370             if (hwloc_get_nbobjs_inside_cpuset_by_type(topology, obj->\r\n            allowed_cpuset, HWLOC_OBJ_PU) == 0) {\r\n     371                                                                       \r\n            ^~~~~~~~~~~~~~\r\n     372                                                                       \r\n            complete_cpuset\r\n     373    affinity/hwloc.c: In function 'num_usable_by_type':\r\n  >> 374    affinity/hwloc.c:83:67: error: 'struct hwloc_obj' has no member nam\r\n            ed 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     375             if (hwloc_get_nbobjs_inside_cpuset_by_type(topology, obj->\r\n            allowed_cpuset, HWLOC_OBJ_PU) == 0) {\r\n     376                                                                       \r\n            ^~~~~~~~~~~~~~\r\n     377                                                                       \r\n            complete_cpuset\r\n     378    affinity/hwloc.c: In function 'qt_affinity_init':\r\n  >> 379    affinity/hwloc.c:126:25: error: 'HWLOC_OBJ_CACHE' undeclared (first\r\n             use in this function); did you mean 'HWLOC_OBJ_L5CACHE'?\r\n     380             HWLOC_OBJ_NODE, HWLOC_OBJ_CACHE, HWLOC_OBJ_SOCKET, HWLOC_O\r\n            BJ_CORE,\r\n     381                             ^~~~~~~~~~~~~~~\r\n     382                             HWLOC_OBJ_L5CACHE\r\n     383    affinity/hwloc.c:126:25: note: each undeclared identifier is report\r\n            ed only once for each function it appears in\r\n     384    affinity/hwloc.c:203:51: warning: comparison between pointer and in\r\n            teger\r\n     385                     (shep_type_options[shep_type_idx] == HWLOC_OBJ_CAC\r\n            HE)) {\r\n\r\n     ...\r\n\r\n     406    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2264:0,\r\n     407                     from affinity/hwloc.c:5:\r\n     408    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/deprecated.h:16\r\n            5:1: note: declared here\r\n     409     hwloc_alloc_membind_nodeset(hwloc_topology_t topology, size_t len,\r\n             hwloc_const_nodeset_t nodeset, hwloc_membind_policy_t policy, int \r\n            flags)\r\n     410     ^~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     411    affinity/hwloc.c: In function 'guess_num_workers_per_shep':\r\n  >> 412    affinity/hwloc.c:408:43: error: 'HWLOC_OBJ_CACHE' undeclared (first\r\n             use in this function); did you mean 'HWLOC_OBJ_L5CACHE'?\r\n     413             if (hwloc_compare_types(wkr_type, HWLOC_OBJ_CACHE) == 0) {\r\n     414                                               ^~~~~~~~~~~~~~~\r\n     415                                               HWLOC_OBJ_L5CACHE\r\n  >> 416    affinity/hwloc.c:408:43: error: incompatible type for argument 2 of\r\n             'hwloc_compare_types'\r\n     417    In file included from affinity/hwloc.c:5:0:\r\n     418    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc.h:337:20: note:\r\n             expected 'hwloc_obj_type_t {aka enum <anonymous>}' but argument is\r\n             of type 'hwloc_obj_type_t * {aka enum <anonymous> *}'\r\n     419     HWLOC_DECLSPEC int hwloc_compare_types (hwloc_obj_type_t type1, hw\r\n            loc_obj_type_t type2) __hwloc_attribute_const;\r\n     420                        ^~~~~~~~~~~~~~~~~~~\r\n  >> 421    affinity/hwloc.c:417:79: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     422                         tmp = hwloc_get_obj_inside_cpuset_by_depth(top\r\n            ology, obj->allowed_cpuset, wkr_depth, 0);\r\n     423                                                                       \r\n                        ^~~~~~~~~~~~~~\r\n     424                                                                       \r\n                        complete_cpuset\r\n     425    affinity/hwloc.c:417:74: warning: passing argument 2 of 'hwloc_get_\r\n            obj_inside_cpuset_by_depth' from incompatible pointer type [-Wincom\r\n            patible-pointer-types]\r\n     426                         tmp = hwloc_get_obj_inside_cpuset_by_depth(top\r\n            ology, obj->allowed_cpuset, wkr_depth, 0);\r\n     427                                                                       \r\n                   ^~~\r\n     428    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     429                     from affinity/hwloc.c:5:\r\n     430    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:130:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     431     hwloc_get_obj_inside_cpuset_by_depth (hwloc_topology_t topology, h\r\n            wloc_const_cpuset_t set,\r\n     432     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 433    affinity/hwloc.c:419:57: error: incompatible type for argument 2 of\r\n             'hwloc_compare_types'\r\n     434                     } while (hwloc_compare_types(tmp->type, HWLOC_OBJ_\r\n            CACHE) > 0);\r\n     435                                                             ^~~~~~~~~~\r\n            ~~~~~\r\n     436    In file included from affinity/hwloc.c:5:0:\r\n     437    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc.h:337:20: note:\r\n             expected 'hwloc_obj_type_t {aka enum <anonymous>}' but argument is\r\n             of type 'hwloc_obj_type_t * {aka enum <anonymous> *}'\r\n     438     HWLOC_DECLSPEC int hwloc_compare_types (hwloc_obj_type_t type1, hw\r\n            loc_obj_type_t type2) __hwloc_attribute_const;\r\n     439                        ^~~~~~~~~~~~~~~~~~~\r\n  >> 440    affinity/hwloc.c:420:52: error: incompatible type for argument 2 of\r\n             'hwloc_compare_types'\r\n     441                     if (hwloc_compare_types(tmp->type, HWLOC_OBJ_CACHE\r\n            ) != 0) {\r\n     442                                                        ^~~~~~~~~~~~~~~\r\n     443    In file included from affinity/hwloc.c:5:0:\r\n     444    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc.h:337:20: note:\r\n             expected 'hwloc_obj_type_t {aka enum <anonymous>}' but argument is\r\n             of type 'hwloc_obj_type_t * {aka enum <anonymous> *}'\r\n     445     HWLOC_DECLSPEC int hwloc_compare_types (hwloc_obj_type_t type1, hw\r\n            loc_obj_type_t type2) __hwloc_attribute_const;\r\n     446                        ^~~~~~~~~~~~~~~~~~~\r\n  >> 447    affinity/hwloc.c:428:90: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     448                 workerobjs_per_shep = hwloc_get_nbobjs_inside_cpuset_b\r\n            y_depth(topology, obj->allowed_cpuset, wkr_depth);\r\n     449                                                                       \r\n                                   ^~~~~~~~~~~~~~\r\n     450                                                                       \r\n                                   complete_cpuset\r\n     451    affinity/hwloc.c:428:85: warning: passing argument 2 of 'hwloc_get_\r\n            nbobjs_inside_cpuset_by_depth' from incompatible pointer type [-Win\r\n            compatible-pointer-types]\r\n     452                 workerobjs_per_shep = hwloc_get_nbobjs_inside_cpuset_b\r\n            y_depth(topology, obj->allowed_cpuset, wkr_depth);\r\n     453                                                                       \r\n                              ^~~\r\n     454    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     455                     from affinity/hwloc.c:5:\r\n     456    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:185:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     457     hwloc_get_nbobjs_inside_cpuset_by_depth (hwloc_topology_t topology\r\n            , hwloc_const_cpuset_t set,\r\n     458     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 459    affinity/hwloc.c:442:89: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     460                 workerobjs_per_shep = hwloc_get_nbobjs_inside_cpuset_b\r\n            y_type(topology, obj->allowed_cpuset, wkr_type);\r\n     461                                                                       \r\n                                  ^~~~~~~~~~~~~~\r\n     462                                                                       \r\n                                  complete_cpuset\r\n     463    affinity/hwloc.c:442:84: warning: passing argument 2 of 'hwloc_get_\r\n            nbobjs_inside_cpuset_by_type' from incompatible pointer type [-Winc\r\n            ompatible-pointer-types]\r\n     464                 workerobjs_per_shep = hwloc_get_nbobjs_inside_cpuset_b\r\n            y_type(topology, obj->allowed_cpuset, wkr_type);\r\n     465                                                                       \r\n                             ^~~\r\n     466    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     467                     from affinity/hwloc.c:5:\r\n     468    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:216:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     469     hwloc_get_nbobjs_inside_cpuset_by_type (hwloc_topology_t topology,\r\n             hwloc_const_cpuset_t set,\r\n     470     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 471    affinity/hwloc.c:477:47: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     472                 unsigned int weight = WEIGHT(obj->allowed_cpuset);\r\n     473                                                   ^\r\n     474    affinity/hwloc.c:39:50: note: in definition of macro 'WEIGHT'\r\n     475     # define WEIGHT(x)           hwloc_bitmap_weight(x)\r\n     476                                                      ^\r\n     477    affinity/hwloc.c:477:42: warning: passing argument 1 of 'hwloc_bitm\r\n            ap_weight' from incompatible pointer type [-Wincompatible-pointer-t\r\n            ypes]\r\n\r\n     ...\r\n\r\n     483    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:71:0,\r\n     484                     from affinity/hwloc.c:5:\r\n     485    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/bitmap.h:306:20\r\n            : note: expected 'hwloc_const_bitmap_t {aka const struct hwloc_bitm\r\n            ap_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <ano\r\n            nymous> *}'\r\n     486     HWLOC_DECLSPEC int hwloc_bitmap_weight(hwloc_const_bitmap_t bitmap\r\n            ) __hwloc_attribute_pure;\r\n     487                        ^~~~~~~~~~~~~~~~~~~\r\n     488    affinity/hwloc.c: In function 'qt_affinity_set':\r\n  >> 489    affinity/hwloc.c:512:92: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     490         hwloc_obj_t  worker0             = hwloc_get_obj_inside_cpuset\r\n            _by_depth(topology, obj->allowed_cpuset, wkr_depth, 0);\r\n     491                                                                       \r\n                                     ^~~~~~~~~~~~~~\r\n     492                                                                       \r\n                                     complete_cpuset\r\n     493    affinity/hwloc.c:512:87: warning: passing argument 2 of 'hwloc_get_\r\n            obj_inside_cpuset_by_depth' from incompatible pointer type [-Wincom\r\n            patible-pointer-types]\r\n     494         hwloc_obj_t  worker0             = hwloc_get_obj_inside_cpuset\r\n            _by_depth(topology, obj->allowed_cpuset, wkr_depth, 0);\r\n     495                                                                       \r\n                                ^~~\r\n     496    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     497                     from affinity/hwloc.c:5:\r\n     498    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:130:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     499     hwloc_get_obj_inside_cpuset_by_depth (hwloc_topology_t topology, h\r\n            wloc_const_cpuset_t set,\r\n     500     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 501    affinity/hwloc.c:513:95: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     502         unsigned int workerobjs_per_shep = hwloc_get_nbobjs_inside_cpu\r\n            set_by_depth(topology, obj->allowed_cpuset, wkr_depth);\r\n     503                                                                       \r\n                                        ^~~~~~~~~~~~~~\r\n     504                                                                       \r\n                                        complete_cpuset\r\n     505    affinity/hwloc.c:513:90: warning: passing argument 2 of 'hwloc_get_\r\n            nbobjs_inside_cpuset_by_depth' from incompatible pointer type [-Win\r\n            compatible-pointer-types]\r\n     506         unsigned int workerobjs_per_shep = hwloc_get_nbobjs_inside_cpu\r\n            set_by_depth(topology, obj->allowed_cpuset, wkr_depth);\r\n     507                                                                       \r\n                                   ^~~\r\n     508    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     509                     from affinity/hwloc.c:5:\r\n     510    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:185:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     511     hwloc_get_nbobjs_inside_cpuset_by_depth (hwloc_topology_t topology\r\n            , hwloc_const_cpuset_t set,\r\n     512     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 513    affinity/hwloc.c:527:74: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     514         int shep_pus = hwloc_get_nbobjs_inside_cpuset_by_type(topology\r\n            , obj->allowed_cpuset, HWLOC_OBJ_PU);\r\n     515                                                                       \r\n                   ^~~~~~~~~~~~~~\r\n     516                                                                       \r\n                   complete_cpuset\r\n     517    affinity/hwloc.c:527:69: warning: passing argument 2 of 'hwloc_get_\r\n            nbobjs_inside_cpuset_by_type' from incompatible pointer type [-Winc\r\n            ompatible-pointer-types]\r\n     518         int shep_pus = hwloc_get_nbobjs_inside_cpuset_by_type(topology\r\n            , obj->allowed_cpuset, HWLOC_OBJ_PU);\r\n     519                                                                       \r\n              ^~~\r\n     520    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     521                     from affinity/hwloc.c:5:\r\n     522    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:216:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     523     hwloc_get_nbobjs_inside_cpuset_by_type (hwloc_topology_t topology,\r\n             hwloc_const_cpuset_t set,\r\n     524     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 525    affinity/hwloc.c:529:97: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     526         unsigned int worker_pus         = hwloc_get_nbobjs_inside_cpus\r\n            et_by_type(topology, worker0->allowed_cpuset, HWLOC_OBJ_PU);\r\n     527                                                                       \r\n                                          ^~~~~~~~~~~~~~\r\n     528                                                                       \r\n                                          complete_cpuset\r\n     529    affinity/hwloc.c:529:88: warning: passing argument 2 of 'hwloc_get_\r\n            nbobjs_inside_cpuset_by_type' from incompatible pointer type [-Winc\r\n            ompatible-pointer-types]\r\n     530         unsigned int worker_pus         = hwloc_get_nbobjs_inside_cpus\r\n            et_by_type(topology, worker0->allowed_cpuset, HWLOC_OBJ_PU);\r\n     531                                                                       \r\n                                 ^~~~~~~\r\n     532    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     533                     from affinity/hwloc.c:5:\r\n     534    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:216:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     535     hwloc_get_nbobjs_inside_cpuset_by_type (hwloc_topology_t topology,\r\n             hwloc_const_cpuset_t set,\r\n     536     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 537    affinity/hwloc.c:533:60: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     538             hwloc_get_obj_inside_cpuset_by_type(topology, obj->allowed\r\n            _cpuset,\r\n     539                                                                ^~~~~~~\r\n            ~~~~~~~\r\n     540                                                                complet\r\n            e_cpuset\r\n     541    affinity/hwloc.c:533:55: warning: passing argument 2 of 'hwloc_get_\r\n            obj_inside_cpuset_by_type' from incompatible pointer type [-Wincomp\r\n            atible-pointer-types]\r\n     542             hwloc_get_obj_inside_cpuset_by_type(topology, obj->allowed\r\n            _cpuset,\r\n     543                                                           ^~~\r\n     544    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:2249:0,\r\n     545                     from affinity/hwloc.c:5:\r\n     546    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/helper.h:164:1:\r\n             note: expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitma\r\n            p_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <anon\r\n            ymous> *}'\r\n     547     hwloc_get_obj_inside_cpuset_by_type (hwloc_topology_t topology, hw\r\n            loc_const_cpuset_t set,\r\n     548     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  >> 549    affinity/hwloc.c:562:46: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     550         if (hwloc_set_cpubind(topology, sub_obj->allowed_cpuset, HWLOC\r\n            _CPUBIND_THREAD)) {\r\n     551                                                  ^~~~~~~~~~~~~~\r\n     552                                                  complete_cpuset\r\n     553    affinity/hwloc.c:562:37: warning: passing argument 2 of 'hwloc_set_\r\n            cpubind' from incompatible pointer type [-Wincompatible-pointer-typ\r\n            es]\r\n     554         if (hwloc_set_cpubind(topology, sub_obj->allowed_cpuset, HWLOC\r\n            _CPUBIND_THREAD)) {\r\n     555                                         ^~~~~~~\r\n     556    In file included from affinity/hwloc.c:5:0:\r\n     557    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc.h:1154:20: note\r\n            : expected 'hwloc_const_cpuset_t {aka const struct hwloc_bitmap_s *\r\n            }' but argument is of type 'hwloc_obj_type_t * {aka enum <anonymous\r\n            > *}'\r\n     558     HWLOC_DECLSPEC int hwloc_set_cpubind(hwloc_topology_t topology, hw\r\n            loc_const_cpuset_t set, int flags);\r\n     559                        ^~~~~~~~~~~~~~~~~\r\n  >> 560    affinity/hwloc.c:570:33: error: 'struct hwloc_obj' has no member na\r\n            med 'allowed_cpuset'; did you mean 'complete_cpuset'?\r\n     561             ASPRINTF(&str, sub_obj->allowed_cpuset);\r\n     562                                     ^\r\n     563    affinity/hwloc.c:40:58: note: in definition of macro 'ASPRINTF'\r\n     564     # define ASPRINTF(x, y)      hwloc_bitmap_asprintf((x), (y))\r\n     565                                                              ^\r\n     566    affinity/hwloc.c:40:57: warning: passing argument 2 of 'hwloc_bitma\r\n            p_asprintf' from incompatible pointer type [-Wincompatible-pointer-\r\n            types]\r\n\r\n     ...\r\n\r\n     572    In file included from /home/carwood/spack/opt/spack/linux-rhel7-aar\r\n            ch64/gcc-7.2.0/hwloc-2.0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include\r\n            /hwloc.h:71:0,\r\n     573                     from affinity/hwloc.c:5:\r\n     574    /home/carwood/spack/opt/spack/linux-rhel7-aarch64/gcc-7.2.0/hwloc-2\r\n            .0.2-kfksbijcn6d43rtmnrus4lc35uvg5ebs/include/hwloc/bitmap.h:123:20\r\n            : note: expected 'hwloc_const_bitmap_t {aka const struct hwloc_bitm\r\n            ap_s *}' but argument is of type 'hwloc_obj_type_t * {aka enum <ano\r\n            nymous> *}'\r\n     575     HWLOC_DECLSPEC int hwloc_bitmap_asprintf(char ** strp, hwloc_const\r\n            _bitmap_t bitmap);\r\n     576                        ^~~~~~~~~~~~~~~~~~~~~\r\n     577      CC       ds/qswsrqueue.lo\r\n  >> 578    make[2]: *** [affinity/hwloc.lo] Error 1\r\n     579    make[2]: *** Waiting for unfinished jobs....\r\n     580    make[2]: Leaving directory `/tmp/carwood/spack-stage/spack-stage-ok\r\n            Hpc0/spack-src/src'\r\n  >> 581    make[1]: *** [all-recursive] Error 1\r\n     582    make[1]: Leaving directory `/tmp/carwood/spack-stage/spack-stage-ok\r\n            Hpc0/spack-src/src'\r\n  >> 583    make: *** [all-recursive] Error 1\r\n\r\nSee build log for details:\r\n  /home/carwood/spack/var/spack/stage/qthreads-1.12-krhxfo2lytqyprbqehngfdns5qr6lljx/spack-build.out\r\n```\r\n\r\n### Platform and user environment\r\n```commandline\r\n$ lsb_release -d\r\nDescription:\tRed Hat Enterprise Linux Workstation release 7.6 (Maipo)\r\n``` \r\n\r\n### Additional information\r\n\r\nI was able to resolve this issue by changing the qthreads package to depend specifically on hwloc version 1.11.11 rather than 2.0.2. Something must have changed between those releases that made them incompatible. \r\n\r\nAdditionally, it appears that the qthreads package is misconfigured. Qthreads does not require hwloc support to be built, so it might be worth making hwloc a default variant that can be disabled rather than a required dependency.  \r\n",
    "performed_via_github_app": null
}