{
    "url": "https://api.github.com/repos/spack/spack/issues/15355",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15355/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15355/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15355/events",
    "html_url": "https://github.com/spack/spack/issues/15355",
    "id": 576266869,
    "node_id": "MDU6SXNzdWU1NzYyNjY4Njk=",
    "number": 15355,
    "title": "Installation issue: cscope",
    "user": {
        "login": "pattakosn",
        "id": 1939473,
        "node_id": "MDQ6VXNlcjE5Mzk0NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1939473?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pattakosn",
        "html_url": "https://github.com/pattakosn",
        "followers_url": "https://api.github.com/users/pattakosn/followers",
        "following_url": "https://api.github.com/users/pattakosn/following{/other_user}",
        "gists_url": "https://api.github.com/users/pattakosn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pattakosn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pattakosn/subscriptions",
        "organizations_url": "https://api.github.com/users/pattakosn/orgs",
        "repos_url": "https://api.github.com/users/pattakosn/repos",
        "events_url": "https://api.github.com/users/pattakosn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pattakosn/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-03-05T13:49:11Z",
    "updated_at": "2020-03-06T14:47:36Z",
    "closed_at": "2020-03-06T14:47:36Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "### Spack version\r\n```console\r\n$ spack --version\r\n0.14.0-128-752092f46\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install cscope\r\n==> 19709: Installing cscope\r\n==> Using cached archive: /data1/spack/var/spack/cache/_source-cache/archive/48/4889d091f05aa0845384b1e4965aa31d2b20911fb2c001b2cdcffbcb7212d3af.tar.gz\r\n==> Staging archive: /tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejvfu5564wnlg/cscope-15.8b.tar.gz\r\n==> Created stage in /tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejvfu5564wnlg\r\n==> No patches needed for cscope\r\n==> 19709: cscope: Building cscope [AutotoolsPackage]\r\n==> 19709: cscope: Executing phase: 'autoreconf'\r\n==> 19709: cscope: Executing phase: 'configure'\r\n==> 19709: cscope: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16' 'CURSES_LIBS=-lncursesw'\r\n\r\n6 errors found in build log:\r\n     182    mv -f .deps/main.Tpo .deps/main.Po\r\n     183    mv -f .deps/egrep.Tpo .deps/egrep.Po\r\n     184    mv -f .deps/invlib.Tpo .deps/invlib.Po\r\n     185    mv -f .deps/find.Tpo .deps/find.Po\r\n     186    mv -f .deps/fscanner.Tpo .deps/fscanner.Po\r\n     187    /data1/spack/lib/spack/env/gcc/gcc  -g -O2   -o cscope fscanner.o egrep.o alloc.o basename.o build.o \r\n            command.o compath.o crossref.o dir.o display.o edit.o exec.o find.o help.o history.o input.o invlib.o\r\n             logdir.o lookup.o main.o mouse.o mygetenv.o mypopen.o vpaccess.o vpfopen.o vpinit.o vpopen.o -lncurs\r\n            esw\r\n  >> 188    /bin/ld: command.o: undefined reference to symbol 'curscr'\r\n  >> 189    /data1/spack/opt/spack/linux-centos7-broadwell/gcc-9.2.0/ncurses-6.1-jcafnrdogiedc7suvdn2uljgcrj2geed\r\n            /lib/libtinfow.so.6: error adding symbols: DSO missing from command line\r\n  >> 190    collect2: error: ld returned 1 exit status\r\n  >> 191    make[2]: *** [cscope] Error 1\r\n     192    make[2]: Leaving directory `/tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejv\r\n            fu5564wnlg/spack-src/src'\r\n  >> 193    make[1]: *** [all-recursive] Error 1\r\n     194    make[1]: Leaving directory `/tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejv\r\n            fu5564wnlg/spack-src'\r\n  >> 195    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  /tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejvfu5564wnlg/spack-build-out.txt\r\n\r\n==> Error: Failed to install cscope due to ChildError: ProcessError: Command exited with status 2:\r\n    'make' '-j16' 'CURSES_LIBS=-lncursesw'\r\n6 errors found in build log:\r\n     182    mv -f .deps/main.Tpo .deps/main.Po\r\n     183    mv -f .deps/egrep.Tpo .deps/egrep.Po\r\n     184    mv -f .deps/invlib.Tpo .deps/invlib.Po\r\n     185    mv -f .deps/find.Tpo .deps/find.Po\r\n     186    mv -f .deps/fscanner.Tpo .deps/fscanner.Po\r\n     187    /data1/spack/lib/spack/env/gcc/gcc  -g -O2   -o cscope fscanner.o egrep.o alloc.o basename.o build.o \r\n            command.o compath.o crossref.o dir.o display.o edit.o exec.o find.o help.o history.o input.o invlib.o\r\n             logdir.o lookup.o main.o mouse.o mygetenv.o mypopen.o vpaccess.o vpfopen.o vpinit.o vpopen.o -lncurs\r\n            esw\r\n  >> 188    /bin/ld: command.o: undefined reference to symbol 'curscr'\r\n  >> 189    /data1/spack/opt/spack/linux-centos7-broadwell/gcc-9.2.0/ncurses-6.1-jcafnrdogiedc7suvdn2uljgcrj2geed\r\n            /lib/libtinfow.so.6: error adding symbols: DSO missing from command line\r\n  >> 190    collect2: error: ld returned 1 exit status\r\n  >> 191    make[2]: *** [cscope] Error 1\r\n     192    make[2]: Leaving directory `/tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejv\r\n            fu5564wnlg/spack-src/src'\r\n  >> 193    make[1]: *** [all-recursive] Error 1\r\n     194    make[1]: Leaving directory `/tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejv\r\n            fu5564wnlg/spack-src'\r\n  >> 195    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  /tmp/pattakos/spack-stage/spack-stage-cscope-15.8b-plsm3gwqbsaqlysezytejvfu5564wnlg/spack-build-out.txt\r\nTraceback (most recent call last):\r\n  File \"/data1/spack/lib/spack/spack/build_environment.py\", line 801, in child_process\r\n    return_value = function()\r\n  File \"/data1/spack/lib/spack/spack/installer.py\", line 1109, in build_process\r\n    phase(pkg.spec, pkg.prefix)\r\n  File \"/data1/spack/lib/spack/spack/package.py\", line 108, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/data1/spack/lib/spack/spack/build_systems/autotools.py\", line 290, in build\r\n    inspect.getmodule(self).make(*self.build_targets)\r\n  File \"/data1/spack/lib/spack/spack/build_environment.py\", line 131, in __call__\r\n    return super(MakeExecutable, self).__call__(*args, **kwargs)\r\n  File \"/data1/spack/lib/spack/spack/util/executable.py\", line 189, in __call__\r\n    proc.returncode, long_msg)\r\nspack.util.executable.ProcessError: Command exited with status 2:\r\n    'make' '-j16' 'CURSES_LIBS=-lncursesw'\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux somewhere 3.10.0-514.6.1.el7.x86_64 #1 SMP Wed Jan 18 13:06:36 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n$ cat /etc/centos-release\r\nCentOS Linux release 7.3.1611 (Core) \r\n``` \r\n\r\n### Additional information\r\n\r\n<!--Sometimes the issue benefits from additional details. In these cases there are\r\na few things we can suggest doing. First of all, you can post the full output of:\r\n```console\r\n$ spack spec --install-status <spec>\r\nInput spec\r\n--------------------------------\r\n -   cscope\r\n\r\nConcretized\r\n--------------------------------\r\n -   cscope@15.8b%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]      ^bison@3.4.2%gcc@9.2.0 patches=89aa362716d898edd0b5c6ae4208dc1b6992887774848a09e8021afd676f7d61 arch=linux-centos7-broadwell\r\n[+]          ^diffutils@3.7%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]              ^libiconv@1.16%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]          ^help2man@1.47.11%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]              ^gettext@0.20.1%gcc@9.2.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos7-broadwell\r\n[+]                  ^bzip2@1.0.8%gcc@9.2.0+shared arch=linux-centos7-broadwell\r\n[+]                  ^libxml2@2.9.9%gcc@9.2.0~python arch=linux-centos7-broadwell\r\n[+]                      ^pkgconf@1.6.3%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]                      ^xz@5.2.4%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]                      ^zlib@1.2.11%gcc@9.2.0+optimize+pic+shared arch=linux-centos7-broadwell\r\n[+]                  ^ncurses@6.1%gcc@9.2.0~symlinks+termlib arch=linux-centos7-broadwell\r\n[+]                  ^tar@1.32%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]              ^perl@5.30.1%gcc@9.2.0+cpanm+shared+threads arch=linux-centos7-broadwell\r\n[+]                  ^gdbm@1.18.1%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]                      ^readline@8.0%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]          ^m4@1.4.18%gcc@9.2.0 patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 +sigsegv arch=linux-centos7-broadwell\r\n[+]              ^libsigsegv@2.12%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]      ^flex@2.6.4%gcc@9.2.0+lex patches=09c22e5c6fef327d3e48eb23f0d610dcd3a35ab9207f12e0f875701c677978d3 arch=linux-centos7-broadwell\r\n[+]          ^autoconf@2.69%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]          ^automake@1.16.1%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]          ^findutils@4.6.0%gcc@9.2.0 patches=84b916c0bf8c51b7e7b28417692f0ad3e7030d1f3c248ba77c42ede5c1c5d11e,bd9e4e5cc280f9753ae14956c4e4aa17fe7a210f55dd6c84aa60b12d106d47a2 arch=linux-centos7-broadwell\r\n[+]              ^libtool@2.4.6%gcc@9.2.0 arch=linux-centos7-broadwell\r\n[+]              ^texinfo@6.5%gcc@9.2.0 patches=12f6edb0c6b270b8c8dba2ce17998c580db01182d871ee32b7b6e4129bd1d23a,1732115f651cff98989cb0215d8f64da5e0f7911ebf0c13b064920f088f2ffe1 arch=linux-centos7-broadwell\r\n```\r\nto show people whether Spack installed a faulty software or if it was not able to\r\nbuild it at all. \r\n\r\nIf your build didn't make it past the configure stage, Spack as also commands to parse \r\nlogs and report error and warning messages:\r\n```console\r\n$ spack log-parse --show=errors,warnings <file-to-parse>\r\n```\r\nYou might want to run this command on the `config.log` or any other similar file\r\nfound in the stage directory: \r\n```console\r\n$ spack location -s <spec>\r\n```\r\nIn case in `config.log` there are other settings that you think might be the cause \r\nof the build failure, you can consider attaching the file to this issue.\r\n\r\nRebuilding the package with the following options:\r\n```console\r\n$ spack -d install -j 1 cscope\r\n```\r\nwill provide additional debug information. After the failure you will find two files in the current directory:\r\n\r\n1. `spack-cc-<spec>.in`, which contains details on the command given in input \r\n    to Spack's compiler wrapper  \r\n1. `spack-cc-<spec>.out`, which contains the command used to compile / link the \r\n    failed object after Spack's compiler wrapper did its processing \r\n\r\nYou can post or attach those files to provide maintainers with more information on what\r\nis causing the failure.-->\r\n[spack-cc-cscope-plsm3gw.in.log](https://github.com/spack/spack/files/4293211/spack-cc-cscope-plsm3gw.in.log)\r\n[spack-cc-cscope-plsm3gw.out.log](https://github.com/spack/spack/files/4293212/spack-cc-cscope-plsm3gw.out.log)",
    "performed_via_github_app": null
}