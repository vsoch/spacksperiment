{
    "url": "https://api.github.com/repos/spack/spack/issues/7487",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7487/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7487/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7487/events",
    "html_url": "https://github.com/spack/spack/issues/7487",
    "id": 305305354,
    "node_id": "MDU6SXNzdWUzMDUzMDUzNTQ=",
    "number": 7487,
    "title": "Spec syntax inconsistency and double colon not working as expected in modules.yaml",
    "user": {
        "login": "jrood-nrel",
        "id": 23264326,
        "node_id": "MDQ6VXNlcjIzMjY0MzI2",
        "avatar_url": "https://avatars.githubusercontent.com/u/23264326?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jrood-nrel",
        "html_url": "https://github.com/jrood-nrel",
        "followers_url": "https://api.github.com/users/jrood-nrel/followers",
        "following_url": "https://api.github.com/users/jrood-nrel/following{/other_user}",
        "gists_url": "https://api.github.com/users/jrood-nrel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jrood-nrel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jrood-nrel/subscriptions",
        "organizations_url": "https://api.github.com/users/jrood-nrel/orgs",
        "repos_url": "https://api.github.com/users/jrood-nrel/repos",
        "events_url": "https://api.github.com/users/jrood-nrel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jrood-nrel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 73908754,
            "node_id": "MDU6TGFiZWw3MzkwODc1NA==",
            "url": "https://api.github.com/repos/spack/spack/labels/bug",
            "name": "bug",
            "color": "fc2929",
            "default": true,
            "description": null
        },
        {
            "id": 446632829,
            "node_id": "MDU6TGFiZWw0NDY2MzI4Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/modules",
            "name": "modules",
            "color": "fef2c0",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "alalazo",
            "id": 4199709,
            "node_id": "MDQ6VXNlcjQxOTk3MDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/alalazo",
            "html_url": "https://github.com/alalazo",
            "followers_url": "https://api.github.com/users/alalazo/followers",
            "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
            "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
            "organizations_url": "https://api.github.com/users/alalazo/orgs",
            "repos_url": "https://api.github.com/users/alalazo/repos",
            "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/alalazo/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2018-03-14T19:51:53Z",
    "updated_at": "2018-03-14T20:03:00Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Two things I think are bugs:\r\n\r\n1. The spec syntax seems to act in an inconsistent manner in `modules.yaml`.\r\n2. The double colon in `modules.yaml` doesn't seem to work as advertised.\r\n\r\nUsing this in my `modules.yaml` as an example:\r\n```\r\n  tcl:\r\n    naming_scheme: '${PACKAGE}/${VERSION}-${COMPILERNAME}'\r\n    hash_length: 0\r\n    all:\r\n      suffixes:\r\n        'zlib': 'zlib'\r\n        '^zlib': 'dzlib'\r\n    zlib:\r\n      suffixes:: {}\r\n    blacklist: ['pcre', 'environment-modules']\r\n```\r\n\r\n### Expected Result\r\n\r\nPlease double check, but the console output is what I _think_ I should get. The suffix `zlib` should only be added to the `zlib` package itself, and not propagated to anything depending on it. The suffix `dzlib` should only be on packages depending on zlib. Lastly, no suffix involving `zlib` package directly should exist because the double colon `::` should cancel the `all` configuration in that case.\r\n\r\n```\r\n$ spack find\r\n==> 5 installed packages.\r\n-- darwin-sierra-x86_64 / clang@9.0.0-apple ---------------------\r\nbzip2@1.0.6  environment-modules@3.2.10  tcl@8.6.6  zip@3.0  zlib@1.2.11\r\n$ module avail\r\n\r\n------ /Users/user/spack/share/spack/modules/darwin-sierra-x86_64 -----\r\nbzip2/1.0.6-clang          tcl/8.6.6-clang-dzlib zip/3.0-clang              zlib/1.2.11-clang\r\n```\r\n\r\n### Actual Result\r\n\r\nThis is what I actually got:\r\n```\r\n$ spack find\r\n==> 5 installed packages.\r\n-- darwin-sierra-x86_64 / clang@9.0.0-apple ---------------------\r\nbzip2@1.0.6  environment-modules@3.2.10  tcl@8.6.6  zip@3.0  zlib@1.2.11\r\n$ module avail\r\n\r\n------ /Users/user/spack/share/spack/modules/darwin-sierra-x86_64 -----\r\nbzip2/1.0.6-clang          tcl/8.6.6-clang-zlib-dzlib zip/3.0-clang              zlib/1.2.11-clang-zlib\r\n```\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack bootstrap\r\n$ spack install zip\r\n...\r\n```\r\nThen use my example `modules.yaml` snippet.\r\n\r\n### Information on your system\r\n\r\nOSX Sierra, but I'm seeing the same behavior on Linux so I don't think that matters here.\r\n\r\n### Other notes\r\n\r\nAgain, just putting together this small example was a bit confusing, so it would be good to double check my expectations. @alalazo This is what I was discussing in the Slack modules channel.",
    "performed_via_github_app": null
}