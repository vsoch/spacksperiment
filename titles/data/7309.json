{
    "url": "https://api.github.com/repos/spack/spack/issues/7309",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/7309/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/7309/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/7309/events",
    "html_url": "https://github.com/spack/spack/issues/7309",
    "id": 299155289,
    "node_id": "MDU6SXNzdWUyOTkxNTUyODk=",
    "number": 7309,
    "title": "Power9: mumps does not install with XL compiler",
    "user": {
        "login": "floquet",
        "id": 13126143,
        "node_id": "MDQ6VXNlcjEzMTI2MTQz",
        "avatar_url": "https://avatars.githubusercontent.com/u/13126143?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/floquet",
        "html_url": "https://github.com/floquet",
        "followers_url": "https://api.github.com/users/floquet/followers",
        "following_url": "https://api.github.com/users/floquet/following{/other_user}",
        "gists_url": "https://api.github.com/users/floquet/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/floquet/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/floquet/subscriptions",
        "organizations_url": "https://api.github.com/users/floquet/orgs",
        "repos_url": "https://api.github.com/users/floquet/repos",
        "events_url": "https://api.github.com/users/floquet/events{/privacy}",
        "received_events_url": "https://api.github.com/users/floquet/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-02-21T22:36:13Z",
    "updated_at": "2018-03-29T05:20:31Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "## Summary\r\n\r\nWhile building `trilinos` with `netlib-lapack`, Spack crashes while installing `mumps` with the error\r\n\r\n```\r\n/usr/lib/gcc/ppc64le-redhat-linux/4.8.5/../../../../lib64/crt1.o:(.rodata+0x8): undefined reference to `main'\r\n```\r\n\r\n### Expected Result\r\n\r\nSuccessful `mumps` install.\r\n\r\n### Actual Result\r\n```\r\n$ spack install trilinos % xl@13.1 ^netlib-lapack\r\n==> bzip2 is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/bzip2-1.0.6-5hy4jatd26u3y233xprkhmic4ut5ryza\r\n==> zlib is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/zlib-1.2.11-bitmk7qe3m2nl2frj6nqwhwoaat7jgat\r\n==> boost is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/boost-1.65.1-wnwzorgwlouj4xcz2icj3r7cm6prqdrn\r\n==> pkg-config@0.29.2 : externally installed in /usr/bin\r\n==> pkg-config@0.29.2 : already registered in DB\r\n==> ncurses is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/ncurses-6.0-x7esgz7hjxka474w6niigijxyzrllzje\r\n==> openssl@1.0.2k : externally installed in /usr/bin\r\n==> openssl@1.0.2k : already registered in DB\r\n==> cmake is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/cmake-3.9.4-o7elw6dn22jrdomftgmo4c26eonergja\r\n==> glm is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/glm-0.9.7.1-zbym6vapfelg65u5npwzlvufr4bykibt\r\n==> mpich is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mpich-3.2-x73h4dydfoybslpvsowms6m4mutbiwjq\r\n==> hdf5 is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/hdf5-1.10.1-ctphyxffmjmffv6uyzxa66nnjknmwn7o\r\n==> netlib-lapack is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/netlib-lapack-3.6.1-b5ncamkl5hv7hoxhexxfkjj3xrwyiz4p\r\n==> hypre is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/hypre-2.12.1-u4lxig4om57qpnlxm6bxgfc5ocnwtksh\r\n==> matio is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/matio-1.5.9-zn6qiqcnf56fhjvtgjdxwlfs7gedkez6\r\n==> metis is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/metis-5.1.0-y7kgydjfcnczqt3xcpzn3cclzse5umix\r\n==> netlib-scalapack is already installed in /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/netlib-scalapack-2.0.2-pnmwl7fyuq3n7dadgdbp46l4ocbxxbt2\r\n==> Installing mumps\r\n==> Fetching file:///usr/projects/draco/vendors/spack.mirror/mumps/mumps-5.1.1.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /projects/draco/vendors/spack.power9-0.11.2/var/spack/stage/mumps-5.1.1-mor5himkwldgs4f6b5kasxgo76dw72vc/MUMPS_5.1.1.tar.gz\r\n==> Created stage in /projects/draco/vendors/spack.power9-0.11.2/var/spack/stage/mumps-5.1.1-mor5himkwldgs4f6b5kasxgo76dw72vc\r\n==> No patches needed for mumps\r\n==> Building mumps [Package]\r\n==> Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' 'sexamples' 'cexamples' 'dexamples' 'zexamples'\r\n\r\n4 errors found in build log:\r\n     [ ... ]\r\n     25    /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mpich-3.2-x73h4dydfoybslpvsowms6m4mutbiwjq/bin/mpicc -I../include -qpic -O3  -c interface.c -ointerface.o\r\n     26        1500-036: (I) The NOSTRICT option (default at OPT(3)) has the potential to alter the semantics of a program.  Please refer to documentation on the STRICT/NOSTRICT option for more information.\r\n     27    /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mpich-3.2-x73h4dydfoybslpvsowms6m4mutbiwjq/bin/mpicc -I../include -qpic -O3  -c sort.c -osort.o\r\n     28    /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mpich-3.2-x73h4dydfoybslpvsowms6m4mutbiwjq/bin/mpicc -I../include -qpic -O3  -c minpriority.c -ominpriority.o\r\n     29        1500-036: (I) The NOSTRICT option (default at OPT(3)) has the potential to alter the semantics of a program.  Please refer to documentation on the STRICT/NOSTRICT option for more information.\r\n     30    /projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mpich-3.2-x73h4dydfoybslpvsowms6m4mutbiwjq/bin/mpif90 -shared -Wl,-soname -Wl,/projects/draco/vendors/spack.power9-0.11.2/opt/spack/linux-rhel7-ppc64le/xl-13.1/mumps-5.1.1-mor5himkwldgs4f6b5kasxgo76dw72vc/lib/libpord.so -olibpord.so graph.o gbipart.o gbisect.o ddcreate.o ddbisect.o nestdiss.o multisector.o gelim.o bucket.o tree.o symbfac.o interface.o sort.o minpriority.o\r\n  >> 31    /usr/lib/gcc/ppc64le-redhat-linux/4.8.5/../../../../lib64/crt1.o:(.rodata+0x8): undefined reference to `main'\r\n  >> 32    make[2]: *** [libpord.so] Error 1\r\n     33    make[2]: Leaving directory `/scratch/users/dantopa/spack-stage/spack-stage-Yz62Av/MUMPS_5.1.1/PORD/lib'\r\n  >> 34    make[1]: *** [lib/libpord.so] Error 2\r\n     35    make[1]: Leaving directory `/scratch/users/dantopa/spack-stage/spack-stage-Yz62Av/MUMPS_5.1.1'\r\n  >> 36    make: *** [s] Error 2\r\n\r\nSee build log for details:\r\n  /projects/draco/vendors/spack.power9-0.11.2/var/spack/stage/mumps-5.1.1-mor5himkwldgs4f6b5kasxgo76dw72vc/MUMPS_5.1.1/spack-build.out\r\n```\r\n[spack-build.out.txt](https://github.com/spack/spack/files/1745969/spack-build.out.txt)\r\n[spack-cc-mumps-mor5him.in.log](https://github.com/spack/spack/files/1745970/spack-cc-mumps-mor5him.in.log)\r\n[spack-cc-mumps-mor5him.out.log](https://github.com/spack/spack/files/1745971/spack-cc-mumps-mor5him.out.log)\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install trilinos % xl@13.1 ^netlib-lapack\r\n```\r\n\r\n### System information\r\n\r\n 1. Platform: Darwin @ LANL\r\n 1. Nodes: Power9\r\n 1. Spack release 0.11.2\r\n\r\n```\r\n$ uname -a\r\nLinux cn2022 4.11.0-44.4.1.el7a.ppc64le #1 SMP Sat Dec 9 02:17:51 EST 2017 ppc64le ppc64le ppc64le GNU/Linux\r\n```\r\n\r\n```\r\n$ spack arch\r\nlinux-rhel7-ppc64le\r\n```\r\n```\r\n$ xlc --version\r\nIBM XL C/C++ for Linux, V13.1.6 (Community Edition)\r\nVersion: 13.01.0006.0001\r\n/opt/ibm/xlC/13.1.6/bin/.orig/xlc: note: XL C/C++ Community Edition is a no-charge product and does not include official IBM support. You can provide feedback at the XL on POWER C/C++ Community Edition forum (http://ibm.biz/xlcpp-linux-ce). For information about a fully supported XL C/C++ compiler, visit XL C/C++ for Linux (http://ibm.biz/xlcpp-linux).\r\n\r\n$ xlf --version\r\nThe license for the ESP version of IBM XL Fortran for Linux, V16.1 (Beta) compiler product has expired.\r\n```\r\nConfiguration files:\r\n[compilers.config.txt](https://github.com/spack/spack/files/1745851/compilers.config.txt)\r\n[config.config.txt](https://github.com/spack/spack/files/1745852/config.config.txt)\r\n[modules.config.txt](https://github.com/spack/spack/files/1745853/modules.config.txt)\r\n[packages.config.txt](https://github.com/spack/spack/files/1745854/packages.config.txt)",
    "performed_via_github_app": null
}