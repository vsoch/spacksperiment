{
    "url": "https://api.github.com/repos/spack/spack/issues/6938",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6938/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6938/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6938/events",
    "html_url": "https://github.com/spack/spack/issues/6938",
    "id": 288420994,
    "node_id": "MDU6SXNzdWUyODg0MjA5OTQ=",
    "number": 6938,
    "title": "Wrong source url for pango when doing `spack fetch -D r` (with 2 walkarounds).",
    "user": {
        "login": "adamryczkowski",
        "id": 4469707,
        "node_id": "MDQ6VXNlcjQ0Njk3MDc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4469707?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamryczkowski",
        "html_url": "https://github.com/adamryczkowski",
        "followers_url": "https://api.github.com/users/adamryczkowski/followers",
        "following_url": "https://api.github.com/users/adamryczkowski/following{/other_user}",
        "gists_url": "https://api.github.com/users/adamryczkowski/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adamryczkowski/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adamryczkowski/subscriptions",
        "organizations_url": "https://api.github.com/users/adamryczkowski/orgs",
        "repos_url": "https://api.github.com/users/adamryczkowski/repos",
        "events_url": "https://api.github.com/users/adamryczkowski/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adamryczkowski/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446643530,
            "node_id": "MDU6TGFiZWw0NDY2NDM1MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/fetching",
            "name": "fetching",
            "color": "fbca04",
            "default": false,
            "description": null
        },
        {
            "id": 446756736,
            "node_id": "MDU6TGFiZWw0NDY3NTY3MzY=",
            "url": "https://api.github.com/repos/spack/spack/labels/mirrors",
            "name": "mirrors",
            "color": "ade2f2",
            "default": false,
            "description": null
        },
        {
            "id": 474580738,
            "node_id": "MDU6TGFiZWw0NzQ1ODA3Mzg=",
            "url": "https://api.github.com/repos/spack/spack/labels/versions",
            "name": "versions",
            "color": "c2e0c6",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-01-14T16:31:41Z",
    "updated_at": "2018-01-15T20:05:28Z",
    "closed_at": "2018-01-15T20:05:28Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When doing `spack mirror create -D r` Spack tried to download the pango 1.41 from http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.41.0.tar.xz instead of http://ftp.gnome.org/pub/GNOME/sources/pango/1.41/pango-1.41.0.tar.xz . \r\n\r\n\r\n```\r\n...\r\n\r\nAdding package gobject-introspection@1.49.2 to mirror\r\n==> gobject-introspection@1.49.2 : already added\r\n==> Adding package pango@1.41.0 to mirror\r\n==> Fetching http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.41.0.tar.xz\r\n\r\ncurl: (22) The requested URL returned error: 404 Not Found\r\n==> Warning: Error while fetching pango@1.41.0\r\n  Failed to fetch file from URL: http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.41.0.tar.xz\r\n==> Adding package zlib@1.2.11 to mirror\r\n==> zlib@1.2.11 : already added\r\n\r\n...\r\n```\r\n\r\nThe walkaround is to either `spack mirror create -D r ^pango@1.40` (which works correctly) or with `spack fetch pango`:\r\n\r\n```\r\n# spack fetch pango\r\nspack fetch pango\r\n==> Fetching http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.41.0.tar.xz\r\ncurl: (22) The requested URL returned error: 404 Not Found\r\n==> Fetching from http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.41.0.tar.xz failed.\r\nspack inst==> Fetching http://ftp.gnome.org/pub/gnome/sources/pango/1.41/pango-1.41.0.tar.xz\r\n######################################################################## 100,0%\r\n```\r\n\r\nAnd after that `spack fetch -D r` works and problem heals itself automatically.\r\n\r\n\r\nI tried to fix the seemingly trivial problem myself, but it looks like the effective pango URL is generated programmatically somewhere in the code, and at this stage I am helpless.",
    "performed_via_github_app": null
}