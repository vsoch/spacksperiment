{
    "url": "https://api.github.com/repos/spack/spack/issues/6569",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6569/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6569/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6569/events",
    "html_url": "https://github.com/spack/spack/issues/6569",
    "id": 279177129,
    "node_id": "MDU6SXNzdWUyNzkxNzcxMjk=",
    "number": 6569,
    "title": "Emacs build failed at different points with different versions of GCC",
    "user": {
        "login": "baip",
        "id": 6233512,
        "node_id": "MDQ6VXNlcjYyMzM1MTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6233512?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/baip",
        "html_url": "https://github.com/baip",
        "followers_url": "https://api.github.com/users/baip/followers",
        "following_url": "https://api.github.com/users/baip/following{/other_user}",
        "gists_url": "https://api.github.com/users/baip/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/baip/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/baip/subscriptions",
        "organizations_url": "https://api.github.com/users/baip/orgs",
        "repos_url": "https://api.github.com/users/baip/repos",
        "events_url": "https://api.github.com/users/baip/events{/privacy}",
        "received_events_url": "https://api.github.com/users/baip/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "scheibelp",
        "id": 1659704,
        "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scheibelp",
        "html_url": "https://github.com/scheibelp",
        "followers_url": "https://api.github.com/users/scheibelp/followers",
        "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
        "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
        "organizations_url": "https://api.github.com/users/scheibelp/orgs",
        "repos_url": "https://api.github.com/users/scheibelp/repos",
        "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
        "received_events_url": "https://api.github.com/users/scheibelp/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "scheibelp",
            "id": 1659704,
            "node_id": "MDQ6VXNlcjE2NTk3MDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1659704?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scheibelp",
            "html_url": "https://github.com/scheibelp",
            "followers_url": "https://api.github.com/users/scheibelp/followers",
            "following_url": "https://api.github.com/users/scheibelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/scheibelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scheibelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scheibelp/subscriptions",
            "organizations_url": "https://api.github.com/users/scheibelp/orgs",
            "repos_url": "https://api.github.com/users/scheibelp/repos",
            "events_url": "https://api.github.com/users/scheibelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scheibelp/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 13,
    "created_at": "2017-12-04T22:39:38Z",
    "updated_at": "2019-12-13T09:09:20Z",
    "closed_at": "2019-12-13T09:09:20Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Expected Result\r\nI'm trying to build emacs with Spack, but failed at different points with different versions of GCC.\r\n\r\n### Actual Result\r\n\r\nGCC 4.4.7/5.5.0\r\n\r\n    ==> Installing pango\r\n    ==> Fetching http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.40.3.tar.xz\r\n    ######################################################################## 100.0%\r\n    ==> Staging archive: /share/apps/spack/var/spack/stage/pango-1.40.3-w33eriw7mf4wgvmonze4o2f6o3saxu76/pango-1.40.3.tar.xz\r\n    ==> Created stage in /share/apps/spack/var/spack/stage/pango-1.40.3-w33eriw7mf4wgvmonze4o2f6o3saxu76\r\n    ==> No patches needed for pango\r\n    ==> Building pango [AutotoolsPackage]\r\n    ==> Executing phase: 'autoreconf'\r\n    ==> Executing phase: 'configure'\r\n    ==> Executing phase: 'build'\r\n    ==> Error: ProcessError: Command exited with status 2:\r\n        'make' '-j24'\r\n    \r\n    7 errors found in build log:\r\n         [ ... ]\r\n         441   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoFcDecoder' from namespace Pango\r\n         442   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoOTFeatureMap' from namespace Pango\r\n         443   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoFcDecoderClass' from namespace Pango\r\n         444   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoFcFont' from namespace Pango\r\n         445   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoFcFontMap' from namespace Pango\r\n         446   <unknown>:: Warning: PangoFT2: Skipping foreign identifier 'PangoFcFontMapClass' from namespace Pango\r\n      >> 447   /share/apps/spack/opt/spack/linux-centos6-x86_64/gcc-4.4.7/libpng-1.6.29-i4gwjnncgklzs554dnssmdhdmfj543zu/lib/libpng16.so: undefined reference to `inflateValidate@ZLIB_1.2.9'\r\n      >> 448   collect2: ld returned 1 exit status\r\n         449   linking of temporary binary failed: Command '[u'/bin/sh', u'../libtool', u'--mode=link', u'--tag=CC', u'--silent', '/share/apps/spack/lib/spack/env/gcc/gcc', u'-o', u'/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3/pango/tmp-introspectTi9iYP/PangoFT2-1.0', u'-export-dynamic', '-Wall', u'tmp-introspectTi9iYP/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3/pango/tmp-introspectTi9iYP/PangoFT2-1.0.o', '-L.', 'libpango-1.0.la', 'libpangoft2-1.0.la', u'-L/share/apps/conda/envs/conda2/lib', u'-lgio-2.0', u'-lgobject-2.0', u'-Wl,--export-dynamic', u'-lgmodule-2.0', u'-pthread', u'-lrt', u'-lglib-2.0', u'-lfreetype']' returned non-zero exit status 1\r\n      >> 450   make[4]: *** [PangoFT2-1.0.gir] Error 1\r\n         451   make[4]: Leaving directory `/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3/pango'\r\n      >> 452   make[3]: *** [all-recursive] Error 1\r\n         453   make[3]: Leaving directory `/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3/pango'\r\n      >> 454   make[2]: *** [all] Error 2\r\n         455   make[2]: Leaving directory `/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3/pango'\r\n      >> 456   make[1]: *** [all-recursive] Error 1\r\n         457   make[1]: Leaving directory `/tmp/soft/spack-stage/spack-stage-H8cRnK/pango-1.40.3'\r\n      >> 458   make: *** [all] Error 2\r\n    \r\n    See build log for details:\r\n      /share/apps/spack/var/spack/stage/pango-1.40.3-w33eriw7mf4wgvmonze4o2f6o3saxu76/pango-1.40.3/spack-build.out\r\n\r\nGCC 6.4.0\r\n\r\n    ==> Installing gdk-pixbuf\r\n    ==> Fetching http://ftp.gnome.org/pub/gnome/sources/gdk-pixbuf/2.31/gdk-pixbuf-2.31.2.tar.xz\r\n    ######################################################################## 100.0%\r\n    ==> Staging archive: /share/apps/spack/var/spack/stage/gdk-pixbuf-2.31.2-olieob7lmo7tknggsqrqkzw76q3xitc4/gdk-pixbuf-2.31.2.tar.xz\r\n    ==> Created stage in /share/apps/spack/var/spack/stage/gdk-pixbuf-2.31.2-olieob7lmo7tknggsqrqkzw76q3xitc4\r\n    ==> No patches needed for gdk-pixbuf\r\n    ==> Building gdk-pixbuf [AutotoolsPackage]\r\n    ==> Executing phase: 'autoreconf'\r\n    ==> Executing phase: 'configure'\r\n    ==> Executing phase: 'build'\r\n    ==> Error: ProcessError: Command exited with status 2:\r\n        'make' '-j24'\r\n    \r\n    24 errors found in build log:\r\n         [ ... ]\r\n         433     CCLD     libpixbufloader-pcx.la\r\n         434     CCLD     gdk-pixbuf-query-loaders\r\n         435     CCLD     libpixbufloader-xpm.la\r\n         436     CCLD     libpixbufloader-xbm.la\r\n         437     CCLD     libpixbufloader-icns.la\r\n         438     CCLD     libpixbufloader-qtif.la\r\n      >> 439   ./.libs/.libgdk_pixbuf-2.0.so:/ .undefinedlibs /libgdk_pixbuf-2.0.so: undefined reference reference to to` libintl_gettext`'libintl_gettext\r\n         440   '.\r\n         441   /../libs./libslibgdk_pixbuf/-libgdk_pixbuf2.0.so-:2.0.so :undefined  undefinedreference  referenceto  to` `libintl_bind_textdomain_codeset'libintl_bind_textdomain_codeset\r\n         442   '.\r\n         443   /../libs./libslibgdk_pixbuf/-libgdk_pixbuf2.0.so-:2.0.so :undefined  undefinedreference  referenceto  to` libintl_bindtextdomain`'libintl_bindtextdomain\r\n         444   '\r\n      >> 445   collect2: error: ld returned 1 exit status\r\n      >> 446   collect2: error: ld returned 1 exit status\r\n      >> 447   make[4]: *** [gdk-pixbuf-pixdata] Error 1\r\n         448   make[4]: *** Waiting for unfinished jobs....\r\n      >> 449   make[4]: *** [gdk-pixbuf-csource] Error 1\r\n      >> 450   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_gettext'\r\n      >> 451   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bind_textdomain_codeset'\r\n      >> 452   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bindtextdomain'\r\n      >> 453   collect2: error: ld returned 1 exit status\r\n      >> 454   make[4]: *** [test-gdk-pixbuf] Error 1\r\n      >> 455   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_gettext'\r\n      >> 456   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bind_textdomain_codeset'\r\n      >> 457   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bindtextdomain'\r\n      >> 458   collect2: error: ld returned 1 exit status\r\n      >> 459   make[4]: *** [gdk-pixbuf-query-loaders] Error 1\r\n      >> 460   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_gettext'\r\n      >> 461   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bind_textdomain_codeset'\r\n      >> 462   ./.libs/libgdk_pixbuf-2.0.so: undefined reference to `libintl_bindtextdomain'\r\n      >> 463   collect2: error: ld returned 1 exit status\r\n         464   linking of temporary binary failed: Command '[u'/bin/sh', u'../libtool', u'--mode=link', u'--tag=CC', u'--silent', '/share/apps/spack/lib/spack/env/gcc/gcc', u'-o', u'/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2/gdk-pixbuf/tmp-introspectpP8z9c/GdkPixbuf-2.0', u'-export-dynamic', '-O2', '-mtune=native', '-DG_DISABLE_SINGLE_INCLUDES', '-O2', '-mtune=native', '-Wall', u'tmp-introspectpP8z9c/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2/gdk-pixbuf/tmp-introspectpP8z9c/GdkPixbuf-2.0.o', '-L.', 'libgdk_pixbuf-2.0.la', u'-L/share/apps/conda/envs/conda2/lib', u'-lgio-2.0', u'-lgobject-2.0', u'-Wl,--export-dynamic', u'-lgmodule-2.0', u'-pthread', u'-lrt', u'-lglib-2.0']' returned non-zero exit status 1\r\n      >> 465   make[4]: *** [GdkPixbuf-2.0.gir] Error 1\r\n         466   make[4]: Leaving directory `/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2/gdk-pixbuf'\r\n      >> 467   make[3]: *** [all-recursive] Error 1\r\n         468   make[3]: Leaving directory `/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2/gdk-pixbuf'\r\n      >> 469   make[2]: *** [all] Error 2\r\n         470   make[2]: Leaving directory `/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2/gdk-pixbuf'\r\n      >> 471   make[1]: *** [all-recursive] Error 1\r\n         472   make[1]: Leaving directory `/tmp/soft/spack-stage/spack-stage-EYaUqi/gdk-pixbuf-2.31.2'\r\n      >> 473   make: *** [all] Error 2\r\n    \r\n    See build log for details:\r\n      /share/apps/spack/var/spack/stage/gdk-pixbuf-2.31.2-olieob7lmo7tknggsqrqkzw76q3xitc4/gdk-pixbuf-2.31.2/spack-build.out\r\n\r\nGCC 7.2.0\r\n\r\n    ==> Installing pango\r\n    ==> Fetching http://ftp.gnome.org/pub/GNOME/sources/pango/1.40/pango-1.40.3.tar.xz\r\n    ######################################################################## 100.0%\r\n    ==> Staging archive: /share/apps/spack/var/spack/stage/pango-1.40.3-neobrmpfp5tuwu2az5r3p4pm3l4opfyl/pango-1.40.3.tar.xz\r\n    ==> Created stage in /share/apps/spack/var/spack/stage/pango-1.40.3-neobrmpfp5tuwu2az5r3p4pm3l4opfyl\r\n    ==> No patches needed for pango\r\n    ==> Building pango [AutotoolsPackage]\r\n    ==> Executing phase: 'autoreconf'\r\n    ==> Executing phase: 'configure'\r\n    ==> Executing phase: 'build'\r\n    ==> Error: ProcessError: Command exited with status 2:\r\n        'make' '-j24'\r\n    \r\n    11 errors found in build log:\r\n         [ ... ]\r\n         662      dx = b->point.x - a->point.x;\r\n         663      ~~~^~~~~~~~~~~~~~~~~~~~~~~~~\r\n         664   cairotwisted.c:221:42: note: \u00e2current_point.point.x\u00e2 was declared here\r\n         665      cairo_path_data_t *data, last_move_to, current_point;\r\n         666                                             ^~~~~~~~~~~~~\r\n         667     CCLD     cairotwisted\r\n      >> 668   /share/apps/spack/opt/spack/linux-centos6-x86_64/gcc-7.2.0/harfbuzz-1.4.6-3a4icz3flas7hgiscrzhxufvazbqrzfc/lib/libharfbuzz.so: undefined reference to `FT_Get_Var_Blend_Coordinates'\r\n      >> 669   collect2: error: ld returned 1 exit status\r\n      >> 670   make[2]: *** [cairosimple] Error 1\r\n         671   make[2]: *** Waiting for unfinished jobs....\r\n      >> 672   /share/apps/spack/opt/spack/linux-centos6-x86_64/gcc-7.2.0/harfbuzz-1.4.6-3a4icz3flas7hgiscrzhxufvazbqrzfc/lib/libharfbuzz.so: undefined reference t\r\n    o `FT_Get_Var_Blend_Coordinates'\r\n      >> 673   collect2: error: ld returned 1 exit status\r\n      >> 674   make[2]: *** [cairoshape] Error 1\r\n      >> 675   /share/apps/spack/opt/spack/linux-centos6-x86_64/gcc-7.2.0/harfbuzz-1.4.6-3a4icz3flas7hgiscrzhxufvazbqrzfc/lib/libharfbuzz.so: undefined reference to `FT_Get_Var_Blend_Coordinates'\r\n      >> 676   collect2: error: ld returned 1 exit status\r\n      >> 677   make[2]: *** [cairotwisted] Error 1\r\n         678   make[2]: Leaving directory `/tmp/soft/spack-stage/spack-stage-hF9ENB/pango-1.40.3/examples'\r\n      >> 679   make[1]: *** [all-recursive] Error 1\r\n         680   make[1]: Leaving directory `/tmp/soft/spack-stage/spack-stage-hF9ENB/pango-1.40.3'\r\n      >> 681   make: *** [all] Error 2\r\n    \r\n    See build log for details:\r\n      /share/apps/spack/var/spack/stage/pango-1.40.3-neobrmpfp5tuwu2az5r3p4pm3l4opfyl/pango-1.40.3/spack-build.out\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install emacs %gcc@4.4.7+X\r\n```\r\n\r\n### Information on your system\r\nRocks cluster 6.2/CentOS 6.6\r\ngcc-4.4.7 is from the OS. All the other gcc versiosn were installed by Spack.",
    "performed_via_github_app": null
}