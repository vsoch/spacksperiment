{
    "url": "https://api.github.com/repos/spack/spack/issues/19880",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/19880/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/19880/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/19880/events",
    "html_url": "https://github.com/spack/spack/issues/19880",
    "id": 741733984,
    "node_id": "MDU6SXNzdWU3NDE3MzM5ODQ=",
    "number": 19880,
    "title": "suite-sparse build: cannot find gmp.h",
    "user": {
        "login": "eugeneswalker",
        "id": 38933153,
        "node_id": "MDQ6VXNlcjM4OTMzMTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/38933153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eugeneswalker",
        "html_url": "https://github.com/eugeneswalker",
        "followers_url": "https://api.github.com/users/eugeneswalker/followers",
        "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions",
        "organizations_url": "https://api.github.com/users/eugeneswalker/orgs",
        "repos_url": "https://api.github.com/users/eugeneswalker/repos",
        "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eugeneswalker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        },
        {
            "id": 1474769306,
            "node_id": "MDU6TGFiZWwxNDc0NzY5MzA2",
            "url": "https://api.github.com/repos/spack/spack/labels/e4s",
            "name": "e4s",
            "color": "5224ad",
            "default": false,
            "description": ""
        },
        {
            "id": 966031931,
            "node_id": "MDU6TGFiZWw5NjYwMzE5MzE=",
            "url": "https://api.github.com/repos/spack/spack/labels/ecp",
            "name": "ecp",
            "color": "79d7ea",
            "default": false,
            "description": ""
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-11-12T16:17:05Z",
    "updated_at": "2020-11-12T21:44:18Z",
    "closed_at": "2020-11-12T19:29:08Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Installing `suite-sparse@5.8.1` using:\r\n* `spack@develop`\r\n* commit d1493fb3d86653d8b11aeacd3e24af94f50ec03c from `Thu Nov 12 06:57:44 2020 -0800`\r\n* `Ubuntu 18.04` for `x86_64`\r\n\r\nConcrete spec: [suite-sparse.spec.yaml.txt](https://github.com/spack/spack/files/5531743/suite-sparse.spec.yaml.txt)\r\nFull build log: [suite-sparse-build-out.txt](https://github.com/spack/spack/files/5531809/suite-sparse-build-out.txt)\r\n\r\n```\r\n$> spack install -f ./suite-sparse.spec.yaml\r\n...\r\n==> Installing suite-sparse\r\n==> Using cached archive: /opt/spack/var/spack/cache/_source-cache/archive/06/06726e471fbaa55f792578f9b4ab282ea9d008cf39ddcc3b42b73400acddef40.tar.gz\r\n==> suite-sparse: Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16' 'library' 'AUTOCC=no' 'CUDA=no' 'CUDA_PATH=' 'CFOPENMP=' 'CFLAGS=-O3 -fPIC' 'FFLAGS=-fPIC' 'F77FLAGS=-fPIC' 'MY_METIS_LIB=-L/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/metis-5.1.0-edcrft4l4szpqji2kowdkzq2ofueh3dr/lib -lmetis' 'MY_METIS_INC=/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/metis-5.1.0-edcrft4l4szpqji2kowdkzq2ofueh3dr/include' 'BLAS=-L/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/openblas-0.3.12-te35tjxctgjpeeuk357xghoinvwf2k7u/lib -lopenblas' 'LAPACK=-L/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/openblas-0.3.12-te35tjxctgjpeeuk357xghoinvwf2k7u/lib -lopenblas' 'CFLAGS+=-fno-common -fexceptions' 'CMAKE_OPTIONS=-DCMAKE_INSTALL_PREFIX=/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/suite-sparse-5.8.1-w26hi7moz73y7dsz5rresxfyzsra2tcf -DCMAKE_LIBRARY_PATH=/opt/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-7.5.0/suite-sparse-5.8.1-w26hi7moz73y7dsz5rresxfyzsra2tcf/lib'\r\n\r\n35 errors found in build log:\r\n     5188    /opt/spack/lib/spack/env/gcc/gcc -O3 -fPIC -fno-common -fexceptions   -O3 -fexceptions -fPIC  -I../Include -I../../COLAMD/Include -I../../AMD/I\r\n             nclude -I../../SuiteSparse_config  -c ../Source/slip_back_sub.c\r\n     5189    /opt/spack/lib/spack/env/gcc/gcc -O3 -fPIC -fno-common -fexceptions   -O3 -fexceptions -fPIC  -I../Include -I../../COLAMD/Include -I../../AMD/I\r\n             nclude -I../../SuiteSparse_config  -c ../Source/slip_cumsum.c\r\n     5190    /opt/spack/lib/spack/env/gcc/gcc -O3 -fPIC -fno-common -fexceptions   -O3 -fexceptions -fPIC  -I../Include -I../../COLAMD/Include -I../../AMD/I\r\n             nclude -I../../SuiteSparse_config  -c ../Source/slip_get_pivot.c\r\n     5191    /opt/spack/lib/spack/env/gcc/gcc -O3 -fPIC -fno-common -fexceptions   -O3 -fexceptions -fPIC  -I../Include -I../../COLAMD/Include -I../../AMD/I\r\n             nclude -I../../SuiteSparse_config  -c ../Source/SLIP_malloc.c\r\n     5192    In file included from ../Source/slip_internal.h:106:0,\r\n     5193                     from ../Source/SLIP_free.c:13:\r\n  >> 5194    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5195     #include <gmp.h>\r\n     5196              ^~~~~~~\r\n     5197    compilation terminated.\r\n     5198    Makefile:46: recipe for target 'SLIP_free.o' failed\r\n  >> 5199    make[3]: *** [SLIP_free.o] Error 1\r\n     5200    make[3]: *** Waiting for unfinished jobs....\r\n     5201    In file included from ../Source/slip_internal.h:106:0,\r\n     5202                     from ../Source/slip_create_mpq_array.c:15:\r\n  >> 5203    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5204     #include <gmp.h>\r\n     5205              ^~~~~~~\r\n     5206    compilation terminated.\r\n     5207    Makefile:46: recipe for target 'slip_create_mpq_array.o' failed\r\n  >> 5208    make[3]: *** [slip_create_mpq_array.o] Error 1\r\n     5209    In file included from ../Source/slip_internal.h:106:0,\r\n     5210                     from ../Source/slip_matrix_mul.c:17:\r\n  >> 5211    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5212     #include <gmp.h>\r\n     5213              ^~~~~~~\r\n     5214    compilation terminated.\r\n     5215    In file included from ../Source/slip_internal.h:106:0,\r\n     5216                     from ../Source/slip_get_largest_pivot.c:23:\r\n  >> 5217    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5218     #include <gmp.h>\r\n     5219              ^~~~~~~\r\n     5220    compilation terminated.\r\n     5221    Makefile:46: recipe for target 'slip_matrix_mul.o' failed\r\n  >> 5222    make[3]: *** [slip_matrix_mul.o] Error 1\r\n     5223    In file included from ../Source/slip_internal.h:106:0,\r\n     5224                     from ../Source/slip_back_sub.c:22:\r\n  >> 5225    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5226     #include <gmp.h>\r\n     5227              ^~~~~~~\r\n     5228    Makefile:46: recipe for target 'slip_get_largest_pivot.o' failed\r\n  >> 5229    make[3]: *** [slip_get_largest_pivot.o] Error 1\r\n     5230    compilation terminated.\r\n     5231    Makefile:46: recipe for target 'slip_back_sub.o' failed\r\n  >> 5232    make[3]: *** [slip_back_sub.o] Error 1\r\n     5233    In file included from ../Source/slip_internal.h:106:0,\r\n     5234                     from ../Source/SLIP_realloc.c:11:\r\n  >> 5235    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5236     #include <gmp.h>\r\n     5237              ^~~~~~~\r\n     5238    compilation terminated.\r\n     5239    Makefile:46: recipe for target 'SLIP_realloc.o' failed\r\n  >> 5240    make[3]: *** [SLIP_realloc.o] Error 1\r\n     5241    In file included from ../Source/slip_internal.h:106:0,\r\n     5242                     from ../Source/SLIP_LU_solve.c:51:\r\n  >> 5243    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5244     #include <gmp.h>\r\n     5245              ^~~~~~~\r\n     5246    compilation terminated.\r\n     5247    In file included from ../Source/slip_internal.h:106:0,\r\n     5248                     from ../Source/SLIP_backslash.c:45:\r\n  >> 5249    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5250     #include <gmp.h>\r\n     5251              ^~~~~~~\r\n     5252    compilation terminated.\r\n     5253    In file included from ../Source/slip_internal.h:106:0,\r\n     5254                     from ../Source/slip_matrix_div.c:26:\r\n  >> 5255    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5256     #include <gmp.h>\r\n     5257              ^~~~~~~\r\n     5258    compilation terminated.\r\n     5259    Makefile:46: recipe for target 'SLIP_LU_solve.o' failed\r\n  >> 5260    make[3]: *** [SLIP_LU_solve.o] Error 1\r\n     5261    Makefile:46: recipe for target 'SLIP_backslash.o' failed\r\n  >> 5262    make[3]: *** [SLIP_backslash.o] Error 1\r\n     5263    Makefile:46: recipe for target 'slip_matrix_div.o' failed\r\n  >> 5264    make[3]: *** [slip_matrix_div.o] Error 1\r\n     5265    In file included from ../Source/slip_internal.h:106:0,\r\n     5266                     from ../Source/SLIP_LU_factorize.c:40:\r\n  >> 5267    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5268     #include <gmp.h>\r\n     5269              ^~~~~~~\r\n     5270    compilation terminated.\r\n     5271    In file included from ../Source/slip_internal.h:106:0,\r\n     5272                     from ../Source/slip_ref_triangular_solve.c:70:\r\n  >> 5273    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5274     #include <gmp.h>\r\n     5275              ^~~~~~~\r\n     5276    compilation terminated.\r\n     5277    Makefile:46: recipe for target 'SLIP_LU_factorize.o' failed\r\n  >> 5278    make[3]: *** [SLIP_LU_factorize.o] Error 1\r\n     5279    Makefile:46: recipe for target 'slip_ref_triangular_solve.o' failed\r\n  >> 5280    make[3]: *** [slip_ref_triangular_solve.o] Error 1\r\n     5281    In file included from ../Source/slip_internal.h:106:0,\r\n     5282                     from ../Source/slip_get_nonzero_pivot.c:20:\r\n  >> 5283    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5284     #include <gmp.h>\r\n     5285              ^~~~~~~\r\n     5286    compilation terminated.\r\n     5287    Makefile:46: recipe for target 'slip_get_nonzero_pivot.o' failed\r\n  >> 5288    make[3]: *** [slip_get_nonzero_pivot.o] Error 1\r\n     5289    In file included from ../Source/slip_internal.h:106:0,\r\n     5290                     from ../Source/slip_cumsum.c:15:\r\n  >> 5291    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5292     #include <gmp.h>\r\n     5293              ^~~~~~~\r\n     5294    compilation terminated.\r\n     5295    In file included from ../Source/slip_internal.h:106:0,\r\n     5296                     from ../Source/slip_get_pivot.c:31:\r\n  >> 5297    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5298     #include <gmp.h>\r\n     5299              ^~~~~~~\r\n     5300    compilation terminated.\r\n     5301    Makefile:46: recipe for target 'slip_cumsum.o' failed\r\n  >> 5302    make[3]: *** [slip_cumsum.o] Error 1\r\n     5303    In file included from ../Source/slip_internal.h:106:0,\r\n     5304                     from ../Source/slip_create_mpz_array.c:15:\r\n  >> 5305    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5306     #include <gmp.h>\r\n     5307              ^~~~~~~\r\n     5308    Makefile:46: recipe for target 'slip_get_pivot.o' failed\r\n     5309    compilation terminated.\r\n  >> 5310    make[3]: *** [slip_get_pivot.o] Error 1\r\n     5311    Makefile:46: recipe for target 'slip_create_mpz_array.o' failed\r\n  >> 5312    make[3]: *** [slip_create_mpz_array.o] Error 1\r\n     5313    In file included from ../Source/slip_internal.h:106:0,\r\n     5314                     from ../Source/SLIP_malloc.c:13:\r\n  >> 5315    ../Include/SLIP_LU.h:153:10: fatal error: gmp.h: No such file or directory\r\n     5316     #include <gmp.h>\r\n     5317              ^~~~~~~\r\n     5318    compilation terminated.\r\n     5319    Makefile:46: recipe for target 'SLIP_malloc.o' failed\r\n  >> 5320    make[3]: *** [SLIP_malloc.o] Error 1\r\n     5321    make[3]: Leaving directory '/tmp/root/spack-stage/spack-stage-suite-sparse-5.8.1-w26hi7moz73y7dsz5rresxfyzsra2tcf/spack-src/SLIP_LU/Lib'\r\n     5322    Makefile:53: recipe for target 'library' failed\r\n  >> 5323    make[2]: *** [library] Error 2\r\n     5324    make[2]: Leaving directory '/tmp/root/spack-stage/spack-stage-suite-sparse-5.8.1-w26hi7moz73y7dsz5rresxfyzsra2tcf/spack-src/SLIP_LU/Lib'\r\n     5325    Makefile:32: recipe for target 'library' failed\r\n  >> 5326    make[1]: *** [library] Error 2\r\n     5327    make[1]: Leaving directory '/tmp/root/spack-stage/spack-stage-suite-sparse-5.8.1-w26hi7moz73y7dsz5rresxfyzsra2tcf/spack-src/SLIP_LU'\r\n     5328    Makefile:128: recipe for target 'library' failed\r\n  >> 5329    make: *** [library] Error 2\r\n```\r\n\r\nAdding a `depends_on('gmp', type='build')` does not fix this.\r\n\r\n@siko1056 @jppelteret @adamjstewart @t-karatsu @mathsen \r\n",
    "performed_via_github_app": null
}