{
    "url": "https://api.github.com/repos/spack/spack/issues/15574",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/15574/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/15574/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/15574/events",
    "html_url": "https://github.com/spack/spack/issues/15574",
    "id": 584526710,
    "node_id": "MDU6SXNzdWU1ODQ1MjY3MTA=",
    "number": 15574,
    "title": "binary cache: configuration option to download/push all dependencies including build/test",
    "user": {
        "login": "mc-allen",
        "id": 5169737,
        "node_id": "MDQ6VXNlcjUxNjk3Mzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5169737?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mc-allen",
        "html_url": "https://github.com/mc-allen",
        "followers_url": "https://api.github.com/users/mc-allen/followers",
        "following_url": "https://api.github.com/users/mc-allen/following{/other_user}",
        "gists_url": "https://api.github.com/users/mc-allen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mc-allen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mc-allen/subscriptions",
        "organizations_url": "https://api.github.com/users/mc-allen/orgs",
        "repos_url": "https://api.github.com/users/mc-allen/repos",
        "events_url": "https://api.github.com/users/mc-allen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mc-allen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1634941846,
            "node_id": "MDU6TGFiZWwxNjM0OTQxODQ2",
            "url": "https://api.github.com/repos/spack/spack/labels/dev",
            "name": "dev",
            "color": "c9ed7b",
            "default": false,
            "description": ""
        },
        {
            "id": 537065486,
            "node_id": "MDU6TGFiZWw1MzcwNjU0ODY=",
            "url": "https://api.github.com/repos/spack/spack/labels/environments",
            "name": "environments",
            "color": "d4c5f9",
            "default": false,
            "description": null
        },
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-03-19T16:11:03Z",
    "updated_at": "2020-10-27T17:14:45Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "### Rationale\r\n\r\nBy default, spack does not push build/test dependencies into build mirrors, and doesn't download the same dependencies from the build mirror cache. For use cases that are primarily development oriented, i.e. using spack dev-build or build-env, this is counterproductive as the developers want to be able to bootstrap an environment with the exact toolchains and dependencies that are needed, without making assumptions about prior configuration. The ability to construct a completely isolated and self-contained development environment is key to reproducibility and scaling development across large numbers of developers.\r\n\r\n### Description\r\n\r\nA change is proposed to add config flag that would configure spack to install all dependencies into an environment, including build/test, and to push the same dependencies up to the cache.\r\n\r\nIn a spack.yaml, this might look like\r\n\r\n```yaml\r\n  config:\r\n    install_deptypes: [all]\r\n    install_missing_compilers: true\r\n```\r\n\r\nThe effect would be that when ```spack install``` is run, spack would attempt to fetch the specified dependencies in install_deptypes from the remote buildcache. Similarly, when ```spack buildcache create <spec>``` is invoked, all the specified dependencies would be installed to the remote buildcache. If \"all\" is specified, the full set of build/link/test/run dependencies would be packaged and pushed.",
    "performed_via_github_app": null
}