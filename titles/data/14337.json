{
    "url": "https://api.github.com/repos/spack/spack/issues/14337",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/14337/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/14337/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/14337/events",
    "html_url": "https://github.com/spack/spack/issues/14337",
    "id": 544274265,
    "node_id": "MDU6SXNzdWU1NDQyNzQyNjU=",
    "number": 14337,
    "title": "make variants in CudaPackage optional",
    "user": {
        "login": "glennpj",
        "id": 16138574,
        "node_id": "MDQ6VXNlcjE2MTM4NTc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/16138574?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glennpj",
        "html_url": "https://github.com/glennpj",
        "followers_url": "https://api.github.com/users/glennpj/followers",
        "following_url": "https://api.github.com/users/glennpj/following{/other_user}",
        "gists_url": "https://api.github.com/users/glennpj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/glennpj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glennpj/subscriptions",
        "organizations_url": "https://api.github.com/users/glennpj/orgs",
        "repos_url": "https://api.github.com/users/glennpj/repos",
        "events_url": "https://api.github.com/users/glennpj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/glennpj/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 618601843,
            "node_id": "MDU6TGFiZWw2MTg2MDE4NDM=",
            "url": "https://api.github.com/repos/spack/spack/labels/cuda",
            "name": "cuda",
            "color": "85b737",
            "default": false,
            "description": ""
        },
        {
            "id": 73908756,
            "node_id": "MDU6TGFiZWw3MzkwODc1Ng==",
            "url": "https://api.github.com/repos/spack/spack/labels/feature",
            "name": "feature",
            "color": "84b6eb",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-12-31T21:30:40Z",
    "updated_at": "2020-01-09T10:18:17Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I am not sure if there is a way to make variants optional or conditional but that would be nice to have for the CudaPackage class. That class provides conflicts management for cuda and compilers, which makes it very useful to include. However, it also includes two variants, `cuda` and `cuda_arch` that are not necessarily needed for all cuda enabled packages. For instance, a package that requires CUDA can use CudaPackage to take advantage of the compiler conflicts statements. However, if the package requires CUDA then the `cuda` variant does not make sense. That leads to needing another conflict statement in the package itself. See the `gpu-burn` package for an example.\r\n```\r\nclass GpuBurn(MakefilePackage, CudaPackage):\r\n...\r\n    # This package uses CudaPackage to pick up the cuda_arch variant. A side\r\n    # effect is that it also picks up the cuda variant, but cuda is required\r\n    # for gpu-burn so is not really a variant.\r\n    variant('cuda', 'True', description='Use CUDA; must be true')\r\n\r\n    conflicts('~cuda', msg='gpu-burn requires cuda')\r\n...\r\n```\r\nIn the above case, the compiler conflicts statements and the `cpu_arch` variant are needed but not the `cuda` variant. ",
    "performed_via_github_app": null
}