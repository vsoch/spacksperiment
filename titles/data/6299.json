{
    "url": "https://api.github.com/repos/spack/spack/issues/6299",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/6299/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/6299/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/6299/events",
    "html_url": "https://github.com/spack/spack/issues/6299",
    "id": 273668865,
    "node_id": "MDU6SXNzdWUyNzM2Njg4NjU=",
    "number": 6299,
    "title": "incorrect use of multi-line statement in directives.py",
    "user": {
        "login": "mwkrentel",
        "id": 3969036,
        "node_id": "MDQ6VXNlcjM5NjkwMzY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3969036?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mwkrentel",
        "html_url": "https://github.com/mwkrentel",
        "followers_url": "https://api.github.com/users/mwkrentel/followers",
        "following_url": "https://api.github.com/users/mwkrentel/following{/other_user}",
        "gists_url": "https://api.github.com/users/mwkrentel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mwkrentel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mwkrentel/subscriptions",
        "organizations_url": "https://api.github.com/users/mwkrentel/orgs",
        "repos_url": "https://api.github.com/users/mwkrentel/repos",
        "events_url": "https://api.github.com/users/mwkrentel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mwkrentel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-11-14T05:04:10Z",
    "updated_at": "2017-11-15T18:34:18Z",
    "closed_at": "2017-11-15T18:34:00Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "There are a couple places in lib/spack/spack/directives.py that\r\n(incorrectly) try to concatenate string literals across multiple\r\nlines, but the first line is not escaped or inside a scope.  As a\r\nresult, python treats the statement as a single line, and half of the\r\nerror message goes missing.\r\n\r\nFor example, in directives.py:\r\n\r\n523     # Check if the path is relative\r\n524     if os.path.isabs(destination):\r\n525         message = 'The destination keyword of a resource directive '\r\n526         'can\\'t be an absolute path.\\n'\r\n527         message += \"\\tdestination : '{dest}\\n'\".format(dest=destination)\r\n528         raise RuntimeError(message)\r\n\r\n536     if test_path not in normalized_destination:\r\n537         message = \"The destination folder of a resource must fall \"\r\n538         \"within the main package stage directory.\\n\"\r\n539         message += \"\\tdestination : '{dest}'\\n\".format(dest=destination)\r\n540         raise RuntimeError(message)\r\n\r\nA simple way to trigger the problem is to set destination=\"/tmp\" (an\r\nillegal value) in package.py for package lua and then try to install it.\r\n\r\n$ ./spack install lua  \r\n==> Error: The destination keyword of a resource directive  destination : '/tmp\r\n'\r\n\r\nA simple fix is to put the two string literals inside a scope (or else\r\nescape the first line).\r\n\r\n  message = ('The destination keyword of a resource directive '\r\n      'can\\'t be an absolute path.\\n')\r\n\r\nBtw, the close quote for '{dest}' is misplaced in line 527, it should\r\ncome before \\n, as in line 539.\r\n\r\n--Mark\r\n\r\n",
    "performed_via_github_app": null
}