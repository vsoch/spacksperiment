{
    "url": "https://api.github.com/repos/spack/spack/issues/9833",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/9833/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/9833/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/9833/events",
    "html_url": "https://github.com/spack/spack/issues/9833",
    "id": 380166187,
    "node_id": "MDU6SXNzdWUzODAxNjYxODc=",
    "number": 9833,
    "title": "version(git=..., ...) vs. git=... version(...)",
    "user": {
        "login": "dokempf",
        "id": 4989908,
        "node_id": "MDQ6VXNlcjQ5ODk5MDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4989908?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dokempf",
        "html_url": "https://github.com/dokempf",
        "followers_url": "https://api.github.com/users/dokempf/followers",
        "following_url": "https://api.github.com/users/dokempf/following{/other_user}",
        "gists_url": "https://api.github.com/users/dokempf/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/dokempf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dokempf/subscriptions",
        "organizations_url": "https://api.github.com/users/dokempf/orgs",
        "repos_url": "https://api.github.com/users/dokempf/repos",
        "events_url": "https://api.github.com/users/dokempf/events{/privacy}",
        "received_events_url": "https://api.github.com/users/dokempf/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446643530,
            "node_id": "MDU6TGFiZWw0NDY2NDM1MzA=",
            "url": "https://api.github.com/repos/spack/spack/labels/fetching",
            "name": "fetching",
            "color": "fbca04",
            "default": false,
            "description": null
        },
        {
            "id": 584430629,
            "node_id": "MDU6TGFiZWw1ODQ0MzA2Mjk=",
            "url": "https://api.github.com/repos/spack/spack/labels/git",
            "name": "git",
            "color": "bfdadc",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-11-13T10:51:32Z",
    "updated_at": "2021-01-16T20:12:20Z",
    "closed_at": "2021-01-16T20:12:20Z",
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "There is currently to possible ways to pass the repo URL to the GitFetchStrategy:\r\n\r\n```\r\nclass MyPackage(Package):\r\n    git=\"https://whatsoever.org\"\r\n    version(\"master\", branch=\"master\")\r\n```\r\nand\r\n```\r\nclass MyPackage(Package):\r\n    version(\"master\", git=\"https://whatsoever.org\", branch=\"master\")\r\n```\r\n\r\nI would have believed that the first is a sort of shortcut for the latter in the presence of many versions. Unfortunately, they behave differently. If you come through a code path that needs to select a fetch strategy for a version (e.g. in `spack.fetch_strategy.for_package_version`), the required attributes for the git strategy are not matched for the first version, but are for the latter. This leads to weird mistakes.\r\n\r\nDocumentation only explains the first one.\r\n\r\nI am not sure what is the correct way to fix this inconsistency. Possible ways:\r\n* Document the behaviour\r\n* Deprecate the first behaviour\r\n* Include the packages `git` field into the version in the first case to make it work identical (no idea whether its possible)",
    "performed_via_github_app": null
}