{
    "url": "https://api.github.com/repos/spack/spack/issues/17267",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/17267/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/17267/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/17267/events",
    "html_url": "https://github.com/spack/spack/pull/17267",
    "id": 646131376,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDQwNDc3ODE4",
    "number": 17267,
    "title": "Detect FE compilers automatically on Cray",
    "user": {
        "login": "alalazo",
        "id": 4199709,
        "node_id": "MDQ6VXNlcjQxOTk3MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4199709?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alalazo",
        "html_url": "https://github.com/alalazo",
        "followers_url": "https://api.github.com/users/alalazo/followers",
        "following_url": "https://api.github.com/users/alalazo/following{/other_user}",
        "gists_url": "https://api.github.com/users/alalazo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alalazo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alalazo/subscriptions",
        "organizations_url": "https://api.github.com/users/alalazo/orgs",
        "repos_url": "https://api.github.com/users/alalazo/repos",
        "events_url": "https://api.github.com/users/alalazo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alalazo/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1566617052,
            "node_id": "MDU6TGFiZWwxNTY2NjE3MDUy",
            "url": "https://api.github.com/repos/spack/spack/labels/bugfix",
            "name": "bugfix",
            "color": "c4aaef",
            "default": false,
            "description": ""
        },
        {
            "id": 446615268,
            "node_id": "MDU6TGFiZWw0NDY2MTUyNjg=",
            "url": "https://api.github.com/repos/spack/spack/labels/compilers",
            "name": "compilers",
            "color": "f9d0c4",
            "default": false,
            "description": null
        },
        {
            "id": 446614485,
            "node_id": "MDU6TGFiZWw0NDY2MTQ0ODU=",
            "url": "https://api.github.com/repos/spack/spack/labels/cray",
            "name": "cray",
            "color": "b60205",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 12,
    "created_at": "2020-06-26T09:22:23Z",
    "updated_at": "2020-06-29T14:53:34Z",
    "closed_at": "2020-06-29T14:53:09Z",
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "pull_request": {
        "url": "https://api.github.com/repos/spack/spack/pulls/17267",
        "html_url": "https://github.com/spack/spack/pull/17267",
        "diff_url": "https://github.com/spack/spack/pull/17267.diff",
        "patch_url": "https://github.com/spack/spack/pull/17267.patch"
    },
    "body": "fixes #12665\r\n\r\nThis PR ensures that more front-end compilers are detected automatically on Cray. It does so by iterating on compilers supported on Cray machines, loading their PE and module and checking the PATH. For instance, before this PR we had on Piz Daint:\r\n```console\r\n> time spack compiler find\r\n==> Added 19 new compilers to /users/culpo/.spack/compilers.yaml\r\n    pgi@20.1.0  pgi@19.5.0  intel@19.0.1.144  intel@18.0.1.163  gcc@8.3.0  gcc@8.1.0  gcc@7.3.0  cce@9.0.2-classic  cce@9.0.1-classic  cce@8.7.9\r\n    pgi@19.7.0  pgi@19.4.0  intel@18.0.2.199  intel@17.0.4.196  gcc@8.2.0  gcc@7.4.1  gcc@6.1.0  cce@9.0.2          cce@9.0.1\r\n==> Compilers are defined in the following files:\r\n    /users/culpo/.spack/compilers.yaml\r\n\r\nreal\t0m1,098s\r\nuser\t0m0,915s\r\nsys\t0m0,344s\r\n```\r\nwhile after\r\n```console\r\n> time spack  compiler find\r\n==> Added 32 new compilers to /users/culpo/.spack/compilers.yaml\r\n    pgi@20.1.0  pgi@19.5.0  intel@19.0.1.144  intel@18.0.1.163  gcc@8.3.0  gcc@8.1.0  gcc@7.3.0          cce@9.0.2\r\n    pgi@20.1    pgi@19.5    intel@19.0.1.144  intel@18.0.1      gcc@8.3.0  gcc@8.1.0  gcc@6.1.0          cce@9.0.1-classic\r\n    pgi@19.7.0  pgi@19.4.0  intel@18.0.2.199  intel@17.0.4.196  gcc@8.2.0  gcc@7.4.1  gcc@6.1.0          cce@9.0.1\r\n    pgi@19.7    pgi@19.4    intel@18.0.2      intel@17.0.4      gcc@8.2.0  gcc@7.3.0  cce@9.0.2-classic  cce@8.7.9\r\n==> Compilers are defined in the following files:\r\n    /users/culpo/.spack/compilers.yaml\r\n\r\nreal\t0m7,187s\r\nuser\t0m6,669s\r\nsys\t0m2,419s\r\n```\r\n\r\nA few caveats:\r\n- `spack compiler find` is much slower on Cray (~20x~ 7x in this example) However this command needs to be executed a single time, so it might be acceptable\r\n- ~`cce` compilers ARE NOT detected on the front-end to avoid spurious `sles15` entries with `cc` etc. recorded as a compiler~",
    "performed_via_github_app": null
}