{
    "url": "https://api.github.com/repos/spack/spack/issues/21278",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/21278/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/21278/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/21278/events",
    "html_url": "https://github.com/spack/spack/issues/21278",
    "id": 793779863,
    "node_id": "MDU6SXNzdWU3OTM3Nzk4NjM=",
    "number": 21278,
    "title": "Installation issue: mvapich2",
    "user": {
        "login": "SteVwonder",
        "id": 874707,
        "node_id": "MDQ6VXNlcjg3NDcwNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/874707?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/SteVwonder",
        "html_url": "https://github.com/SteVwonder",
        "followers_url": "https://api.github.com/users/SteVwonder/followers",
        "following_url": "https://api.github.com/users/SteVwonder/following{/other_user}",
        "gists_url": "https://api.github.com/users/SteVwonder/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/SteVwonder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SteVwonder/subscriptions",
        "organizations_url": "https://api.github.com/users/SteVwonder/orgs",
        "repos_url": "https://api.github.com/users/SteVwonder/repos",
        "events_url": "https://api.github.com/users/SteVwonder/events{/privacy}",
        "received_events_url": "https://api.github.com/users/SteVwonder/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-01-25T22:42:02Z",
    "updated_at": "2021-01-25T22:54:20Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Build error when installing `mvapich2` on a Cray XC system.  It looks like a `-l` was inserted into a link line with a missing/empty library name.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install mvapich2 arch=x86_64\r\n==> Installing mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj\r\n==> No binary for mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj found: installing from source\r\n==> Using cached archive: /users/herbein1/Repositories/spack/var/spack/cache/_source-cache/archive/f9/f9f467fec5fc981a89a7beee0374347b10c683023c76880f92a1a0ad4b961a8c.tar.gz\r\n==> mvapich2: Executing phase: 'autoreconf'\r\n==> mvapich2: Executing phase: 'configure'\r\n==> mvapich2: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n$ tail tail /tmp/herbein1/spack-stage/spack-stage-mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/spack-build-out.txt\r\n<snip>\r\ni_f08/wrappers_c/.libs/lib_libmpifort_la-f_sync_reg_c.o src/binding/fortran/use_mpi_f08/wrappers_c/.libs/lib_libmpifort_la-utils.o   -Wl,-rpath -Wl,/tmp/herbein1/spack-stage/spack-stage-mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/spack-src/lib/.libs -Wl,-rpath -Wl,/opt/gcc/10.1.0/snos/lib/../lib64 -Wl,-rpath -Wl,/users/herbein1/Repositories/spack/opt/spack/cray-cnl7-x86_64/gcc-10.1.0/mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/lib -Wl,-rpath -Wl,/opt/gcc/10.1.0/snos/lib/../lib64 lib/.libs/libmpi.so -L/tmp/herbein1/spack-stage/spack-stage-mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/spack-src/src/mpl -L/users/herbein1/Repositories/spack/opt/spack/cray-cnl7-x86_64/gcc-10.1.0/libpciaccess-0.16-srufslkipcwlfoe35rzhithon2akqngc/lib -L/users/herbein1/Repositories/spack/opt/spack/cray-cnl7-x86_64/gcc-10.1.0/libxml2-2.9.10-knt47z2usivgyevnu72jbntouuw4iuca/lib -lnuma -lpciaccess -lxml2 -lrt -ldl -L/opt/cray/pe/atp/3.8.1/lib -L/opt/cray/rca/2.2.20-7.0.2.1_2.64__g8e3fb5b.ari/lib64 -L/opt/cray/dmapp/default/lib64 -L/opt/cray/pe/mpt/7.7.15/gni/mpich-gnu/8.2/lib -l -L/opt/gcc/10.1.0/snos/lib/gcc/x86_64-suse-linux/10.1.0 -L/opt/gcc/10.1.0/snos/lib/gcc/x86_64-suse-linux/10.1.0/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/opt/gcc/10.1.0/snos/lib/gcc/x86_64-suse-linux/10.1.0/../../.. -lAtpSigHandler -lrca -lmpich_gnu_82 -lmpichf90_gnu_82 -lpthread /opt/gcc/10.1.0/snos/lib/../lib64/libgfortran.so -L/opt/gcc/10.1.0/snos/lib/../lib64 /opt/gcc/10.1.0/snos/lib/../lib64/libquadmath.so -lm -lc -lgcc_s  -O2   -Wl,-soname -Wl,libmpifort.so.12 -o lib/.libs/libmpifort.so.12.1.1\r\n/usr/bin/ld: cannot find -l-L/opt/gcc/10.1.0/snos/lib/gcc/x86_64-suse-linux/10.1.0\r\ncollect2: error: ld returned 1 exit status\r\nmake[2]: *** [Makefile:15645: lib/libmpifort.la] Error 1\r\nmake[2]: Leaving directory '/tmp/herbein1/spack-stage/spack-stage-mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/spack-src'\r\nmake[1]: *** [Makefile:44351: all-recursive] Error 1\r\nmake[1]: Leaving directory '/tmp/herbein1/spack-stage/spack-stage-mvapich2-2.3.5-6m7x6zqsgawsqdqfxy553vizpozrlskj/spack-src'\r\nmake: *** [Makefile:12009: all] Error 2\r\n```\r\n\r\n### Information on your system\r\n\r\n```\r\n[15:30:23] $ spack debug report\r\n* **Spack:** 0.16.0-951-3893ce8f71\r\n* **Python:** 3.6.10\r\n* **Platform:** cray-sles15-haswell\r\n* **Concretizer:** original\r\n```\r\n\r\nrelevant bit from the compilers.yaml:\r\n```\r\n- compiler:\r\n    spec: gcc@10.1.0\r\n    paths:\r\n      cc: cc\r\n      cxx: CC\r\n      f77: ftn\r\n      fc: ftn\r\n    flags: {}\r\n    operating_system: cnl7\r\n    target: any\r\n    modules:\r\n    - PrgEnv-gnu\r\n    - gcc/10.1.0\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n\r\n```\r\n[15:31:46] $ spack spec mvapich2\r\nInput spec\r\n--------------------------------\r\nmvapich2\r\n\r\nConcretized\r\n--------------------------------\r\nmvapich2@2.3.5%gcc@10.1.0~alloca~cuda~debug+regcache+wrapperrpath ch3_rank_bits=32 fabrics=mrail file_systems=auto process_managers=auto threads=multiple arch=cray-cnl7-x86_64\r\n    ^bison@3.7.4%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^diffutils@3.7%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n            ^libiconv@1.16%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^help2man@1.47.16%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n            ^gettext@0.21%gcc@10.1.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=cray-cnl7-x86_64\r\n                ^bzip2@1.0.8%gcc@10.1.0+shared arch=cray-cnl7-x86_64\r\n                ^libxml2@2.9.10%gcc@10.1.0~python arch=cray-cnl7-x86_64\r\n                    ^pkgconf@1.7.3%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n                    ^xz@5.2.5%gcc@10.1.0~pic arch=cray-cnl7-x86_64\r\n                    ^zlib@1.2.11%gcc@10.1.0+optimize+pic+shared arch=cray-cnl7-x86_64\r\n                ^ncurses@6.2%gcc@10.1.0~symlinks+termlib arch=cray-cnl7-x86_64\r\n                ^tar@1.32%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n            ^perl@5.32.0%gcc@10.1.0+cpanm+shared+threads arch=cray-cnl7-x86_64\r\n                ^berkeley-db@18.1.40%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n                ^gdbm@1.18.1%gcc@10.1.0 patches=7f569b9287e9e5a4236636eef32ff3428f0462ec17aea359e0ebee07649f1f16 arch=cray-cnl7-x86_64\r\n                    ^readline@8.0%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^m4@1.4.18%gcc@10.1.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=cray-cnl7-x86_64\r\n            ^libsigsegv@2.12%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n    ^findutils@4.6.0%gcc@10.1.0 patches=84b916c0bf8c51b7e7b28417692f0ad3e7030d1f3c248ba77c42ede5c1c5d11e,bd9e4e5cc280f9753ae14956c4e4aa17fe7a210f55dd6c84aa60b12d106d47a2 arch=cray-cnl7-x86_64\r\n        ^autoconf@2.69%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^automake@1.16.3%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^libtool@2.4.6%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^texinfo@6.5%gcc@10.1.0 patches=12f6edb0c6b270b8c8dba2ce17998c580db01182d871ee32b7b6e4129bd1d23a,1732115f651cff98989cb0215d8f64da5e0f7911ebf0c13b064920f088f2ffe1 arch=cray-cnl7-x86_64\r\n    ^libpciaccess@0.16%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n        ^util-macros@1.19.1%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n    ^rdma-core@32.0%gcc@10.1.0~ipo build_type=RelWithDebInfo arch=cray-cnl7-x86_64\r\n        ^cmake@3.19.2%gcc@10.1.0~doc+ncurses+openssl+ownlibs~qt arch=cray-cnl7-x86_64\r\n            ^openssl@1.1.1i%gcc@10.1.0+systemcerts arch=cray-cnl7-x86_64\r\n        ^libnl@3.3.0%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n            ^flex@2.6.4%gcc@10.1.0+lex patches=09c22e5c6fef327d3e48eb23f0d610dcd3a35ab9207f12e0f875701c677978d3 arch=cray-cnl7-x86_64\r\n        ^py-docutils@0.15.2%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n            ^py-setuptools@50.3.2%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n                ^python@3.8.7%gcc@10.1.0+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87,ebdca648c9c1d25f586d7e2a495b62e6d91973b55264a13d89eda1beff72ef56 arch=cray-cnl7-x86_64\r\n                    ^expat@2.2.10%gcc@10.1.0+libbsd arch=cray-cnl7-x86_64\r\n                        ^libbsd@0.10.0%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n                    ^libffi@3.3%gcc@10.1.0 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0 arch=cray-cnl7-x86_64\r\n                    ^sqlite@3.34.0%gcc@10.1.0+column_metadata+fts~functions~rtree arch=cray-cnl7-x86_64\r\n                    ^util-linux-uuid@2.36%gcc@10.1.0 arch=cray-cnl7-x86_64\r\n```\r\n\r\n### Additional information\r\n\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/5870086/spack-build-out.txt)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/5870083/spack-build-env.txt)\r\n\r\n<!-- Some packages have maintainers who have volunteered to debug build failures. Run `spack maintainers <name-of-the-package>` and @mention them here if they exist. -->\r\n\r\n@harisubramoni @nithintsk \r\n\r\n### General information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [x] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "performed_via_github_app": null
}