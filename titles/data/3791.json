{
    "url": "https://api.github.com/repos/spack/spack/issues/3791",
    "repository_url": "https://api.github.com/repos/spack/spack",
    "labels_url": "https://api.github.com/repos/spack/spack/issues/3791/labels{/name}",
    "comments_url": "https://api.github.com/repos/spack/spack/issues/3791/comments",
    "events_url": "https://api.github.com/repos/spack/spack/issues/3791/events",
    "html_url": "https://github.com/spack/spack/issues/3791",
    "id": 220919173,
    "node_id": "MDU6SXNzdWUyMjA5MTkxNzM=",
    "number": 3791,
    "title": "LLVM 4.0 fails to install on Linux: file RPATH_CHANGE could not write new RPATH",
    "user": {
        "login": "jppelteret",
        "id": 10460610,
        "node_id": "MDQ6VXNlcjEwNDYwNjEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/10460610?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jppelteret",
        "html_url": "https://github.com/jppelteret",
        "followers_url": "https://api.github.com/users/jppelteret/followers",
        "following_url": "https://api.github.com/users/jppelteret/following{/other_user}",
        "gists_url": "https://api.github.com/users/jppelteret/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jppelteret/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jppelteret/subscriptions",
        "organizations_url": "https://api.github.com/users/jppelteret/orgs",
        "repos_url": "https://api.github.com/users/jppelteret/repos",
        "events_url": "https://api.github.com/users/jppelteret/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jppelteret/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 446616547,
            "node_id": "MDU6TGFiZWw0NDY2MTY1NDc=",
            "url": "https://api.github.com/repos/spack/spack/labels/build-error",
            "name": "build-error",
            "color": "ff3300",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-04-11T11:21:51Z",
    "updated_at": "2017-04-21T16:29:57Z",
    "closed_at": "2017-04-21T16:29:57Z",
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Dear all,\r\n\r\nI've just updated `spack` to 808e9b46493495dff64d9964631faa929bbe4ebd in order to build `LLVM` on Linux (Mint 17.3 based off Ubuntu 14.04 I believe). \r\n\r\nThis is how I have my `packages.yaml` setup in order to install LLVM with shared libraries (and minus a couple of troublesome variants)\r\n```\r\n  llvm:\r\n    version: [4.0.0]\r\n    variants: +all_targets+clang+compiler-rt~debug+gold+internal_unwind+libcxx~link_dylib~lldb~polly+shared_libs\r\n```\r\n\r\nUnfortunately `spack install llvm` fails upon installation (not compilation) with the following message:\r\n```\r\n-- Installing: <path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib/libc++.so\r\n-- Set runtime path of \"<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib/libc++.so.1.0\" to \"<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib64:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/binutils-2.28-ehmg5z5tvnxbwttzy2hptemrstwyz3rs/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/gettext-0.19.8.1-wu5ducrwcvx3ms2uzrgnl3kvl3vds2hh/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/bzip2-1.0.6-syidqu3x4z355sx5af5ny7okyuhed53q/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/libxml2-2.9.4-qhrsnhlkmv2d26xnmz777fsliwqepbd5/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/xz-5.2.3-x5bmsfrloulpquxn23qh25uvmvnpbovy/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/zlib-1.2.11-q4s2ymg5cupvjutwgdkiklljvsyfhrpf/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/ncurses-6.0-u5zebzkwkfpr65ydde2h4yfrssz453tq/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/python-2.7.13-nbkirwtun5fdceyssv52gglfz3eeuep7/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/openssl-1.1.0e-g6qc24jay4atzhro4d4hxq62toinqhqq/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/readline-7.0-jjz5frcccfgzsfnrhdaut3ftqll5ubpg/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/sqlite-3.8.5-rf2ejcbkj7o5vjjcratrv4jjymrxoezs/lib\"\r\nCMake Error at projects/libcxx/lib/cmake_install.cmake:60 (file):\r\n  file RPATH_CHANGE could not write new RPATH:\r\n\r\n    <path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib64:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/binutils-2.28-ehmg5z5tvnxbwttzy2hptemrstwyz3rs/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/gettext-0.19.8.1-wu5ducrwcvx3ms2uzrgnl3kvl3vds2hh/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/bzip2-1.0.6-syidqu3x4z355sx5af5ny7okyuhed53q/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/libxml2-2.9.4-qhrsnhlkmv2d26xnmz777fsliwqepbd5/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/xz-5.2.3-x5bmsfrloulpquxn23qh25uvmvnpbovy/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/zlib-1.2.11-q4s2ymg5cupvjutwgdkiklljvsyfhrpf/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/ncurses-6.0-u5zebzkwkfpr65ydde2h4yfrssz453tq/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/python-2.7.13-nbkirwtun5fdceyssv52gglfz3eeuep7/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/openssl-1.1.0e-g6qc24jay4atzhro4d4hxq62toinqhqq/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/readline-7.0-jjz5frcccfgzsfnrhdaut3ftqll5ubpg/lib:<path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/sqlite-3.8.5-rf2ejcbkj7o5vjjcratrv4jjymrxoezs/lib\r\n\r\n  to the file:\r\n\r\n    <path>/spack/opt/spack/linux-ubuntu14-x86_64/gcc-4.9.4/llvm-4.0.0-xve6a26cyhefnycgunchb22fohcs73v4/lib/libc++.so\r\n\r\n  No valid ELF RPATH or RUNPATH entry exists in the file; File does not have\r\n  a valid ELF identification.\r\nCall Stack (most recent call first):\r\n  projects/libcxx/cmake_install.cmake:46 (include)\r\n  projects/cmake_install.cmake:40 (include)\r\n  cmake_install.cmake:61 (include)\r\n\r\n\r\nmake: *** [install] Error \r\n```\r\n[Build log attached.](https://github.com/LLNL/spack/files/912998/spack-build.out.txt)\r\n\r\nIn contrast, this configuration builds, installs and works fine on `MacOS`. I've also tried `LLVM 3.8.0 -- 3.9.1`, but these all fail during compilation.\r\n\r\nDoes anyone have any advice on what I could try to fix this? I've found a [couple](https://cmake.org/pipermail/cmake/2013-September/055755.html) of [posts](http://lists.llvm.org/pipermail/llvm-dev/2014-February/070232.html) with a similar error message, but I'm not sure that any of the information therein is relevant.",
    "performed_via_github_app": null
}